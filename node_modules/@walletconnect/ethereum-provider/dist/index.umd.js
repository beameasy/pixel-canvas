(function(si,Ot){typeof exports=="object"&&typeof module<"u"?Ot(exports):typeof define=="function"&&define.amd?define(["exports"],Ot):(si=typeof globalThis<"u"?globalThis:si||self,Ot(si["@walletconnect/ethereum-provider"]={}))})(this,function(si){"use strict";var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function tf(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}),r}var Zt={exports:{}},Ns=typeof Reflect=="object"?Reflect:null,Dd=Ns&&typeof Ns.apply=="function"?Ns.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},Qa;Ns&&typeof Ns.ownKeys=="function"?Qa=Ns.ownKeys:Object.getOwnPropertySymbols?Qa=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Qa=function(e){return Object.getOwnPropertyNames(e)};function ny(t){console&&console.warn&&console.warn(t)}var Rd=Number.isNaN||function(e){return e!==e};function mt(){mt.init.call(this)}Zt.exports=mt,Zt.exports.once=cy,mt.EventEmitter=mt,mt.prototype._events=void 0,mt.prototype._eventsCount=0,mt.prototype._maxListeners=void 0;var Nd=10;function ec(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(mt,"defaultMaxListeners",{enumerable:!0,get:function(){return Nd},set:function(t){if(typeof t!="number"||t<0||Rd(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Nd=t}}),mt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},mt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Rd(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Td(t){return t._maxListeners===void 0?mt.defaultMaxListeners:t._maxListeners}mt.prototype.getMaxListeners=function(){return Td(this)},mt.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=e==="error",s=this._events;if(s!==void 0)n=n&&s.error===void 0;else if(!n)return!1;if(n){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")Dd(c,this,r);else for(var l=c.length,u=qd(c,l),i=0;i<l;++i)Dd(u[i],this,r);return!0};function Fd(t,e,r,i){var n,s,o;if(ec(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),n=Td(t),n>0&&o.length>n&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,ny(a)}return t}mt.prototype.addListener=function(e,r){return Fd(this,e,r,!1)},mt.prototype.on=mt.prototype.addListener,mt.prototype.prependListener=function(e,r){return Fd(this,e,r,!0)};function sy(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ld(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=sy.bind(i);return n.listener=r,i.wrapFn=n,n}mt.prototype.once=function(e,r){return ec(r),this.on(e,Ld(this,e,r)),this},mt.prototype.prependOnceListener=function(e,r){return ec(r),this.prependListener(e,Ld(this,e,r)),this},mt.prototype.removeListener=function(e,r){var i,n,s,o,a;if(ec(r),n=this._events,n===void 0)return this;if(i=n[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===r||i[o].listener===r){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():oy(i,s),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this},mt.prototype.off=mt.prototype.removeListener,mt.prototype.removeAllListeners=function(e){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(n=0;n<s.length;++n)o=s[n],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(e,r[n]);return this};function Bd(t,e,r){var i=t._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?ay(n):qd(n,n.length)}mt.prototype.listeners=function(e){return Bd(this,e,!0)},mt.prototype.rawListeners=function(e){return Bd(this,e,!1)},mt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Ud.call(t,e)},mt.prototype.listenerCount=Ud;function Ud(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}mt.prototype.eventNames=function(){return this._eventsCount>0?Qa(this._events):[]};function qd(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function oy(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function ay(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function cy(t,e){return new Promise(function(r,i){function n(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",n),r([].slice.call(arguments))}jd(t,e,s,{once:!0}),e!=="error"&&ly(t,n,{once:!0})})}function ly(t,e,r){typeof t.on=="function"&&jd(t,"error",e,r)}function jd(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(s){i.once&&t.removeEventListener(e,n),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var kd=function(t,e,r){if(r||arguments.length===2)for(var i=0,n=e.length,s;i<n;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))},fy=function(){function t(e,r,i){this.name=e,this.version=r,this.os=i,this.type="browser"}return t}(),hy=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),uy=function(){function t(e,r,i,n){this.name=e,this.version=r,this.os=i,this.bot=n,this.type="bot-device"}return t}(),dy=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),py=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),gy=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,vy=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,zd=3,my=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",gy]],Hd=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function by(t){return t?Wd(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new py:typeof navigator<"u"?Wd(navigator.userAgent):_y()}function yy(t){return t!==""&&my.reduce(function(e,r){var i=r[0],n=r[1];if(e)return e;var s=n.exec(t);return!!s&&[i,s]},!1)}function Wd(t){var e=yy(t);if(!e)return null;var r=e[0],i=e[1];if(r==="searchbot")return new dy;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<zd&&(n=kd(kd([],n,!0),xy(zd-n.length),!0)):n=[];var s=n.join("."),o=wy(t),a=vy.exec(t);return a&&a[1]?new uy(r,s,o,a[1]):new fy(r,s,o)}function wy(t){for(var e=0,r=Hd.length;e<r;e++){var i=Hd[e],n=i[0],s=i[1],o=s.exec(t);if(o)return n}return null}function _y(){var t=typeof process<"u"&&process.version;return t?new hy(process.version.slice(1)):null}function xy(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Y={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var rf=function(t,e){return rf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},rf(t,e)};function Ey(t,e){rf(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var nf=function(){return nf=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},nf.apply(this,arguments)};function $y(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function Sy(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}function Ay(t,e){return function(r,i){e(r,i,t)}}function Iy(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function My(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(v){o(v)}}function c(u){try{l(i.throw(u))}catch(v){o(v)}}function l(u){u.done?s(u.value):n(u.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}function Py(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=l[0]&2?n.return:l[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,l[1])).done)return s;switch(n=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],n=0}finally{i=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Oy(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}function Cy(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function sf(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kd(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,s=[],o;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function Dy(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Kd(arguments[e]));return t}function Ry(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function Bo(t){return this instanceof Bo?(this.v=t,this):new Bo(t)}function Ny(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),n,s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(x){i[x]&&(n[x]=function(S){return new Promise(function(E,I){s.push([x,S,E,I])>1||a(x,S)})})}function a(x,S){try{c(i[x](S))}catch(E){v(s[0][3],E)}}function c(x){x.value instanceof Bo?Promise.resolve(x.value.v).then(l,u):v(s[0][2],x)}function l(x){a("next",x)}function u(x){a("throw",x)}function v(x,S){x(S),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Ty(t){var e,r;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=t[n]?function(o){return(r=!r)?{value:Bo(t[n](o)),done:n==="return"}:s?s(o):o}:s}}function Fy(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof sf=="function"?sf(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),n(a,c,o.done,o.value)})}}function n(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function Ly(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function By(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Uy(t){return t&&t.__esModule?t:{default:t}}function qy(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function jy(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var ky=Object.freeze({__proto__:null,__extends:Ey,get __assign(){return nf},__rest:$y,__decorate:Sy,__param:Ay,__metadata:Iy,__awaiter:My,__generator:Py,__createBinding:Oy,__exportStar:Cy,__values:sf,__read:Kd,__spread:Dy,__spreadArrays:Ry,__await:Bo,__asyncGenerator:Ny,__asyncDelegator:Ty,__asyncValues:Fy,__makeTemplateObject:Ly,__importStar:By,__importDefault:Uy,__classPrivateFieldGet:qy,__classPrivateFieldSet:jy}),tc=tf(ky),of={},Uo={},Vd;function zy(){if(Vd)return Uo;Vd=1,Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Uo.delay=t,Uo}var Gn={},af={},Jn={},Gd;function Hy(){return Gd||(Gd=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.ONE_THOUSAND=Jn.ONE_HUNDRED=void 0,Jn.ONE_HUNDRED=100,Jn.ONE_THOUSAND=1e3),Jn}var cf={},Jd;function Wy(){return Jd||(Jd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(cf)),cf}var Zd;function Yd(){return Zd||(Zd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tc;e.__exportStar(Hy(),t),e.__exportStar(Wy(),t)}(af)),af}var Xd;function Ky(){if(Xd)return Gn;Xd=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.fromMiliseconds=Gn.toMiliseconds=void 0;const t=Yd();function e(i){return i*t.ONE_THOUSAND}Gn.toMiliseconds=e;function r(i){return Math.floor(i/t.ONE_THOUSAND)}return Gn.fromMiliseconds=r,Gn}var Qd;function Vy(){return Qd||(Qd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tc;e.__exportStar(zy(),t),e.__exportStar(Ky(),t)}(of)),of}var Ts={},e0;function Gy(){if(e0)return Ts;e0=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const i=this.get(r);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const n=Date.now()-i.started;this.timestamps.set(r,{started:i.started,elapsed:n})}get(r){const i=this.timestamps.get(r);if(typeof i>"u")throw new Error(`No timestamp found for label: ${r}`);return i}elapsed(r){const i=this.get(r);return i.elapsed||Date.now()-i.started}}return Ts.Watch=t,Ts.default=t,Ts}var lf={},qo={},t0;function Jy(){if(t0)return qo;t0=1,Object.defineProperty(qo,"__esModule",{value:!0}),qo.IWatch=void 0;class t{}return qo.IWatch=t,qo}var r0;function Zy(){return r0||(r0=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),tc.__exportStar(Jy(),t)}(lf)),lf}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tc;e.__exportStar(Vy(),t),e.__exportStar(Gy(),t),e.__exportStar(Zy(),t),e.__exportStar(Yd(),t)})(Y);var bt={};Object.defineProperty(bt,"__esModule",{value:!0}),bt.getLocalStorage=bt.getLocalStorageOrThrow=bt.getCrypto=bt.getCryptoOrThrow=i0=bt.getLocation=bt.getLocationOrThrow=ff=bt.getNavigator=bt.getNavigatorOrThrow=jo=bt.getDocument=bt.getDocumentOrThrow=bt.getFromWindowOrThrow=bt.getFromWindow=void 0;function Zn(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}bt.getFromWindow=Zn;function Fs(t){const e=Zn(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}bt.getFromWindowOrThrow=Fs;function Yy(){return Fs("document")}bt.getDocumentOrThrow=Yy;function Xy(){return Zn("document")}var jo=bt.getDocument=Xy;function Qy(){return Fs("navigator")}bt.getNavigatorOrThrow=Qy;function ew(){return Zn("navigator")}var ff=bt.getNavigator=ew;function tw(){return Fs("location")}bt.getLocationOrThrow=tw;function rw(){return Zn("location")}var i0=bt.getLocation=rw;function iw(){return Fs("crypto")}bt.getCryptoOrThrow=iw;function nw(){return Zn("crypto")}bt.getCrypto=nw;function sw(){return Fs("localStorage")}bt.getLocalStorageOrThrow=sw;function ow(){return Zn("localStorage")}bt.getLocalStorage=ow;var hf={};Object.defineProperty(hf,"__esModule",{value:!0});var n0=hf.getWindowMetadata=void 0;const s0=bt;function aw(){let t,e;try{t=s0.getDocumentOrThrow(),e=s0.getLocationOrThrow()}catch{return null}function r(){const v=t.getElementsByTagName("link"),x=[];for(let S=0;S<v.length;S++){const E=v[S],I=E.getAttribute("rel");if(I&&I.toLowerCase().indexOf("icon")>-1){const C=E.getAttribute("href");if(C)if(C.toLowerCase().indexOf("https:")===-1&&C.toLowerCase().indexOf("http:")===-1&&C.indexOf("//")!==0){let O=e.protocol+"//"+e.host;if(C.indexOf("/")===0)O+=C;else{const R=e.pathname.split("/");R.pop();const N=R.join("/");O+=N+"/"+C}x.push(O)}else if(C.indexOf("//")===0){const O=e.protocol+C;x.push(O)}else x.push(C)}}return x}function i(...v){const x=t.getElementsByTagName("meta");for(let S=0;S<x.length;S++){const E=x[S],I=["itemprop","property","name"].map(C=>E.getAttribute(C)).filter(C=>C?v.includes(C):!1);if(I.length&&I){const C=E.getAttribute("content");if(C)return C}}return""}function n(){let v=i("name","og:site_name","og:title","twitter:title");return v||(v=t.title),v}function s(){return i("description","og:description","twitter:description","keywords")}const o=n(),a=s(),c=e.origin,l=r();return{description:a,url:c,icons:l,name:o}}n0=hf.getWindowMetadata=aw;const cw="logger/5.7.0";let o0=!1,a0=!1;const rc={debug:1,default:2,info:2,warning:3,error:4,off:5};let c0=rc.default,uf=null;function lw(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const l0=lw();var df;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(df||(df={}));var oi;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(oi||(oi={}));const f0="0123456789abcdef";class Ie{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const i=e.toLowerCase();rc[i]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(c0>rc[i])&&console.log.apply(console,r)}debug(...e){this._log(Ie.levels.DEBUG,e)}info(...e){this._log(Ie.levels.INFO,e)}warn(...e){this._log(Ie.levels.WARNING,e)}makeError(e,r,i){if(a0)return this.makeError("censored error",r,{});r||(r=Ie.errors.UNKNOWN_ERROR),i||(i={});const n=[];Object.keys(i).forEach(c=>{const l=i[c];try{if(l instanceof Uint8Array){let u="";for(let v=0;v<l.length;v++)u+=f0[l[v]>>4],u+=f0[l[v]&15];n.push(c+"=Uint8Array(0x"+u+")")}else n.push(c+"="+JSON.stringify(l))}catch{n.push(c+"="+JSON.stringify(i[c].toString()))}}),n.push(`code=${r}`),n.push(`version=${this.version}`);const s=e;let o="";switch(r){case oi.NUMERIC_FAULT:{o="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":o+="-"+c;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case oi.CALL_EXCEPTION:case oi.INSUFFICIENT_FUNDS:case oi.MISSING_NEW:case oi.NONCE_EXPIRED:case oi.REPLACEMENT_UNDERPRICED:case oi.TRANSACTION_REPLACED:case oi.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=r,Object.keys(i).forEach(function(c){a[c]=i[c]}),a}throwError(e,r,i){throw this.makeError(e,r,i)}throwArgumentError(e,r,i){return this.throwError(e,Ie.errors.INVALID_ARGUMENT,{argument:r,value:i})}assert(e,r,i,n){e||this.throwError(r,i,n)}assertArgument(e,r,i,n){e||this.throwArgumentError(r,i,n)}checkNormalize(e){l0&&this.throwError("platform missing String.prototype.normalize",Ie.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:l0})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,Ie.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,Ie.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,i){i?i=": "+i:i="",e<r&&this.throwError("missing argument"+i,Ie.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+i,Ie.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",Ie.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",Ie.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Ie.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return uf||(uf=new Ie(cw)),uf}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",Ie.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),o0){if(!e)return;this.globalLogger().throwError("error censorship permanent",Ie.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}a0=!!e,o0=!!r}static setLogLevel(e){const r=rc[e.toLowerCase()];if(r==null){Ie.globalLogger().warn("invalid log level - "+e);return}c0=r}static from(e){return new Ie(e)}}Ie.errors=oi,Ie.levels=df;const fw="bytes/5.7.0",Ct=new Ie(fw);function h0(t){return!!t.toHexString}function ko(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return ko(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function hw(t){return Cr(t)&&!(t.length%2)||Ls(t)}function u0(t){return typeof t=="number"&&t==t&&t%1===0}function Ls(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!u0(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!u0(r)||r<0||r>=256)return!1}return!0}function Ft(t,e){if(e||(e={}),typeof t=="number"){Ct.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),ko(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),h0(t)&&(t=t.toHexString()),Cr(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":Ct.throwArgumentError("hex data is odd-length","value",t));const i=[];for(let n=0;n<r.length;n+=2)i.push(parseInt(r.substring(n,n+2),16));return ko(new Uint8Array(i))}return Ls(t)?ko(new Uint8Array(t)):Ct.throwArgumentError("invalid arrayify value","value",t)}function uw(t,e){t=Ft(t),t.length>e&&Ct.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),ko(r)}function Cr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const pf="0123456789abcdef";function hr(t,e){if(e||(e={}),typeof t=="number"){Ct.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=pf[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),h0(t))return t.toHexString();if(Cr(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":Ct.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Ls(t)){let r="0x";for(let i=0;i<t.length;i++){let n=t[i];r+=pf[(n&240)>>4]+pf[n&15]}return r}return Ct.throwArgumentError("invalid hexlify value","value",t)}function dw(t){if(typeof t!="string")t=hr(t);else if(!Cr(t)||t.length%2)return null;return(t.length-2)/2}function d0(t,e,r){return typeof t!="string"?t=hr(t):(!Cr(t)||t.length%2)&&Ct.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function mn(t,e){for(typeof t!="string"?t=hr(t):Cr(t)||Ct.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&Ct.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function p0(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(hw(t)){let r=Ft(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=hr(r.slice(0,32)),e.s=hr(r.slice(32,64))):r.length===65?(e.r=hr(r.slice(0,32)),e.s=hr(r.slice(32,64)),e.v=r[64]):Ct.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:Ct.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=hr(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const n=uw(Ft(e._vs),32);e._vs=hr(n);const s=n[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Ct.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),n[0]&=127;const o=hr(n);e.s==null?e.s=o:e.s!==o&&Ct.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?Ct.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const n=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==n&&Ct.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!Cr(e.r)?Ct.throwArgumentError("signature missing or invalid r","signature",t):e.r=mn(e.r,32),e.s==null||!Cr(e.s)?Ct.throwArgumentError("signature missing or invalid s","signature",t):e.s=mn(e.s,32);const r=Ft(e.s);r[0]>=128&&Ct.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const i=hr(r);e._vs&&(Cr(e._vs)||Ct.throwArgumentError("signature invalid _vs","signature",t),e._vs=mn(e._vs,32)),e._vs==null?e._vs=i:e._vs!==i&&Ct.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}var g0={exports:{}},pw={},gw=Object.freeze({__proto__:null,default:pw}),gf=tf(gw);(function(t){(function(e,r){function i(g,f){if(!g)throw new Error(f||"Assertion failed")}function n(g,f){g.super_=f;var h=function(){};h.prototype=f.prototype,g.prototype=new h,g.prototype.constructor=g}function s(g,f,h){if(s.isBN(g))return g;this.negative=0,this.words=null,this.length=0,this.red=null,g!==null&&((f==="le"||f==="be")&&(h=f,f=10),this._init(g||0,f||10,h||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=gf.Buffer}catch{}s.isBN=function(f){return f instanceof s?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===s.wordSize&&Array.isArray(f.words)},s.max=function(f,h){return f.cmp(h)>0?f:h},s.min=function(f,h){return f.cmp(h)<0?f:h},s.prototype._init=function(f,h,p){if(typeof f=="number")return this._initNumber(f,h,p);if(typeof f=="object")return this._initArray(f,h,p);h==="hex"&&(h=16),i(h===(h|0)&&h>=2&&h<=36),f=f.toString().replace(/\s+/g,"");var _=0;f[0]==="-"&&(_++,this.negative=1),_<f.length&&(h===16?this._parseHex(f,_,p):(this._parseBase(f,h,_),p==="le"&&this._initArray(this.toArray(),h,p)))},s.prototype._initNumber=function(f,h,p){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(i(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),h,p)},s.prototype._initArray=function(f,h,p){if(i(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var $,y,d=0;if(p==="be")for(_=f.length-1,$=0;_>=0;_-=3)y=f[_]|f[_-1]<<8|f[_-2]<<16,this.words[$]|=y<<d&67108863,this.words[$+1]=y>>>26-d&67108863,d+=24,d>=26&&(d-=26,$++);else if(p==="le")for(_=0,$=0;_<f.length;_+=3)y=f[_]|f[_+1]<<8|f[_+2]<<16,this.words[$]|=y<<d&67108863,this.words[$+1]=y>>>26-d&67108863,d+=24,d>=26&&(d-=26,$++);return this._strip()};function a(g,f){var h=g.charCodeAt(f);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;i(!1,"Invalid character in "+g)}function c(g,f,h){var p=a(g,h);return h-1>=f&&(p|=a(g,h-1)<<4),p}s.prototype._parseHex=function(f,h,p){this.length=Math.ceil((f.length-h)/6),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var $=0,y=0,d;if(p==="be")for(_=f.length-1;_>=h;_-=2)d=c(f,h,_)<<$,this.words[y]|=d&67108863,$>=18?($-=18,y+=1,this.words[y]|=d>>>26):$+=8;else{var w=f.length-h;for(_=w%2===0?h+1:h;_<f.length;_+=2)d=c(f,h,_)<<$,this.words[y]|=d&67108863,$>=18?($-=18,y+=1,this.words[y]|=d>>>26):$+=8}this._strip()};function l(g,f,h,p){for(var _=0,$=0,y=Math.min(g.length,h),d=f;d<y;d++){var w=g.charCodeAt(d)-48;_*=p,w>=49?$=w-49+10:w>=17?$=w-17+10:$=w,i(w>=0&&$<p,"Invalid character"),_+=$}return _}s.prototype._parseBase=function(f,h,p){this.words=[0],this.length=1;for(var _=0,$=1;$<=67108863;$*=h)_++;_--,$=$/h|0;for(var y=f.length-p,d=y%_,w=Math.min(y,y-d)+p,b=0,P=p;P<w;P+=_)b=l(f,P,P+_,h),this.imuln($),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b);if(d!==0){var q=1;for(b=l(f,P,f.length,h),P=0;P<d;P++)q*=h;this.imuln(q),this.words[0]+b<67108864?this.words[0]+=b:this._iaddn(b)}this._strip()},s.prototype.copy=function(f){f.words=new Array(this.length);for(var h=0;h<this.length;h++)f.words[h]=this.words[h];f.length=this.length,f.negative=this.negative,f.red=this.red};function u(g,f){g.words=f.words,g.length=f.length,g.negative=f.negative,g.red=f.red}if(s.prototype._move=function(f){u(f,this)},s.prototype.clone=function(){var f=new s(null);return this.copy(f),f},s.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=v}catch{s.prototype.inspect=v}else s.prototype.inspect=v;function v(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(f,h){f=f||10,h=h|0||1;var p;if(f===16||f==="hex"){p="";for(var _=0,$=0,y=0;y<this.length;y++){var d=this.words[y],w=((d<<_|$)&16777215).toString(16);$=d>>>24-_&16777215,_+=2,_>=26&&(_-=26,y--),$!==0||y!==this.length-1?p=x[6-w.length]+w+p:p=w+p}for($!==0&&(p=$.toString(16)+p);p.length%h!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(f===(f|0)&&f>=2&&f<=36){var b=S[f],P=E[f];p="";var q=this.clone();for(q.negative=0;!q.isZero();){var A=q.modrn(P).toString(f);q=q.idivn(P),q.isZero()?p=A+p:p=x[b-A.length]+A+p}for(this.isZero()&&(p="0"+p);p.length%h!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(f,h){return this.toArrayLike(o,f,h)}),s.prototype.toArray=function(f,h){return this.toArrayLike(Array,f,h)};var I=function(f,h){return f.allocUnsafe?f.allocUnsafe(h):new f(h)};s.prototype.toArrayLike=function(f,h,p){this._strip();var _=this.byteLength(),$=p||Math.max(1,_);i(_<=$,"byte array longer than desired length"),i($>0,"Requested array length <= 0");var y=I(f,$),d=h==="le"?"LE":"BE";return this["_toArrayLike"+d](y,_),y},s.prototype._toArrayLikeLE=function(f,h){for(var p=0,_=0,$=0,y=0;$<this.length;$++){var d=this.words[$]<<y|_;f[p++]=d&255,p<f.length&&(f[p++]=d>>8&255),p<f.length&&(f[p++]=d>>16&255),y===6?(p<f.length&&(f[p++]=d>>24&255),_=0,y=0):(_=d>>>24,y+=2)}if(p<f.length)for(f[p++]=_;p<f.length;)f[p++]=0},s.prototype._toArrayLikeBE=function(f,h){for(var p=f.length-1,_=0,$=0,y=0;$<this.length;$++){var d=this.words[$]<<y|_;f[p--]=d&255,p>=0&&(f[p--]=d>>8&255),p>=0&&(f[p--]=d>>16&255),y===6?(p>=0&&(f[p--]=d>>24&255),_=0,y=0):(_=d>>>24,y+=2)}if(p>=0)for(f[p--]=_;p>=0;)f[p--]=0},Math.clz32?s.prototype._countBits=function(f){return 32-Math.clz32(f)}:s.prototype._countBits=function(f){var h=f,p=0;return h>=4096&&(p+=13,h>>>=13),h>=64&&(p+=7,h>>>=7),h>=8&&(p+=4,h>>>=4),h>=2&&(p+=2,h>>>=2),p+h},s.prototype._zeroBits=function(f){if(f===0)return 26;var h=f,p=0;return h&8191||(p+=13,h>>>=13),h&127||(p+=7,h>>>=7),h&15||(p+=4,h>>>=4),h&3||(p+=2,h>>>=2),h&1||p++,p},s.prototype.bitLength=function(){var f=this.words[this.length-1],h=this._countBits(f);return(this.length-1)*26+h};function C(g){for(var f=new Array(g.bitLength()),h=0;h<f.length;h++){var p=h/26|0,_=h%26;f[h]=g.words[p]>>>_&1}return f}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,h=0;h<this.length;h++){var p=this._zeroBits(this.words[h]);if(f+=p,p!==26)break}return f},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},s.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var h=0;h<f.length;h++)this.words[h]=this.words[h]|f.words[h];return this._strip()},s.prototype.ior=function(f){return i((this.negative|f.negative)===0),this.iuor(f)},s.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},s.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},s.prototype.iuand=function(f){var h;this.length>f.length?h=f:h=this;for(var p=0;p<h.length;p++)this.words[p]=this.words[p]&f.words[p];return this.length=h.length,this._strip()},s.prototype.iand=function(f){return i((this.negative|f.negative)===0),this.iuand(f)},s.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},s.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},s.prototype.iuxor=function(f){var h,p;this.length>f.length?(h=this,p=f):(h=f,p=this);for(var _=0;_<p.length;_++)this.words[_]=h.words[_]^p.words[_];if(this!==h)for(;_<h.length;_++)this.words[_]=h.words[_];return this.length=h.length,this._strip()},s.prototype.ixor=function(f){return i((this.negative|f.negative)===0),this.iuxor(f)},s.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},s.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},s.prototype.inotn=function(f){i(typeof f=="number"&&f>=0);var h=Math.ceil(f/26)|0,p=f%26;this._expand(h),p>0&&h--;for(var _=0;_<h;_++)this.words[_]=~this.words[_]&67108863;return p>0&&(this.words[_]=~this.words[_]&67108863>>26-p),this._strip()},s.prototype.notn=function(f){return this.clone().inotn(f)},s.prototype.setn=function(f,h){i(typeof f=="number"&&f>=0);var p=f/26|0,_=f%26;return this._expand(p+1),h?this.words[p]=this.words[p]|1<<_:this.words[p]=this.words[p]&~(1<<_),this._strip()},s.prototype.iadd=function(f){var h;if(this.negative!==0&&f.negative===0)return this.negative=0,h=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,h=this.isub(f),f.negative=1,h._normSign();var p,_;this.length>f.length?(p=this,_=f):(p=f,_=this);for(var $=0,y=0;y<_.length;y++)h=(p.words[y]|0)+(_.words[y]|0)+$,this.words[y]=h&67108863,$=h>>>26;for(;$!==0&&y<p.length;y++)h=(p.words[y]|0)+$,this.words[y]=h&67108863,$=h>>>26;if(this.length=p.length,$!==0)this.words[this.length]=$,this.length++;else if(p!==this)for(;y<p.length;y++)this.words[y]=p.words[y];return this},s.prototype.add=function(f){var h;return f.negative!==0&&this.negative===0?(f.negative=0,h=this.sub(f),f.negative^=1,h):f.negative===0&&this.negative!==0?(this.negative=0,h=f.sub(this),this.negative=1,h):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},s.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var h=this.iadd(f);return f.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var p=this.cmp(f);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _,$;p>0?(_=this,$=f):(_=f,$=this);for(var y=0,d=0;d<$.length;d++)h=(_.words[d]|0)-($.words[d]|0)+y,y=h>>26,this.words[d]=h&67108863;for(;y!==0&&d<_.length;d++)h=(_.words[d]|0)+y,y=h>>26,this.words[d]=h&67108863;if(y===0&&d<_.length&&_!==this)for(;d<_.length;d++)this.words[d]=_.words[d];return this.length=Math.max(this.length,d),_!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(f){return this.clone().isub(f)};function O(g,f,h){h.negative=f.negative^g.negative;var p=g.length+f.length|0;h.length=p,p=p-1|0;var _=g.words[0]|0,$=f.words[0]|0,y=_*$,d=y&67108863,w=y/67108864|0;h.words[0]=d;for(var b=1;b<p;b++){for(var P=w>>>26,q=w&67108863,A=Math.min(b,f.length-1),F=Math.max(0,b-g.length+1);F<=A;F++){var j=b-F|0;_=g.words[j]|0,$=f.words[F]|0,y=_*$+q,P+=y/67108864|0,q=y&67108863}h.words[b]=q|0,w=P|0}return w!==0?h.words[b]=w|0:h.length--,h._strip()}var R=function(f,h,p){var _=f.words,$=h.words,y=p.words,d=0,w,b,P,q=_[0]|0,A=q&8191,F=q>>>13,j=_[1]|0,k=j&8191,H=j>>>13,Z=_[2]|0,X=Z&8191,J=Z>>>13,oe=_[3]|0,te=oe&8191,re=oe>>>13,Ve=_[4]|0,Ge=Ve&8191,ue=Ve>>>13,Le=_[5]|0,Be=Le&8191,le=Le>>>13,Ue=_[6]|0,qe=Ue&8191,he=Ue>>>13,je=_[7]|0,ke=je&8191,ce=je>>>13,Te=_[8]|0,ze=Te&8191,se=Te>>>13,et=_[9]|0,tt=et&8191,ve=et>>>13,rt=$[0]|0,He=rt&8191,pe=rt>>>13,it=$[1]|0,at=it&8191,ae=it>>>13,nt=$[2]|0,ct=nt&8191,me=nt>>>13,Je=$[3]|0,Fe=Je&8191,de=Je>>>13,Ze=$[4]|0,Ye=Ze&8191,fe=Ze>>>13,lt=$[5]|0,ft=lt&8191,be=lt>>>13,ht=$[6]|0,ut=ht&8191,ge=ht>>>13,Xe=$[7]|0,De=Xe&8191,ye=Xe>>>13,dt=$[8]|0,pt=dt&8191,we=dt>>>13,gt=$[9]|0,Ae=gt&8191,st=gt>>>13;p.negative=f.negative^h.negative,p.length=19,w=Math.imul(A,He),b=Math.imul(A,pe),b=b+Math.imul(F,He)|0,P=Math.imul(F,pe);var Ir=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,w=Math.imul(k,He),b=Math.imul(k,pe),b=b+Math.imul(H,He)|0,P=Math.imul(H,pe),w=w+Math.imul(A,at)|0,b=b+Math.imul(A,ae)|0,b=b+Math.imul(F,at)|0,P=P+Math.imul(F,ae)|0;var Mr=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,w=Math.imul(X,He),b=Math.imul(X,pe),b=b+Math.imul(J,He)|0,P=Math.imul(J,pe),w=w+Math.imul(k,at)|0,b=b+Math.imul(k,ae)|0,b=b+Math.imul(H,at)|0,P=P+Math.imul(H,ae)|0,w=w+Math.imul(A,ct)|0,b=b+Math.imul(A,me)|0,b=b+Math.imul(F,ct)|0,P=P+Math.imul(F,me)|0;var Pr=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,w=Math.imul(te,He),b=Math.imul(te,pe),b=b+Math.imul(re,He)|0,P=Math.imul(re,pe),w=w+Math.imul(X,at)|0,b=b+Math.imul(X,ae)|0,b=b+Math.imul(J,at)|0,P=P+Math.imul(J,ae)|0,w=w+Math.imul(k,ct)|0,b=b+Math.imul(k,me)|0,b=b+Math.imul(H,ct)|0,P=P+Math.imul(H,me)|0,w=w+Math.imul(A,Fe)|0,b=b+Math.imul(A,de)|0,b=b+Math.imul(F,Fe)|0,P=P+Math.imul(F,de)|0;var Or=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(Or>>>26)|0,Or&=67108863,w=Math.imul(Ge,He),b=Math.imul(Ge,pe),b=b+Math.imul(ue,He)|0,P=Math.imul(ue,pe),w=w+Math.imul(te,at)|0,b=b+Math.imul(te,ae)|0,b=b+Math.imul(re,at)|0,P=P+Math.imul(re,ae)|0,w=w+Math.imul(X,ct)|0,b=b+Math.imul(X,me)|0,b=b+Math.imul(J,ct)|0,P=P+Math.imul(J,me)|0,w=w+Math.imul(k,Fe)|0,b=b+Math.imul(k,de)|0,b=b+Math.imul(H,Fe)|0,P=P+Math.imul(H,de)|0,w=w+Math.imul(A,Ye)|0,b=b+Math.imul(A,fe)|0,b=b+Math.imul(F,Ye)|0,P=P+Math.imul(F,fe)|0;var Tt=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,w=Math.imul(Be,He),b=Math.imul(Be,pe),b=b+Math.imul(le,He)|0,P=Math.imul(le,pe),w=w+Math.imul(Ge,at)|0,b=b+Math.imul(Ge,ae)|0,b=b+Math.imul(ue,at)|0,P=P+Math.imul(ue,ae)|0,w=w+Math.imul(te,ct)|0,b=b+Math.imul(te,me)|0,b=b+Math.imul(re,ct)|0,P=P+Math.imul(re,me)|0,w=w+Math.imul(X,Fe)|0,b=b+Math.imul(X,de)|0,b=b+Math.imul(J,Fe)|0,P=P+Math.imul(J,de)|0,w=w+Math.imul(k,Ye)|0,b=b+Math.imul(k,fe)|0,b=b+Math.imul(H,Ye)|0,P=P+Math.imul(H,fe)|0,w=w+Math.imul(A,ft)|0,b=b+Math.imul(A,be)|0,b=b+Math.imul(F,ft)|0,P=P+Math.imul(F,be)|0;var on=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(on>>>26)|0,on&=67108863,w=Math.imul(qe,He),b=Math.imul(qe,pe),b=b+Math.imul(he,He)|0,P=Math.imul(he,pe),w=w+Math.imul(Be,at)|0,b=b+Math.imul(Be,ae)|0,b=b+Math.imul(le,at)|0,P=P+Math.imul(le,ae)|0,w=w+Math.imul(Ge,ct)|0,b=b+Math.imul(Ge,me)|0,b=b+Math.imul(ue,ct)|0,P=P+Math.imul(ue,me)|0,w=w+Math.imul(te,Fe)|0,b=b+Math.imul(te,de)|0,b=b+Math.imul(re,Fe)|0,P=P+Math.imul(re,de)|0,w=w+Math.imul(X,Ye)|0,b=b+Math.imul(X,fe)|0,b=b+Math.imul(J,Ye)|0,P=P+Math.imul(J,fe)|0,w=w+Math.imul(k,ft)|0,b=b+Math.imul(k,be)|0,b=b+Math.imul(H,ft)|0,P=P+Math.imul(H,be)|0,w=w+Math.imul(A,ut)|0,b=b+Math.imul(A,ge)|0,b=b+Math.imul(F,ut)|0,P=P+Math.imul(F,ge)|0;var an=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(an>>>26)|0,an&=67108863,w=Math.imul(ke,He),b=Math.imul(ke,pe),b=b+Math.imul(ce,He)|0,P=Math.imul(ce,pe),w=w+Math.imul(qe,at)|0,b=b+Math.imul(qe,ae)|0,b=b+Math.imul(he,at)|0,P=P+Math.imul(he,ae)|0,w=w+Math.imul(Be,ct)|0,b=b+Math.imul(Be,me)|0,b=b+Math.imul(le,ct)|0,P=P+Math.imul(le,me)|0,w=w+Math.imul(Ge,Fe)|0,b=b+Math.imul(Ge,de)|0,b=b+Math.imul(ue,Fe)|0,P=P+Math.imul(ue,de)|0,w=w+Math.imul(te,Ye)|0,b=b+Math.imul(te,fe)|0,b=b+Math.imul(re,Ye)|0,P=P+Math.imul(re,fe)|0,w=w+Math.imul(X,ft)|0,b=b+Math.imul(X,be)|0,b=b+Math.imul(J,ft)|0,P=P+Math.imul(J,be)|0,w=w+Math.imul(k,ut)|0,b=b+Math.imul(k,ge)|0,b=b+Math.imul(H,ut)|0,P=P+Math.imul(H,ge)|0,w=w+Math.imul(A,De)|0,b=b+Math.imul(A,ye)|0,b=b+Math.imul(F,De)|0,P=P+Math.imul(F,ye)|0;var cn=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(cn>>>26)|0,cn&=67108863,w=Math.imul(ze,He),b=Math.imul(ze,pe),b=b+Math.imul(se,He)|0,P=Math.imul(se,pe),w=w+Math.imul(ke,at)|0,b=b+Math.imul(ke,ae)|0,b=b+Math.imul(ce,at)|0,P=P+Math.imul(ce,ae)|0,w=w+Math.imul(qe,ct)|0,b=b+Math.imul(qe,me)|0,b=b+Math.imul(he,ct)|0,P=P+Math.imul(he,me)|0,w=w+Math.imul(Be,Fe)|0,b=b+Math.imul(Be,de)|0,b=b+Math.imul(le,Fe)|0,P=P+Math.imul(le,de)|0,w=w+Math.imul(Ge,Ye)|0,b=b+Math.imul(Ge,fe)|0,b=b+Math.imul(ue,Ye)|0,P=P+Math.imul(ue,fe)|0,w=w+Math.imul(te,ft)|0,b=b+Math.imul(te,be)|0,b=b+Math.imul(re,ft)|0,P=P+Math.imul(re,be)|0,w=w+Math.imul(X,ut)|0,b=b+Math.imul(X,ge)|0,b=b+Math.imul(J,ut)|0,P=P+Math.imul(J,ge)|0,w=w+Math.imul(k,De)|0,b=b+Math.imul(k,ye)|0,b=b+Math.imul(H,De)|0,P=P+Math.imul(H,ye)|0,w=w+Math.imul(A,pt)|0,b=b+Math.imul(A,we)|0,b=b+Math.imul(F,pt)|0,P=P+Math.imul(F,we)|0;var ln=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(ln>>>26)|0,ln&=67108863,w=Math.imul(tt,He),b=Math.imul(tt,pe),b=b+Math.imul(ve,He)|0,P=Math.imul(ve,pe),w=w+Math.imul(ze,at)|0,b=b+Math.imul(ze,ae)|0,b=b+Math.imul(se,at)|0,P=P+Math.imul(se,ae)|0,w=w+Math.imul(ke,ct)|0,b=b+Math.imul(ke,me)|0,b=b+Math.imul(ce,ct)|0,P=P+Math.imul(ce,me)|0,w=w+Math.imul(qe,Fe)|0,b=b+Math.imul(qe,de)|0,b=b+Math.imul(he,Fe)|0,P=P+Math.imul(he,de)|0,w=w+Math.imul(Be,Ye)|0,b=b+Math.imul(Be,fe)|0,b=b+Math.imul(le,Ye)|0,P=P+Math.imul(le,fe)|0,w=w+Math.imul(Ge,ft)|0,b=b+Math.imul(Ge,be)|0,b=b+Math.imul(ue,ft)|0,P=P+Math.imul(ue,be)|0,w=w+Math.imul(te,ut)|0,b=b+Math.imul(te,ge)|0,b=b+Math.imul(re,ut)|0,P=P+Math.imul(re,ge)|0,w=w+Math.imul(X,De)|0,b=b+Math.imul(X,ye)|0,b=b+Math.imul(J,De)|0,P=P+Math.imul(J,ye)|0,w=w+Math.imul(k,pt)|0,b=b+Math.imul(k,we)|0,b=b+Math.imul(H,pt)|0,P=P+Math.imul(H,we)|0,w=w+Math.imul(A,Ae)|0,b=b+Math.imul(A,st)|0,b=b+Math.imul(F,Ae)|0,P=P+Math.imul(F,st)|0;var fn=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(fn>>>26)|0,fn&=67108863,w=Math.imul(tt,at),b=Math.imul(tt,ae),b=b+Math.imul(ve,at)|0,P=Math.imul(ve,ae),w=w+Math.imul(ze,ct)|0,b=b+Math.imul(ze,me)|0,b=b+Math.imul(se,ct)|0,P=P+Math.imul(se,me)|0,w=w+Math.imul(ke,Fe)|0,b=b+Math.imul(ke,de)|0,b=b+Math.imul(ce,Fe)|0,P=P+Math.imul(ce,de)|0,w=w+Math.imul(qe,Ye)|0,b=b+Math.imul(qe,fe)|0,b=b+Math.imul(he,Ye)|0,P=P+Math.imul(he,fe)|0,w=w+Math.imul(Be,ft)|0,b=b+Math.imul(Be,be)|0,b=b+Math.imul(le,ft)|0,P=P+Math.imul(le,be)|0,w=w+Math.imul(Ge,ut)|0,b=b+Math.imul(Ge,ge)|0,b=b+Math.imul(ue,ut)|0,P=P+Math.imul(ue,ge)|0,w=w+Math.imul(te,De)|0,b=b+Math.imul(te,ye)|0,b=b+Math.imul(re,De)|0,P=P+Math.imul(re,ye)|0,w=w+Math.imul(X,pt)|0,b=b+Math.imul(X,we)|0,b=b+Math.imul(J,pt)|0,P=P+Math.imul(J,we)|0,w=w+Math.imul(k,Ae)|0,b=b+Math.imul(k,st)|0,b=b+Math.imul(H,Ae)|0,P=P+Math.imul(H,st)|0;var ri=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(ri>>>26)|0,ri&=67108863,w=Math.imul(tt,ct),b=Math.imul(tt,me),b=b+Math.imul(ve,ct)|0,P=Math.imul(ve,me),w=w+Math.imul(ze,Fe)|0,b=b+Math.imul(ze,de)|0,b=b+Math.imul(se,Fe)|0,P=P+Math.imul(se,de)|0,w=w+Math.imul(ke,Ye)|0,b=b+Math.imul(ke,fe)|0,b=b+Math.imul(ce,Ye)|0,P=P+Math.imul(ce,fe)|0,w=w+Math.imul(qe,ft)|0,b=b+Math.imul(qe,be)|0,b=b+Math.imul(he,ft)|0,P=P+Math.imul(he,be)|0,w=w+Math.imul(Be,ut)|0,b=b+Math.imul(Be,ge)|0,b=b+Math.imul(le,ut)|0,P=P+Math.imul(le,ge)|0,w=w+Math.imul(Ge,De)|0,b=b+Math.imul(Ge,ye)|0,b=b+Math.imul(ue,De)|0,P=P+Math.imul(ue,ye)|0,w=w+Math.imul(te,pt)|0,b=b+Math.imul(te,we)|0,b=b+Math.imul(re,pt)|0,P=P+Math.imul(re,we)|0,w=w+Math.imul(X,Ae)|0,b=b+Math.imul(X,st)|0,b=b+Math.imul(J,Ae)|0,P=P+Math.imul(J,st)|0;var hn=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(hn>>>26)|0,hn&=67108863,w=Math.imul(tt,Fe),b=Math.imul(tt,de),b=b+Math.imul(ve,Fe)|0,P=Math.imul(ve,de),w=w+Math.imul(ze,Ye)|0,b=b+Math.imul(ze,fe)|0,b=b+Math.imul(se,Ye)|0,P=P+Math.imul(se,fe)|0,w=w+Math.imul(ke,ft)|0,b=b+Math.imul(ke,be)|0,b=b+Math.imul(ce,ft)|0,P=P+Math.imul(ce,be)|0,w=w+Math.imul(qe,ut)|0,b=b+Math.imul(qe,ge)|0,b=b+Math.imul(he,ut)|0,P=P+Math.imul(he,ge)|0,w=w+Math.imul(Be,De)|0,b=b+Math.imul(Be,ye)|0,b=b+Math.imul(le,De)|0,P=P+Math.imul(le,ye)|0,w=w+Math.imul(Ge,pt)|0,b=b+Math.imul(Ge,we)|0,b=b+Math.imul(ue,pt)|0,P=P+Math.imul(ue,we)|0,w=w+Math.imul(te,Ae)|0,b=b+Math.imul(te,st)|0,b=b+Math.imul(re,Ae)|0,P=P+Math.imul(re,st)|0;var un=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(un>>>26)|0,un&=67108863,w=Math.imul(tt,Ye),b=Math.imul(tt,fe),b=b+Math.imul(ve,Ye)|0,P=Math.imul(ve,fe),w=w+Math.imul(ze,ft)|0,b=b+Math.imul(ze,be)|0,b=b+Math.imul(se,ft)|0,P=P+Math.imul(se,be)|0,w=w+Math.imul(ke,ut)|0,b=b+Math.imul(ke,ge)|0,b=b+Math.imul(ce,ut)|0,P=P+Math.imul(ce,ge)|0,w=w+Math.imul(qe,De)|0,b=b+Math.imul(qe,ye)|0,b=b+Math.imul(he,De)|0,P=P+Math.imul(he,ye)|0,w=w+Math.imul(Be,pt)|0,b=b+Math.imul(Be,we)|0,b=b+Math.imul(le,pt)|0,P=P+Math.imul(le,we)|0,w=w+Math.imul(Ge,Ae)|0,b=b+Math.imul(Ge,st)|0,b=b+Math.imul(ue,Ae)|0,P=P+Math.imul(ue,st)|0;var lr=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(lr>>>26)|0,lr&=67108863,w=Math.imul(tt,ft),b=Math.imul(tt,be),b=b+Math.imul(ve,ft)|0,P=Math.imul(ve,be),w=w+Math.imul(ze,ut)|0,b=b+Math.imul(ze,ge)|0,b=b+Math.imul(se,ut)|0,P=P+Math.imul(se,ge)|0,w=w+Math.imul(ke,De)|0,b=b+Math.imul(ke,ye)|0,b=b+Math.imul(ce,De)|0,P=P+Math.imul(ce,ye)|0,w=w+Math.imul(qe,pt)|0,b=b+Math.imul(qe,we)|0,b=b+Math.imul(he,pt)|0,P=P+Math.imul(he,we)|0,w=w+Math.imul(Be,Ae)|0,b=b+Math.imul(Be,st)|0,b=b+Math.imul(le,Ae)|0,P=P+Math.imul(le,st)|0;var dn=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(dn>>>26)|0,dn&=67108863,w=Math.imul(tt,ut),b=Math.imul(tt,ge),b=b+Math.imul(ve,ut)|0,P=Math.imul(ve,ge),w=w+Math.imul(ze,De)|0,b=b+Math.imul(ze,ye)|0,b=b+Math.imul(se,De)|0,P=P+Math.imul(se,ye)|0,w=w+Math.imul(ke,pt)|0,b=b+Math.imul(ke,we)|0,b=b+Math.imul(ce,pt)|0,P=P+Math.imul(ce,we)|0,w=w+Math.imul(qe,Ae)|0,b=b+Math.imul(qe,st)|0,b=b+Math.imul(he,Ae)|0,P=P+Math.imul(he,st)|0;var pn=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(pn>>>26)|0,pn&=67108863,w=Math.imul(tt,De),b=Math.imul(tt,ye),b=b+Math.imul(ve,De)|0,P=Math.imul(ve,ye),w=w+Math.imul(ze,pt)|0,b=b+Math.imul(ze,we)|0,b=b+Math.imul(se,pt)|0,P=P+Math.imul(se,we)|0,w=w+Math.imul(ke,Ae)|0,b=b+Math.imul(ke,st)|0,b=b+Math.imul(ce,Ae)|0,P=P+Math.imul(ce,st)|0;var gn=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(gn>>>26)|0,gn&=67108863,w=Math.imul(tt,pt),b=Math.imul(tt,we),b=b+Math.imul(ve,pt)|0,P=Math.imul(ve,we),w=w+Math.imul(ze,Ae)|0,b=b+Math.imul(ze,st)|0,b=b+Math.imul(se,Ae)|0,P=P+Math.imul(se,st)|0;var Ja=(d+w|0)+((b&8191)<<13)|0;d=(P+(b>>>13)|0)+(Ja>>>26)|0,Ja&=67108863,w=Math.imul(tt,Ae),b=Math.imul(tt,st),b=b+Math.imul(ve,Ae)|0,P=Math.imul(ve,st);var Za=(d+w|0)+((b&8191)<<13)|0;return d=(P+(b>>>13)|0)+(Za>>>26)|0,Za&=67108863,y[0]=Ir,y[1]=Mr,y[2]=Pr,y[3]=Or,y[4]=Tt,y[5]=on,y[6]=an,y[7]=cn,y[8]=ln,y[9]=fn,y[10]=ri,y[11]=hn,y[12]=un,y[13]=lr,y[14]=dn,y[15]=pn,y[16]=gn,y[17]=Ja,y[18]=Za,d!==0&&(y[19]=d,p.length++),p};Math.imul||(R=O);function N(g,f,h){h.negative=f.negative^g.negative,h.length=g.length+f.length;for(var p=0,_=0,$=0;$<h.length-1;$++){var y=_;_=0;for(var d=p&67108863,w=Math.min($,f.length-1),b=Math.max(0,$-g.length+1);b<=w;b++){var P=$-b,q=g.words[P]|0,A=f.words[b]|0,F=q*A,j=F&67108863;y=y+(F/67108864|0)|0,j=j+d|0,d=j&67108863,y=y+(j>>>26)|0,_+=y>>>26,y&=67108863}h.words[$]=d,p=y,y=_}return p!==0?h.words[$]=p:h.length--,h._strip()}function T(g,f,h){return N(g,f,h)}s.prototype.mulTo=function(f,h){var p,_=this.length+f.length;return this.length===10&&f.length===10?p=R(this,f,h):_<63?p=O(this,f,h):_<1024?p=N(this,f,h):p=T(this,f,h),p},s.prototype.mul=function(f){var h=new s(null);return h.words=new Array(this.length+f.length),this.mulTo(f,h)},s.prototype.mulf=function(f){var h=new s(null);return h.words=new Array(this.length+f.length),T(this,f,h)},s.prototype.imul=function(f){return this.clone().mulTo(f,this)},s.prototype.imuln=function(f){var h=f<0;h&&(f=-f),i(typeof f=="number"),i(f<67108864);for(var p=0,_=0;_<this.length;_++){var $=(this.words[_]|0)*f,y=($&67108863)+(p&67108863);p>>=26,p+=$/67108864|0,p+=y>>>26,this.words[_]=y&67108863}return p!==0&&(this.words[_]=p,this.length++),h?this.ineg():this},s.prototype.muln=function(f){return this.clone().imuln(f)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(f){var h=C(f);if(h.length===0)return new s(1);for(var p=this,_=0;_<h.length&&h[_]===0;_++,p=p.sqr());if(++_<h.length)for(var $=p.sqr();_<h.length;_++,$=$.sqr())h[_]!==0&&(p=p.mul($));return p},s.prototype.iushln=function(f){i(typeof f=="number"&&f>=0);var h=f%26,p=(f-h)/26,_=67108863>>>26-h<<26-h,$;if(h!==0){var y=0;for($=0;$<this.length;$++){var d=this.words[$]&_,w=(this.words[$]|0)-d<<h;this.words[$]=w|y,y=d>>>26-h}y&&(this.words[$]=y,this.length++)}if(p!==0){for($=this.length-1;$>=0;$--)this.words[$+p]=this.words[$];for($=0;$<p;$++)this.words[$]=0;this.length+=p}return this._strip()},s.prototype.ishln=function(f){return i(this.negative===0),this.iushln(f)},s.prototype.iushrn=function(f,h,p){i(typeof f=="number"&&f>=0);var _;h?_=(h-h%26)/26:_=0;var $=f%26,y=Math.min((f-$)/26,this.length),d=67108863^67108863>>>$<<$,w=p;if(_-=y,_=Math.max(0,_),w){for(var b=0;b<y;b++)w.words[b]=this.words[b];w.length=y}if(y!==0)if(this.length>y)for(this.length-=y,b=0;b<this.length;b++)this.words[b]=this.words[b+y];else this.words[0]=0,this.length=1;var P=0;for(b=this.length-1;b>=0&&(P!==0||b>=_);b--){var q=this.words[b]|0;this.words[b]=P<<26-$|q>>>$,P=q&d}return w&&P!==0&&(w.words[w.length++]=P),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(f,h,p){return i(this.negative===0),this.iushrn(f,h,p)},s.prototype.shln=function(f){return this.clone().ishln(f)},s.prototype.ushln=function(f){return this.clone().iushln(f)},s.prototype.shrn=function(f){return this.clone().ishrn(f)},s.prototype.ushrn=function(f){return this.clone().iushrn(f)},s.prototype.testn=function(f){i(typeof f=="number"&&f>=0);var h=f%26,p=(f-h)/26,_=1<<h;if(this.length<=p)return!1;var $=this.words[p];return!!($&_)},s.prototype.imaskn=function(f){i(typeof f=="number"&&f>=0);var h=f%26,p=(f-h)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(h!==0&&p++,this.length=Math.min(p,this.length),h!==0){var _=67108863^67108863>>>h<<h;this.words[this.length-1]&=_}return this._strip()},s.prototype.maskn=function(f){return this.clone().imaskn(f)},s.prototype.iaddn=function(f){return i(typeof f=="number"),i(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<=f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},s.prototype._iaddn=function(f){this.words[0]+=f;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},s.prototype.isubn=function(f){if(i(typeof f=="number"),i(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},s.prototype.addn=function(f){return this.clone().iaddn(f)},s.prototype.subn=function(f){return this.clone().isubn(f)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(f,h,p){var _=f.length+p,$;this._expand(_);var y,d=0;for($=0;$<f.length;$++){y=(this.words[$+p]|0)+d;var w=(f.words[$]|0)*h;y-=w&67108863,d=(y>>26)-(w/67108864|0),this.words[$+p]=y&67108863}for(;$<this.length-p;$++)y=(this.words[$+p]|0)+d,d=y>>26,this.words[$+p]=y&67108863;if(d===0)return this._strip();for(i(d===-1),d=0,$=0;$<this.length;$++)y=-(this.words[$]|0)+d,d=y>>26,this.words[$]=y&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(f,h){var p=this.length-f.length,_=this.clone(),$=f,y=$.words[$.length-1]|0,d=this._countBits(y);p=26-d,p!==0&&($=$.ushln(p),_.iushln(p),y=$.words[$.length-1]|0);var w=_.length-$.length,b;if(h!=="mod"){b=new s(null),b.length=w+1,b.words=new Array(b.length);for(var P=0;P<b.length;P++)b.words[P]=0}var q=_.clone()._ishlnsubmul($,1,w);q.negative===0&&(_=q,b&&(b.words[w]=1));for(var A=w-1;A>=0;A--){var F=(_.words[$.length+A]|0)*67108864+(_.words[$.length+A-1]|0);for(F=Math.min(F/y|0,67108863),_._ishlnsubmul($,F,A);_.negative!==0;)F--,_.negative=0,_._ishlnsubmul($,1,A),_.isZero()||(_.negative^=1);b&&(b.words[A]=F)}return b&&b._strip(),_._strip(),h!=="div"&&p!==0&&_.iushrn(p),{div:b||null,mod:_}},s.prototype.divmod=function(f,h,p){if(i(!f.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var _,$,y;return this.negative!==0&&f.negative===0?(y=this.neg().divmod(f,h),h!=="mod"&&(_=y.div.neg()),h!=="div"&&($=y.mod.neg(),p&&$.negative!==0&&$.iadd(f)),{div:_,mod:$}):this.negative===0&&f.negative!==0?(y=this.divmod(f.neg(),h),h!=="mod"&&(_=y.div.neg()),{div:_,mod:y.mod}):this.negative&f.negative?(y=this.neg().divmod(f.neg(),h),h!=="div"&&($=y.mod.neg(),p&&$.negative!==0&&$.isub(f)),{div:y.div,mod:$}):f.length>this.length||this.cmp(f)<0?{div:new s(0),mod:this}:f.length===1?h==="div"?{div:this.divn(f.words[0]),mod:null}:h==="mod"?{div:null,mod:new s(this.modrn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new s(this.modrn(f.words[0]))}:this._wordDiv(f,h)},s.prototype.div=function(f){return this.divmod(f,"div",!1).div},s.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},s.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},s.prototype.divRound=function(f){var h=this.divmod(f);if(h.mod.isZero())return h.div;var p=h.div.negative!==0?h.mod.isub(f):h.mod,_=f.ushrn(1),$=f.andln(1),y=p.cmp(_);return y<0||$===1&&y===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},s.prototype.modrn=function(f){var h=f<0;h&&(f=-f),i(f<=67108863);for(var p=(1<<26)%f,_=0,$=this.length-1;$>=0;$--)_=(p*_+(this.words[$]|0))%f;return h?-_:_},s.prototype.modn=function(f){return this.modrn(f)},s.prototype.idivn=function(f){var h=f<0;h&&(f=-f),i(f<=67108863);for(var p=0,_=this.length-1;_>=0;_--){var $=(this.words[_]|0)+p*67108864;this.words[_]=$/f|0,p=$%f}return this._strip(),h?this.ineg():this},s.prototype.divn=function(f){return this.clone().idivn(f)},s.prototype.egcd=function(f){i(f.negative===0),i(!f.isZero());var h=this,p=f.clone();h.negative!==0?h=h.umod(f):h=h.clone();for(var _=new s(1),$=new s(0),y=new s(0),d=new s(1),w=0;h.isEven()&&p.isEven();)h.iushrn(1),p.iushrn(1),++w;for(var b=p.clone(),P=h.clone();!h.isZero();){for(var q=0,A=1;!(h.words[0]&A)&&q<26;++q,A<<=1);if(q>0)for(h.iushrn(q);q-- >0;)(_.isOdd()||$.isOdd())&&(_.iadd(b),$.isub(P)),_.iushrn(1),$.iushrn(1);for(var F=0,j=1;!(p.words[0]&j)&&F<26;++F,j<<=1);if(F>0)for(p.iushrn(F);F-- >0;)(y.isOdd()||d.isOdd())&&(y.iadd(b),d.isub(P)),y.iushrn(1),d.iushrn(1);h.cmp(p)>=0?(h.isub(p),_.isub(y),$.isub(d)):(p.isub(h),y.isub(_),d.isub($))}return{a:y,b:d,gcd:p.iushln(w)}},s.prototype._invmp=function(f){i(f.negative===0),i(!f.isZero());var h=this,p=f.clone();h.negative!==0?h=h.umod(f):h=h.clone();for(var _=new s(1),$=new s(0),y=p.clone();h.cmpn(1)>0&&p.cmpn(1)>0;){for(var d=0,w=1;!(h.words[0]&w)&&d<26;++d,w<<=1);if(d>0)for(h.iushrn(d);d-- >0;)_.isOdd()&&_.iadd(y),_.iushrn(1);for(var b=0,P=1;!(p.words[0]&P)&&b<26;++b,P<<=1);if(b>0)for(p.iushrn(b);b-- >0;)$.isOdd()&&$.iadd(y),$.iushrn(1);h.cmp(p)>=0?(h.isub(p),_.isub($)):(p.isub(h),$.isub(_))}var q;return h.cmpn(1)===0?q=_:q=$,q.cmpn(0)<0&&q.iadd(f),q},s.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var h=this.clone(),p=f.clone();h.negative=0,p.negative=0;for(var _=0;h.isEven()&&p.isEven();_++)h.iushrn(1),p.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;p.isEven();)p.iushrn(1);var $=h.cmp(p);if($<0){var y=h;h=p,p=y}else if($===0||p.cmpn(1)===0)break;h.isub(p)}while(!0);return p.iushln(_)},s.prototype.invm=function(f){return this.egcd(f).a.umod(f)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(f){return this.words[0]&f},s.prototype.bincn=function(f){i(typeof f=="number");var h=f%26,p=(f-h)/26,_=1<<h;if(this.length<=p)return this._expand(p+1),this.words[p]|=_,this;for(var $=_,y=p;$!==0&&y<this.length;y++){var d=this.words[y]|0;d+=$,$=d>>>26,d&=67108863,this.words[y]=d}return $!==0&&(this.words[y]=$,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(f){var h=f<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var p;if(this.length>1)p=1;else{h&&(f=-f),i(f<=67108863,"Number is too big");var _=this.words[0]|0;p=_===f?0:_<f?-1:1}return this.negative!==0?-p|0:p},s.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var h=this.ucmp(f);return this.negative!==0?-h|0:h},s.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var h=0,p=this.length-1;p>=0;p--){var _=this.words[p]|0,$=f.words[p]|0;if(_!==$){_<$?h=-1:_>$&&(h=1);break}}return h},s.prototype.gtn=function(f){return this.cmpn(f)===1},s.prototype.gt=function(f){return this.cmp(f)===1},s.prototype.gten=function(f){return this.cmpn(f)>=0},s.prototype.gte=function(f){return this.cmp(f)>=0},s.prototype.ltn=function(f){return this.cmpn(f)===-1},s.prototype.lt=function(f){return this.cmp(f)===-1},s.prototype.lten=function(f){return this.cmpn(f)<=0},s.prototype.lte=function(f){return this.cmp(f)<=0},s.prototype.eqn=function(f){return this.cmpn(f)===0},s.prototype.eq=function(f){return this.cmp(f)===0},s.red=function(f){return new M(f)},s.prototype.toRed=function(f){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(f){return this.red=f,this},s.prototype.forceRed=function(f){return i(!this.red,"Already a number in reduction context"),this._forceRed(f)},s.prototype.redAdd=function(f){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},s.prototype.redIAdd=function(f){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},s.prototype.redSub=function(f){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},s.prototype.redISub=function(f){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},s.prototype.redShl=function(f){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},s.prototype.redMul=function(f){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},s.prototype.redIMul=function(f){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(f){return i(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var U={k256:null,p224:null,p192:null,p25519:null};function z(g,f){this.name=g,this.p=new s(f,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}z.prototype._tmp=function(){var f=new s(null);return f.words=new Array(Math.ceil(this.n/13)),f},z.prototype.ireduce=function(f){var h=f,p;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),p=h.bitLength();while(p>this.n);var _=p<this.n?-1:h.ucmp(this.p);return _===0?(h.words[0]=0,h.length=1):_>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},z.prototype.split=function(f,h){f.iushrn(this.n,0,h)},z.prototype.imulK=function(f){return f.imul(this.k)};function W(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(W,z),W.prototype.split=function(f,h){for(var p=4194303,_=Math.min(f.length,9),$=0;$<_;$++)h.words[$]=f.words[$];if(h.length=_,f.length<=9){f.words[0]=0,f.length=1;return}var y=f.words[9];for(h.words[h.length++]=y&p,$=10;$<f.length;$++){var d=f.words[$]|0;f.words[$-10]=(d&p)<<4|y>>>22,y=d}y>>>=22,f.words[$-10]=y,y===0&&f.length>10?f.length-=10:f.length-=9},W.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var h=0,p=0;p<f.length;p++){var _=f.words[p]|0;h+=_*977,f.words[p]=h&67108863,h=_*64+(h/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function K(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(K,z);function B(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(B,z);function V(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(V,z),V.prototype.imulK=function(f){for(var h=0,p=0;p<f.length;p++){var _=(f.words[p]|0)*19+h,$=_&67108863;_>>>=26,f.words[p]=$,h=_}return h!==0&&(f.words[f.length++]=h),f},s._prime=function(f){if(U[f])return U[f];var h;if(f==="k256")h=new W;else if(f==="p224")h=new K;else if(f==="p192")h=new B;else if(f==="p25519")h=new V;else throw new Error("Unknown prime "+f);return U[f]=h,h};function M(g){if(typeof g=="string"){var f=s._prime(g);this.m=f.p,this.prime=f}else i(g.gtn(1),"modulus must be greater than 1"),this.m=g,this.prime=null}M.prototype._verify1=function(f){i(f.negative===0,"red works only with positives"),i(f.red,"red works only with red numbers")},M.prototype._verify2=function(f,h){i((f.negative|h.negative)===0,"red works only with positives"),i(f.red&&f.red===h.red,"red works only with red numbers")},M.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):(u(f,f.umod(this.m)._forceRed(this)),f)},M.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},M.prototype.add=function(f,h){this._verify2(f,h);var p=f.add(h);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},M.prototype.iadd=function(f,h){this._verify2(f,h);var p=f.iadd(h);return p.cmp(this.m)>=0&&p.isub(this.m),p},M.prototype.sub=function(f,h){this._verify2(f,h);var p=f.sub(h);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},M.prototype.isub=function(f,h){this._verify2(f,h);var p=f.isub(h);return p.cmpn(0)<0&&p.iadd(this.m),p},M.prototype.shl=function(f,h){return this._verify1(f),this.imod(f.ushln(h))},M.prototype.imul=function(f,h){return this._verify2(f,h),this.imod(f.imul(h))},M.prototype.mul=function(f,h){return this._verify2(f,h),this.imod(f.mul(h))},M.prototype.isqr=function(f){return this.imul(f,f.clone())},M.prototype.sqr=function(f){return this.mul(f,f)},M.prototype.sqrt=function(f){if(f.isZero())return f.clone();var h=this.m.andln(3);if(i(h%2===1),h===3){var p=this.m.add(new s(1)).iushrn(2);return this.pow(f,p)}for(var _=this.m.subn(1),$=0;!_.isZero()&&_.andln(1)===0;)$++,_.iushrn(1);i(!_.isZero());var y=new s(1).toRed(this),d=y.redNeg(),w=this.m.subn(1).iushrn(1),b=this.m.bitLength();for(b=new s(2*b*b).toRed(this);this.pow(b,w).cmp(d)!==0;)b.redIAdd(d);for(var P=this.pow(b,_),q=this.pow(f,_.addn(1).iushrn(1)),A=this.pow(f,_),F=$;A.cmp(y)!==0;){for(var j=A,k=0;j.cmp(y)!==0;k++)j=j.redSqr();i(k<F);var H=this.pow(P,new s(1).iushln(F-k-1));q=q.redMul(H),P=H.redSqr(),A=A.redMul(P),F=k}return q},M.prototype.invm=function(f){var h=f._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},M.prototype.pow=function(f,h){if(h.isZero())return new s(1).toRed(this);if(h.cmpn(1)===0)return f.clone();var p=4,_=new Array(1<<p);_[0]=new s(1).toRed(this),_[1]=f;for(var $=2;$<_.length;$++)_[$]=this.mul(_[$-1],f);var y=_[0],d=0,w=0,b=h.bitLength()%26;for(b===0&&(b=26),$=h.length-1;$>=0;$--){for(var P=h.words[$],q=b-1;q>=0;q--){var A=P>>q&1;if(y!==_[0]&&(y=this.sqr(y)),A===0&&d===0){w=0;continue}d<<=1,d|=A,w++,!(w!==p&&($!==0||q!==0))&&(y=this.mul(y,_[d]),w=0,d=0)}b=26}return y},M.prototype.convertTo=function(f){var h=f.umod(this.m);return h===f?h.clone():h},M.prototype.convertFrom=function(f){var h=f.clone();return h.red=null,h},s.mont=function(f){return new m(f)};function m(g){M.call(this,g),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(m,M),m.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},m.prototype.convertFrom=function(f){var h=this.imod(f.mul(this.rinv));return h.red=null,h},m.prototype.imul=function(f,h){if(f.isZero()||h.isZero())return f.words[0]=0,f.length=1,f;var p=f.imul(h),_=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),$=p.isub(_).iushrn(this.shift),y=$;return $.cmp(this.m)>=0?y=$.isub(this.m):$.cmpn(0)<0&&(y=$.iadd(this.m)),y._forceRed(this)},m.prototype.mul=function(f,h){if(f.isZero()||h.isZero())return new s(0)._forceRed(this);var p=f.mul(h),_=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),$=p.isub(_).iushrn(this.shift),y=$;return $.cmp(this.m)>=0?y=$.isub(this.m):$.cmpn(0)<0&&(y=$.iadd(this.m)),y._forceRed(this)},m.prototype.invm=function(f){var h=this.imod(f._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(t,Ot)})(g0);var xe=g0.exports;const v0="bignumber/5.7.0";var ic=xe.BN;const qi=new Ie(v0),vf={},m0=9007199254740991;function vw(t){return t!=null&&(St.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||Cr(t)||typeof t=="bigint"||Ls(t))}let b0=!1;class St{constructor(e,r){e!==vf&&qi.throwError("cannot call constructor directly; use BigNumber.from",Ie.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return br(Oe(this).fromTwos(e))}toTwos(e){return br(Oe(this).toTwos(e))}abs(){return this._hex[0]==="-"?St.from(this._hex.substring(1)):this}add(e){return br(Oe(this).add(Oe(e)))}sub(e){return br(Oe(this).sub(Oe(e)))}div(e){return St.from(e).isZero()&&kr("division-by-zero","div"),br(Oe(this).div(Oe(e)))}mul(e){return br(Oe(this).mul(Oe(e)))}mod(e){const r=Oe(e);return r.isNeg()&&kr("division-by-zero","mod"),br(Oe(this).umod(r))}pow(e){const r=Oe(e);return r.isNeg()&&kr("negative-power","pow"),br(Oe(this).pow(r))}and(e){const r=Oe(e);return(this.isNegative()||r.isNeg())&&kr("unbound-bitwise-result","and"),br(Oe(this).and(r))}or(e){const r=Oe(e);return(this.isNegative()||r.isNeg())&&kr("unbound-bitwise-result","or"),br(Oe(this).or(r))}xor(e){const r=Oe(e);return(this.isNegative()||r.isNeg())&&kr("unbound-bitwise-result","xor"),br(Oe(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&kr("negative-width","mask"),br(Oe(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&kr("negative-width","shl"),br(Oe(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&kr("negative-width","shr"),br(Oe(this).shrn(e))}eq(e){return Oe(this).eq(Oe(e))}lt(e){return Oe(this).lt(Oe(e))}lte(e){return Oe(this).lte(Oe(e))}gt(e){return Oe(this).gt(Oe(e))}gte(e){return Oe(this).gte(Oe(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Oe(this).isZero()}toNumber(){try{return Oe(this).toNumber()}catch{kr("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return qi.throwError("this platform does not support BigInt",Ie.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?b0||(b0=!0,qi.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?qi.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Ie.errors.UNEXPECTED_ARGUMENT,{}):qi.throwError("BigNumber.toString does not accept parameters",Ie.errors.UNEXPECTED_ARGUMENT,{})),Oe(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof St)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new St(vf,zo(e)):e.match(/^-?[0-9]+$/)?new St(vf,zo(new ic(e))):qi.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&kr("underflow","BigNumber.from",e),(e>=m0||e<=-m0)&&kr("overflow","BigNumber.from",e),St.from(String(e));const r=e;if(typeof r=="bigint")return St.from(r.toString());if(Ls(r))return St.from(hr(r));if(r)if(r.toHexString){const i=r.toHexString();if(typeof i=="string")return St.from(i)}else{let i=r._hex;if(i==null&&r.type==="BigNumber"&&(i=r.hex),typeof i=="string"&&(Cr(i)||i[0]==="-"&&Cr(i.substring(1))))return St.from(i)}return qi.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function zo(t){if(typeof t!="string")return zo(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&qi.throwArgumentError("invalid hex","value",t),t=zo(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function br(t){return St.from(zo(t))}function Oe(t){const e=St.from(t).toHexString();return e[0]==="-"?new ic("-"+e.substring(3),16):new ic(e.substring(2),16)}function kr(t,e,r){const i={fault:t,operation:e};return r!=null&&(i.value=r),qi.throwError(t,Ie.errors.NUMERIC_FAULT,i)}function mw(t){return new ic(t,36).toString(16)}const ur=new Ie(v0),Ho={},y0=St.from(0),w0=St.from(-1);function _0(t,e,r,i){const n={fault:e,operation:r};return i!==void 0&&(n.value=i),ur.throwError(t,Ie.errors.NUMERIC_FAULT,n)}let Wo="0";for(;Wo.length<256;)Wo+=Wo;function mf(t){if(typeof t!="number")try{t=St.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+Wo.substring(0,t):ur.throwArgumentError("invalid decimal size","decimals",t)}function bf(t,e){e==null&&(e=0);const r=mf(e);t=St.from(t);const i=t.lt(y0);i&&(t=t.mul(w0));let n=t.mod(r).toString();for(;n.length<r.length-1;)n="0"+n;n=n.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=t.div(r).toString();return r.length===1?t=s:t=s+"."+n,i&&(t="-"+t),t}function ji(t,e){e==null&&(e=0);const r=mf(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&ur.throwArgumentError("invalid decimal value","value",t);const i=t.substring(0,1)==="-";i&&(t=t.substring(1)),t==="."&&ur.throwArgumentError("missing value","value",t);const n=t.split(".");n.length>2&&ur.throwArgumentError("too many decimal points","value",t);let s=n[0],o=n[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>r.length-1&&_0("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<r.length-1;)o+="0";const a=St.from(s),c=St.from(o);let l=a.mul(r).add(c);return i&&(l=l.mul(w0)),l}class Bs{constructor(e,r,i,n){e!==Ho&&ur.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Ie.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=i,this.decimals=n,this.name=(r?"":"u")+"fixed"+String(i)+"x"+String(n),this._multiplier=mf(n),Object.freeze(this)}static from(e){if(e instanceof Bs)return e;typeof e=="number"&&(e=`fixed128x${e}`);let r=!0,i=128,n=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")r=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||ur.throwArgumentError("invalid fixed format","format",e),r=s[1]!=="u",i=parseInt(s[2]),n=parseInt(s[3])}}else if(e){const s=(o,a,c)=>e[o]==null?c:(typeof e[o]!==a&&ur.throwArgumentError("invalid fixed format ("+o+" not "+a+")","format."+o,e[o]),e[o]);r=s("signed","boolean",r),i=s("width","number",i),n=s("decimals","number",n)}return i%8&&ur.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),n>80&&ur.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n),new Bs(Ho,r,i,n)}}class Yt{constructor(e,r,i,n){e!==Ho&&ur.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Ie.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=r,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&ur.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const r=ji(this._value,this.format.decimals),i=ji(e._value,e.format.decimals);return Yt.fromValue(r.add(i),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const r=ji(this._value,this.format.decimals),i=ji(e._value,e.format.decimals);return Yt.fromValue(r.sub(i),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const r=ji(this._value,this.format.decimals),i=ji(e._value,e.format.decimals);return Yt.fromValue(r.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const r=ji(this._value,this.format.decimals),i=ji(e._value,e.format.decimals);return Yt.fromValue(r.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=Yt.from(e[0],this.format);const i=!e[1].match(/^(0*)$/);return this.isNegative()&&i&&(r=r.subUnsafe(x0.toFormat(r.format))),r}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=Yt.from(e[0],this.format);const i=!e[1].match(/^(0*)$/);return!this.isNegative()&&i&&(r=r.addUnsafe(x0.toFormat(r.format))),r}round(e){e==null&&(e=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(e<0||e>80||e%1)&&ur.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;const i=Yt.from("1"+Wo.substring(0,e),this.format),n=bw.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(n).floor().divUnsafe(i)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&ur.throwArgumentError("invalid byte width","width",e);const r=St.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return mn(r,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Yt.fromString(this._value,e)}static fromValue(e,r,i){return i==null&&r!=null&&!vw(r)&&(i=r,r=null),r==null&&(r=0),i==null&&(i="fixed"),Yt.fromString(bf(e,r),Bs.from(i))}static fromString(e,r){r==null&&(r="fixed");const i=Bs.from(r),n=ji(e,i.decimals);!i.signed&&n.lt(y0)&&_0("unsigned value cannot be negative","overflow","value",e);let s=null;i.signed?s=n.toTwos(i.width).toHexString():(s=n.toHexString(),s=mn(s,i.width/8));const o=bf(n,i.decimals);return new Yt(Ho,s,o,i)}static fromBytes(e,r){r==null&&(r="fixed");const i=Bs.from(r);if(Ft(e).length>i.width/8)throw new Error("overflow");let n=St.from(e);i.signed&&(n=n.fromTwos(i.width));const s=n.toTwos((i.signed?0:1)+i.width).toHexString(),o=bf(n,i.decimals);return new Yt(Ho,s,o,i)}static from(e,r){if(typeof e=="string")return Yt.fromString(e,r);if(Ls(e))return Yt.fromBytes(e,r);try{return Yt.fromValue(e,0,r)}catch(i){if(i.code!==Ie.errors.INVALID_ARGUMENT)throw i}return ur.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const x0=Yt.from(1),bw=Yt.from("0.5");var E0={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r="finalize already called",i=typeof window=="object",n=i?window:{};n.JS_SHA3_NO_WINDOW&&(i=!1);var s=!i&&typeof self=="object",o=!n.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?n=Ot:s&&(n=self);var a=!n.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,c=!n.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),u=[31,7936,2031616,520093696],v=[4,1024,262144,67108864],x=[1,256,65536,16777216],S=[6,1536,393216,100663296],E=[0,8,16,24],I=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],C=[224,256,384,512],O=[128,256],R=["hex","buffer","arrayBuffer","array","digest"],N={128:168,256:136};(n.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(A){return Object.prototype.toString.call(A)==="[object Array]"}),c&&(n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(A){return typeof A=="object"&&A.buffer&&A.buffer.constructor===ArrayBuffer});for(var T=function(A,F,j){return function(k){return new b(A,F,A).update(k)[j]()}},U=function(A,F,j){return function(k,H){return new b(A,F,H).update(k)[j]()}},z=function(A,F,j){return function(k,H,Z,X){return f["cshake"+A].update(k,H,Z,X)[j]()}},W=function(A,F,j){return function(k,H,Z,X){return f["kmac"+A].update(k,H,Z,X)[j]()}},K=function(A,F,j,k){for(var H=0;H<R.length;++H){var Z=R[H];A[Z]=F(j,k,Z)}return A},B=function(A,F){var j=T(A,F,"hex");return j.create=function(){return new b(A,F,A)},j.update=function(k){return j.create().update(k)},K(j,T,A,F)},V=function(A,F){var j=U(A,F,"hex");return j.create=function(k){return new b(A,F,k)},j.update=function(k,H){return j.create(H).update(k)},K(j,U,A,F)},M=function(A,F){var j=N[A],k=z(A,F,"hex");return k.create=function(H,Z,X){return!Z&&!X?f["shake"+A].create(H):new b(A,F,H).bytepad([Z,X],j)},k.update=function(H,Z,X,J){return k.create(Z,X,J).update(H)},K(k,z,A,F)},m=function(A,F){var j=N[A],k=W(A,F,"hex");return k.create=function(H,Z,X){return new P(A,F,Z).bytepad(["KMAC",X],j).bytepad([H],j)},k.update=function(H,Z,X,J){return k.create(H,X,J).update(Z)},K(k,W,A,F)},g=[{name:"keccak",padding:x,bits:C,createMethod:B},{name:"sha3",padding:S,bits:C,createMethod:B},{name:"shake",padding:u,bits:O,createMethod:V},{name:"cshake",padding:v,bits:O,createMethod:M},{name:"kmac",padding:v,bits:O,createMethod:m}],f={},h=[],p=0;p<g.length;++p)for(var _=g[p],$=_.bits,y=0;y<$.length;++y){var d=_.name+"_"+$[y];if(h.push(d),f[d]=_.createMethod($[y],_.padding),_.name!=="sha3"){var w=_.name+$[y];h.push(w),f[w]=f[d]}}function b(A,F,j){this.blocks=[],this.s=[],this.padding=F,this.outputBits=j,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(A<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=j>>5,this.extraBytes=(j&31)>>3;for(var k=0;k<50;++k)this.s[k]=0}b.prototype.update=function(A){if(this.finalized)throw new Error(r);var F,j=typeof A;if(j!=="string"){if(j==="object"){if(A===null)throw new Error(e);if(c&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!c||!ArrayBuffer.isView(A)))throw new Error(e)}else throw new Error(e);F=!0}for(var k=this.blocks,H=this.byteCount,Z=A.length,X=this.blockCount,J=0,oe=this.s,te,re;J<Z;){if(this.reset)for(this.reset=!1,k[0]=this.block,te=1;te<X+1;++te)k[te]=0;if(F)for(te=this.start;J<Z&&te<H;++J)k[te>>2]|=A[J]<<E[te++&3];else for(te=this.start;J<Z&&te<H;++J)re=A.charCodeAt(J),re<128?k[te>>2]|=re<<E[te++&3]:re<2048?(k[te>>2]|=(192|re>>6)<<E[te++&3],k[te>>2]|=(128|re&63)<<E[te++&3]):re<55296||re>=57344?(k[te>>2]|=(224|re>>12)<<E[te++&3],k[te>>2]|=(128|re>>6&63)<<E[te++&3],k[te>>2]|=(128|re&63)<<E[te++&3]):(re=65536+((re&1023)<<10|A.charCodeAt(++J)&1023),k[te>>2]|=(240|re>>18)<<E[te++&3],k[te>>2]|=(128|re>>12&63)<<E[te++&3],k[te>>2]|=(128|re>>6&63)<<E[te++&3],k[te>>2]|=(128|re&63)<<E[te++&3]);if(this.lastByteIndex=te,te>=H){for(this.start=te-H,this.block=k[X],te=0;te<X;++te)oe[te]^=k[te];q(oe),this.reset=!0}else this.start=te}return this},b.prototype.encode=function(A,F){var j=A&255,k=1,H=[j];for(A=A>>8,j=A&255;j>0;)H.unshift(j),A=A>>8,j=A&255,++k;return F?H.push(k):H.unshift(k),this.update(H),H.length},b.prototype.encodeString=function(A){var F,j=typeof A;if(j!=="string"){if(j==="object"){if(A===null)throw new Error(e);if(c&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!c||!ArrayBuffer.isView(A)))throw new Error(e)}else throw new Error(e);F=!0}var k=0,H=A.length;if(F)k=H;else for(var Z=0;Z<A.length;++Z){var X=A.charCodeAt(Z);X<128?k+=1:X<2048?k+=2:X<55296||X>=57344?k+=3:(X=65536+((X&1023)<<10|A.charCodeAt(++Z)&1023),k+=4)}return k+=this.encode(k*8),this.update(A),k},b.prototype.bytepad=function(A,F){for(var j=this.encode(F),k=0;k<A.length;++k)j+=this.encodeString(A[k]);var H=F-j%F,Z=[];return Z.length=H,this.update(Z),this},b.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var A=this.blocks,F=this.lastByteIndex,j=this.blockCount,k=this.s;if(A[F>>2]|=this.padding[F&3],this.lastByteIndex===this.byteCount)for(A[0]=A[j],F=1;F<j+1;++F)A[F]=0;for(A[j-1]|=2147483648,F=0;F<j;++F)k[F]^=A[F];q(k)}},b.prototype.toString=b.prototype.hex=function(){this.finalize();for(var A=this.blockCount,F=this.s,j=this.outputBlocks,k=this.extraBytes,H=0,Z=0,X="",J;Z<j;){for(H=0;H<A&&Z<j;++H,++Z)J=F[H],X+=l[J>>4&15]+l[J&15]+l[J>>12&15]+l[J>>8&15]+l[J>>20&15]+l[J>>16&15]+l[J>>28&15]+l[J>>24&15];Z%A===0&&(q(F),H=0)}return k&&(J=F[H],X+=l[J>>4&15]+l[J&15],k>1&&(X+=l[J>>12&15]+l[J>>8&15]),k>2&&(X+=l[J>>20&15]+l[J>>16&15])),X},b.prototype.arrayBuffer=function(){this.finalize();var A=this.blockCount,F=this.s,j=this.outputBlocks,k=this.extraBytes,H=0,Z=0,X=this.outputBits>>3,J;k?J=new ArrayBuffer(j+1<<2):J=new ArrayBuffer(X);for(var oe=new Uint32Array(J);Z<j;){for(H=0;H<A&&Z<j;++H,++Z)oe[Z]=F[H];Z%A===0&&q(F)}return k&&(oe[H]=F[H],J=J.slice(0,X)),J},b.prototype.buffer=b.prototype.arrayBuffer,b.prototype.digest=b.prototype.array=function(){this.finalize();for(var A=this.blockCount,F=this.s,j=this.outputBlocks,k=this.extraBytes,H=0,Z=0,X=[],J,oe;Z<j;){for(H=0;H<A&&Z<j;++H,++Z)J=Z<<2,oe=F[H],X[J]=oe&255,X[J+1]=oe>>8&255,X[J+2]=oe>>16&255,X[J+3]=oe>>24&255;Z%A===0&&q(F)}return k&&(J=Z<<2,oe=F[H],X[J]=oe&255,k>1&&(X[J+1]=oe>>8&255),k>2&&(X[J+2]=oe>>16&255)),X};function P(A,F,j){b.call(this,A,F,j)}P.prototype=new b,P.prototype.finalize=function(){return this.encode(this.outputBits,!0),b.prototype.finalize.call(this)};var q=function(A){var F,j,k,H,Z,X,J,oe,te,re,Ve,Ge,ue,Le,Be,le,Ue,qe,he,je,ke,ce,Te,ze,se,et,tt,ve,rt,He,pe,it,at,ae,nt,ct,me,Je,Fe,de,Ze,Ye,fe,lt,ft,be,ht,ut,ge,Xe,De,ye,dt,pt,we,gt,Ae,st,Ir,Mr,Pr,Or,Tt;for(k=0;k<48;k+=2)H=A[0]^A[10]^A[20]^A[30]^A[40],Z=A[1]^A[11]^A[21]^A[31]^A[41],X=A[2]^A[12]^A[22]^A[32]^A[42],J=A[3]^A[13]^A[23]^A[33]^A[43],oe=A[4]^A[14]^A[24]^A[34]^A[44],te=A[5]^A[15]^A[25]^A[35]^A[45],re=A[6]^A[16]^A[26]^A[36]^A[46],Ve=A[7]^A[17]^A[27]^A[37]^A[47],Ge=A[8]^A[18]^A[28]^A[38]^A[48],ue=A[9]^A[19]^A[29]^A[39]^A[49],F=Ge^(X<<1|J>>>31),j=ue^(J<<1|X>>>31),A[0]^=F,A[1]^=j,A[10]^=F,A[11]^=j,A[20]^=F,A[21]^=j,A[30]^=F,A[31]^=j,A[40]^=F,A[41]^=j,F=H^(oe<<1|te>>>31),j=Z^(te<<1|oe>>>31),A[2]^=F,A[3]^=j,A[12]^=F,A[13]^=j,A[22]^=F,A[23]^=j,A[32]^=F,A[33]^=j,A[42]^=F,A[43]^=j,F=X^(re<<1|Ve>>>31),j=J^(Ve<<1|re>>>31),A[4]^=F,A[5]^=j,A[14]^=F,A[15]^=j,A[24]^=F,A[25]^=j,A[34]^=F,A[35]^=j,A[44]^=F,A[45]^=j,F=oe^(Ge<<1|ue>>>31),j=te^(ue<<1|Ge>>>31),A[6]^=F,A[7]^=j,A[16]^=F,A[17]^=j,A[26]^=F,A[27]^=j,A[36]^=F,A[37]^=j,A[46]^=F,A[47]^=j,F=re^(H<<1|Z>>>31),j=Ve^(Z<<1|H>>>31),A[8]^=F,A[9]^=j,A[18]^=F,A[19]^=j,A[28]^=F,A[29]^=j,A[38]^=F,A[39]^=j,A[48]^=F,A[49]^=j,Le=A[0],Be=A[1],be=A[11]<<4|A[10]>>>28,ht=A[10]<<4|A[11]>>>28,ve=A[20]<<3|A[21]>>>29,rt=A[21]<<3|A[20]>>>29,Mr=A[31]<<9|A[30]>>>23,Pr=A[30]<<9|A[31]>>>23,Ye=A[40]<<18|A[41]>>>14,fe=A[41]<<18|A[40]>>>14,ae=A[2]<<1|A[3]>>>31,nt=A[3]<<1|A[2]>>>31,le=A[13]<<12|A[12]>>>20,Ue=A[12]<<12|A[13]>>>20,ut=A[22]<<10|A[23]>>>22,ge=A[23]<<10|A[22]>>>22,He=A[33]<<13|A[32]>>>19,pe=A[32]<<13|A[33]>>>19,Or=A[42]<<2|A[43]>>>30,Tt=A[43]<<2|A[42]>>>30,pt=A[5]<<30|A[4]>>>2,we=A[4]<<30|A[5]>>>2,ct=A[14]<<6|A[15]>>>26,me=A[15]<<6|A[14]>>>26,qe=A[25]<<11|A[24]>>>21,he=A[24]<<11|A[25]>>>21,Xe=A[34]<<15|A[35]>>>17,De=A[35]<<15|A[34]>>>17,it=A[45]<<29|A[44]>>>3,at=A[44]<<29|A[45]>>>3,ze=A[6]<<28|A[7]>>>4,se=A[7]<<28|A[6]>>>4,gt=A[17]<<23|A[16]>>>9,Ae=A[16]<<23|A[17]>>>9,Je=A[26]<<25|A[27]>>>7,Fe=A[27]<<25|A[26]>>>7,je=A[36]<<21|A[37]>>>11,ke=A[37]<<21|A[36]>>>11,ye=A[47]<<24|A[46]>>>8,dt=A[46]<<24|A[47]>>>8,lt=A[8]<<27|A[9]>>>5,ft=A[9]<<27|A[8]>>>5,et=A[18]<<20|A[19]>>>12,tt=A[19]<<20|A[18]>>>12,st=A[29]<<7|A[28]>>>25,Ir=A[28]<<7|A[29]>>>25,de=A[38]<<8|A[39]>>>24,Ze=A[39]<<8|A[38]>>>24,ce=A[48]<<14|A[49]>>>18,Te=A[49]<<14|A[48]>>>18,A[0]=Le^~le&qe,A[1]=Be^~Ue&he,A[10]=ze^~et&ve,A[11]=se^~tt&rt,A[20]=ae^~ct&Je,A[21]=nt^~me&Fe,A[30]=lt^~be&ut,A[31]=ft^~ht&ge,A[40]=pt^~gt&st,A[41]=we^~Ae&Ir,A[2]=le^~qe&je,A[3]=Ue^~he&ke,A[12]=et^~ve&He,A[13]=tt^~rt&pe,A[22]=ct^~Je&de,A[23]=me^~Fe&Ze,A[32]=be^~ut&Xe,A[33]=ht^~ge&De,A[42]=gt^~st&Mr,A[43]=Ae^~Ir&Pr,A[4]=qe^~je&ce,A[5]=he^~ke&Te,A[14]=ve^~He&it,A[15]=rt^~pe&at,A[24]=Je^~de&Ye,A[25]=Fe^~Ze&fe,A[34]=ut^~Xe&ye,A[35]=ge^~De&dt,A[44]=st^~Mr&Or,A[45]=Ir^~Pr&Tt,A[6]=je^~ce&Le,A[7]=ke^~Te&Be,A[16]=He^~it&ze,A[17]=pe^~at&se,A[26]=de^~Ye&ae,A[27]=Ze^~fe&nt,A[36]=Xe^~ye&lt,A[37]=De^~dt&ft,A[46]=Mr^~Or&pt,A[47]=Pr^~Tt&we,A[8]=ce^~Le&le,A[9]=Te^~Be&Ue,A[18]=it^~ze&et,A[19]=at^~se&tt,A[28]=Ye^~ae&ct,A[29]=fe^~nt&me,A[38]=ye^~lt&be,A[39]=dt^~ft&ht,A[48]=Or^~pt&gt,A[49]=Tt^~we&Ae,A[0]^=I[k],A[1]^=I[k+1]};if(a)t.exports=f;else for(p=0;p<h.length;++p)n[h[p]]=f[h[p]]})()})(E0);var yw=E0.exports;function $0(t){return"0x"+yw.keccak_256(Ft(t))}const ww="rlp/5.7.0";new Ie(ww);const _w="address/5.7.0",Ko=new Ie(_w);function S0(t){Cr(t,20)||Ko.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let n=0;n<40;n++)r[n]=e[n].charCodeAt(0);const i=Ft($0(r));for(let n=0;n<40;n+=2)i[n>>1]>>4>=8&&(e[n]=e[n].toUpperCase()),(i[n>>1]&15)>=8&&(e[n+1]=e[n+1].toUpperCase());return"0x"+e.join("")}const xw=9007199254740991;function Ew(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const yf={};for(let t=0;t<10;t++)yf[String(t)]=String(t);for(let t=0;t<26;t++)yf[String.fromCharCode(65+t)]=String(10+t);const A0=Math.floor(Ew(xw));function $w(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(i=>yf[i]).join("");for(;e.length>=A0;){let i=e.substring(0,A0);e=parseInt(i,10)%97+e.substring(i.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function Sw(t){let e=null;if(typeof t!="string"&&Ko.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=S0(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&Ko.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==$w(t)&&Ko.throwArgumentError("bad icap checksum","address",t),e=mw(t.substring(4));e.length<40;)e="0"+e;e=S0("0x"+e)}else Ko.throwArgumentError("invalid address","address",t);return e}const Aw="properties/5.7.0";new Ie(Aw);function Vo(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}var Dr={},Ce={},Yn=I0;function I0(t,e){if(!t)throw new Error(e||"Assertion failed")}I0.equal=function(e,r,i){if(e!=r)throw new Error(i||"Assertion failed: "+e+" != "+r)};var Us={exports:{}};typeof Object.create=="function"?Us.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Us.exports=function(e,r){if(r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}};var Iw=Yn,Mw=Us.exports;Ce.inherits=Mw;function Pw(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function Ow(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var i=0,n=0;n<t.length;n++){var s=t.charCodeAt(n);s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=s&63|128):Pw(t,n)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=s&63|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=s&63|128)}else for(n=0;n<t.length;n++)r[n]=t[n]|0;return r}Ce.toArray=Ow;function Cw(t){for(var e="",r=0;r<t.length;r++)e+=P0(t[r].toString(16));return e}Ce.toHex=Cw;function M0(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Ce.htonl=M0;function Dw(t,e){for(var r="",i=0;i<t.length;i++){var n=t[i];e==="little"&&(n=M0(n)),r+=O0(n.toString(16))}return r}Ce.toHex32=Dw;function P0(t){return t.length===1?"0"+t:t}Ce.zero2=P0;function O0(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Ce.zero8=O0;function Rw(t,e,r,i){var n=r-e;Iw(n%4===0);for(var s=new Array(n/4),o=0,a=e;o<s.length;o++,a+=4){var c;i==="big"?c=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:c=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=c>>>0}return s}Ce.join32=Rw;function Nw(t,e){for(var r=new Array(t.length*4),i=0,n=0;i<t.length;i++,n+=4){var s=t[i];e==="big"?(r[n]=s>>>24,r[n+1]=s>>>16&255,r[n+2]=s>>>8&255,r[n+3]=s&255):(r[n+3]=s>>>24,r[n+2]=s>>>16&255,r[n+1]=s>>>8&255,r[n]=s&255)}return r}Ce.split32=Nw;function Tw(t,e){return t>>>e|t<<32-e}Ce.rotr32=Tw;function Fw(t,e){return t<<e|t>>>32-e}Ce.rotl32=Fw;function Lw(t,e){return t+e>>>0}Ce.sum32=Lw;function Bw(t,e,r){return t+e+r>>>0}Ce.sum32_3=Bw;function Uw(t,e,r,i){return t+e+r+i>>>0}Ce.sum32_4=Uw;function qw(t,e,r,i,n){return t+e+r+i+n>>>0}Ce.sum32_5=qw;function jw(t,e,r,i){var n=t[e],s=t[e+1],o=i+s>>>0,a=(o<i?1:0)+r+n;t[e]=a>>>0,t[e+1]=o}Ce.sum64=jw;function kw(t,e,r,i){var n=e+i>>>0,s=(n<e?1:0)+t+r;return s>>>0}Ce.sum64_hi=kw;function zw(t,e,r,i){var n=e+i;return n>>>0}Ce.sum64_lo=zw;function Hw(t,e,r,i,n,s,o,a){var c=0,l=e;l=l+i>>>0,c+=l<e?1:0,l=l+s>>>0,c+=l<s?1:0,l=l+a>>>0,c+=l<a?1:0;var u=t+r+n+o+c;return u>>>0}Ce.sum64_4_hi=Hw;function Ww(t,e,r,i,n,s,o,a){var c=e+i+s+a;return c>>>0}Ce.sum64_4_lo=Ww;function Kw(t,e,r,i,n,s,o,a,c,l){var u=0,v=e;v=v+i>>>0,u+=v<e?1:0,v=v+s>>>0,u+=v<s?1:0,v=v+a>>>0,u+=v<a?1:0,v=v+l>>>0,u+=v<l?1:0;var x=t+r+n+o+c+u;return x>>>0}Ce.sum64_5_hi=Kw;function Vw(t,e,r,i,n,s,o,a,c,l){var u=e+i+s+a+l;return u>>>0}Ce.sum64_5_lo=Vw;function Gw(t,e,r){var i=e<<32-r|t>>>r;return i>>>0}Ce.rotr64_hi=Gw;function Jw(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}Ce.rotr64_lo=Jw;function Zw(t,e,r){return t>>>r}Ce.shr64_hi=Zw;function Yw(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}Ce.shr64_lo=Yw;var qs={},C0=Ce,Xw=Yn;function nc(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}qs.BlockHash=nc,nc.prototype.update=function(e,r){if(e=C0.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var i=e.length%this._delta8;this.pending=e.slice(e.length-i,e.length),this.pending.length===0&&(this.pending=null),e=C0.join32(e,0,e.length-i,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},nc.prototype.digest=function(e){return this.update(this._pad()),Xw(this.pending===null),this._digest(e)},nc.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,i=r-(e+this.padLength)%r,n=new Array(i+this.padLength);n[0]=128;for(var s=1;s<i;s++)n[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)n[s++]=0;n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=e>>>24&255,n[s++]=e>>>16&255,n[s++]=e>>>8&255,n[s++]=e&255}else for(n[s++]=e&255,n[s++]=e>>>8&255,n[s++]=e>>>16&255,n[s++]=e>>>24&255,n[s++]=0,n[s++]=0,n[s++]=0,n[s++]=0,o=8;o<this.padLength;o++)n[s++]=0;return n};var js={},bi={},Qw=Ce,yi=Qw.rotr32;function e3(t,e,r,i){if(t===0)return D0(e,r,i);if(t===1||t===3)return N0(e,r,i);if(t===2)return R0(e,r,i)}bi.ft_1=e3;function D0(t,e,r){return t&e^~t&r}bi.ch32=D0;function R0(t,e,r){return t&e^t&r^e&r}bi.maj32=R0;function N0(t,e,r){return t^e^r}bi.p32=N0;function t3(t){return yi(t,2)^yi(t,13)^yi(t,22)}bi.s0_256=t3;function r3(t){return yi(t,6)^yi(t,11)^yi(t,25)}bi.s1_256=r3;function i3(t){return yi(t,7)^yi(t,18)^t>>>3}bi.g0_256=i3;function n3(t){return yi(t,17)^yi(t,19)^t>>>10}bi.g1_256=n3;var ks=Ce,s3=qs,o3=bi,wf=ks.rotl32,Go=ks.sum32,a3=ks.sum32_5,c3=o3.ft_1,T0=s3.BlockHash,l3=[1518500249,1859775393,2400959708,3395469782];function wi(){if(!(this instanceof wi))return new wi;T0.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}ks.inherits(wi,T0);var f3=wi;wi.blockSize=512,wi.outSize=160,wi.hmacStrength=80,wi.padLength=64,wi.prototype._update=function(e,r){for(var i=this.W,n=0;n<16;n++)i[n]=e[r+n];for(;n<i.length;n++)i[n]=wf(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4];for(n=0;n<i.length;n++){var u=~~(n/20),v=a3(wf(s,5),c3(u,o,a,c),l,i[n],l3[u]);l=c,c=a,a=wf(o,30),o=s,s=v}this.h[0]=Go(this.h[0],s),this.h[1]=Go(this.h[1],o),this.h[2]=Go(this.h[2],a),this.h[3]=Go(this.h[3],c),this.h[4]=Go(this.h[4],l)},wi.prototype._digest=function(e){return e==="hex"?ks.toHex32(this.h,"big"):ks.split32(this.h,"big")};var zs=Ce,h3=qs,Hs=bi,u3=Yn,ai=zs.sum32,d3=zs.sum32_4,p3=zs.sum32_5,g3=Hs.ch32,v3=Hs.maj32,m3=Hs.s0_256,b3=Hs.s1_256,y3=Hs.g0_256,w3=Hs.g1_256,F0=h3.BlockHash,_3=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function _i(){if(!(this instanceof _i))return new _i;F0.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=_3,this.W=new Array(64)}zs.inherits(_i,F0);var L0=_i;_i.blockSize=512,_i.outSize=256,_i.hmacStrength=192,_i.padLength=64,_i.prototype._update=function(e,r){for(var i=this.W,n=0;n<16;n++)i[n]=e[r+n];for(;n<i.length;n++)i[n]=d3(w3(i[n-2]),i[n-7],y3(i[n-15]),i[n-16]);var s=this.h[0],o=this.h[1],a=this.h[2],c=this.h[3],l=this.h[4],u=this.h[5],v=this.h[6],x=this.h[7];for(u3(this.k.length===i.length),n=0;n<i.length;n++){var S=p3(x,b3(l),g3(l,u,v),this.k[n],i[n]),E=ai(m3(s),v3(s,o,a));x=v,v=u,u=l,l=ai(c,S),c=a,a=o,o=s,s=ai(S,E)}this.h[0]=ai(this.h[0],s),this.h[1]=ai(this.h[1],o),this.h[2]=ai(this.h[2],a),this.h[3]=ai(this.h[3],c),this.h[4]=ai(this.h[4],l),this.h[5]=ai(this.h[5],u),this.h[6]=ai(this.h[6],v),this.h[7]=ai(this.h[7],x)},_i.prototype._digest=function(e){return e==="hex"?zs.toHex32(this.h,"big"):zs.split32(this.h,"big")};var _f=Ce,B0=L0;function ki(){if(!(this instanceof ki))return new ki;B0.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}_f.inherits(ki,B0);var x3=ki;ki.blockSize=512,ki.outSize=224,ki.hmacStrength=192,ki.padLength=64,ki.prototype._digest=function(e){return e==="hex"?_f.toHex32(this.h.slice(0,7),"big"):_f.split32(this.h.slice(0,7),"big")};var yr=Ce,E3=qs,$3=Yn,xi=yr.rotr64_hi,Ei=yr.rotr64_lo,U0=yr.shr64_hi,q0=yr.shr64_lo,bn=yr.sum64,xf=yr.sum64_hi,Ef=yr.sum64_lo,S3=yr.sum64_4_hi,A3=yr.sum64_4_lo,I3=yr.sum64_5_hi,M3=yr.sum64_5_lo,j0=E3.BlockHash,P3=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ci(){if(!(this instanceof ci))return new ci;j0.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=P3,this.W=new Array(160)}yr.inherits(ci,j0);var k0=ci;ci.blockSize=1024,ci.outSize=512,ci.hmacStrength=192,ci.padLength=128,ci.prototype._prepareBlock=function(e,r){for(var i=this.W,n=0;n<32;n++)i[n]=e[r+n];for(;n<i.length;n+=2){var s=q3(i[n-4],i[n-3]),o=j3(i[n-4],i[n-3]),a=i[n-14],c=i[n-13],l=B3(i[n-30],i[n-29]),u=U3(i[n-30],i[n-29]),v=i[n-32],x=i[n-31];i[n]=S3(s,o,a,c,l,u,v,x),i[n+1]=A3(s,o,a,c,l,u,v,x)}},ci.prototype._update=function(e,r){this._prepareBlock(e,r);var i=this.W,n=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],c=this.h[4],l=this.h[5],u=this.h[6],v=this.h[7],x=this.h[8],S=this.h[9],E=this.h[10],I=this.h[11],C=this.h[12],O=this.h[13],R=this.h[14],N=this.h[15];$3(this.k.length===i.length);for(var T=0;T<i.length;T+=2){var U=R,z=N,W=F3(x,S),K=L3(x,S),B=O3(x,S,E,I,C),V=C3(x,S,E,I,C,O),M=this.k[T],m=this.k[T+1],g=i[T],f=i[T+1],h=I3(U,z,W,K,B,V,M,m,g,f),p=M3(U,z,W,K,B,V,M,m,g,f);U=N3(n,s),z=T3(n,s),W=D3(n,s,o,a,c),K=R3(n,s,o,a,c,l);var _=xf(U,z,W,K),$=Ef(U,z,W,K);R=C,N=O,C=E,O=I,E=x,I=S,x=xf(u,v,h,p),S=Ef(v,v,h,p),u=c,v=l,c=o,l=a,o=n,a=s,n=xf(h,p,_,$),s=Ef(h,p,_,$)}bn(this.h,0,n,s),bn(this.h,2,o,a),bn(this.h,4,c,l),bn(this.h,6,u,v),bn(this.h,8,x,S),bn(this.h,10,E,I),bn(this.h,12,C,O),bn(this.h,14,R,N)},ci.prototype._digest=function(e){return e==="hex"?yr.toHex32(this.h,"big"):yr.split32(this.h,"big")};function O3(t,e,r,i,n){var s=t&r^~t&n;return s<0&&(s+=4294967296),s}function C3(t,e,r,i,n,s){var o=e&i^~e&s;return o<0&&(o+=4294967296),o}function D3(t,e,r,i,n){var s=t&r^t&n^r&n;return s<0&&(s+=4294967296),s}function R3(t,e,r,i,n,s){var o=e&i^e&s^i&s;return o<0&&(o+=4294967296),o}function N3(t,e){var r=xi(t,e,28),i=xi(e,t,2),n=xi(e,t,7),s=r^i^n;return s<0&&(s+=4294967296),s}function T3(t,e){var r=Ei(t,e,28),i=Ei(e,t,2),n=Ei(e,t,7),s=r^i^n;return s<0&&(s+=4294967296),s}function F3(t,e){var r=xi(t,e,14),i=xi(t,e,18),n=xi(e,t,9),s=r^i^n;return s<0&&(s+=4294967296),s}function L3(t,e){var r=Ei(t,e,14),i=Ei(t,e,18),n=Ei(e,t,9),s=r^i^n;return s<0&&(s+=4294967296),s}function B3(t,e){var r=xi(t,e,1),i=xi(t,e,8),n=U0(t,e,7),s=r^i^n;return s<0&&(s+=4294967296),s}function U3(t,e){var r=Ei(t,e,1),i=Ei(t,e,8),n=q0(t,e,7),s=r^i^n;return s<0&&(s+=4294967296),s}function q3(t,e){var r=xi(t,e,19),i=xi(e,t,29),n=U0(t,e,6),s=r^i^n;return s<0&&(s+=4294967296),s}function j3(t,e){var r=Ei(t,e,19),i=Ei(e,t,29),n=q0(t,e,6),s=r^i^n;return s<0&&(s+=4294967296),s}var $f=Ce,z0=k0;function zi(){if(!(this instanceof zi))return new zi;z0.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}$f.inherits(zi,z0);var k3=zi;zi.blockSize=1024,zi.outSize=384,zi.hmacStrength=192,zi.padLength=128,zi.prototype._digest=function(e){return e==="hex"?$f.toHex32(this.h.slice(0,12),"big"):$f.split32(this.h.slice(0,12),"big")},js.sha1=f3,js.sha224=x3,js.sha256=L0,js.sha384=k3,js.sha512=k0;var H0={},Xn=Ce,z3=qs,sc=Xn.rotl32,W0=Xn.sum32,Jo=Xn.sum32_3,K0=Xn.sum32_4,V0=z3.BlockHash;function $i(){if(!(this instanceof $i))return new $i;V0.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Xn.inherits($i,V0),H0.ripemd160=$i,$i.blockSize=512,$i.outSize=160,$i.hmacStrength=192,$i.padLength=64,$i.prototype._update=function(e,r){for(var i=this.h[0],n=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],c=i,l=n,u=s,v=o,x=a,S=0;S<80;S++){var E=W0(sc(K0(i,G0(S,n,s,o),e[K3[S]+r],H3(S)),G3[S]),a);i=a,a=o,o=sc(s,10),s=n,n=E,E=W0(sc(K0(c,G0(79-S,l,u,v),e[V3[S]+r],W3(S)),J3[S]),x),c=x,x=v,v=sc(u,10),u=l,l=E}E=Jo(this.h[1],s,v),this.h[1]=Jo(this.h[2],o,x),this.h[2]=Jo(this.h[3],a,c),this.h[3]=Jo(this.h[4],i,l),this.h[4]=Jo(this.h[0],n,u),this.h[0]=E},$i.prototype._digest=function(e){return e==="hex"?Xn.toHex32(this.h,"little"):Xn.split32(this.h,"little")};function G0(t,e,r,i){return t<=15?e^r^i:t<=31?e&r|~e&i:t<=47?(e|~r)^i:t<=63?e&i|r&~i:e^(r|~i)}function H3(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function W3(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var K3=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],V3=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],G3=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],J3=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Z3=Ce,Y3=Yn;function Ws(t,e,r){if(!(this instanceof Ws))return new Ws(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(Z3.toArray(e,r))}var X3=Ws;Ws.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),Y3(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)},Ws.prototype.update=function(e,r){return this.inner.update(e,r),this},Ws.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(t){var e=t;e.utils=Ce,e.common=qs,e.sha=js,e.ripemd=H0,e.hmac=X3,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(Dr);function Ks(t,e,r){return r={path:e,exports:{},require:function(i,n){return Q3(i,n??r.path)}},t(r,r.exports),r.exports}function Q3(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Sf=J0;function J0(t,e){if(!t)throw new Error(e||"Assertion failed")}J0.equal=function(e,r,i){if(e!=r)throw new Error(i||"Assertion failed: "+e+" != "+r)};var li=Ks(function(t,e){var r=e;function i(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var c=[];if(typeof o!="string"){for(var l=0;l<o.length;l++)c[l]=o[l]|0;return c}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var l=0;l<o.length;l+=2)c.push(parseInt(o[l]+o[l+1],16))}else for(var l=0;l<o.length;l++){var u=o.charCodeAt(l),v=u>>8,x=u&255;v?c.push(v,x):c.push(x)}return c}r.toArray=i;function n(o){return o.length===1?"0"+o:o}r.zero2=n;function s(o){for(var a="",c=0;c<o.length;c++)a+=n(o[c].toString(16));return a}r.toHex=s,r.encode=function(a,c){return c==="hex"?s(a):a}}),Rr=Ks(function(t,e){var r=e;r.assert=Sf,r.toArray=li.toArray,r.zero2=li.zero2,r.toHex=li.toHex,r.encode=li.encode;function i(c,l,u){var v=new Array(Math.max(c.bitLength(),u)+1);v.fill(0);for(var x=1<<l+1,S=c.clone(),E=0;E<v.length;E++){var I,C=S.andln(x-1);S.isOdd()?(C>(x>>1)-1?I=(x>>1)-C:I=C,S.isubn(I)):I=0,v[E]=I,S.iushrn(1)}return v}r.getNAF=i;function n(c,l){var u=[[],[]];c=c.clone(),l=l.clone();for(var v=0,x=0,S;c.cmpn(-v)>0||l.cmpn(-x)>0;){var E=c.andln(3)+v&3,I=l.andln(3)+x&3;E===3&&(E=-1),I===3&&(I=-1);var C;E&1?(S=c.andln(7)+v&7,(S===3||S===5)&&I===2?C=-E:C=E):C=0,u[0].push(C);var O;I&1?(S=l.andln(7)+x&7,(S===3||S===5)&&E===2?O=-I:O=I):O=0,u[1].push(O),2*v===C+1&&(v=1-v),2*x===O+1&&(x=1-x),c.iushrn(1),l.iushrn(1)}return u}r.getJSF=n;function s(c,l,u){var v="_"+l;c.prototype[l]=function(){return this[v]!==void 0?this[v]:this[v]=u.call(this)}}r.cachedProperty=s;function o(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=o;function a(c){return new xe(c,"hex","le")}r.intFromLE=a}),oc=Rr.getNAF,e4=Rr.getJSF,ac=Rr.assert;function yn(t,e){this.type=t,this.p=new xe(e.p,16),this.red=e.prime?xe.red(e.prime):xe.mont(this.p),this.zero=new xe(0).toRed(this.red),this.one=new xe(1).toRed(this.red),this.two=new xe(2).toRed(this.red),this.n=e.n&&new xe(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Qn=yn;yn.prototype.point=function(){throw new Error("Not implemented")},yn.prototype.validate=function(){throw new Error("Not implemented")},yn.prototype._fixedNafMul=function(e,r){ac(e.precomputed);var i=e._getDoubles(),n=oc(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<n.length;a+=i.step){c=0;for(var l=a+i.step-1;l>=a;l--)c=(c<<1)+n[l];o.push(c)}for(var u=this.jpoint(null,null,null),v=this.jpoint(null,null,null),x=s;x>0;x--){for(a=0;a<o.length;a++)c=o[a],c===x?v=v.mixedAdd(i.points[a]):c===-x&&(v=v.mixedAdd(i.points[a].neg()));u=u.add(v)}return u.toP()},yn.prototype._wnafMul=function(e,r){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var s=n.points,o=oc(r,i,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&o[c]===0;c--)l++;if(c>=0&&l++,a=a.dblp(l),c<0)break;var u=o[c];ac(u!==0),e.type==="affine"?u>0?a=a.mixedAdd(s[u-1>>1]):a=a.mixedAdd(s[-u-1>>1].neg()):u>0?a=a.add(s[u-1>>1]):a=a.add(s[-u-1>>1].neg())}return e.type==="affine"?a.toP():a},yn.prototype._wnafMulAdd=function(e,r,i,n,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,l=0,u,v,x;for(u=0;u<n;u++){x=r[u];var S=x._getNAFPoints(e);o[u]=S.wnd,a[u]=S.points}for(u=n-1;u>=1;u-=2){var E=u-1,I=u;if(o[E]!==1||o[I]!==1){c[E]=oc(i[E],o[E],this._bitLength),c[I]=oc(i[I],o[I],this._bitLength),l=Math.max(c[E].length,l),l=Math.max(c[I].length,l);continue}var C=[r[E],null,null,r[I]];r[E].y.cmp(r[I].y)===0?(C[1]=r[E].add(r[I]),C[2]=r[E].toJ().mixedAdd(r[I].neg())):r[E].y.cmp(r[I].y.redNeg())===0?(C[1]=r[E].toJ().mixedAdd(r[I]),C[2]=r[E].add(r[I].neg())):(C[1]=r[E].toJ().mixedAdd(r[I]),C[2]=r[E].toJ().mixedAdd(r[I].neg()));var O=[-3,-1,-5,-7,0,7,5,1,3],R=e4(i[E],i[I]);for(l=Math.max(R[0].length,l),c[E]=new Array(l),c[I]=new Array(l),v=0;v<l;v++){var N=R[0][v]|0,T=R[1][v]|0;c[E][v]=O[(N+1)*3+(T+1)],c[I][v]=0,a[E]=C}}var U=this.jpoint(null,null,null),z=this._wnafT4;for(u=l;u>=0;u--){for(var W=0;u>=0;){var K=!0;for(v=0;v<n;v++)z[v]=c[v][u]|0,z[v]!==0&&(K=!1);if(!K)break;W++,u--}if(u>=0&&W++,U=U.dblp(W),u<0)break;for(v=0;v<n;v++){var B=z[v];B!==0&&(B>0?x=a[v][B-1>>1]:B<0&&(x=a[v][-B-1>>1].neg()),x.type==="affine"?U=U.mixedAdd(x):U=U.add(x))}}for(u=0;u<n;u++)a[u]=null;return s?U:U.toP()};function zr(t,e){this.curve=t,this.type=e,this.precomputed=null}yn.BasePoint=zr,zr.prototype.eq=function(){throw new Error("Not implemented")},zr.prototype.validate=function(){return this.curve.validate(this)},yn.prototype.decodePoint=function(e,r){e=Rr.toArray(e,r);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?ac(e[e.length-1]%2===0):e[0]===7&&ac(e[e.length-1]%2===1);var n=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return n}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")},zr.prototype.encodeCompressed=function(e){return this.encode(e,!0)},zr.prototype._encode=function(e){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))},zr.prototype.encode=function(e,r){return Rr.encode(this._encode(r),e)},zr.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this},zr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1},zr.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)n=n.dbl();i.push(n)}return{step:e,points:i}},zr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<e)-1,n=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(n);return{wnd:e,points:r}},zr.prototype._getBeta=function(){return null},zr.prototype.dblp=function(e){for(var r=this,i=0;i<e;i++)r=r.dbl();return r};var Af=Ks(function(t){typeof Object.create=="function"?t.exports=function(r,i){i&&(r.super_=i,r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,i){if(i){r.super_=i;var n=function(){};n.prototype=i.prototype,r.prototype=new n,r.prototype.constructor=r}}}),t4=Rr.assert;function Hr(t){Qn.call(this,"short",t),this.a=new xe(t.a,16).toRed(this.red),this.b=new xe(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Af(Hr,Qn);var r4=Hr;Hr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(e.beta)r=new xe(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1],r=r.toRed(this.red)}if(e.lambda)i=new xe(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],t4(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new xe(a.a,16),b:new xe(a.b,16)}}):o=this._getEndoBasis(i),{beta:r,lambda:i,basis:o}}},Hr.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:xe.mont(e),i=new xe(2).toRed(r).redInvm(),n=i.redNeg(),s=new xe(3).toRed(r).redNeg().redSqrt().redMul(i),o=n.redAdd(s).fromRed(),a=n.redSub(s).fromRed();return[o,a]},Hr.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,n=this.n.clone(),s=new xe(1),o=new xe(0),a=new xe(0),c=new xe(1),l,u,v,x,S,E,I,C=0,O,R;i.cmpn(0)!==0;){var N=n.div(i);O=n.sub(N.mul(i)),R=a.sub(N.mul(s));var T=c.sub(N.mul(o));if(!v&&O.cmp(r)<0)l=I.neg(),u=s,v=O.neg(),x=R;else if(v&&++C===2)break;I=O,n=i,i=O,a=s,s=R,c=o,o=T}S=O.neg(),E=R;var U=v.sqr().add(x.sqr()),z=S.sqr().add(E.sqr());return z.cmp(U)>=0&&(S=l,E=u),v.negative&&(v=v.neg(),x=x.neg()),S.negative&&(S=S.neg(),E=E.neg()),[{a:v,b:x},{a:S,b:E}]},Hr.prototype._endoSplit=function(e){var r=this.endo.basis,i=r[0],n=r[1],s=n.b.mul(e).divRound(this.n),o=i.b.neg().mul(e).divRound(this.n),a=s.mul(i.a),c=o.mul(n.a),l=s.mul(i.b),u=o.mul(n.b),v=e.sub(a).sub(c),x=l.add(u).neg();return{k1:v,k2:x}},Hr.prototype.pointFromX=function(e,r){e=new xe(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=n.fromRed().isOdd();return(r&&!s||!r&&s)&&(n=n.redNeg()),this.point(e,n)},Hr.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,i=e.y,n=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0},Hr.prototype._endoWnafMulAdd=function(e,r,i){for(var n=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],l=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),n[o*2]=c,n[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var u=this._wnafMulAdd(1,n,s,o*2,i),v=0;v<o*2;v++)n[v]=null,s[v]=null;return u};function qt(t,e,r,i){Qn.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new xe(e,16),this.y=new xe(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Af(qt,Qn.BasePoint),Hr.prototype.point=function(e,r,i){return new qt(this,e,r,i)},Hr.prototype.pointFromJSON=function(e,r){return qt.fromJSON(this,e,r)},qt.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,n=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return r}},qt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},qt.fromJSON=function(e,r,i){typeof r=="string"&&(r=JSON.parse(r));var n=e.point(r[0],r[1],i);if(!r[2])return n;function s(a){return e.point(a[0],a[1],i)}var o=r[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(s))}},n},qt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},qt.prototype.isInfinity=function(){return this.inf},qt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(e.x),n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)},qt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},qt.prototype.getX=function(){return this.x.fromRed()},qt.prototype.getY=function(){return this.y.fromRed()},qt.prototype.mul=function(e){return e=new xe(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},qt.prototype.mulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)},qt.prototype.jmulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)},qt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)},qt.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,n=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r},qt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Xt(t,e,r,i){Qn.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new xe(0)):(this.x=new xe(e,16),this.y=new xe(r,16),this.z=new xe(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Af(Xt,Qn.BasePoint),Hr.prototype.jpoint=function(e,r,i){return new Xt(this,e,r,i)},Xt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),i=this.x.redMul(r),n=this.y.redMul(r).redMul(e);return this.curve.point(i,n)},Xt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Xt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(r),s=e.x.redMul(i),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(i.redMul(this.z)),c=n.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),v=u.redMul(c),x=n.redMul(u),S=l.redSqr().redIAdd(v).redISub(x).redISub(x),E=l.redMul(x.redISub(S)).redISub(o.redMul(v)),I=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(S,E,I)},Xt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),i=this.x,n=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=i.redSub(n),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),u=l.redMul(a),v=i.redMul(l),x=c.redSqr().redIAdd(u).redISub(v).redISub(v),S=c.redMul(v.redISub(x)).redISub(s.redMul(u)),E=this.z.redMul(a);return this.curve.jpoint(x,S,E)},Xt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<e;r++)i=i.dbl();return i}var n=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,l=c.redSqr().redSqr(),u=a.redAdd(a);for(r=0;r<e;r++){var v=o.redSqr(),x=u.redSqr(),S=x.redSqr(),E=v.redAdd(v).redIAdd(v).redIAdd(n.redMul(l)),I=o.redMul(x),C=E.redSqr().redISub(I.redAdd(I)),O=I.redISub(C),R=E.redMul(O);R=R.redIAdd(R).redISub(S);var N=u.redMul(c);r+1<e&&(l=l.redMul(S)),o=C,c=N,u=R}return this.curve.jpoint(o,u.redMul(s),c)},Xt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Xt.prototype._zeroDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var c=n.redAdd(n).redIAdd(n),l=c.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=l,r=c.redMul(a.redISub(l)).redISub(u),i=this.y.redAdd(this.y)}else{var v=this.x.redSqr(),x=this.y.redSqr(),S=x.redSqr(),E=this.x.redAdd(x).redSqr().redISub(v).redISub(S);E=E.redIAdd(E);var I=v.redAdd(v).redIAdd(v),C=I.redSqr(),O=S.redIAdd(S);O=O.redIAdd(O),O=O.redIAdd(O),e=C.redISub(E).redISub(E),r=I.redMul(E.redISub(e)).redISub(O),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,r,i)},Xt.prototype._threeDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var c=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),l=c.redSqr().redISub(a).redISub(a);e=l;var u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),r=c.redMul(a.redISub(l)).redISub(u),i=this.y.redAdd(this.y)}else{var v=this.z.redSqr(),x=this.y.redSqr(),S=this.x.redMul(x),E=this.x.redSub(v).redMul(this.x.redAdd(v));E=E.redAdd(E).redIAdd(E);var I=S.redIAdd(S);I=I.redIAdd(I);var C=I.redAdd(I);e=E.redSqr().redISub(C),i=this.y.redAdd(this.z).redSqr().redISub(x).redISub(v);var O=x.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O),r=E.redMul(I.redISub(e)).redISub(O)}return this.curve.jpoint(e,r,i)},Xt.prototype._dbl=function(){var e=this.curve.a,r=this.x,i=this.y,n=this.z,s=n.redSqr().redSqr(),o=r.redSqr(),a=i.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=r.redAdd(r);l=l.redIAdd(l);var u=l.redMul(a),v=c.redSqr().redISub(u.redAdd(u)),x=u.redISub(v),S=a.redSqr();S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var E=c.redMul(x).redISub(S),I=i.redAdd(i).redMul(n);return this.curve.jpoint(v,E,I)},Xt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),n=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(n);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var u=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(l),v=r.redMul(u);v=v.redIAdd(v),v=v.redIAdd(v);var x=this.x.redMul(c).redISub(v);x=x.redIAdd(x),x=x.redIAdd(x);var S=this.y.redMul(u.redMul(l.redISub(u)).redISub(a.redMul(c)));S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var E=this.z.redAdd(a).redSqr().redISub(i).redISub(c);return this.curve.jpoint(x,S,E)},Xt.prototype.mul=function(e,r){return e=new xe(e,r),this.curve._wnafMul(this,e)},Xt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var n=r.redMul(this.z),s=i.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(n)).cmpn(0)===0},Xt.prototype.eqXToP=function(e){var r=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var n=e.clone(),s=this.curve.redN.redMul(r);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}},Xt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Xt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var cc=Ks(function(t,e){var r=e;r.base=Qn,r.short=r4,r.mont=null,r.edwards=null}),lc=Ks(function(t,e){var r=e,i=Rr.assert;function n(a){a.type==="short"?this.curve=new cc.short(a):a.type==="edwards"?this.curve=new cc.edwards(a):this.curve=new cc.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=n;function s(a,c){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var l=new n(c);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:l}),l}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Dr.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Dr.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Dr.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Dr.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Dr.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Dr.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Dr.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Dr.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function wn(t){if(!(this instanceof wn))return new wn(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=li.toArray(t.entropy,t.entropyEnc||"hex"),r=li.toArray(t.nonce,t.nonceEnc||"hex"),i=li.toArray(t.pers,t.persEnc||"hex");Sf(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,i)}var Z0=wn;wn.prototype._init=function(e,r,i){var n=e.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},wn.prototype._hmac=function(){return new Dr.hmac(this.hash,this.K)},wn.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},wn.prototype.reseed=function(e,r,i,n){typeof r!="string"&&(n=i,i=r,r=null),e=li.toArray(e,r),i=li.toArray(i,n),Sf(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1},wn.prototype.generate=function(e,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(n=i,i=r,r=null),i&&(i=li.toArray(i,n||"hex"),this._update(i));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(i),this._reseed++,li.encode(o,r)};var If=Rr.assert;function sr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Mf=sr;sr.fromPublic=function(e,r,i){return r instanceof sr?r:new sr(e,{pub:r,pubEnc:i})},sr.fromPrivate=function(e,r,i){return r instanceof sr?r:new sr(e,{priv:r,privEnc:i})},sr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},sr.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub},sr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv},sr.prototype._importPrivate=function(e,r){this.priv=new xe(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)},sr.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?If(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&If(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)},sr.prototype.derive=function(e){return e.validate()||If(e.validate(),"public point not validated"),e.mul(this.priv).getX()},sr.prototype.sign=function(e,r,i){return this.ec.sign(e,this,r,i)},sr.prototype.verify=function(e,r){return this.ec.verify(e,r,this)},sr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var i4=Rr.assert;function fc(t,e){if(t instanceof fc)return t;this._importDER(t,e)||(i4(t.r&&t.s,"Signature without r or s"),this.r=new xe(t.r,16),this.s=new xe(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var hc=fc;function n4(){this.place=0}function Pf(t,e){var r=t[e.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4)return!1;for(var n=0,s=0,o=e.place;s<i;s++,o++)n<<=8,n|=t[o],n>>>=0;return n<=127?!1:(e.place=o,n)}function Y0(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}fc.prototype._importDER=function(e,r){e=Rr.toArray(e,r);var i=new n4;if(e[i.place++]!==48)return!1;var n=Pf(e,i);if(n===!1||n+i.place!==e.length||e[i.place++]!==2)return!1;var s=Pf(e,i);if(s===!1)return!1;var o=e.slice(i.place,s+i.place);if(i.place+=s,e[i.place++]!==2)return!1;var a=Pf(e,i);if(a===!1||e.length!==a+i.place)return!1;var c=e.slice(i.place,a+i.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new xe(o),this.s=new xe(c),this.recoveryParam=null,!0};function Of(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}fc.prototype.toDER=function(e){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=Y0(r),i=Y0(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];Of(n,r.length),n=n.concat(r),n.push(2),Of(n,i.length);var s=n.concat(i),o=[48];return Of(o,s.length),o=o.concat(s),Rr.encode(o,e)};var s4=function(){throw new Error("unsupported")},X0=Rr.assert;function Wr(t){if(!(this instanceof Wr))return new Wr(t);typeof t=="string"&&(X0(Object.prototype.hasOwnProperty.call(lc,t),"Unknown curve "+t),t=lc[t]),t instanceof lc.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var o4=Wr;Wr.prototype.keyPair=function(e){return new Mf(this,e)},Wr.prototype.keyFromPrivate=function(e,r){return Mf.fromPrivate(this,e,r)},Wr.prototype.keyFromPublic=function(e,r){return Mf.fromPublic(this,e,r)},Wr.prototype.genKeyPair=function(e){e||(e={});for(var r=new Z0({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||s4(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new xe(2));;){var s=new xe(r.generate(i));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}},Wr.prototype._truncateToN=function(e,r){var i=e.byteLength()*8-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e},Wr.prototype.sign=function(e,r,i,n){typeof i=="object"&&(n=i,i=null),n||(n={}),r=this.keyFromPrivate(r,i),e=this._truncateToN(new xe(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),c=new Z0({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),l=this.n.sub(new xe(1)),u=0;;u++){var v=n.k?n.k(u):new xe(c.generate(this.n.byteLength()));if(v=this._truncateToN(v,!0),!(v.cmpn(1)<=0||v.cmp(l)>=0)){var x=this.g.mul(v);if(!x.isInfinity()){var S=x.getX(),E=S.umod(this.n);if(E.cmpn(0)!==0){var I=v.invm(this.n).mul(E.mul(r.getPrivate()).iadd(e));if(I=I.umod(this.n),I.cmpn(0)!==0){var C=(x.getY().isOdd()?1:0)|(S.cmp(E)!==0?2:0);return n.canonical&&I.cmp(this.nh)>0&&(I=this.n.sub(I),C^=1),new hc({r:E,s:I,recoveryParam:C})}}}}}},Wr.prototype.verify=function(e,r,i,n){e=this._truncateToN(new xe(e,16)),i=this.keyFromPublic(i,n),r=new hc(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),c=a.mul(e).umod(this.n),l=a.mul(s).umod(this.n),u;return this.curve._maxwellTrick?(u=this.g.jmulAdd(c,i.getPublic(),l),u.isInfinity()?!1:u.eqXToP(s)):(u=this.g.mulAdd(c,i.getPublic(),l),u.isInfinity()?!1:u.getX().umod(this.n).cmp(s)===0)},Wr.prototype.recoverPubKey=function(t,e,r,i){X0((3&r)===r,"The recovery param is more than two bits"),e=new hc(e,i);var n=this.n,s=new xe(t),o=e.r,a=e.s,c=r&1,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var u=e.r.invm(n),v=n.sub(s).mul(u).umod(n),x=a.mul(u).umod(n);return this.g.mulAdd(v,o,x)},Wr.prototype.getKeyRecoveryParam=function(t,e,r,i){if(e=new hc(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch{continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")};var a4=Ks(function(t,e){var r=e;r.version="6.5.4",r.utils=Rr,r.rand=function(){throw new Error("unsupported")},r.curve=cc,r.curves=lc,r.ec=o4,r.eddsa=null}),c4=a4.ec;const l4="signing-key/5.7.0",Cf=new Ie(l4);let Df=null;function Si(){return Df||(Df=new c4("secp256k1")),Df}class f4{constructor(e){Vo(this,"curve","secp256k1"),Vo(this,"privateKey",hr(e)),dw(this.privateKey)!==32&&Cf.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=Si().keyFromPrivate(Ft(this.privateKey));Vo(this,"publicKey","0x"+r.getPublic(!1,"hex")),Vo(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),Vo(this,"_isSigningKey",!0)}_addPoint(e){const r=Si().keyFromPublic(Ft(this.publicKey)),i=Si().keyFromPublic(Ft(e));return"0x"+r.pub.add(i.pub).encodeCompressed("hex")}signDigest(e){const r=Si().keyFromPrivate(Ft(this.privateKey)),i=Ft(e);i.length!==32&&Cf.throwArgumentError("bad digest length","digest",e);const n=r.sign(i,{canonical:!0});return p0({recoveryParam:n.recoveryParam,r:mn("0x"+n.r.toString(16),32),s:mn("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const r=Si().keyFromPrivate(Ft(this.privateKey)),i=Si().keyFromPublic(Ft(Q0(e)));return mn("0x"+r.derive(i.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function h4(t,e){const r=p0(e),i={r:Ft(r.r),s:Ft(r.s)};return"0x"+Si().recoverPubKey(Ft(t),i,r.recoveryParam).encode("hex",!1)}function Q0(t,e){const r=Ft(t);if(r.length===32){const i=new f4(r);return e?"0x"+Si().keyFromPrivate(r).getPublic(!0,"hex"):i.publicKey}else{if(r.length===33)return e?hr(r):"0x"+Si().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+Si().keyFromPublic(r).getPublic(!0,"hex"):hr(r)}return Cf.throwArgumentError("invalid public or private key","key","[REDACTED]")}const u4="transactions/5.7.0";new Ie(u4);var ep;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(ep||(ep={}));function d4(t){const e=Q0(t);return Sw(d0($0(d0(e,1)),12))}function p4(t,e){return d4(h4(Ft(t),e))}const g4=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),v4=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(i,n)=>typeof n=="string"&&n.match(/^\d+n$/)?BigInt(n.substring(0,n.length-1)):n)};function es(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return v4(t)}catch{return t}}function Hi(t){return typeof t=="string"?t:g4(t)||""}function m4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function tp(t,...e){if(!m4(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function rp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function b4(t,e){tp(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Vs=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rf=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function y4(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function ip(t){return typeof t=="string"&&(t=y4(t)),tp(t),t}class w4{clone(){return this._cloneInto()}}function _4(t){const e=i=>t().update(ip(i)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function np(t=32){if(Vs&&typeof Vs.getRandomValues=="function")return Vs.getRandomValues(new Uint8Array(t));if(Vs&&typeof Vs.randomBytes=="function")return Vs.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function x4(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,l=i?0:4;t.setUint32(e+c,o,i),t.setUint32(e+l,a,i)}class E4 extends w4{constructor(e,r,i,n){super(),this.blockLen=e,this.outputLen=r,this.padOffset=i,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Rf(this.buffer)}update(e){rp(this);const{view:r,buffer:i,blockLen:n}=this;e=ip(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(n-this.pos,s-o);if(a===n){const c=Rf(e);for(;n<=s-o;o+=n)this.process(c,o);continue}i.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){rp(this),b4(e,this),this.finished=!0;const{buffer:r,view:i,blockLen:n,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(i,0),o=0);for(let v=o;v<n;v++)r[v]=0;x4(i,n-8,BigInt(this.length*8),s),this.process(i,0);const a=Rf(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<l;v++)a.setUint32(4*v,u[v],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:i,length:n,finished:s,destroyed:o,pos:a}=this;return e.length=n,e.pos=a,e.finished=s,e.destroyed=o,n%r&&e.buffer.set(i),e}}const uc=BigInt(2**32-1),Nf=BigInt(32);function sp(t,e=!1){return e?{h:Number(t&uc),l:Number(t>>Nf&uc)}:{h:Number(t>>Nf&uc)|0,l:Number(t&uc)|0}}function $4(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let n=0;n<t.length;n++){const{h:s,l:o}=sp(t[n],e);[r[n],i[n]]=[s,o]}return[r,i]}const S4=(t,e)=>BigInt(t>>>0)<<Nf|BigInt(e>>>0),A4=(t,e,r)=>t>>>r,I4=(t,e,r)=>t<<32-r|e>>>r,M4=(t,e,r)=>t>>>r|e<<32-r,P4=(t,e,r)=>t<<32-r|e>>>r,O4=(t,e,r)=>t<<64-r|e>>>r-32,C4=(t,e,r)=>t>>>r-32|e<<64-r,D4=(t,e)=>e,R4=(t,e)=>t,N4=(t,e,r)=>t<<r|e>>>32-r,T4=(t,e,r)=>e<<r|t>>>32-r,F4=(t,e,r)=>e<<r-32|t>>>64-r,L4=(t,e,r)=>t<<r-32|e>>>64-r;function B4(t,e,r,i){const n=(e>>>0)+(i>>>0);return{h:t+r+(n/2**32|0)|0,l:n|0}}const U4=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),q4=(t,e,r,i)=>e+r+i+(t/2**32|0)|0,j4=(t,e,r,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0),k4=(t,e,r,i,n)=>e+r+i+n+(t/2**32|0)|0,z4=(t,e,r,i,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0)+(n>>>0),H4=(t,e,r,i,n,s)=>e+r+i+n+s+(t/2**32|0)|0,Se={fromBig:sp,split:$4,toBig:S4,shrSH:A4,shrSL:I4,rotrSH:M4,rotrSL:P4,rotrBH:O4,rotrBL:C4,rotr32H:D4,rotr32L:R4,rotlSH:N4,rotlSL:T4,rotlBH:F4,rotlBL:L4,add:B4,add3L:U4,add3H:q4,add4L:j4,add4H:k4,add5H:H4,add5L:z4},[W4,K4]=(()=>Se.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),_n=new Uint32Array(80),xn=new Uint32Array(80);class V4 extends E4{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:i,Bl:n,Ch:s,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:v,Fl:x,Gh:S,Gl:E,Hh:I,Hl:C}=this;return[e,r,i,n,s,o,a,c,l,u,v,x,S,E,I,C]}set(e,r,i,n,s,o,a,c,l,u,v,x,S,E,I,C){this.Ah=e|0,this.Al=r|0,this.Bh=i|0,this.Bl=n|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=v|0,this.Fl=x|0,this.Gh=S|0,this.Gl=E|0,this.Hh=I|0,this.Hl=C|0}process(e,r){for(let N=0;N<16;N++,r+=4)_n[N]=e.getUint32(r),xn[N]=e.getUint32(r+=4);for(let N=16;N<80;N++){const T=_n[N-15]|0,U=xn[N-15]|0,z=Se.rotrSH(T,U,1)^Se.rotrSH(T,U,8)^Se.shrSH(T,U,7),W=Se.rotrSL(T,U,1)^Se.rotrSL(T,U,8)^Se.shrSL(T,U,7),K=_n[N-2]|0,B=xn[N-2]|0,V=Se.rotrSH(K,B,19)^Se.rotrBH(K,B,61)^Se.shrSH(K,B,6),M=Se.rotrSL(K,B,19)^Se.rotrBL(K,B,61)^Se.shrSL(K,B,6),m=Se.add4L(W,M,xn[N-7],xn[N-16]),g=Se.add4H(m,z,V,_n[N-7],_n[N-16]);_n[N]=g|0,xn[N]=m|0}let{Ah:i,Al:n,Bh:s,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:v,El:x,Fh:S,Fl:E,Gh:I,Gl:C,Hh:O,Hl:R}=this;for(let N=0;N<80;N++){const T=Se.rotrSH(v,x,14)^Se.rotrSH(v,x,18)^Se.rotrBH(v,x,41),U=Se.rotrSL(v,x,14)^Se.rotrSL(v,x,18)^Se.rotrBL(v,x,41),z=v&S^~v&I,W=x&E^~x&C,K=Se.add5L(R,U,W,K4[N],xn[N]),B=Se.add5H(K,O,T,z,W4[N],_n[N]),V=K|0,M=Se.rotrSH(i,n,28)^Se.rotrBH(i,n,34)^Se.rotrBH(i,n,39),m=Se.rotrSL(i,n,28)^Se.rotrBL(i,n,34)^Se.rotrBL(i,n,39),g=i&s^i&a^s&a,f=n&o^n&c^o&c;O=I|0,R=C|0,I=S|0,C=E|0,S=v|0,E=x|0,{h:v,l:x}=Se.add(l|0,u|0,B|0,V|0),l=a|0,u=c|0,a=s|0,c=o|0,s=i|0,o=n|0;const h=Se.add3L(V,m,f);i=Se.add3H(h,B,M,g),n=h|0}({h:i,l:n}=Se.add(this.Ah|0,this.Al|0,i|0,n|0)),{h:s,l:o}=Se.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:c}=Se.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Se.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:v,l:x}=Se.add(this.Eh|0,this.El|0,v|0,x|0),{h:S,l:E}=Se.add(this.Fh|0,this.Fl|0,S|0,E|0),{h:I,l:C}=Se.add(this.Gh|0,this.Gl|0,I|0,C|0),{h:O,l:R}=Se.add(this.Hh|0,this.Hl|0,O|0,R|0),this.set(i,n,s,o,a,c,l,u,v,x,S,E,I,C,O,R)}roundClean(){_n.fill(0),xn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const G4=_4(()=>new V4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tf=BigInt(0),op=BigInt(1),J4=BigInt(2);function Ff(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Lf(t){if(!Ff(t))throw new Error("Uint8Array expected")}function Bf(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Z4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Uf(t){Lf(t);let e="";for(let r=0;r<t.length;r++)e+=Z4[t[r]];return e}function ap(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Tf:BigInt("0x"+t)}const Wi={_0:48,_9:57,A:65,F:70,a:97,f:102};function cp(t){if(t>=Wi._0&&t<=Wi._9)return t-Wi._0;if(t>=Wi.A&&t<=Wi.F)return t-(Wi.A-10);if(t>=Wi.a&&t<=Wi.f)return t-(Wi.a-10)}function lp(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(r);for(let n=0,s=0;n<r;n++,s+=2){const o=cp(t.charCodeAt(s)),a=cp(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}i[n]=o*16+a}return i}function Y4(t){return ap(Uf(t))}function dc(t){return Lf(t),ap(Uf(Uint8Array.from(t).reverse()))}function fp(t,e){return lp(t.toString(16).padStart(e*2,"0"))}function qf(t,e){return fp(t,e).reverse()}function Ki(t,e,r){let i;if(typeof e=="string")try{i=lp(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Ff(e))i=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const n=i.length;if(typeof r=="number"&&n!==r)throw new Error(t+" of length "+r+" expected, got "+n);return i}function hp(...t){let e=0;for(let i=0;i<t.length;i++){const n=t[i];Lf(n),e+=n.length}const r=new Uint8Array(e);for(let i=0,n=0;i<t.length;i++){const s=t[i];r.set(s,n),n+=s.length}return r}const jf=t=>typeof t=="bigint"&&Tf<=t;function X4(t,e,r){return jf(t)&&jf(e)&&jf(r)&&e<=t&&t<r}function Zo(t,e,r,i){if(!X4(e,r,i))throw new Error("expected valid "+t+": "+r+" <= n < "+i+", got "+e)}function Q4(t){let e;for(e=0;t>Tf;t>>=op,e+=1);return e}const e6=t=>(J4<<BigInt(t-1))-op,t6={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ff(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function kf(t,e,r={}){const i=(n,s,o)=>{const a=t6[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[n];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(n)+" is invalid. Expected "+s+", got "+c)};for(const[n,s]of Object.entries(e))i(n,s,!1);for(const[n,s]of Object.entries(r))i(n,s,!0);return t}function up(t){const e=new WeakMap;return(r,...i)=>{const n=e.get(r);if(n!==void 0)return n;const s=t(r,...i);return e.set(r,s),s}}const jt=BigInt(0),Dt=BigInt(1),ts=BigInt(2),r6=BigInt(3),zf=BigInt(4),dp=BigInt(5),pp=BigInt(8);function Lt(t,e){const r=t%e;return r>=jt?r:e+r}function i6(t,e,r){if(e<jt)throw new Error("invalid exponent, negatives unsupported");if(r<=jt)throw new Error("invalid modulus");if(r===Dt)return jt;let i=Dt;for(;e>jt;)e&Dt&&(i=i*t%r),t=t*t%r,e>>=Dt;return i}function Ai(t,e,r){let i=t;for(;e-- >jt;)i*=i,i%=r;return i}function gp(t,e){if(t===jt)throw new Error("invert: expected non-zero number");if(e<=jt)throw new Error("invert: expected positive modulus, got "+e);let r=Lt(t,e),i=e,n=jt,s=Dt;for(;r!==jt;){const o=i/r,a=i%r,c=n-s*o;i=r,r=a,n=s,s=c}if(i!==Dt)throw new Error("invert: does not exist");return Lt(n,e)}function n6(t){const e=(t-Dt)/ts;let r,i,n;for(r=t-Dt,i=0;r%ts===jt;r/=ts,i++);for(n=ts;n<t&&i6(n,e,t)!==t-Dt;n++)if(n>1e3)throw new Error("Cannot find square root: likely non-prime P");if(i===1){const o=(t+Dt)/zf;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const s=(r+Dt)/ts;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=i,l=o.pow(o.mul(o.ONE,n),r),u=o.pow(a,s),v=o.pow(a,r);for(;!o.eql(v,o.ONE);){if(o.eql(v,o.ZERO))return o.ZERO;let x=1;for(let E=o.sqr(v);x<c&&!o.eql(E,o.ONE);x++)E=o.sqr(E);const S=o.pow(l,Dt<<BigInt(c-x-1));l=o.sqr(S),u=o.mul(u,S),v=o.mul(v,l),c=x}return u}}function s6(t){if(t%zf===r6){const e=(t+Dt)/zf;return function(r,i){const n=r.pow(i,e);if(!r.eql(r.sqr(n),i))throw new Error("Cannot find square root");return n}}if(t%pp===dp){const e=(t-dp)/pp;return function(r,i){const n=r.mul(i,ts),s=r.pow(n,e),o=r.mul(i,s),a=r.mul(r.mul(o,ts),s),c=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return n6(t)}const o6=(t,e)=>(Lt(t,e)&Dt)===Dt,a6=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function c6(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=a6.reduce((i,n)=>(i[n]="function",i),e);return kf(t,r)}function l6(t,e,r){if(r<jt)throw new Error("invalid exponent, negatives unsupported");if(r===jt)return t.ONE;if(r===Dt)return e;let i=t.ONE,n=e;for(;r>jt;)r&Dt&&(i=t.mul(i,n)),n=t.sqr(n),r>>=Dt;return i}function f6(t,e){const r=new Array(e.length),i=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),n=t.inv(i);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),n),r}function vp(t,e){const r=e!==void 0?e:t.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function mp(t,e,r=!1,i={}){if(t<=jt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:n,nByteLength:s}=vp(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:n,BYTES:s,MASK:e6(n),ZERO:jt,ONE:Dt,create:c=>Lt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return jt<=c&&c<t},is0:c=>c===jt,isOdd:c=>(c&Dt)===Dt,neg:c=>Lt(-c,t),eql:(c,l)=>c===l,sqr:c=>Lt(c*c,t),add:(c,l)=>Lt(c+l,t),sub:(c,l)=>Lt(c-l,t),mul:(c,l)=>Lt(c*l,t),pow:(c,l)=>l6(a,c,l),div:(c,l)=>Lt(c*gp(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>gp(c,t),sqrt:i.sqrt||(c=>(o||(o=s6(t)),o(a,c))),invertBatch:c=>f6(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>r?qf(c,s):fp(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return r?dc(c):Y4(c)}});return Object.freeze(a)}const bp=BigInt(0),pc=BigInt(1);function Hf(t,e){const r=e.negate();return t?r:e}function yp(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Wf(t,e){yp(t,e);const r=Math.ceil(e/t)+1,i=2**(t-1);return{windows:r,windowSize:i}}function h6(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,i)=>{if(!(r instanceof e))throw new Error("invalid point at index "+i)})}function u6(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,i)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+i)})}const Kf=new WeakMap,wp=new WeakMap;function Vf(t){return wp.get(t)||1}function d6(t,e){return{constTimeNegate:Hf,hasPrecomputes(r){return Vf(r)!==1},unsafeLadder(r,i,n=t.ZERO){let s=r;for(;i>bp;)i&pc&&(n=n.add(s)),s=s.double(),i>>=pc;return n},precomputeWindow(r,i){const{windows:n,windowSize:s}=Wf(i,e),o=[];let a=r,c=a;for(let l=0;l<n;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(r,i,n){const{windows:s,windowSize:o}=Wf(r,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**r-1),u=2**r,v=BigInt(r);for(let x=0;x<s;x++){const S=x*o;let E=Number(n&l);n>>=v,E>o&&(E-=u,n+=pc);const I=S,C=S+Math.abs(E)-1,O=x%2!==0,R=E<0;E===0?c=c.add(Hf(O,i[I])):a=a.add(Hf(R,i[C]))}return{p:a,f:c}},wNAFUnsafe(r,i,n,s=t.ZERO){const{windows:o,windowSize:a}=Wf(r,e),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let v=0;v<o;v++){const x=v*a;if(n===bp)break;let S=Number(n&c);if(n>>=u,S>a&&(S-=l,n+=pc),S===0)continue;let E=i[x+Math.abs(S)-1];S<0&&(E=E.negate()),s=s.add(E)}return s},getPrecomputes(r,i,n){let s=Kf.get(i);return s||(s=this.precomputeWindow(i,r),r!==1&&Kf.set(i,n(s))),s},wNAFCached(r,i,n){const s=Vf(r);return this.wNAF(s,this.getPrecomputes(s,r,n),i)},wNAFCachedUnsafe(r,i,n,s){const o=Vf(r);return o===1?this.unsafeLadder(r,i,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,n),i,s)},setWindowSize(r,i){yp(i,e),wp.set(r,i),Kf.delete(r)}}}function p6(t,e,r,i){if(h6(r,t),u6(i,e),r.length!==i.length)throw new Error("arrays of points and scalars must have equal length");const n=t.ZERO,s=Q4(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(n),l=Math.floor((e.BITS-1)/o)*o;let u=n;for(let v=l;v>=0;v-=o){c.fill(n);for(let S=0;S<i.length;S++){const E=i[S],I=Number(E>>BigInt(v)&BigInt(a));c[I]=c[I].add(r[S])}let x=n;for(let S=c.length-1,E=n;S>0;S--)E=E.add(c[S]),x=x.add(E);if(u=u.add(x),v!==0)for(let S=0;S<o;S++)u=u.double()}return u}function g6(t){return c6(t.Fp),kf(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...vp(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const fi=BigInt(0),wr=BigInt(1),gc=BigInt(2),v6=BigInt(8),m6={zip215:!0};function b6(t){const e=g6(t);return kf(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function y6(t){const e=b6(t),{Fp:r,n:i,prehash:n,hash:s,randomBytes:o,nByteLength:a,h:c}=e,l=gc<<BigInt(a*8)-wr,u=r.create,v=mp(e.n,e.nBitLength),x=e.uvRatio||((h,p)=>{try{return{isValid:!0,value:r.sqrt(h*r.inv(p))}}catch{return{isValid:!1,value:fi}}}),S=e.adjustScalarBytes||(h=>h),E=e.domain||((h,p,_)=>{if(Bf("phflag",_),p.length||_)throw new Error("Contexts/pre-hash are not supported");return h});function I(h,p){Zo("coordinate "+h,p,fi,l)}function C(h){if(!(h instanceof N))throw new Error("ExtendedPoint expected")}const O=up((h,p)=>{const{ex:_,ey:$,ez:y}=h,d=h.is0();p==null&&(p=d?v6:r.inv(y));const w=u(_*p),b=u($*p),P=u(y*p);if(d)return{x:fi,y:wr};if(P!==wr)throw new Error("invZ was invalid");return{x:w,y:b}}),R=up(h=>{const{a:p,d:_}=e;if(h.is0())throw new Error("bad point: ZERO");const{ex:$,ey:y,ez:d,et:w}=h,b=u($*$),P=u(y*y),q=u(d*d),A=u(q*q),F=u(b*p),j=u(q*u(F+P)),k=u(A+u(_*u(b*P)));if(j!==k)throw new Error("bad point: equation left != right (1)");const H=u($*y),Z=u(d*w);if(H!==Z)throw new Error("bad point: equation left != right (2)");return!0});class N{constructor(p,_,$,y){this.ex=p,this.ey=_,this.ez=$,this.et=y,I("x",p),I("y",_),I("z",$),I("t",y),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(p){if(p instanceof N)throw new Error("extended point not allowed");const{x:_,y:$}=p||{};return I("x",_),I("y",$),new N(_,$,wr,u(_*$))}static normalizeZ(p){const _=r.invertBatch(p.map($=>$.ez));return p.map(($,y)=>$.toAffine(_[y])).map(N.fromAffine)}static msm(p,_){return p6(N,v,p,_)}_setWindowSize(p){z.setWindowSize(this,p)}assertValidity(){R(this)}equals(p){C(p);const{ex:_,ey:$,ez:y}=this,{ex:d,ey:w,ez:b}=p,P=u(_*b),q=u(d*y),A=u($*b),F=u(w*y);return P===q&&A===F}is0(){return this.equals(N.ZERO)}negate(){return new N(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:p}=e,{ex:_,ey:$,ez:y}=this,d=u(_*_),w=u($*$),b=u(gc*u(y*y)),P=u(p*d),q=_+$,A=u(u(q*q)-d-w),F=P+w,j=F-b,k=P-w,H=u(A*j),Z=u(F*k),X=u(A*k),J=u(j*F);return new N(H,Z,J,X)}add(p){C(p);const{a:_,d:$}=e,{ex:y,ey:d,ez:w,et:b}=this,{ex:P,ey:q,ez:A,et:F}=p;if(_===BigInt(-1)){const Le=u((d-y)*(q+P)),Be=u((d+y)*(q-P)),le=u(Be-Le);if(le===fi)return this.double();const Ue=u(w*gc*F),qe=u(b*gc*A),he=qe+Ue,je=Be+Le,ke=qe-Ue,ce=u(he*le),Te=u(je*ke),ze=u(he*ke),se=u(le*je);return new N(ce,Te,se,ze)}const j=u(y*P),k=u(d*q),H=u(b*$*F),Z=u(w*A),X=u((y+d)*(P+q)-j-k),J=Z-H,oe=Z+H,te=u(k-_*j),re=u(X*J),Ve=u(oe*te),Ge=u(X*te),ue=u(J*oe);return new N(re,Ve,ue,Ge)}subtract(p){return this.add(p.negate())}wNAF(p){return z.wNAFCached(this,p,N.normalizeZ)}multiply(p){const _=p;Zo("scalar",_,wr,i);const{p:$,f:y}=this.wNAF(_);return N.normalizeZ([$,y])[0]}multiplyUnsafe(p,_=N.ZERO){const $=p;return Zo("scalar",$,fi,i),$===fi?U:this.is0()||$===wr?this:z.wNAFCachedUnsafe(this,$,N.normalizeZ,_)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return z.unsafeLadder(this,i).is0()}toAffine(p){return O(this,p)}clearCofactor(){const{h:p}=e;return p===wr?this:this.multiplyUnsafe(p)}static fromHex(p,_=!1){const{d:$,a:y}=e,d=r.BYTES;p=Ki("pointHex",p,d),Bf("zip215",_);const w=p.slice(),b=p[d-1];w[d-1]=b&-129;const P=dc(w),q=_?l:r.ORDER;Zo("pointHex.y",P,fi,q);const A=u(P*P),F=u(A-wr),j=u($*A-y);let{isValid:k,value:H}=x(F,j);if(!k)throw new Error("Point.fromHex: invalid y coordinate");const Z=(H&wr)===wr,X=(b&128)!==0;if(!_&&H===fi&&X)throw new Error("Point.fromHex: x=0 and x_0=1");return X!==Z&&(H=u(-H)),N.fromAffine({x:H,y:P})}static fromPrivateKey(p){return B(p).point}toRawBytes(){const{x:p,y:_}=this.toAffine(),$=qf(_,r.BYTES);return $[$.length-1]|=p&wr?128:0,$}toHex(){return Uf(this.toRawBytes())}}N.BASE=new N(e.Gx,e.Gy,wr,u(e.Gx*e.Gy)),N.ZERO=new N(fi,wr,wr,fi);const{BASE:T,ZERO:U}=N,z=d6(N,a*8);function W(h){return Lt(h,i)}function K(h){return W(dc(h))}function B(h){const p=r.BYTES;h=Ki("private key",h,p);const _=Ki("hashed private key",s(h),2*p),$=S(_.slice(0,p)),y=_.slice(p,2*p),d=K($),w=T.multiply(d),b=w.toRawBytes();return{head:$,prefix:y,scalar:d,point:w,pointBytes:b}}function V(h){return B(h).pointBytes}function M(h=new Uint8Array,...p){const _=hp(...p);return K(s(E(_,Ki("context",h),!!n)))}function m(h,p,_={}){h=Ki("message",h),n&&(h=n(h));const{prefix:$,scalar:y,pointBytes:d}=B(p),w=M(_.context,$,h),b=T.multiply(w).toRawBytes(),P=M(_.context,b,d,h),q=W(w+P*y);Zo("signature.s",q,fi,i);const A=hp(b,qf(q,r.BYTES));return Ki("result",A,r.BYTES*2)}const g=m6;function f(h,p,_,$=g){const{context:y,zip215:d}=$,w=r.BYTES;h=Ki("signature",h,2*w),p=Ki("message",p),_=Ki("publicKey",_,w),d!==void 0&&Bf("zip215",d),n&&(p=n(p));const b=dc(h.slice(w,2*w));let P,q,A;try{P=N.fromHex(_,d),q=N.fromHex(h.slice(0,w),d),A=T.multiplyUnsafe(b)}catch{return!1}if(!d&&P.isSmallOrder())return!1;const F=M(y,q.toRawBytes(),P.toRawBytes(),p);return q.add(P.multiplyUnsafe(F)).subtract(A).clearCofactor().equals(N.ZERO)}return T._setWindowSize(8),{CURVE:e,getPublicKey:V,sign:m,verify:f,ExtendedPoint:N,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>o(r.BYTES),precompute(h=8,p=N.BASE){return p._setWindowSize(h),p.multiply(BigInt(3)),p}}}}BigInt(0),BigInt(1);const Gf=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),_p=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const w6=BigInt(1),xp=BigInt(2);BigInt(3);const _6=BigInt(5),x6=BigInt(8);function E6(t){const e=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=Gf,o=t*t%s*t%s,a=Ai(o,xp,s)*o%s,c=Ai(a,w6,s)*t%s,l=Ai(c,_6,s)*c%s,u=Ai(l,e,s)*l%s,v=Ai(u,r,s)*u%s,x=Ai(v,i,s)*v%s,S=Ai(x,n,s)*x%s,E=Ai(S,n,s)*x%s,I=Ai(E,e,s)*l%s;return{pow_p_5_8:Ai(I,xp,s)*t%s,b2:o}}function $6(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function S6(t,e){const r=Gf,i=Lt(e*e*e,r),n=Lt(i*i*e,r),s=E6(t*n).pow_p_5_8;let o=Lt(t*i*s,r);const a=Lt(e*o*o,r),c=o,l=Lt(o*_p,r),u=a===t,v=a===Lt(-t,r),x=a===Lt(-t*_p,r);return u&&(o=c),(v||x)&&(o=l),o6(o,r)&&(o=Lt(-o,r)),{isValid:u||v,value:o}}const A6=(()=>mp(Gf,void 0,!0))(),I6=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:A6,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:x6,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:G4,randomBytes:np,adjustScalarBytes:$6,uvRatio:S6}))(),Ep=(()=>y6(I6))(),M6="EdDSA",P6="JWT",vc=".",mc="base64url",$p="utf8",Sp="utf8",O6=":",C6="did",D6="key",Ap="base58btc",R6="z",N6="K36",T6=32;function Jf(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Ip(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Jf(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Mp(t,e){e||(e=t.reduce((n,s)=>n+s.length,0));const r=Ip(e);let i=0;for(const n of t)r.set(n,i),i+=n.length;return Jf(r)}function F6(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function v(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var I=0,C=0,O=0,R=E.length;O!==R&&E[O]===0;)O++,I++;for(var N=(R-O)*u+1>>>0,T=new Uint8Array(N);O!==R;){for(var U=E[O],z=0,W=N-1;(U!==0||z<C)&&W!==-1;W--,z++)U+=256*T[W]>>>0,T[W]=U%a>>>0,U=U/a>>>0;if(U!==0)throw new Error("Non-zero carry");C=z,O++}for(var K=N-C;K!==N&&T[K]===0;)K++;for(var B=c.repeat(I);K<N;++K)B+=t.charAt(T[K]);return B}function x(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var I=0;if(E[I]!==" "){for(var C=0,O=0;E[I]===c;)C++,I++;for(var R=(E.length-I)*l+1>>>0,N=new Uint8Array(R);E[I];){var T=r[E.charCodeAt(I)];if(T===255)return;for(var U=0,z=R-1;(T!==0||U<O)&&z!==-1;z--,U++)T+=a*N[z]>>>0,N[z]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");O=U,I++}if(E[I]!==" "){for(var W=R-O;W!==R&&N[W]===0;)W++;for(var K=new Uint8Array(C+(R-W)),B=C;W!==R;)K[B++]=N[W++];return K}}}function S(E){var I=x(E);if(I)return I;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:x,decode:S}}var L6=F6,B6=L6;const Pp=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},U6=t=>new TextEncoder().encode(t),q6=t=>new TextDecoder().decode(t);class j6{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class k6{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Op(this,e)}}class z6{constructor(e){this.decoders=e}or(e){return Op(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Op=(t,e)=>new z6({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class H6{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new j6(e,r,i),this.decoder=new k6(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const bc=({name:t,prefix:e,encode:r,decode:i})=>new H6(t,e,r,i),Yo=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:n}=B6(r,e);return bc({prefix:t,name:e,encode:i,decode:s=>Pp(n(s))})},W6=(t,e,r,i)=>{const n={};for(let u=0;u<e.length;++u)n[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const v=n[t[u]];if(v===void 0)throw new SyntaxError(`Non-${i} character`);c=c<<r|v,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},K6=(t,e,r)=>{const i=e[e.length-1]==="=",n=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},Qt=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>bc({prefix:e,name:t,encode(n){return K6(n,i,r)},decode(n){return W6(n,i,r,t)}}),V6=bc({prefix:"\0",name:"identity",encode:t=>q6(t),decode:t=>U6(t)});var G6=Object.freeze({__proto__:null,identity:V6});const J6=Qt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Z6=Object.freeze({__proto__:null,base2:J6});const Y6=Qt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var X6=Object.freeze({__proto__:null,base8:Y6});const Q6=Yo({prefix:"9",name:"base10",alphabet:"0123456789"});var e5=Object.freeze({__proto__:null,base10:Q6});const t5=Qt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),r5=Qt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var i5=Object.freeze({__proto__:null,base16:t5,base16upper:r5});const n5=Qt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),s5=Qt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),o5=Qt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),a5=Qt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),c5=Qt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),l5=Qt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),f5=Qt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),h5=Qt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),u5=Qt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var d5=Object.freeze({__proto__:null,base32:n5,base32upper:s5,base32pad:o5,base32padupper:a5,base32hex:c5,base32hexupper:l5,base32hexpad:f5,base32hexpadupper:h5,base32z:u5});const p5=Yo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),g5=Yo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var v5=Object.freeze({__proto__:null,base36:p5,base36upper:g5});const m5=Yo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),b5=Yo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var y5=Object.freeze({__proto__:null,base58btc:m5,base58flickr:b5});const w5=Qt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_5=Qt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),x5=Qt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),E5=Qt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var $5=Object.freeze({__proto__:null,base64:w5,base64pad:_5,base64url:x5,base64urlpad:E5});const Cp=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),S5=Cp.reduce((t,e,r)=>(t[r]=e,t),[]),A5=Cp.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function I5(t){return t.reduce((e,r)=>(e+=S5[r],e),"")}function M5(t){const e=[];for(const r of t){const i=A5[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const P5=bc({prefix:"\u{1F680}",name:"base256emoji",encode:I5,decode:M5});var O5=Object.freeze({__proto__:null,base256emoji:P5}),C5=Rp,Dp=128,D5=127,R5=~D5,N5=Math.pow(2,31);function Rp(t,e,r){e=e||[],r=r||0;for(var i=r;t>=N5;)e[r++]=t&255|Dp,t/=128;for(;t&R5;)e[r++]=t&255|Dp,t>>>=7;return e[r]=t|0,Rp.bytes=r-i+1,e}var T5=Zf,F5=128,Np=127;function Zf(t,i){var r=0,i=i||0,n=0,s=i,o,a=t.length;do{if(s>=a)throw Zf.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=n<28?(o&Np)<<n:(o&Np)*Math.pow(2,n),n+=7}while(o>=F5);return Zf.bytes=s-i,r}var L5=Math.pow(2,7),B5=Math.pow(2,14),U5=Math.pow(2,21),q5=Math.pow(2,28),j5=Math.pow(2,35),k5=Math.pow(2,42),z5=Math.pow(2,49),H5=Math.pow(2,56),W5=Math.pow(2,63),K5=function(t){return t<L5?1:t<B5?2:t<U5?3:t<q5?4:t<j5?5:t<k5?6:t<z5?7:t<H5?8:t<W5?9:10},V5={encode:C5,decode:T5,encodingLength:K5},Tp=V5;const Fp=(t,e,r=0)=>(Tp.encode(t,e,r),e),Lp=t=>Tp.encodingLength(t),Yf=(t,e)=>{const r=e.byteLength,i=Lp(t),n=i+Lp(r),s=new Uint8Array(n+r);return Fp(t,s,0),Fp(r,s,i),s.set(e,n),new G5(t,r,e,s)};class G5{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}const Bp=({name:t,code:e,encode:r})=>new J5(t,e,r);class J5{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Yf(this.code,r):r.then(i=>Yf(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Up=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Z5=Bp({name:"sha2-256",code:18,encode:Up("SHA-256")}),Y5=Bp({name:"sha2-512",code:19,encode:Up("SHA-512")});var X5=Object.freeze({__proto__:null,sha256:Z5,sha512:Y5});const qp=0,Q5="identity",jp=Pp;var e8=Object.freeze({__proto__:null,identity:{code:qp,name:Q5,encode:jp,digest:t=>Yf(qp,jp(t))}});new TextEncoder,new TextDecoder;const kp={...G6,...Z6,...X6,...e5,...i5,...d5,...v5,...y5,...$5,...O5};({...X5,...e8});function zp(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const Hp=zp("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Xf=zp("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Ip(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Wp={utf8:Hp,"utf-8":Hp,hex:kp.base16,latin1:Xf,ascii:Xf,binary:Xf,...kp};function yc(t,e="utf8"){const r=Wp[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Gs(t,e="utf8"){const r=Wp[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Jf(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function Kp(t){return es(yc(Gs(t,mc),$p))}function wc(t){return yc(Gs(Hi(t),$p),mc)}function Vp(t){const e=Gs(N6,Ap),r=R6+yc(Mp([e,t]),Ap);return[C6,D6,r].join(O6)}function t8(t){return yc(t,mc)}function r8(t){return Gs(t,mc)}function i8(t){return Gs([wc(t.header),wc(t.payload)].join(vc),Sp)}function n8(t){return[wc(t.header),wc(t.payload),t8(t.signature)].join(vc)}function Qf(t){const e=t.split(vc),r=Kp(e[0]),i=Kp(e[1]),n=r8(e[2]),s=Gs(e.slice(0,2).join(vc),Sp);return{header:r,payload:i,signature:n,data:s}}function Gp(t=np(T6)){const e=Ep.getPublicKey(t);return{secretKey:Mp([t,e]),publicKey:e}}async function s8(t,e,r,i,n=Y.fromMiliseconds(Date.now())){const s={alg:M6,typ:P6},o=Vp(i.publicKey),a=n+r,c={iss:o,sub:t,aud:e,iat:n,exp:a},l=i8({header:s,payload:c}),u=Ep.sign(l,i.secretKey.slice(0,32));return n8({header:s,payload:c,signature:u})}function Jp(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function eh(t,e){e||(e=t.reduce((n,s)=>n+s.length,0));const r=Jp(e);let i=0;for(const n of t)r.set(n,i),i+=n.length;return r}function o8(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function v(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var I=0,C=0,O=0,R=E.length;O!==R&&E[O]===0;)O++,I++;for(var N=(R-O)*u+1>>>0,T=new Uint8Array(N);O!==R;){for(var U=E[O],z=0,W=N-1;(U!==0||z<C)&&W!==-1;W--,z++)U+=256*T[W]>>>0,T[W]=U%a>>>0,U=U/a>>>0;if(U!==0)throw new Error("Non-zero carry");C=z,O++}for(var K=N-C;K!==N&&T[K]===0;)K++;for(var B=c.repeat(I);K<N;++K)B+=t.charAt(T[K]);return B}function x(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var I=0;if(E[I]!==" "){for(var C=0,O=0;E[I]===c;)C++,I++;for(var R=(E.length-I)*l+1>>>0,N=new Uint8Array(R);E[I];){var T=r[E.charCodeAt(I)];if(T===255)return;for(var U=0,z=R-1;(T!==0||U<O)&&z!==-1;z--,U++)T+=a*N[z]>>>0,N[z]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");O=U,I++}if(E[I]!==" "){for(var W=R-O;W!==R&&N[W]===0;)W++;for(var K=new Uint8Array(C+(R-W)),B=C;W!==R;)K[B++]=N[W++];return K}}}function S(E){var I=x(E);if(I)return I;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:x,decode:S}}var a8=o8,c8=a8;const Zp=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},l8=t=>new TextEncoder().encode(t),f8=t=>new TextDecoder().decode(t);class h8{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class u8{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Yp(this,e)}}class d8{constructor(e){this.decoders=e}or(e){return Yp(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Yp=(t,e)=>new d8({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class p8{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new h8(e,r,i),this.decoder=new u8(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const _c=({name:t,prefix:e,encode:r,decode:i})=>new p8(t,e,r,i),Xo=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:n}=c8(r,e);return _c({prefix:t,name:e,encode:i,decode:s=>Zp(n(s))})},g8=(t,e,r,i)=>{const n={};for(let u=0;u<e.length;++u)n[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const v=n[t[u]];if(v===void 0)throw new SyntaxError(`Non-${i} character`);c=c<<r|v,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},v8=(t,e,r)=>{const i=e[e.length-1]==="=",n=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},er=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>_c({prefix:e,name:t,encode(n){return v8(n,i,r)},decode(n){return g8(n,i,r,t)}}),m8=_c({prefix:"\0",name:"identity",encode:t=>f8(t),decode:t=>l8(t)});var b8=Object.freeze({__proto__:null,identity:m8});const y8=er({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var w8=Object.freeze({__proto__:null,base2:y8});const _8=er({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var x8=Object.freeze({__proto__:null,base8:_8});const E8=Xo({prefix:"9",name:"base10",alphabet:"0123456789"});var $8=Object.freeze({__proto__:null,base10:E8});const S8=er({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),A8=er({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var I8=Object.freeze({__proto__:null,base16:S8,base16upper:A8});const M8=er({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),P8=er({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),O8=er({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),C8=er({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),D8=er({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),R8=er({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),N8=er({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),T8=er({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),F8=er({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var L8=Object.freeze({__proto__:null,base32:M8,base32upper:P8,base32pad:O8,base32padupper:C8,base32hex:D8,base32hexupper:R8,base32hexpad:N8,base32hexpadupper:T8,base32z:F8});const B8=Xo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),U8=Xo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var q8=Object.freeze({__proto__:null,base36:B8,base36upper:U8});const j8=Xo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),k8=Xo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var z8=Object.freeze({__proto__:null,base58btc:j8,base58flickr:k8});const H8=er({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),W8=er({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),K8=er({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),V8=er({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var G8=Object.freeze({__proto__:null,base64:H8,base64pad:W8,base64url:K8,base64urlpad:V8});const Xp=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),J8=Xp.reduce((t,e,r)=>(t[r]=e,t),[]),Z8=Xp.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Y8(t){return t.reduce((e,r)=>(e+=J8[r],e),"")}function X8(t){const e=[];for(const r of t){const i=Z8[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const Q8=_c({prefix:"\u{1F680}",name:"base256emoji",encode:Y8,decode:X8});var e7=Object.freeze({__proto__:null,base256emoji:Q8}),t7=e1,Qp=128,r7=127,i7=~r7,n7=Math.pow(2,31);function e1(t,e,r){e=e||[],r=r||0;for(var i=r;t>=n7;)e[r++]=t&255|Qp,t/=128;for(;t&i7;)e[r++]=t&255|Qp,t>>>=7;return e[r]=t|0,e1.bytes=r-i+1,e}var s7=th,o7=128,t1=127;function th(t,i){var r=0,i=i||0,n=0,s=i,o,a=t.length;do{if(s>=a)throw th.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=n<28?(o&t1)<<n:(o&t1)*Math.pow(2,n),n+=7}while(o>=o7);return th.bytes=s-i,r}var a7=Math.pow(2,7),c7=Math.pow(2,14),l7=Math.pow(2,21),f7=Math.pow(2,28),h7=Math.pow(2,35),u7=Math.pow(2,42),d7=Math.pow(2,49),p7=Math.pow(2,56),g7=Math.pow(2,63),v7=function(t){return t<a7?1:t<c7?2:t<l7?3:t<f7?4:t<h7?5:t<u7?6:t<d7?7:t<p7?8:t<g7?9:10},m7={encode:t7,decode:s7,encodingLength:v7},r1=m7;const i1=(t,e,r=0)=>(r1.encode(t,e,r),e),n1=t=>r1.encodingLength(t),rh=(t,e)=>{const r=e.byteLength,i=n1(t),n=i+n1(r),s=new Uint8Array(n+r);return i1(t,s,0),i1(r,s,i),s.set(e,n),new b7(t,r,e,s)};class b7{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}const s1=({name:t,code:e,encode:r})=>new y7(t,e,r);class y7{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?rh(this.code,r):r.then(i=>rh(this.code,i))}else throw Error("Unknown type, must be binary type")}}const o1=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),w7=s1({name:"sha2-256",code:18,encode:o1("SHA-256")}),_7=s1({name:"sha2-512",code:19,encode:o1("SHA-512")});var x7=Object.freeze({__proto__:null,sha256:w7,sha512:_7});const a1=0,E7="identity",c1=Zp;var $7=Object.freeze({__proto__:null,identity:{code:a1,name:E7,encode:c1,digest:t=>rh(a1,c1(t))}});new TextEncoder,new TextDecoder;const l1={...b8,...w8,...x8,...$8,...I8,...L8,...q8,...z8,...G8,...e7};({...x7,...$7});function f1(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const h1=f1("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ih=f1("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Jp(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),u1={utf8:h1,"utf-8":h1,hex:l1.base16,latin1:ih,ascii:ih,binary:ih,...l1};function Kr(t,e="utf8"){const r=u1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function dr(t,e="utf8"){const r=u1[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var d1={},S7="elliptic",A7="6.6.1",I7="EC cryptography",M7="lib/elliptic.js",P7=["lib"],O7={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},C7={type:"git",url:"git@github.com:indutny/elliptic"},D7=["EC","Elliptic","curve","Cryptography"],R7="Fedor Indutny <fedor@indutny.com>",N7="MIT",T7={url:"https://github.com/indutny/elliptic/issues"},F7="https://github.com/indutny/elliptic",L7={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},B7={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},U7={name:S7,version:A7,description:I7,main:M7,files:P7,scripts:O7,repository:C7,keywords:D7,author:R7,license:N7,bugs:T7,homepage:F7,devDependencies:L7,dependencies:B7},Nr={},Ii={exports:{}};(function(t){(function(e,r){function i(M,m){if(!M)throw new Error(m||"Assertion failed")}function n(M,m){M.super_=m;var g=function(){};g.prototype=m.prototype,M.prototype=new g,M.prototype.constructor=M}function s(M,m,g){if(s.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((m==="le"||m==="be")&&(g=m,m=10),this._init(M||0,m||10,g||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=gf.Buffer}catch{}s.isBN=function(m){return m instanceof s?!0:m!==null&&typeof m=="object"&&m.constructor.wordSize===s.wordSize&&Array.isArray(m.words)},s.max=function(m,g){return m.cmp(g)>0?m:g},s.min=function(m,g){return m.cmp(g)<0?m:g},s.prototype._init=function(m,g,f){if(typeof m=="number")return this._initNumber(m,g,f);if(typeof m=="object")return this._initArray(m,g,f);g==="hex"&&(g=16),i(g===(g|0)&&g>=2&&g<=36),m=m.toString().replace(/\s+/g,"");var h=0;m[0]==="-"&&(h++,this.negative=1),h<m.length&&(g===16?this._parseHex(m,h,f):(this._parseBase(m,g,h),f==="le"&&this._initArray(this.toArray(),g,f)))},s.prototype._initNumber=function(m,g,f){m<0&&(this.negative=1,m=-m),m<67108864?(this.words=[m&67108863],this.length=1):m<4503599627370496?(this.words=[m&67108863,m/67108864&67108863],this.length=2):(i(m<9007199254740992),this.words=[m&67108863,m/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),g,f)},s.prototype._initArray=function(m,g,f){if(i(typeof m.length=="number"),m.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(m.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var p,_,$=0;if(f==="be")for(h=m.length-1,p=0;h>=0;h-=3)_=m[h]|m[h-1]<<8|m[h-2]<<16,this.words[p]|=_<<$&67108863,this.words[p+1]=_>>>26-$&67108863,$+=24,$>=26&&($-=26,p++);else if(f==="le")for(h=0,p=0;h<m.length;h+=3)_=m[h]|m[h+1]<<8|m[h+2]<<16,this.words[p]|=_<<$&67108863,this.words[p+1]=_>>>26-$&67108863,$+=24,$>=26&&($-=26,p++);return this.strip()};function a(M,m){var g=M.charCodeAt(m);return g>=65&&g<=70?g-55:g>=97&&g<=102?g-87:g-48&15}function c(M,m,g){var f=a(M,g);return g-1>=m&&(f|=a(M,g-1)<<4),f}s.prototype._parseHex=function(m,g,f){this.length=Math.ceil((m.length-g)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var p=0,_=0,$;if(f==="be")for(h=m.length-1;h>=g;h-=2)$=c(m,g,h)<<p,this.words[_]|=$&67108863,p>=18?(p-=18,_+=1,this.words[_]|=$>>>26):p+=8;else{var y=m.length-g;for(h=y%2===0?g+1:g;h<m.length;h+=2)$=c(m,g,h)<<p,this.words[_]|=$&67108863,p>=18?(p-=18,_+=1,this.words[_]|=$>>>26):p+=8}this.strip()};function l(M,m,g,f){for(var h=0,p=Math.min(M.length,g),_=m;_<p;_++){var $=M.charCodeAt(_)-48;h*=f,$>=49?h+=$-49+10:$>=17?h+=$-17+10:h+=$}return h}s.prototype._parseBase=function(m,g,f){this.words=[0],this.length=1;for(var h=0,p=1;p<=67108863;p*=g)h++;h--,p=p/g|0;for(var _=m.length-f,$=_%h,y=Math.min(_,_-$)+f,d=0,w=f;w<y;w+=h)d=l(m,w,w+h,g),this.imuln(p),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if($!==0){var b=1;for(d=l(m,w,m.length,g),w=0;w<$;w++)b*=g;this.imuln(b),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},s.prototype.copy=function(m){m.words=new Array(this.length);for(var g=0;g<this.length;g++)m.words[g]=this.words[g];m.length=this.length,m.negative=this.negative,m.red=this.red},s.prototype.clone=function(){var m=new s(null);return this.copy(m),m},s.prototype._expand=function(m){for(;this.length<m;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(m,g){m=m||10,g=g|0||1;var f;if(m===16||m==="hex"){f="";for(var h=0,p=0,_=0;_<this.length;_++){var $=this.words[_],y=(($<<h|p)&16777215).toString(16);p=$>>>24-h&16777215,h+=2,h>=26&&(h-=26,_--),p!==0||_!==this.length-1?f=u[6-y.length]+y+f:f=y+f}for(p!==0&&(f=p.toString(16)+f);f.length%g!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(m===(m|0)&&m>=2&&m<=36){var d=v[m],w=x[m];f="";var b=this.clone();for(b.negative=0;!b.isZero();){var P=b.modn(w).toString(m);b=b.idivn(w),b.isZero()?f=P+f:f=u[d-P.length]+P+f}for(this.isZero()&&(f="0"+f);f.length%g!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var m=this.words[0];return this.length===2?m+=this.words[1]*67108864:this.length===3&&this.words[2]===1?m+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-m:m},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(m,g){return i(typeof o<"u"),this.toArrayLike(o,m,g)},s.prototype.toArray=function(m,g){return this.toArrayLike(Array,m,g)},s.prototype.toArrayLike=function(m,g,f){var h=this.byteLength(),p=f||Math.max(1,h);i(h<=p,"byte array longer than desired length"),i(p>0,"Requested array length <= 0"),this.strip();var _=g==="le",$=new m(p),y,d,w=this.clone();if(_){for(d=0;!w.isZero();d++)y=w.andln(255),w.iushrn(8),$[d]=y;for(;d<p;d++)$[d]=0}else{for(d=0;d<p-h;d++)$[d]=0;for(d=0;!w.isZero();d++)y=w.andln(255),w.iushrn(8),$[p-d-1]=y}return $},Math.clz32?s.prototype._countBits=function(m){return 32-Math.clz32(m)}:s.prototype._countBits=function(m){var g=m,f=0;return g>=4096&&(f+=13,g>>>=13),g>=64&&(f+=7,g>>>=7),g>=8&&(f+=4,g>>>=4),g>=2&&(f+=2,g>>>=2),f+g},s.prototype._zeroBits=function(m){if(m===0)return 26;var g=m,f=0;return g&8191||(f+=13,g>>>=13),g&127||(f+=7,g>>>=7),g&15||(f+=4,g>>>=4),g&3||(f+=2,g>>>=2),g&1||f++,f},s.prototype.bitLength=function(){var m=this.words[this.length-1],g=this._countBits(m);return(this.length-1)*26+g};function S(M){for(var m=new Array(M.bitLength()),g=0;g<m.length;g++){var f=g/26|0,h=g%26;m[g]=(M.words[f]&1<<h)>>>h}return m}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var m=0,g=0;g<this.length;g++){var f=this._zeroBits(this.words[g]);if(m+=f,f!==26)break}return m},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(m){return this.negative!==0?this.abs().inotn(m).iaddn(1):this.clone()},s.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(m){for(;this.length<m.length;)this.words[this.length++]=0;for(var g=0;g<m.length;g++)this.words[g]=this.words[g]|m.words[g];return this.strip()},s.prototype.ior=function(m){return i((this.negative|m.negative)===0),this.iuor(m)},s.prototype.or=function(m){return this.length>m.length?this.clone().ior(m):m.clone().ior(this)},s.prototype.uor=function(m){return this.length>m.length?this.clone().iuor(m):m.clone().iuor(this)},s.prototype.iuand=function(m){var g;this.length>m.length?g=m:g=this;for(var f=0;f<g.length;f++)this.words[f]=this.words[f]&m.words[f];return this.length=g.length,this.strip()},s.prototype.iand=function(m){return i((this.negative|m.negative)===0),this.iuand(m)},s.prototype.and=function(m){return this.length>m.length?this.clone().iand(m):m.clone().iand(this)},s.prototype.uand=function(m){return this.length>m.length?this.clone().iuand(m):m.clone().iuand(this)},s.prototype.iuxor=function(m){var g,f;this.length>m.length?(g=this,f=m):(g=m,f=this);for(var h=0;h<f.length;h++)this.words[h]=g.words[h]^f.words[h];if(this!==g)for(;h<g.length;h++)this.words[h]=g.words[h];return this.length=g.length,this.strip()},s.prototype.ixor=function(m){return i((this.negative|m.negative)===0),this.iuxor(m)},s.prototype.xor=function(m){return this.length>m.length?this.clone().ixor(m):m.clone().ixor(this)},s.prototype.uxor=function(m){return this.length>m.length?this.clone().iuxor(m):m.clone().iuxor(this)},s.prototype.inotn=function(m){i(typeof m=="number"&&m>=0);var g=Math.ceil(m/26)|0,f=m%26;this._expand(g),f>0&&g--;for(var h=0;h<g;h++)this.words[h]=~this.words[h]&67108863;return f>0&&(this.words[h]=~this.words[h]&67108863>>26-f),this.strip()},s.prototype.notn=function(m){return this.clone().inotn(m)},s.prototype.setn=function(m,g){i(typeof m=="number"&&m>=0);var f=m/26|0,h=m%26;return this._expand(f+1),g?this.words[f]=this.words[f]|1<<h:this.words[f]=this.words[f]&~(1<<h),this.strip()},s.prototype.iadd=function(m){var g;if(this.negative!==0&&m.negative===0)return this.negative=0,g=this.isub(m),this.negative^=1,this._normSign();if(this.negative===0&&m.negative!==0)return m.negative=0,g=this.isub(m),m.negative=1,g._normSign();var f,h;this.length>m.length?(f=this,h=m):(f=m,h=this);for(var p=0,_=0;_<h.length;_++)g=(f.words[_]|0)+(h.words[_]|0)+p,this.words[_]=g&67108863,p=g>>>26;for(;p!==0&&_<f.length;_++)g=(f.words[_]|0)+p,this.words[_]=g&67108863,p=g>>>26;if(this.length=f.length,p!==0)this.words[this.length]=p,this.length++;else if(f!==this)for(;_<f.length;_++)this.words[_]=f.words[_];return this},s.prototype.add=function(m){var g;return m.negative!==0&&this.negative===0?(m.negative=0,g=this.sub(m),m.negative^=1,g):m.negative===0&&this.negative!==0?(this.negative=0,g=m.sub(this),this.negative=1,g):this.length>m.length?this.clone().iadd(m):m.clone().iadd(this)},s.prototype.isub=function(m){if(m.negative!==0){m.negative=0;var g=this.iadd(m);return m.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(m),this.negative=1,this._normSign();var f=this.cmp(m);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,p;f>0?(h=this,p=m):(h=m,p=this);for(var _=0,$=0;$<p.length;$++)g=(h.words[$]|0)-(p.words[$]|0)+_,_=g>>26,this.words[$]=g&67108863;for(;_!==0&&$<h.length;$++)g=(h.words[$]|0)+_,_=g>>26,this.words[$]=g&67108863;if(_===0&&$<h.length&&h!==this)for(;$<h.length;$++)this.words[$]=h.words[$];return this.length=Math.max(this.length,$),h!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(m){return this.clone().isub(m)};function E(M,m,g){g.negative=m.negative^M.negative;var f=M.length+m.length|0;g.length=f,f=f-1|0;var h=M.words[0]|0,p=m.words[0]|0,_=h*p,$=_&67108863,y=_/67108864|0;g.words[0]=$;for(var d=1;d<f;d++){for(var w=y>>>26,b=y&67108863,P=Math.min(d,m.length-1),q=Math.max(0,d-M.length+1);q<=P;q++){var A=d-q|0;h=M.words[A]|0,p=m.words[q]|0,_=h*p+b,w+=_/67108864|0,b=_&67108863}g.words[d]=b|0,y=w|0}return y!==0?g.words[d]=y|0:g.length--,g.strip()}var I=function(m,g,f){var h=m.words,p=g.words,_=f.words,$=0,y,d,w,b=h[0]|0,P=b&8191,q=b>>>13,A=h[1]|0,F=A&8191,j=A>>>13,k=h[2]|0,H=k&8191,Z=k>>>13,X=h[3]|0,J=X&8191,oe=X>>>13,te=h[4]|0,re=te&8191,Ve=te>>>13,Ge=h[5]|0,ue=Ge&8191,Le=Ge>>>13,Be=h[6]|0,le=Be&8191,Ue=Be>>>13,qe=h[7]|0,he=qe&8191,je=qe>>>13,ke=h[8]|0,ce=ke&8191,Te=ke>>>13,ze=h[9]|0,se=ze&8191,et=ze>>>13,tt=p[0]|0,ve=tt&8191,rt=tt>>>13,He=p[1]|0,pe=He&8191,it=He>>>13,at=p[2]|0,ae=at&8191,nt=at>>>13,ct=p[3]|0,me=ct&8191,Je=ct>>>13,Fe=p[4]|0,de=Fe&8191,Ze=Fe>>>13,Ye=p[5]|0,fe=Ye&8191,lt=Ye>>>13,ft=p[6]|0,be=ft&8191,ht=ft>>>13,ut=p[7]|0,ge=ut&8191,Xe=ut>>>13,De=p[8]|0,ye=De&8191,dt=De>>>13,pt=p[9]|0,we=pt&8191,gt=pt>>>13;f.negative=m.negative^g.negative,f.length=19,y=Math.imul(P,ve),d=Math.imul(P,rt),d=d+Math.imul(q,ve)|0,w=Math.imul(q,rt);var Ae=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,y=Math.imul(F,ve),d=Math.imul(F,rt),d=d+Math.imul(j,ve)|0,w=Math.imul(j,rt),y=y+Math.imul(P,pe)|0,d=d+Math.imul(P,it)|0,d=d+Math.imul(q,pe)|0,w=w+Math.imul(q,it)|0;var st=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(st>>>26)|0,st&=67108863,y=Math.imul(H,ve),d=Math.imul(H,rt),d=d+Math.imul(Z,ve)|0,w=Math.imul(Z,rt),y=y+Math.imul(F,pe)|0,d=d+Math.imul(F,it)|0,d=d+Math.imul(j,pe)|0,w=w+Math.imul(j,it)|0,y=y+Math.imul(P,ae)|0,d=d+Math.imul(P,nt)|0,d=d+Math.imul(q,ae)|0,w=w+Math.imul(q,nt)|0;var Ir=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(Ir>>>26)|0,Ir&=67108863,y=Math.imul(J,ve),d=Math.imul(J,rt),d=d+Math.imul(oe,ve)|0,w=Math.imul(oe,rt),y=y+Math.imul(H,pe)|0,d=d+Math.imul(H,it)|0,d=d+Math.imul(Z,pe)|0,w=w+Math.imul(Z,it)|0,y=y+Math.imul(F,ae)|0,d=d+Math.imul(F,nt)|0,d=d+Math.imul(j,ae)|0,w=w+Math.imul(j,nt)|0,y=y+Math.imul(P,me)|0,d=d+Math.imul(P,Je)|0,d=d+Math.imul(q,me)|0,w=w+Math.imul(q,Je)|0;var Mr=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,y=Math.imul(re,ve),d=Math.imul(re,rt),d=d+Math.imul(Ve,ve)|0,w=Math.imul(Ve,rt),y=y+Math.imul(J,pe)|0,d=d+Math.imul(J,it)|0,d=d+Math.imul(oe,pe)|0,w=w+Math.imul(oe,it)|0,y=y+Math.imul(H,ae)|0,d=d+Math.imul(H,nt)|0,d=d+Math.imul(Z,ae)|0,w=w+Math.imul(Z,nt)|0,y=y+Math.imul(F,me)|0,d=d+Math.imul(F,Je)|0,d=d+Math.imul(j,me)|0,w=w+Math.imul(j,Je)|0,y=y+Math.imul(P,de)|0,d=d+Math.imul(P,Ze)|0,d=d+Math.imul(q,de)|0,w=w+Math.imul(q,Ze)|0;var Pr=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,y=Math.imul(ue,ve),d=Math.imul(ue,rt),d=d+Math.imul(Le,ve)|0,w=Math.imul(Le,rt),y=y+Math.imul(re,pe)|0,d=d+Math.imul(re,it)|0,d=d+Math.imul(Ve,pe)|0,w=w+Math.imul(Ve,it)|0,y=y+Math.imul(J,ae)|0,d=d+Math.imul(J,nt)|0,d=d+Math.imul(oe,ae)|0,w=w+Math.imul(oe,nt)|0,y=y+Math.imul(H,me)|0,d=d+Math.imul(H,Je)|0,d=d+Math.imul(Z,me)|0,w=w+Math.imul(Z,Je)|0,y=y+Math.imul(F,de)|0,d=d+Math.imul(F,Ze)|0,d=d+Math.imul(j,de)|0,w=w+Math.imul(j,Ze)|0,y=y+Math.imul(P,fe)|0,d=d+Math.imul(P,lt)|0,d=d+Math.imul(q,fe)|0,w=w+Math.imul(q,lt)|0;var Or=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(Or>>>26)|0,Or&=67108863,y=Math.imul(le,ve),d=Math.imul(le,rt),d=d+Math.imul(Ue,ve)|0,w=Math.imul(Ue,rt),y=y+Math.imul(ue,pe)|0,d=d+Math.imul(ue,it)|0,d=d+Math.imul(Le,pe)|0,w=w+Math.imul(Le,it)|0,y=y+Math.imul(re,ae)|0,d=d+Math.imul(re,nt)|0,d=d+Math.imul(Ve,ae)|0,w=w+Math.imul(Ve,nt)|0,y=y+Math.imul(J,me)|0,d=d+Math.imul(J,Je)|0,d=d+Math.imul(oe,me)|0,w=w+Math.imul(oe,Je)|0,y=y+Math.imul(H,de)|0,d=d+Math.imul(H,Ze)|0,d=d+Math.imul(Z,de)|0,w=w+Math.imul(Z,Ze)|0,y=y+Math.imul(F,fe)|0,d=d+Math.imul(F,lt)|0,d=d+Math.imul(j,fe)|0,w=w+Math.imul(j,lt)|0,y=y+Math.imul(P,be)|0,d=d+Math.imul(P,ht)|0,d=d+Math.imul(q,be)|0,w=w+Math.imul(q,ht)|0;var Tt=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,y=Math.imul(he,ve),d=Math.imul(he,rt),d=d+Math.imul(je,ve)|0,w=Math.imul(je,rt),y=y+Math.imul(le,pe)|0,d=d+Math.imul(le,it)|0,d=d+Math.imul(Ue,pe)|0,w=w+Math.imul(Ue,it)|0,y=y+Math.imul(ue,ae)|0,d=d+Math.imul(ue,nt)|0,d=d+Math.imul(Le,ae)|0,w=w+Math.imul(Le,nt)|0,y=y+Math.imul(re,me)|0,d=d+Math.imul(re,Je)|0,d=d+Math.imul(Ve,me)|0,w=w+Math.imul(Ve,Je)|0,y=y+Math.imul(J,de)|0,d=d+Math.imul(J,Ze)|0,d=d+Math.imul(oe,de)|0,w=w+Math.imul(oe,Ze)|0,y=y+Math.imul(H,fe)|0,d=d+Math.imul(H,lt)|0,d=d+Math.imul(Z,fe)|0,w=w+Math.imul(Z,lt)|0,y=y+Math.imul(F,be)|0,d=d+Math.imul(F,ht)|0,d=d+Math.imul(j,be)|0,w=w+Math.imul(j,ht)|0,y=y+Math.imul(P,ge)|0,d=d+Math.imul(P,Xe)|0,d=d+Math.imul(q,ge)|0,w=w+Math.imul(q,Xe)|0;var on=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(on>>>26)|0,on&=67108863,y=Math.imul(ce,ve),d=Math.imul(ce,rt),d=d+Math.imul(Te,ve)|0,w=Math.imul(Te,rt),y=y+Math.imul(he,pe)|0,d=d+Math.imul(he,it)|0,d=d+Math.imul(je,pe)|0,w=w+Math.imul(je,it)|0,y=y+Math.imul(le,ae)|0,d=d+Math.imul(le,nt)|0,d=d+Math.imul(Ue,ae)|0,w=w+Math.imul(Ue,nt)|0,y=y+Math.imul(ue,me)|0,d=d+Math.imul(ue,Je)|0,d=d+Math.imul(Le,me)|0,w=w+Math.imul(Le,Je)|0,y=y+Math.imul(re,de)|0,d=d+Math.imul(re,Ze)|0,d=d+Math.imul(Ve,de)|0,w=w+Math.imul(Ve,Ze)|0,y=y+Math.imul(J,fe)|0,d=d+Math.imul(J,lt)|0,d=d+Math.imul(oe,fe)|0,w=w+Math.imul(oe,lt)|0,y=y+Math.imul(H,be)|0,d=d+Math.imul(H,ht)|0,d=d+Math.imul(Z,be)|0,w=w+Math.imul(Z,ht)|0,y=y+Math.imul(F,ge)|0,d=d+Math.imul(F,Xe)|0,d=d+Math.imul(j,ge)|0,w=w+Math.imul(j,Xe)|0,y=y+Math.imul(P,ye)|0,d=d+Math.imul(P,dt)|0,d=d+Math.imul(q,ye)|0,w=w+Math.imul(q,dt)|0;var an=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(an>>>26)|0,an&=67108863,y=Math.imul(se,ve),d=Math.imul(se,rt),d=d+Math.imul(et,ve)|0,w=Math.imul(et,rt),y=y+Math.imul(ce,pe)|0,d=d+Math.imul(ce,it)|0,d=d+Math.imul(Te,pe)|0,w=w+Math.imul(Te,it)|0,y=y+Math.imul(he,ae)|0,d=d+Math.imul(he,nt)|0,d=d+Math.imul(je,ae)|0,w=w+Math.imul(je,nt)|0,y=y+Math.imul(le,me)|0,d=d+Math.imul(le,Je)|0,d=d+Math.imul(Ue,me)|0,w=w+Math.imul(Ue,Je)|0,y=y+Math.imul(ue,de)|0,d=d+Math.imul(ue,Ze)|0,d=d+Math.imul(Le,de)|0,w=w+Math.imul(Le,Ze)|0,y=y+Math.imul(re,fe)|0,d=d+Math.imul(re,lt)|0,d=d+Math.imul(Ve,fe)|0,w=w+Math.imul(Ve,lt)|0,y=y+Math.imul(J,be)|0,d=d+Math.imul(J,ht)|0,d=d+Math.imul(oe,be)|0,w=w+Math.imul(oe,ht)|0,y=y+Math.imul(H,ge)|0,d=d+Math.imul(H,Xe)|0,d=d+Math.imul(Z,ge)|0,w=w+Math.imul(Z,Xe)|0,y=y+Math.imul(F,ye)|0,d=d+Math.imul(F,dt)|0,d=d+Math.imul(j,ye)|0,w=w+Math.imul(j,dt)|0,y=y+Math.imul(P,we)|0,d=d+Math.imul(P,gt)|0,d=d+Math.imul(q,we)|0,w=w+Math.imul(q,gt)|0;var cn=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(cn>>>26)|0,cn&=67108863,y=Math.imul(se,pe),d=Math.imul(se,it),d=d+Math.imul(et,pe)|0,w=Math.imul(et,it),y=y+Math.imul(ce,ae)|0,d=d+Math.imul(ce,nt)|0,d=d+Math.imul(Te,ae)|0,w=w+Math.imul(Te,nt)|0,y=y+Math.imul(he,me)|0,d=d+Math.imul(he,Je)|0,d=d+Math.imul(je,me)|0,w=w+Math.imul(je,Je)|0,y=y+Math.imul(le,de)|0,d=d+Math.imul(le,Ze)|0,d=d+Math.imul(Ue,de)|0,w=w+Math.imul(Ue,Ze)|0,y=y+Math.imul(ue,fe)|0,d=d+Math.imul(ue,lt)|0,d=d+Math.imul(Le,fe)|0,w=w+Math.imul(Le,lt)|0,y=y+Math.imul(re,be)|0,d=d+Math.imul(re,ht)|0,d=d+Math.imul(Ve,be)|0,w=w+Math.imul(Ve,ht)|0,y=y+Math.imul(J,ge)|0,d=d+Math.imul(J,Xe)|0,d=d+Math.imul(oe,ge)|0,w=w+Math.imul(oe,Xe)|0,y=y+Math.imul(H,ye)|0,d=d+Math.imul(H,dt)|0,d=d+Math.imul(Z,ye)|0,w=w+Math.imul(Z,dt)|0,y=y+Math.imul(F,we)|0,d=d+Math.imul(F,gt)|0,d=d+Math.imul(j,we)|0,w=w+Math.imul(j,gt)|0;var ln=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(ln>>>26)|0,ln&=67108863,y=Math.imul(se,ae),d=Math.imul(se,nt),d=d+Math.imul(et,ae)|0,w=Math.imul(et,nt),y=y+Math.imul(ce,me)|0,d=d+Math.imul(ce,Je)|0,d=d+Math.imul(Te,me)|0,w=w+Math.imul(Te,Je)|0,y=y+Math.imul(he,de)|0,d=d+Math.imul(he,Ze)|0,d=d+Math.imul(je,de)|0,w=w+Math.imul(je,Ze)|0,y=y+Math.imul(le,fe)|0,d=d+Math.imul(le,lt)|0,d=d+Math.imul(Ue,fe)|0,w=w+Math.imul(Ue,lt)|0,y=y+Math.imul(ue,be)|0,d=d+Math.imul(ue,ht)|0,d=d+Math.imul(Le,be)|0,w=w+Math.imul(Le,ht)|0,y=y+Math.imul(re,ge)|0,d=d+Math.imul(re,Xe)|0,d=d+Math.imul(Ve,ge)|0,w=w+Math.imul(Ve,Xe)|0,y=y+Math.imul(J,ye)|0,d=d+Math.imul(J,dt)|0,d=d+Math.imul(oe,ye)|0,w=w+Math.imul(oe,dt)|0,y=y+Math.imul(H,we)|0,d=d+Math.imul(H,gt)|0,d=d+Math.imul(Z,we)|0,w=w+Math.imul(Z,gt)|0;var fn=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(fn>>>26)|0,fn&=67108863,y=Math.imul(se,me),d=Math.imul(se,Je),d=d+Math.imul(et,me)|0,w=Math.imul(et,Je),y=y+Math.imul(ce,de)|0,d=d+Math.imul(ce,Ze)|0,d=d+Math.imul(Te,de)|0,w=w+Math.imul(Te,Ze)|0,y=y+Math.imul(he,fe)|0,d=d+Math.imul(he,lt)|0,d=d+Math.imul(je,fe)|0,w=w+Math.imul(je,lt)|0,y=y+Math.imul(le,be)|0,d=d+Math.imul(le,ht)|0,d=d+Math.imul(Ue,be)|0,w=w+Math.imul(Ue,ht)|0,y=y+Math.imul(ue,ge)|0,d=d+Math.imul(ue,Xe)|0,d=d+Math.imul(Le,ge)|0,w=w+Math.imul(Le,Xe)|0,y=y+Math.imul(re,ye)|0,d=d+Math.imul(re,dt)|0,d=d+Math.imul(Ve,ye)|0,w=w+Math.imul(Ve,dt)|0,y=y+Math.imul(J,we)|0,d=d+Math.imul(J,gt)|0,d=d+Math.imul(oe,we)|0,w=w+Math.imul(oe,gt)|0;var ri=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(ri>>>26)|0,ri&=67108863,y=Math.imul(se,de),d=Math.imul(se,Ze),d=d+Math.imul(et,de)|0,w=Math.imul(et,Ze),y=y+Math.imul(ce,fe)|0,d=d+Math.imul(ce,lt)|0,d=d+Math.imul(Te,fe)|0,w=w+Math.imul(Te,lt)|0,y=y+Math.imul(he,be)|0,d=d+Math.imul(he,ht)|0,d=d+Math.imul(je,be)|0,w=w+Math.imul(je,ht)|0,y=y+Math.imul(le,ge)|0,d=d+Math.imul(le,Xe)|0,d=d+Math.imul(Ue,ge)|0,w=w+Math.imul(Ue,Xe)|0,y=y+Math.imul(ue,ye)|0,d=d+Math.imul(ue,dt)|0,d=d+Math.imul(Le,ye)|0,w=w+Math.imul(Le,dt)|0,y=y+Math.imul(re,we)|0,d=d+Math.imul(re,gt)|0,d=d+Math.imul(Ve,we)|0,w=w+Math.imul(Ve,gt)|0;var hn=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(hn>>>26)|0,hn&=67108863,y=Math.imul(se,fe),d=Math.imul(se,lt),d=d+Math.imul(et,fe)|0,w=Math.imul(et,lt),y=y+Math.imul(ce,be)|0,d=d+Math.imul(ce,ht)|0,d=d+Math.imul(Te,be)|0,w=w+Math.imul(Te,ht)|0,y=y+Math.imul(he,ge)|0,d=d+Math.imul(he,Xe)|0,d=d+Math.imul(je,ge)|0,w=w+Math.imul(je,Xe)|0,y=y+Math.imul(le,ye)|0,d=d+Math.imul(le,dt)|0,d=d+Math.imul(Ue,ye)|0,w=w+Math.imul(Ue,dt)|0,y=y+Math.imul(ue,we)|0,d=d+Math.imul(ue,gt)|0,d=d+Math.imul(Le,we)|0,w=w+Math.imul(Le,gt)|0;var un=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(un>>>26)|0,un&=67108863,y=Math.imul(se,be),d=Math.imul(se,ht),d=d+Math.imul(et,be)|0,w=Math.imul(et,ht),y=y+Math.imul(ce,ge)|0,d=d+Math.imul(ce,Xe)|0,d=d+Math.imul(Te,ge)|0,w=w+Math.imul(Te,Xe)|0,y=y+Math.imul(he,ye)|0,d=d+Math.imul(he,dt)|0,d=d+Math.imul(je,ye)|0,w=w+Math.imul(je,dt)|0,y=y+Math.imul(le,we)|0,d=d+Math.imul(le,gt)|0,d=d+Math.imul(Ue,we)|0,w=w+Math.imul(Ue,gt)|0;var lr=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(lr>>>26)|0,lr&=67108863,y=Math.imul(se,ge),d=Math.imul(se,Xe),d=d+Math.imul(et,ge)|0,w=Math.imul(et,Xe),y=y+Math.imul(ce,ye)|0,d=d+Math.imul(ce,dt)|0,d=d+Math.imul(Te,ye)|0,w=w+Math.imul(Te,dt)|0,y=y+Math.imul(he,we)|0,d=d+Math.imul(he,gt)|0,d=d+Math.imul(je,we)|0,w=w+Math.imul(je,gt)|0;var dn=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(dn>>>26)|0,dn&=67108863,y=Math.imul(se,ye),d=Math.imul(se,dt),d=d+Math.imul(et,ye)|0,w=Math.imul(et,dt),y=y+Math.imul(ce,we)|0,d=d+Math.imul(ce,gt)|0,d=d+Math.imul(Te,we)|0,w=w+Math.imul(Te,gt)|0;var pn=($+y|0)+((d&8191)<<13)|0;$=(w+(d>>>13)|0)+(pn>>>26)|0,pn&=67108863,y=Math.imul(se,we),d=Math.imul(se,gt),d=d+Math.imul(et,we)|0,w=Math.imul(et,gt);var gn=($+y|0)+((d&8191)<<13)|0;return $=(w+(d>>>13)|0)+(gn>>>26)|0,gn&=67108863,_[0]=Ae,_[1]=st,_[2]=Ir,_[3]=Mr,_[4]=Pr,_[5]=Or,_[6]=Tt,_[7]=on,_[8]=an,_[9]=cn,_[10]=ln,_[11]=fn,_[12]=ri,_[13]=hn,_[14]=un,_[15]=lr,_[16]=dn,_[17]=pn,_[18]=gn,$!==0&&(_[19]=$,f.length++),f};Math.imul||(I=E);function C(M,m,g){g.negative=m.negative^M.negative,g.length=M.length+m.length;for(var f=0,h=0,p=0;p<g.length-1;p++){var _=h;h=0;for(var $=f&67108863,y=Math.min(p,m.length-1),d=Math.max(0,p-M.length+1);d<=y;d++){var w=p-d,b=M.words[w]|0,P=m.words[d]|0,q=b*P,A=q&67108863;_=_+(q/67108864|0)|0,A=A+$|0,$=A&67108863,_=_+(A>>>26)|0,h+=_>>>26,_&=67108863}g.words[p]=$,f=_,_=h}return f!==0?g.words[p]=f:g.length--,g.strip()}function O(M,m,g){var f=new R;return f.mulp(M,m,g)}s.prototype.mulTo=function(m,g){var f,h=this.length+m.length;return this.length===10&&m.length===10?f=I(this,m,g):h<63?f=E(this,m,g):h<1024?f=C(this,m,g):f=O(this,m,g),f};function R(M,m){this.x=M,this.y=m}R.prototype.makeRBT=function(m){for(var g=new Array(m),f=s.prototype._countBits(m)-1,h=0;h<m;h++)g[h]=this.revBin(h,f,m);return g},R.prototype.revBin=function(m,g,f){if(m===0||m===f-1)return m;for(var h=0,p=0;p<g;p++)h|=(m&1)<<g-p-1,m>>=1;return h},R.prototype.permute=function(m,g,f,h,p,_){for(var $=0;$<_;$++)h[$]=g[m[$]],p[$]=f[m[$]]},R.prototype.transform=function(m,g,f,h,p,_){this.permute(_,m,g,f,h,p);for(var $=1;$<p;$<<=1)for(var y=$<<1,d=Math.cos(2*Math.PI/y),w=Math.sin(2*Math.PI/y),b=0;b<p;b+=y)for(var P=d,q=w,A=0;A<$;A++){var F=f[b+A],j=h[b+A],k=f[b+A+$],H=h[b+A+$],Z=P*k-q*H;H=P*H+q*k,k=Z,f[b+A]=F+k,h[b+A]=j+H,f[b+A+$]=F-k,h[b+A+$]=j-H,A!==y&&(Z=d*P-w*q,q=d*q+w*P,P=Z)}},R.prototype.guessLen13b=function(m,g){var f=Math.max(g,m)|1,h=f&1,p=0;for(f=f/2|0;f;f=f>>>1)p++;return 1<<p+1+h},R.prototype.conjugate=function(m,g,f){if(!(f<=1))for(var h=0;h<f/2;h++){var p=m[h];m[h]=m[f-h-1],m[f-h-1]=p,p=g[h],g[h]=-g[f-h-1],g[f-h-1]=-p}},R.prototype.normalize13b=function(m,g){for(var f=0,h=0;h<g/2;h++){var p=Math.round(m[2*h+1]/g)*8192+Math.round(m[2*h]/g)+f;m[h]=p&67108863,p<67108864?f=0:f=p/67108864|0}return m},R.prototype.convert13b=function(m,g,f,h){for(var p=0,_=0;_<g;_++)p=p+(m[_]|0),f[2*_]=p&8191,p=p>>>13,f[2*_+1]=p&8191,p=p>>>13;for(_=2*g;_<h;++_)f[_]=0;i(p===0),i((p&-8192)===0)},R.prototype.stub=function(m){for(var g=new Array(m),f=0;f<m;f++)g[f]=0;return g},R.prototype.mulp=function(m,g,f){var h=2*this.guessLen13b(m.length,g.length),p=this.makeRBT(h),_=this.stub(h),$=new Array(h),y=new Array(h),d=new Array(h),w=new Array(h),b=new Array(h),P=new Array(h),q=f.words;q.length=h,this.convert13b(m.words,m.length,$,h),this.convert13b(g.words,g.length,w,h),this.transform($,_,y,d,h,p),this.transform(w,_,b,P,h,p);for(var A=0;A<h;A++){var F=y[A]*b[A]-d[A]*P[A];d[A]=y[A]*P[A]+d[A]*b[A],y[A]=F}return this.conjugate(y,d,h),this.transform(y,d,q,_,h,p),this.conjugate(q,_,h),this.normalize13b(q,h),f.negative=m.negative^g.negative,f.length=m.length+g.length,f.strip()},s.prototype.mul=function(m){var g=new s(null);return g.words=new Array(this.length+m.length),this.mulTo(m,g)},s.prototype.mulf=function(m){var g=new s(null);return g.words=new Array(this.length+m.length),O(this,m,g)},s.prototype.imul=function(m){return this.clone().mulTo(m,this)},s.prototype.imuln=function(m){i(typeof m=="number"),i(m<67108864);for(var g=0,f=0;f<this.length;f++){var h=(this.words[f]|0)*m,p=(h&67108863)+(g&67108863);g>>=26,g+=h/67108864|0,g+=p>>>26,this.words[f]=p&67108863}return g!==0&&(this.words[f]=g,this.length++),this},s.prototype.muln=function(m){return this.clone().imuln(m)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(m){var g=S(m);if(g.length===0)return new s(1);for(var f=this,h=0;h<g.length&&g[h]===0;h++,f=f.sqr());if(++h<g.length)for(var p=f.sqr();h<g.length;h++,p=p.sqr())g[h]!==0&&(f=f.mul(p));return f},s.prototype.iushln=function(m){i(typeof m=="number"&&m>=0);var g=m%26,f=(m-g)/26,h=67108863>>>26-g<<26-g,p;if(g!==0){var _=0;for(p=0;p<this.length;p++){var $=this.words[p]&h,y=(this.words[p]|0)-$<<g;this.words[p]=y|_,_=$>>>26-g}_&&(this.words[p]=_,this.length++)}if(f!==0){for(p=this.length-1;p>=0;p--)this.words[p+f]=this.words[p];for(p=0;p<f;p++)this.words[p]=0;this.length+=f}return this.strip()},s.prototype.ishln=function(m){return i(this.negative===0),this.iushln(m)},s.prototype.iushrn=function(m,g,f){i(typeof m=="number"&&m>=0);var h;g?h=(g-g%26)/26:h=0;var p=m%26,_=Math.min((m-p)/26,this.length),$=67108863^67108863>>>p<<p,y=f;if(h-=_,h=Math.max(0,h),y){for(var d=0;d<_;d++)y.words[d]=this.words[d];y.length=_}if(_!==0)if(this.length>_)for(this.length-=_,d=0;d<this.length;d++)this.words[d]=this.words[d+_];else this.words[0]=0,this.length=1;var w=0;for(d=this.length-1;d>=0&&(w!==0||d>=h);d--){var b=this.words[d]|0;this.words[d]=w<<26-p|b>>>p,w=b&$}return y&&w!==0&&(y.words[y.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(m,g,f){return i(this.negative===0),this.iushrn(m,g,f)},s.prototype.shln=function(m){return this.clone().ishln(m)},s.prototype.ushln=function(m){return this.clone().iushln(m)},s.prototype.shrn=function(m){return this.clone().ishrn(m)},s.prototype.ushrn=function(m){return this.clone().iushrn(m)},s.prototype.testn=function(m){i(typeof m=="number"&&m>=0);var g=m%26,f=(m-g)/26,h=1<<g;if(this.length<=f)return!1;var p=this.words[f];return!!(p&h)},s.prototype.imaskn=function(m){i(typeof m=="number"&&m>=0);var g=m%26,f=(m-g)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(g!==0&&f++,this.length=Math.min(f,this.length),g!==0){var h=67108863^67108863>>>g<<g;this.words[this.length-1]&=h}return this.strip()},s.prototype.maskn=function(m){return this.clone().imaskn(m)},s.prototype.iaddn=function(m){return i(typeof m=="number"),i(m<67108864),m<0?this.isubn(-m):this.negative!==0?this.length===1&&(this.words[0]|0)<m?(this.words[0]=m-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(m),this.negative=1,this):this._iaddn(m)},s.prototype._iaddn=function(m){this.words[0]+=m;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},s.prototype.isubn=function(m){if(i(typeof m=="number"),i(m<67108864),m<0)return this.iaddn(-m);if(this.negative!==0)return this.negative=0,this.iaddn(m),this.negative=1,this;if(this.words[0]-=m,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this.strip()},s.prototype.addn=function(m){return this.clone().iaddn(m)},s.prototype.subn=function(m){return this.clone().isubn(m)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(m,g,f){var h=m.length+f,p;this._expand(h);var _,$=0;for(p=0;p<m.length;p++){_=(this.words[p+f]|0)+$;var y=(m.words[p]|0)*g;_-=y&67108863,$=(_>>26)-(y/67108864|0),this.words[p+f]=_&67108863}for(;p<this.length-f;p++)_=(this.words[p+f]|0)+$,$=_>>26,this.words[p+f]=_&67108863;if($===0)return this.strip();for(i($===-1),$=0,p=0;p<this.length;p++)_=-(this.words[p]|0)+$,$=_>>26,this.words[p]=_&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(m,g){var f=this.length-m.length,h=this.clone(),p=m,_=p.words[p.length-1]|0,$=this._countBits(_);f=26-$,f!==0&&(p=p.ushln(f),h.iushln(f),_=p.words[p.length-1]|0);var y=h.length-p.length,d;if(g!=="mod"){d=new s(null),d.length=y+1,d.words=new Array(d.length);for(var w=0;w<d.length;w++)d.words[w]=0}var b=h.clone()._ishlnsubmul(p,1,y);b.negative===0&&(h=b,d&&(d.words[y]=1));for(var P=y-1;P>=0;P--){var q=(h.words[p.length+P]|0)*67108864+(h.words[p.length+P-1]|0);for(q=Math.min(q/_|0,67108863),h._ishlnsubmul(p,q,P);h.negative!==0;)q--,h.negative=0,h._ishlnsubmul(p,1,P),h.isZero()||(h.negative^=1);d&&(d.words[P]=q)}return d&&d.strip(),h.strip(),g!=="div"&&f!==0&&h.iushrn(f),{div:d||null,mod:h}},s.prototype.divmod=function(m,g,f){if(i(!m.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var h,p,_;return this.negative!==0&&m.negative===0?(_=this.neg().divmod(m,g),g!=="mod"&&(h=_.div.neg()),g!=="div"&&(p=_.mod.neg(),f&&p.negative!==0&&p.iadd(m)),{div:h,mod:p}):this.negative===0&&m.negative!==0?(_=this.divmod(m.neg(),g),g!=="mod"&&(h=_.div.neg()),{div:h,mod:_.mod}):this.negative&m.negative?(_=this.neg().divmod(m.neg(),g),g!=="div"&&(p=_.mod.neg(),f&&p.negative!==0&&p.isub(m)),{div:_.div,mod:p}):m.length>this.length||this.cmp(m)<0?{div:new s(0),mod:this}:m.length===1?g==="div"?{div:this.divn(m.words[0]),mod:null}:g==="mod"?{div:null,mod:new s(this.modn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new s(this.modn(m.words[0]))}:this._wordDiv(m,g)},s.prototype.div=function(m){return this.divmod(m,"div",!1).div},s.prototype.mod=function(m){return this.divmod(m,"mod",!1).mod},s.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod},s.prototype.divRound=function(m){var g=this.divmod(m);if(g.mod.isZero())return g.div;var f=g.div.negative!==0?g.mod.isub(m):g.mod,h=m.ushrn(1),p=m.andln(1),_=f.cmp(h);return _<0||p===1&&_===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},s.prototype.modn=function(m){i(m<=67108863);for(var g=(1<<26)%m,f=0,h=this.length-1;h>=0;h--)f=(g*f+(this.words[h]|0))%m;return f},s.prototype.idivn=function(m){i(m<=67108863);for(var g=0,f=this.length-1;f>=0;f--){var h=(this.words[f]|0)+g*67108864;this.words[f]=h/m|0,g=h%m}return this.strip()},s.prototype.divn=function(m){return this.clone().idivn(m)},s.prototype.egcd=function(m){i(m.negative===0),i(!m.isZero());var g=this,f=m.clone();g.negative!==0?g=g.umod(m):g=g.clone();for(var h=new s(1),p=new s(0),_=new s(0),$=new s(1),y=0;g.isEven()&&f.isEven();)g.iushrn(1),f.iushrn(1),++y;for(var d=f.clone(),w=g.clone();!g.isZero();){for(var b=0,P=1;!(g.words[0]&P)&&b<26;++b,P<<=1);if(b>0)for(g.iushrn(b);b-- >0;)(h.isOdd()||p.isOdd())&&(h.iadd(d),p.isub(w)),h.iushrn(1),p.iushrn(1);for(var q=0,A=1;!(f.words[0]&A)&&q<26;++q,A<<=1);if(q>0)for(f.iushrn(q);q-- >0;)(_.isOdd()||$.isOdd())&&(_.iadd(d),$.isub(w)),_.iushrn(1),$.iushrn(1);g.cmp(f)>=0?(g.isub(f),h.isub(_),p.isub($)):(f.isub(g),_.isub(h),$.isub(p))}return{a:_,b:$,gcd:f.iushln(y)}},s.prototype._invmp=function(m){i(m.negative===0),i(!m.isZero());var g=this,f=m.clone();g.negative!==0?g=g.umod(m):g=g.clone();for(var h=new s(1),p=new s(0),_=f.clone();g.cmpn(1)>0&&f.cmpn(1)>0;){for(var $=0,y=1;!(g.words[0]&y)&&$<26;++$,y<<=1);if($>0)for(g.iushrn($);$-- >0;)h.isOdd()&&h.iadd(_),h.iushrn(1);for(var d=0,w=1;!(f.words[0]&w)&&d<26;++d,w<<=1);if(d>0)for(f.iushrn(d);d-- >0;)p.isOdd()&&p.iadd(_),p.iushrn(1);g.cmp(f)>=0?(g.isub(f),h.isub(p)):(f.isub(g),p.isub(h))}var b;return g.cmpn(1)===0?b=h:b=p,b.cmpn(0)<0&&b.iadd(m),b},s.prototype.gcd=function(m){if(this.isZero())return m.abs();if(m.isZero())return this.abs();var g=this.clone(),f=m.clone();g.negative=0,f.negative=0;for(var h=0;g.isEven()&&f.isEven();h++)g.iushrn(1),f.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;f.isEven();)f.iushrn(1);var p=g.cmp(f);if(p<0){var _=g;g=f,f=_}else if(p===0||f.cmpn(1)===0)break;g.isub(f)}while(!0);return f.iushln(h)},s.prototype.invm=function(m){return this.egcd(m).a.umod(m)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(m){return this.words[0]&m},s.prototype.bincn=function(m){i(typeof m=="number");var g=m%26,f=(m-g)/26,h=1<<g;if(this.length<=f)return this._expand(f+1),this.words[f]|=h,this;for(var p=h,_=f;p!==0&&_<this.length;_++){var $=this.words[_]|0;$+=p,p=$>>>26,$&=67108863,this.words[_]=$}return p!==0&&(this.words[_]=p,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(m){var g=m<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this.strip();var f;if(this.length>1)f=1;else{g&&(m=-m),i(m<=67108863,"Number is too big");var h=this.words[0]|0;f=h===m?0:h<m?-1:1}return this.negative!==0?-f|0:f},s.prototype.cmp=function(m){if(this.negative!==0&&m.negative===0)return-1;if(this.negative===0&&m.negative!==0)return 1;var g=this.ucmp(m);return this.negative!==0?-g|0:g},s.prototype.ucmp=function(m){if(this.length>m.length)return 1;if(this.length<m.length)return-1;for(var g=0,f=this.length-1;f>=0;f--){var h=this.words[f]|0,p=m.words[f]|0;if(h!==p){h<p?g=-1:h>p&&(g=1);break}}return g},s.prototype.gtn=function(m){return this.cmpn(m)===1},s.prototype.gt=function(m){return this.cmp(m)===1},s.prototype.gten=function(m){return this.cmpn(m)>=0},s.prototype.gte=function(m){return this.cmp(m)>=0},s.prototype.ltn=function(m){return this.cmpn(m)===-1},s.prototype.lt=function(m){return this.cmp(m)===-1},s.prototype.lten=function(m){return this.cmpn(m)<=0},s.prototype.lte=function(m){return this.cmp(m)<=0},s.prototype.eqn=function(m){return this.cmpn(m)===0},s.prototype.eq=function(m){return this.cmp(m)===0},s.red=function(m){return new B(m)},s.prototype.toRed=function(m){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),m.convertTo(this)._forceRed(m)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(m){return this.red=m,this},s.prototype.forceRed=function(m){return i(!this.red,"Already a number in reduction context"),this._forceRed(m)},s.prototype.redAdd=function(m){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,m)},s.prototype.redIAdd=function(m){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,m)},s.prototype.redSub=function(m){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,m)},s.prototype.redISub=function(m){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,m)},s.prototype.redShl=function(m){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,m)},s.prototype.redMul=function(m){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.mul(this,m)},s.prototype.redIMul=function(m){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.imul(this,m)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(m){return i(this.red&&!m.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,m)};var N={k256:null,p224:null,p192:null,p25519:null};function T(M,m){this.name=M,this.p=new s(m,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}T.prototype._tmp=function(){var m=new s(null);return m.words=new Array(Math.ceil(this.n/13)),m},T.prototype.ireduce=function(m){var g=m,f;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),f=g.bitLength();while(f>this.n);var h=f<this.n?-1:g.ucmp(this.p);return h===0?(g.words[0]=0,g.length=1):h>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},T.prototype.split=function(m,g){m.iushrn(this.n,0,g)},T.prototype.imulK=function(m){return m.imul(this.k)};function U(){T.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(U,T),U.prototype.split=function(m,g){for(var f=4194303,h=Math.min(m.length,9),p=0;p<h;p++)g.words[p]=m.words[p];if(g.length=h,m.length<=9){m.words[0]=0,m.length=1;return}var _=m.words[9];for(g.words[g.length++]=_&f,p=10;p<m.length;p++){var $=m.words[p]|0;m.words[p-10]=($&f)<<4|_>>>22,_=$}_>>>=22,m.words[p-10]=_,_===0&&m.length>10?m.length-=10:m.length-=9},U.prototype.imulK=function(m){m.words[m.length]=0,m.words[m.length+1]=0,m.length+=2;for(var g=0,f=0;f<m.length;f++){var h=m.words[f]|0;g+=h*977,m.words[f]=g&67108863,g=h*64+(g/67108864|0)}return m.words[m.length-1]===0&&(m.length--,m.words[m.length-1]===0&&m.length--),m};function z(){T.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(z,T);function W(){T.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(W,T);function K(){T.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(K,T),K.prototype.imulK=function(m){for(var g=0,f=0;f<m.length;f++){var h=(m.words[f]|0)*19+g,p=h&67108863;h>>>=26,m.words[f]=p,g=h}return g!==0&&(m.words[m.length++]=g),m},s._prime=function(m){if(N[m])return N[m];var g;if(m==="k256")g=new U;else if(m==="p224")g=new z;else if(m==="p192")g=new W;else if(m==="p25519")g=new K;else throw new Error("Unknown prime "+m);return N[m]=g,g};function B(M){if(typeof M=="string"){var m=s._prime(M);this.m=m.p,this.prime=m}else i(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}B.prototype._verify1=function(m){i(m.negative===0,"red works only with positives"),i(m.red,"red works only with red numbers")},B.prototype._verify2=function(m,g){i((m.negative|g.negative)===0,"red works only with positives"),i(m.red&&m.red===g.red,"red works only with red numbers")},B.prototype.imod=function(m){return this.prime?this.prime.ireduce(m)._forceRed(this):m.umod(this.m)._forceRed(this)},B.prototype.neg=function(m){return m.isZero()?m.clone():this.m.sub(m)._forceRed(this)},B.prototype.add=function(m,g){this._verify2(m,g);var f=m.add(g);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},B.prototype.iadd=function(m,g){this._verify2(m,g);var f=m.iadd(g);return f.cmp(this.m)>=0&&f.isub(this.m),f},B.prototype.sub=function(m,g){this._verify2(m,g);var f=m.sub(g);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},B.prototype.isub=function(m,g){this._verify2(m,g);var f=m.isub(g);return f.cmpn(0)<0&&f.iadd(this.m),f},B.prototype.shl=function(m,g){return this._verify1(m),this.imod(m.ushln(g))},B.prototype.imul=function(m,g){return this._verify2(m,g),this.imod(m.imul(g))},B.prototype.mul=function(m,g){return this._verify2(m,g),this.imod(m.mul(g))},B.prototype.isqr=function(m){return this.imul(m,m.clone())},B.prototype.sqr=function(m){return this.mul(m,m)},B.prototype.sqrt=function(m){if(m.isZero())return m.clone();var g=this.m.andln(3);if(i(g%2===1),g===3){var f=this.m.add(new s(1)).iushrn(2);return this.pow(m,f)}for(var h=this.m.subn(1),p=0;!h.isZero()&&h.andln(1)===0;)p++,h.iushrn(1);i(!h.isZero());var _=new s(1).toRed(this),$=_.redNeg(),y=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new s(2*d*d).toRed(this);this.pow(d,y).cmp($)!==0;)d.redIAdd($);for(var w=this.pow(d,h),b=this.pow(m,h.addn(1).iushrn(1)),P=this.pow(m,h),q=p;P.cmp(_)!==0;){for(var A=P,F=0;A.cmp(_)!==0;F++)A=A.redSqr();i(F<q);var j=this.pow(w,new s(1).iushln(q-F-1));b=b.redMul(j),w=j.redSqr(),P=P.redMul(w),q=F}return b},B.prototype.invm=function(m){var g=m._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},B.prototype.pow=function(m,g){if(g.isZero())return new s(1).toRed(this);if(g.cmpn(1)===0)return m.clone();var f=4,h=new Array(1<<f);h[0]=new s(1).toRed(this),h[1]=m;for(var p=2;p<h.length;p++)h[p]=this.mul(h[p-1],m);var _=h[0],$=0,y=0,d=g.bitLength()%26;for(d===0&&(d=26),p=g.length-1;p>=0;p--){for(var w=g.words[p],b=d-1;b>=0;b--){var P=w>>b&1;if(_!==h[0]&&(_=this.sqr(_)),P===0&&$===0){y=0;continue}$<<=1,$|=P,y++,!(y!==f&&(p!==0||b!==0))&&(_=this.mul(_,h[$]),y=0,$=0)}d=26}return _},B.prototype.convertTo=function(m){var g=m.umod(this.m);return g===m?g.clone():g},B.prototype.convertFrom=function(m){var g=m.clone();return g.red=null,g},s.mont=function(m){return new V(m)};function V(M){B.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(V,B),V.prototype.convertTo=function(m){return this.imod(m.ushln(this.shift))},V.prototype.convertFrom=function(m){var g=this.imod(m.mul(this.rinv));return g.red=null,g},V.prototype.imul=function(m,g){if(m.isZero()||g.isZero())return m.words[0]=0,m.length=1,m;var f=m.imul(g),h=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=f.isub(h).iushrn(this.shift),_=p;return p.cmp(this.m)>=0?_=p.isub(this.m):p.cmpn(0)<0&&(_=p.iadd(this.m)),_._forceRed(this)},V.prototype.mul=function(m,g){if(m.isZero()||g.isZero())return new s(0)._forceRed(this);var f=m.mul(g),h=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=f.isub(h).iushrn(this.shift),_=p;return p.cmp(this.m)>=0?_=p.isub(this.m):p.cmpn(0)<0&&(_=p.iadd(this.m)),_._forceRed(this)},V.prototype.invm=function(m){var g=this.imod(m._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(t,Ot)})(Ii);var nh={};(function(t){var e=t;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var a=[];if(typeof s!="string"){for(var c=0;c<s.length;c++)a[c]=s[c]|0;return a}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var c=0;c<s.length;c+=2)a.push(parseInt(s[c]+s[c+1],16))}else for(var c=0;c<s.length;c++){var l=s.charCodeAt(c),u=l>>8,v=l&255;u?a.push(u,v):a.push(v)}return a}e.toArray=r;function i(s){return s.length===1?"0"+s:s}e.zero2=i;function n(s){for(var o="",a=0;a<s.length;a++)o+=i(s[a].toString(16));return o}e.toHex=n,e.encode=function(o,a){return a==="hex"?n(o):o}})(nh),function(t){var e=t,r=Ii.exports,i=Yn,n=nh;e.assert=i,e.toArray=n.toArray,e.zero2=n.zero2,e.toHex=n.toHex,e.encode=n.encode;function s(u,v,x){var S=new Array(Math.max(u.bitLength(),x)+1),E;for(E=0;E<S.length;E+=1)S[E]=0;var I=1<<v+1,C=u.clone();for(E=0;E<S.length;E++){var O,R=C.andln(I-1);C.isOdd()?(R>(I>>1)-1?O=(I>>1)-R:O=R,C.isubn(O)):O=0,S[E]=O,C.iushrn(1)}return S}e.getNAF=s;function o(u,v){var x=[[],[]];u=u.clone(),v=v.clone();for(var S=0,E=0,I;u.cmpn(-S)>0||v.cmpn(-E)>0;){var C=u.andln(3)+S&3,O=v.andln(3)+E&3;C===3&&(C=-1),O===3&&(O=-1);var R;C&1?(I=u.andln(7)+S&7,(I===3||I===5)&&O===2?R=-C:R=C):R=0,x[0].push(R);var N;O&1?(I=v.andln(7)+E&7,(I===3||I===5)&&C===2?N=-O:N=O):N=0,x[1].push(N),2*S===R+1&&(S=1-S),2*E===N+1&&(E=1-E),u.iushrn(1),v.iushrn(1)}return x}e.getJSF=o;function a(u,v,x){var S="_"+v;u.prototype[v]=function(){return this[S]!==void 0?this[S]:this[S]=x.call(this)}}e.cachedProperty=a;function c(u){return typeof u=="string"?e.toArray(u,"hex"):u}e.parseBytes=c;function l(u){return new r(u,"hex","le")}e.intFromLE=l}(Nr);var xc={exports:{}},sh;xc.exports=function(e){return sh||(sh=new En(null)),sh.generate(e)};function En(t){this.rand=t}if(xc.exports.Rand=En,En.prototype.generate=function(e){return this._rand(e)},En.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),i=0;i<r.length;i++)r[i]=this.rand.getByte();return r},typeof self=="object")self.crypto&&self.crypto.getRandomValues?En.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?En.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(En.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var p1=gf;if(typeof p1.randomBytes!="function")throw new Error("Not supported");En.prototype._rand=function(e){return p1.randomBytes(e)}}catch{}var oh={},rs=Ii.exports,Qo=Nr,Ec=Qo.getNAF,q7=Qo.getJSF,$c=Qo.assert;function $n(t,e){this.type=t,this.p=new rs(e.p,16),this.red=e.prime?rs.red(e.prime):rs.mont(this.p),this.zero=new rs(0).toRed(this.red),this.one=new rs(1).toRed(this.red),this.two=new rs(2).toRed(this.red),this.n=e.n&&new rs(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Sc=$n;$n.prototype.point=function(){throw new Error("Not implemented")},$n.prototype.validate=function(){throw new Error("Not implemented")},$n.prototype._fixedNafMul=function(e,r){$c(e.precomputed);var i=e._getDoubles(),n=Ec(r,1,this._bitLength),s=(1<<i.step+1)-(i.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<n.length;a+=i.step){c=0;for(var l=a+i.step-1;l>=a;l--)c=(c<<1)+n[l];o.push(c)}for(var u=this.jpoint(null,null,null),v=this.jpoint(null,null,null),x=s;x>0;x--){for(a=0;a<o.length;a++)c=o[a],c===x?v=v.mixedAdd(i.points[a]):c===-x&&(v=v.mixedAdd(i.points[a].neg()));u=u.add(v)}return u.toP()},$n.prototype._wnafMul=function(e,r){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var s=n.points,o=Ec(r,i,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var l=0;c>=0&&o[c]===0;c--)l++;if(c>=0&&l++,a=a.dblp(l),c<0)break;var u=o[c];$c(u!==0),e.type==="affine"?u>0?a=a.mixedAdd(s[u-1>>1]):a=a.mixedAdd(s[-u-1>>1].neg()):u>0?a=a.add(s[u-1>>1]):a=a.add(s[-u-1>>1].neg())}return e.type==="affine"?a.toP():a},$n.prototype._wnafMulAdd=function(e,r,i,n,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,l=0,u,v,x;for(u=0;u<n;u++){x=r[u];var S=x._getNAFPoints(e);o[u]=S.wnd,a[u]=S.points}for(u=n-1;u>=1;u-=2){var E=u-1,I=u;if(o[E]!==1||o[I]!==1){c[E]=Ec(i[E],o[E],this._bitLength),c[I]=Ec(i[I],o[I],this._bitLength),l=Math.max(c[E].length,l),l=Math.max(c[I].length,l);continue}var C=[r[E],null,null,r[I]];r[E].y.cmp(r[I].y)===0?(C[1]=r[E].add(r[I]),C[2]=r[E].toJ().mixedAdd(r[I].neg())):r[E].y.cmp(r[I].y.redNeg())===0?(C[1]=r[E].toJ().mixedAdd(r[I]),C[2]=r[E].add(r[I].neg())):(C[1]=r[E].toJ().mixedAdd(r[I]),C[2]=r[E].toJ().mixedAdd(r[I].neg()));var O=[-3,-1,-5,-7,0,7,5,1,3],R=q7(i[E],i[I]);for(l=Math.max(R[0].length,l),c[E]=new Array(l),c[I]=new Array(l),v=0;v<l;v++){var N=R[0][v]|0,T=R[1][v]|0;c[E][v]=O[(N+1)*3+(T+1)],c[I][v]=0,a[E]=C}}var U=this.jpoint(null,null,null),z=this._wnafT4;for(u=l;u>=0;u--){for(var W=0;u>=0;){var K=!0;for(v=0;v<n;v++)z[v]=c[v][u]|0,z[v]!==0&&(K=!1);if(!K)break;W++,u--}if(u>=0&&W++,U=U.dblp(W),u<0)break;for(v=0;v<n;v++){var B=z[v];B!==0&&(B>0?x=a[v][B-1>>1]:B<0&&(x=a[v][-B-1>>1].neg()),x.type==="affine"?U=U.mixedAdd(x):U=U.add(x))}}for(u=0;u<n;u++)a[u]=null;return s?U:U.toP()};function Vr(t,e){this.curve=t,this.type=e,this.precomputed=null}$n.BasePoint=Vr,Vr.prototype.eq=function(){throw new Error("Not implemented")},Vr.prototype.validate=function(){return this.curve.validate(this)},$n.prototype.decodePoint=function(e,r){e=Qo.toArray(e,r);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?$c(e[e.length-1]%2===0):e[0]===7&&$c(e[e.length-1]%2===1);var n=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return n}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")},Vr.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Vr.prototype._encode=function(e){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))},Vr.prototype.encode=function(e,r){return Qo.encode(this._encode(r),e)},Vr.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this},Vr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1},Vr.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)n=n.dbl();i.push(n)}return{step:e,points:i}},Vr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<e)-1,n=i===1?null:this.dbl(),s=1;s<i;s++)r[s]=r[s-1].add(n);return{wnd:e,points:r}},Vr.prototype._getBeta=function(){return null},Vr.prototype.dblp=function(e){for(var r=this,i=0;i<e;i++)r=r.dbl();return r};var j7=Nr,At=Ii.exports,ah=Us.exports,Js=Sc,k7=j7.assert;function Gr(t){Js.call(this,"short",t),this.a=new At(t.a,16).toRed(this.red),this.b=new At(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}ah(Gr,Js);var z7=Gr;Gr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(e.beta)r=new At(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1],r=r.toRed(this.red)}if(e.lambda)i=new At(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?i=s[0]:(i=s[1],k7(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new At(a.a,16),b:new At(a.b,16)}}):o=this._getEndoBasis(i),{beta:r,lambda:i,basis:o}}},Gr.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:At.mont(e),i=new At(2).toRed(r).redInvm(),n=i.redNeg(),s=new At(3).toRed(r).redNeg().redSqrt().redMul(i),o=n.redAdd(s).fromRed(),a=n.redSub(s).fromRed();return[o,a]},Gr.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,n=this.n.clone(),s=new At(1),o=new At(0),a=new At(0),c=new At(1),l,u,v,x,S,E,I,C=0,O,R;i.cmpn(0)!==0;){var N=n.div(i);O=n.sub(N.mul(i)),R=a.sub(N.mul(s));var T=c.sub(N.mul(o));if(!v&&O.cmp(r)<0)l=I.neg(),u=s,v=O.neg(),x=R;else if(v&&++C===2)break;I=O,n=i,i=O,a=s,s=R,c=o,o=T}S=O.neg(),E=R;var U=v.sqr().add(x.sqr()),z=S.sqr().add(E.sqr());return z.cmp(U)>=0&&(S=l,E=u),v.negative&&(v=v.neg(),x=x.neg()),S.negative&&(S=S.neg(),E=E.neg()),[{a:v,b:x},{a:S,b:E}]},Gr.prototype._endoSplit=function(e){var r=this.endo.basis,i=r[0],n=r[1],s=n.b.mul(e).divRound(this.n),o=i.b.neg().mul(e).divRound(this.n),a=s.mul(i.a),c=o.mul(n.a),l=s.mul(i.b),u=o.mul(n.b),v=e.sub(a).sub(c),x=l.add(u).neg();return{k1:v,k2:x}},Gr.prototype.pointFromX=function(e,r){e=new At(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=n.fromRed().isOdd();return(r&&!s||!r&&s)&&(n=n.redNeg()),this.point(e,n)},Gr.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,i=e.y,n=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0},Gr.prototype._endoWnafMulAdd=function(e,r,i){for(var n=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],l=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),n[o*2]=c,n[o*2+1]=l,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var u=this._wnafMulAdd(1,n,s,o*2,i),v=0;v<o*2;v++)n[v]=null,s[v]=null;return u};function kt(t,e,r,i){Js.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new At(e,16),this.y=new At(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}ah(kt,Js.BasePoint),Gr.prototype.point=function(e,r,i){return new kt(this,e,r,i)},Gr.prototype.pointFromJSON=function(e,r){return kt.fromJSON(this,e,r)},kt.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,n=function(s){return i.point(s.x.redMul(i.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return r}},kt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},kt.fromJSON=function(e,r,i){typeof r=="string"&&(r=JSON.parse(r));var n=e.point(r[0],r[1],i);if(!r[2])return n;function s(a){return e.point(a[0],a[1],i)}var o=r[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(s))}},n},kt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},kt.prototype.isInfinity=function(){return this.inf},kt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(e.x),n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)},kt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},kt.prototype.getX=function(){return this.x.fromRed()},kt.prototype.getY=function(){return this.y.fromRed()},kt.prototype.mul=function(e){return e=new At(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},kt.prototype.mulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s):this.curve._wnafMulAdd(1,n,s,2)},kt.prototype.jmulAdd=function(e,r,i){var n=[this,r],s=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,s,!0):this.curve._wnafMulAdd(1,n,s,2,!0)},kt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)},kt.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,n=function(s){return s.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r},kt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function tr(t,e,r,i){Js.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new At(0)):(this.x=new At(e,16),this.y=new At(r,16),this.z=new At(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ah(tr,Js.BasePoint),Gr.prototype.jpoint=function(e,r,i){return new tr(this,e,r,i)},tr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),i=this.x.redMul(r),n=this.y.redMul(r).redMul(e);return this.curve.point(i,n)},tr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},tr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(r),s=e.x.redMul(i),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(i.redMul(this.z)),c=n.redSub(s),l=o.redSub(a);if(c.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),v=u.redMul(c),x=n.redMul(u),S=l.redSqr().redIAdd(v).redISub(x).redISub(x),E=l.redMul(x.redISub(S)).redISub(o.redMul(v)),I=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(S,E,I)},tr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),i=this.x,n=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=i.redSub(n),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),u=l.redMul(a),v=i.redMul(l),x=c.redSqr().redIAdd(u).redISub(v).redISub(v),S=c.redMul(v.redISub(x)).redISub(s.redMul(u)),E=this.z.redMul(a);return this.curve.jpoint(x,S,E)},tr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<e;r++)i=i.dbl();return i}var n=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,l=c.redSqr().redSqr(),u=a.redAdd(a);for(r=0;r<e;r++){var v=o.redSqr(),x=u.redSqr(),S=x.redSqr(),E=v.redAdd(v).redIAdd(v).redIAdd(n.redMul(l)),I=o.redMul(x),C=E.redSqr().redISub(I.redAdd(I)),O=I.redISub(C),R=E.redMul(O);R=R.redIAdd(R).redISub(S);var N=u.redMul(c);r+1<e&&(l=l.redMul(S)),o=C,c=N,u=R}return this.curve.jpoint(o,u.redMul(s),c)},tr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},tr.prototype._zeroDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var c=n.redAdd(n).redIAdd(n),l=c.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=l,r=c.redMul(a.redISub(l)).redISub(u),i=this.y.redAdd(this.y)}else{var v=this.x.redSqr(),x=this.y.redSqr(),S=x.redSqr(),E=this.x.redAdd(x).redSqr().redISub(v).redISub(S);E=E.redIAdd(E);var I=v.redAdd(v).redIAdd(v),C=I.redSqr(),O=S.redIAdd(S);O=O.redIAdd(O),O=O.redIAdd(O),e=C.redISub(E).redISub(E),r=I.redMul(E.redISub(e)).redISub(O),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,r,i)},tr.prototype._threeDbl=function(){var e,r,i;if(this.zOne){var n=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var c=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),l=c.redSqr().redISub(a).redISub(a);e=l;var u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),r=c.redMul(a.redISub(l)).redISub(u),i=this.y.redAdd(this.y)}else{var v=this.z.redSqr(),x=this.y.redSqr(),S=this.x.redMul(x),E=this.x.redSub(v).redMul(this.x.redAdd(v));E=E.redAdd(E).redIAdd(E);var I=S.redIAdd(S);I=I.redIAdd(I);var C=I.redAdd(I);e=E.redSqr().redISub(C),i=this.y.redAdd(this.z).redSqr().redISub(x).redISub(v);var O=x.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O),r=E.redMul(I.redISub(e)).redISub(O)}return this.curve.jpoint(e,r,i)},tr.prototype._dbl=function(){var e=this.curve.a,r=this.x,i=this.y,n=this.z,s=n.redSqr().redSqr(),o=r.redSqr(),a=i.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),l=r.redAdd(r);l=l.redIAdd(l);var u=l.redMul(a),v=c.redSqr().redISub(u.redAdd(u)),x=u.redISub(v),S=a.redSqr();S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var E=c.redMul(x).redISub(S),I=i.redAdd(i).redMul(n);return this.curve.jpoint(v,E,I)},tr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),n=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(n);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var u=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(l),v=r.redMul(u);v=v.redIAdd(v),v=v.redIAdd(v);var x=this.x.redMul(c).redISub(v);x=x.redIAdd(x),x=x.redIAdd(x);var S=this.y.redMul(u.redMul(l.redISub(u)).redISub(a.redMul(c)));S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var E=this.z.redAdd(a).redSqr().redISub(i).redISub(c);return this.curve.jpoint(x,S,E)},tr.prototype.mul=function(e,r){return e=new At(e,r),this.curve._wnafMul(this,e)},tr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var n=r.redMul(this.z),s=i.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(n)).cmpn(0)===0},tr.prototype.eqXToP=function(e){var r=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var n=e.clone(),s=this.curve.redN.redMul(r);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(s),this.x.cmp(i)===0)return!0}},tr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},tr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Zs=Ii.exports,g1=Us.exports,Ac=Sc,H7=Nr;function Ys(t){Ac.call(this,"mont",t),this.a=new Zs(t.a,16).toRed(this.red),this.b=new Zs(t.b,16).toRed(this.red),this.i4=new Zs(4).toRed(this.red).redInvm(),this.two=new Zs(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}g1(Ys,Ac);var W7=Ys;Ys.prototype.validate=function(e){var r=e.normalize().x,i=r.redSqr(),n=i.redMul(r).redAdd(i.redMul(this.a)).redAdd(r),s=n.redSqrt();return s.redSqr().cmp(n)===0};function zt(t,e,r){Ac.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Zs(e,16),this.z=new Zs(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}g1(zt,Ac.BasePoint),Ys.prototype.decodePoint=function(e,r){return this.point(H7.toArray(e,r),1)},Ys.prototype.point=function(e,r){return new zt(this,e,r)},Ys.prototype.pointFromJSON=function(e){return zt.fromJSON(this,e)},zt.prototype.precompute=function(){},zt.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},zt.fromJSON=function(e,r){return new zt(e,r[0],r[1]||e.one)},zt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},zt.prototype.isInfinity=function(){return this.z.cmpn(0)===0},zt.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),i=this.x.redSub(this.z),n=i.redSqr(),s=r.redSub(n),o=r.redMul(n),a=s.redMul(n.redAdd(this.curve.a24.redMul(s)));return this.curve.point(o,a)},zt.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},zt.prototype.diffAdd=function(e,r){var i=this.x.redAdd(this.z),n=this.x.redSub(this.z),s=e.x.redAdd(e.z),o=e.x.redSub(e.z),a=o.redMul(i),c=s.redMul(n),l=r.z.redMul(a.redAdd(c).redSqr()),u=r.x.redMul(a.redISub(c).redSqr());return this.curve.point(l,u)},zt.prototype.mul=function(e){for(var r=e.clone(),i=this,n=this.curve.point(null,null),s=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var a=o.length-1;a>=0;a--)o[a]===0?(i=i.diffAdd(n,s),n=n.dbl()):(n=i.diffAdd(n,s),i=i.dbl());return n},zt.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},zt.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},zt.prototype.eq=function(e){return this.getX().cmp(e.getX())===0},zt.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},zt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var K7=Nr,Vi=Ii.exports,v1=Us.exports,Ic=Sc,V7=K7.assert;function Mi(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Ic.call(this,"edwards",t),this.a=new Vi(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Vi(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Vi(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),V7(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}v1(Mi,Ic);var G7=Mi;Mi.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},Mi.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},Mi.prototype.jpoint=function(e,r,i,n){return this.point(e,r,i,n)},Mi.prototype.pointFromX=function(e,r){e=new Vi(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),o=n.redMul(s.redInvm()),a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var c=a.fromRed().isOdd();return(r&&!c||!r&&c)&&(a=a.redNeg()),this.point(e,a)},Mi.prototype.pointFromY=function(e,r){e=new Vi(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),n=i.redSub(this.c2),s=i.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(s.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=o.redSqrt();if(a.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)},Mi.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),i=e.y.redSqr(),n=r.redMul(this.a).redAdd(i),s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(i)));return n.cmp(s)===0};function yt(t,e,r,i,n){Ic.BasePoint.call(this,t,"projective"),e===null&&r===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Vi(e,16),this.y=new Vi(r,16),this.z=i?new Vi(i,16):this.curve.one,this.t=n&&new Vi(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}v1(yt,Ic.BasePoint),Mi.prototype.pointFromJSON=function(e){return yt.fromJSON(this,e)},Mi.prototype.point=function(e,r,i,n){return new yt(this,e,r,i,n)},yt.fromJSON=function(e,r){return new yt(e,r[0],r[1],r[2])},yt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},yt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},yt.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var n=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=n.redAdd(r),a=o.redSub(i),c=n.redSub(r),l=s.redMul(a),u=o.redMul(c),v=s.redMul(c),x=a.redMul(o);return this.curve.point(l,u,x,v)},yt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),i=this.y.redSqr(),n,s,o,a,c,l;if(this.curve.twisted){a=this.curve._mulA(r);var u=a.redAdd(i);this.zOne?(n=e.redSub(r).redSub(i).redMul(u.redSub(this.curve.two)),s=u.redMul(a.redSub(i)),o=u.redSqr().redSub(u).redSub(u)):(c=this.z.redSqr(),l=u.redSub(c).redISub(c),n=e.redSub(r).redISub(i).redMul(l),s=u.redMul(a.redSub(i)),o=u.redMul(l))}else a=r.redAdd(i),c=this.curve._mulC(this.z).redSqr(),l=a.redSub(c).redSub(c),n=this.curve._mulC(e.redISub(a)).redMul(l),s=this.curve._mulC(a).redMul(r.redISub(i)),o=a.redMul(l);return this.curve.point(n,s,o)},yt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},yt.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),o=i.redSub(r),a=s.redSub(n),c=s.redAdd(n),l=i.redAdd(r),u=o.redMul(a),v=c.redMul(l),x=o.redMul(l),S=a.redMul(c);return this.curve.point(u,v,S,x)},yt.prototype._projAdd=function(e){var r=this.z.redMul(e.z),i=r.redSqr(),n=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(n).redMul(s),a=i.redSub(o),c=i.redAdd(o),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(n).redISub(s),u=r.redMul(a).redMul(l),v,x;return this.curve.twisted?(v=r.redMul(c).redMul(s.redSub(this.curve._mulA(n))),x=a.redMul(c)):(v=r.redMul(c).redMul(s.redSub(n)),x=this.curve._mulC(a).redMul(c)),this.curve.point(u,v,x)},yt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},yt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},yt.prototype.mulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!1)},yt.prototype.jmulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!0)},yt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},yt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},yt.prototype.getX=function(){return this.normalize(),this.x.fromRed()},yt.prototype.getY=function(){return this.normalize(),this.y.fromRed()},yt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0},yt.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),n=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),this.x.cmp(r)===0)return!0}},yt.prototype.toP=yt.prototype.normalize,yt.prototype.mixedAdd=yt.prototype.add,function(t){var e=t;e.base=Sc,e.short=z7,e.mont=W7,e.edwards=G7}(oh);var Mc={},ch,m1;function J7(){return m1||(m1=1,ch={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),ch}(function(t){var e=t,r=Dr,i=oh,n=Nr,s=n.assert;function o(l){l.type==="short"?this.curve=new i.short(l):l.type==="edwards"?this.curve=new i.edwards(l):this.curve=new i.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function a(l,u){Object.defineProperty(e,l,{configurable:!0,enumerable:!0,get:function(){var v=new o(u);return Object.defineProperty(e,l,{configurable:!0,enumerable:!0,value:v}),v}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=J7()}catch{c=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})})(Mc);var Z7=Dr,is=nh,b1=Yn;function Sn(t){if(!(this instanceof Sn))return new Sn(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=is.toArray(t.entropy,t.entropyEnc||"hex"),r=is.toArray(t.nonce,t.nonceEnc||"hex"),i=is.toArray(t.pers,t.persEnc||"hex");b1(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,i)}var Y7=Sn;Sn.prototype._init=function(e,r,i){var n=e.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Sn.prototype._hmac=function(){return new Z7.hmac(this.hash,this.K)},Sn.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Sn.prototype.reseed=function(e,r,i,n){typeof r!="string"&&(n=i,i=r,r=null),e=is.toArray(e,r),i=is.toArray(i,n),b1(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1},Sn.prototype.generate=function(e,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(n=i,i=r,r=null),i&&(i=is.toArray(i,n||"hex"),this._update(i));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(i),this._reseed++,is.encode(o,r)};var X7=Ii.exports,Q7=Nr,lh=Q7.assert;function or(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var e9=or;or.fromPublic=function(e,r,i){return r instanceof or?r:new or(e,{pub:r,pubEnc:i})},or.fromPrivate=function(e,r,i){return r instanceof or?r:new or(e,{priv:r,privEnc:i})},or.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},or.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub},or.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv},or.prototype._importPrivate=function(e,r){this.priv=new X7(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)},or.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?lh(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&lh(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)},or.prototype.derive=function(e){return e.validate()||lh(e.validate(),"public point not validated"),e.mul(this.priv).getX()},or.prototype.sign=function(e,r,i){return this.ec.sign(e,this,r,i)},or.prototype.verify=function(e,r,i){return this.ec.verify(e,r,this,void 0,i)},or.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Pc=Ii.exports,fh=Nr,t9=fh.assert;function Oc(t,e){if(t instanceof Oc)return t;this._importDER(t,e)||(t9(t.r&&t.s,"Signature without r or s"),this.r=new Pc(t.r,16),this.s=new Pc(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var r9=Oc;function i9(){this.place=0}function hh(t,e){var r=t[e.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4||t[e.place]===0)return!1;for(var n=0,s=0,o=e.place;s<i;s++,o++)n<<=8,n|=t[o],n>>>=0;return n<=127?!1:(e.place=o,n)}function y1(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Oc.prototype._importDER=function(e,r){e=fh.toArray(e,r);var i=new i9;if(e[i.place++]!==48)return!1;var n=hh(e,i);if(n===!1||n+i.place!==e.length||e[i.place++]!==2)return!1;var s=hh(e,i);if(s===!1||e[i.place]&128)return!1;var o=e.slice(i.place,s+i.place);if(i.place+=s,e[i.place++]!==2)return!1;var a=hh(e,i);if(a===!1||e.length!==a+i.place||e[i.place]&128)return!1;var c=e.slice(i.place,a+i.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Pc(o),this.s=new Pc(c),this.recoveryParam=null,!0};function uh(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Oc.prototype.toDER=function(e){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=y1(r),i=y1(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];uh(n,r.length),n=n.concat(r),n.push(2),uh(n,i.length);var s=n.concat(i),o=[48];return uh(o,s.length),o=o.concat(s),fh.encode(o,e)};var hi=Ii.exports,w1=Y7,n9=Nr,dh=Mc,s9=xc.exports,ns=n9.assert,ph=e9,Cc=r9;function Jr(t){if(!(this instanceof Jr))return new Jr(t);typeof t=="string"&&(ns(Object.prototype.hasOwnProperty.call(dh,t),"Unknown curve "+t),t=dh[t]),t instanceof dh.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var o9=Jr;Jr.prototype.keyPair=function(e){return new ph(this,e)},Jr.prototype.keyFromPrivate=function(e,r){return ph.fromPrivate(this,e,r)},Jr.prototype.keyFromPublic=function(e,r){return ph.fromPublic(this,e,r)},Jr.prototype.genKeyPair=function(e){e||(e={});for(var r=new w1({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||s9(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new hi(2));;){var s=new hi(r.generate(i));if(!(s.cmp(n)>0))return s.iaddn(1),this.keyFromPrivate(s)}},Jr.prototype._truncateToN=function(e,r,i){var n;if(hi.isBN(e)||typeof e=="number")e=new hi(e,16),n=e.byteLength();else if(typeof e=="object")n=e.length,e=new hi(e,16);else{var s=e.toString();n=s.length+1>>>1,e=new hi(s,16)}typeof i!="number"&&(i=n*8);var o=i-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e},Jr.prototype.sign=function(e,r,i,n){if(typeof i=="object"&&(n=i,i=null),n||(n={}),typeof e!="string"&&typeof e!="number"&&!hi.isBN(e)){ns(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),ns(e.length>>>0===e.length);for(var s=0;s<e.length;s++)ns((e[s]&255)===e[s])}r=this.keyFromPrivate(r,i),e=this._truncateToN(e,!1,n.msgBitLength),ns(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),a=r.getPrivate().toArray("be",o),c=e.toArray("be",o);ns(new hi(c).eq(e),"Can not sign message");for(var l=new w1({hash:this.hash,entropy:a,nonce:c,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new hi(1)),v=0;;v++){var x=n.k?n.k(v):new hi(l.generate(this.n.byteLength()));if(x=this._truncateToN(x,!0),!(x.cmpn(1)<=0||x.cmp(u)>=0)){var S=this.g.mul(x);if(!S.isInfinity()){var E=S.getX(),I=E.umod(this.n);if(I.cmpn(0)!==0){var C=x.invm(this.n).mul(I.mul(r.getPrivate()).iadd(e));if(C=C.umod(this.n),C.cmpn(0)!==0){var O=(S.getY().isOdd()?1:0)|(E.cmp(I)!==0?2:0);return n.canonical&&C.cmp(this.nh)>0&&(C=this.n.sub(C),O^=1),new Cc({r:I,s:C,recoveryParam:O})}}}}}},Jr.prototype.verify=function(e,r,i,n,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),i=this.keyFromPublic(i,n),r=new Cc(r,"hex");var o=r.r,a=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var c=a.invm(this.n),l=c.mul(e).umod(this.n),u=c.mul(o).umod(this.n),v;return this.curve._maxwellTrick?(v=this.g.jmulAdd(l,i.getPublic(),u),v.isInfinity()?!1:v.eqXToP(o)):(v=this.g.mulAdd(l,i.getPublic(),u),v.isInfinity()?!1:v.getX().umod(this.n).cmp(o)===0)},Jr.prototype.recoverPubKey=function(t,e,r,i){ns((3&r)===r,"The recovery param is more than two bits"),e=new Cc(e,i);var n=this.n,s=new hi(t),o=e.r,a=e.s,c=r&1,l=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");l?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var u=e.r.invm(n),v=n.sub(s).mul(u).umod(n),x=a.mul(u).umod(n);return this.g.mulAdd(v,o,x)},Jr.prototype.getKeyRecoveryParam=function(t,e,r,i){if(e=new Cc(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch{continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")};var ea=Nr,_1=ea.assert,x1=ea.parseBytes,Xs=ea.cachedProperty;function Ht(t,e){this.eddsa=t,this._secret=x1(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=x1(e.pub)}Ht.fromPublic=function(e,r){return r instanceof Ht?r:new Ht(e,{pub:r})},Ht.fromSecret=function(e,r){return r instanceof Ht?r:new Ht(e,{secret:r})},Ht.prototype.secret=function(){return this._secret},Xs(Ht,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),Xs(Ht,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),Xs(Ht,"privBytes",function(){var e=this.eddsa,r=this.hash(),i=e.encodingLength-1,n=r.slice(0,e.encodingLength);return n[0]&=248,n[i]&=127,n[i]|=64,n}),Xs(Ht,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),Xs(Ht,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),Xs(Ht,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),Ht.prototype.sign=function(e){return _1(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},Ht.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)},Ht.prototype.getSecret=function(e){return _1(this._secret,"KeyPair is public only"),ea.encode(this.secret(),e)},Ht.prototype.getPublic=function(e){return ea.encode(this.pubBytes(),e)};var a9=Ht,c9=Ii.exports,Dc=Nr,E1=Dc.assert,Rc=Dc.cachedProperty,l9=Dc.parseBytes;function ss(t,e){this.eddsa=t,typeof e!="object"&&(e=l9(e)),Array.isArray(e)&&(E1(e.length===t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),E1(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof c9&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Rc(ss,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),Rc(ss,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),Rc(ss,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),Rc(ss,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),ss.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},ss.prototype.toHex=function(){return Dc.encode(this.toBytes(),"hex").toUpperCase()};var f9=ss,h9=Dr,u9=Mc,Qs=Nr,d9=Qs.assert,$1=Qs.parseBytes,S1=a9,A1=f9;function _r(t){if(d9(t==="ed25519","only tested with ed25519 so far"),!(this instanceof _r))return new _r(t);t=u9[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=h9.sha512}var p9=_r;_r.prototype.sign=function(e,r){e=$1(e);var i=this.keyFromSecret(r),n=this.hashInt(i.messagePrefix(),e),s=this.g.mul(n),o=this.encodePoint(s),a=this.hashInt(o,i.pubBytes(),e).mul(i.priv()),c=n.add(a).umod(this.curve.n);return this.makeSignature({R:s,S:c,Rencoded:o})},_r.prototype.verify=function(e,r,i){if(e=$1(e),r=this.makeSignature(r),r.S().gte(r.eddsa.curve.n)||r.S().isNeg())return!1;var n=this.keyFromPublic(i),s=this.hashInt(r.Rencoded(),n.pubBytes(),e),o=this.g.mul(r.S()),a=r.R().add(n.pub().mul(s));return a.eq(o)},_r.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return Qs.intFromLE(e.digest()).umod(this.curve.n)},_r.prototype.keyFromPublic=function(e){return S1.fromPublic(this,e)},_r.prototype.keyFromSecret=function(e){return S1.fromSecret(this,e)},_r.prototype.makeSignature=function(e){return e instanceof A1?e:new A1(this,e)},_r.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r},_r.prototype.decodePoint=function(e){e=Qs.parseBytes(e);var r=e.length-1,i=e.slice(0,r).concat(e[r]&-129),n=(e[r]&128)!==0,s=Qs.intFromLE(i);return this.curve.pointFromY(s,n)},_r.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},_r.prototype.decodeInt=function(e){return Qs.intFromLE(e)},_r.prototype.isPoint=function(e){return e instanceof this.pointClass},function(t){var e=t;e.version=U7.version,e.utils=Nr,e.rand=xc.exports,e.curve=oh,e.curves=Mc,e.ec=o9,e.eddsa=p9}(d1);const g9={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var v9=Object.defineProperty,I1=Object.getOwnPropertySymbols,m9=Object.prototype.hasOwnProperty,b9=Object.prototype.propertyIsEnumerable,M1=(t,e,r)=>e in t?v9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,y9=(t,e)=>{for(var r in e||(e={}))m9.call(e,r)&&M1(t,r,e[r]);if(I1)for(var r of I1(e))b9.call(e,r)&&M1(t,r,e[r]);return t};const w9=":";function eo(t){const[e,r]=t.split(w9);return{namespace:e,reference:r}}function P1(t,e=[]){const r=[];return Object.keys(t).forEach(i=>{if(e.length&&!e.includes(i))return;const n=t[i];r.push(...n.accounts)}),r}function O1(t,e){return t.includes(":")?[t]:e.chains||[]}const _9="ReactNative",Tr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},x9="js";function Nc(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function An(){return!jo()&&!!ff()&&navigator.product===_9}function E9(){return An()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function $9(){return An()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function ta(){return!Nc()&&!!ff()&&!!jo()}function ra(){return An()?Tr.reactNative:Nc()?Tr.node:ta()?Tr.browser:Tr.unknown}function C1(){var t;try{return An()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function S9(t,e){const r=new URLSearchParams(t);for(const i of Object.keys(e).sort())if(e.hasOwnProperty(i)){const n=e[i];n!==void 0&&r.set(i,n)}return r.toString()}function D1(){return n0()||{name:"",description:"",url:"",icons:[""]}}function A9(){if(ra()===Tr.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:i}=global.Platform;return[r,i].join("-")}const t=by();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function I9(){var t;const e=ra();return e===Tr.browser?[e,((t=i0())==null?void 0:t.host)||"unknown"].join(":"):e}function R1(t,e,r){const i=A9(),n=I9();return[[t,e].join("-"),[x9,r].join("-"),i,n].join("/")}function M9({protocol:t,version:e,relayUrl:r,sdkVersion:i,auth:n,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=r.split("?"),u=R1(t,e,i),v={auth:n,ua:u,projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},x=S9(l[1]||"",v);return l[0]+"?"+x}function os(t,e){return t.filter(r=>e.includes(r)).length===t.length}function N1(t){return Object.fromEntries(t.entries())}function T1(t){return new Map(Object.entries(t))}function as(t=Y.FIVE_MINUTES,e){const r=Y.toMiliseconds(t||Y.FIVE_MINUTES);let i,n,s,o;return{resolve:a=>{s&&i&&(clearTimeout(s),i(a),o=Promise.resolve(a))},reject:a=>{s&&n&&(clearTimeout(s),n(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);s=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},r),i=a,n=c})}}function In(t,e,r){return new Promise(async(i,n)=>{const s=setTimeout(()=>n(new Error(r)),e);try{const o=await t;i(o)}catch(o){n(o)}clearTimeout(s)})}function F1(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function P9(t){return F1("topic",t)}function O9(t){return F1("id",t)}function L1(t){const[e,r]=t.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")i.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return i}function Bt(t,e){return Y.fromMiliseconds((e||Date.now())+Y.toMiliseconds(t))}function Mn(t){return Date.now()>=Y.toMiliseconds(t)}function Pe(t,e){return`${t}${e?`:${e}`:""}`}function Tc(t=[],e=[]){return[...new Set([...t,...e])]}async function C9({id:t,topic:e,wcDeepLink:r}){var i;try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r,s=n?.href;if(typeof s!="string")return;const o=D9(s,t,e),a=ra();if(a===Tr.browser){if(!((i=jo())!=null&&i.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}R9(o)}else a===Tr.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(n){console.error(n)}}function D9(t,e,r){const i=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let n=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";n=`${n}${s}${L9(i,!0)}`}else n=`${n}/wc?${i}`;return n}function R9(t){let e="_self";F9()?e="_top":(T9()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function N9(t,e){let r="";try{if(ta()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(i){console.error(i)}return r}function B1(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),i=r.indexOf(e);return r[i+2]}function U1(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function gh(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function T9(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function F9(){try{return window.self!==window.top}catch{return!1}}function L9(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function q1(t){return Buffer.from(t,"base64").toString("utf-8")}function B9(t){return new Promise(e=>setTimeout(e,t))}function ia(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function U9(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Fc(t,...e){if(!U9(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function vh(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ia(t.outputLen),ia(t.blockLen)}function to(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function j1(t,e){Fc(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Lc=BigInt(2**32-1),k1=BigInt(32);function q9(t,e=!1){return e?{h:Number(t&Lc),l:Number(t>>k1&Lc)}:{h:Number(t>>k1&Lc)|0,l:Number(t&Lc)|0}}function j9(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let n=0;n<t.length;n++){const{h:s,l:o}=q9(t[n],e);[r[n],i[n]]=[s,o]}return[r,i]}const k9=(t,e,r)=>t<<r|e>>>32-r,z9=(t,e,r)=>e<<r|t>>>32-r,H9=(t,e,r)=>e<<r-32|t>>>64-r,W9=(t,e,r)=>t<<r-32|e>>>64-r,ro=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function K9(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function mh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Pi(t,e){return t<<32-e|t>>>e}const z1=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function V9(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function H1(t){for(let e=0;e<t.length;e++)t[e]=V9(t[e])}function G9(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function io(t){return typeof t=="string"&&(t=G9(t)),Fc(t),t}class bh{clone(){return this._cloneInto()}}function W1(t){const e=i=>t().update(io(i)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function na(t=32){if(ro&&typeof ro.getRandomValues=="function")return ro.getRandomValues(new Uint8Array(t));if(ro&&typeof ro.randomBytes=="function")return ro.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const K1=[],V1=[],G1=[],J9=BigInt(0),sa=BigInt(1),Z9=BigInt(2),Y9=BigInt(7),X9=BigInt(256),Q9=BigInt(113);for(let t=0,e=sa,r=1,i=0;t<24;t++){[r,i]=[i,(2*r+3*i)%5],K1.push(2*(5*i+r)),V1.push((t+1)*(t+2)/2%64);let n=J9;for(let s=0;s<7;s++)e=(e<<sa^(e>>Y9)*Q9)%X9,e&Z9&&(n^=sa<<(sa<<BigInt(s))-sa);G1.push(n)}const[e_,t_]=j9(G1,!0),J1=(t,e,r)=>r>32?H9(t,e,r):k9(t,e,r),Z1=(t,e,r)=>r>32?W9(t,e,r):z9(t,e,r);function r_(t,e=24){const r=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=r[c],u=r[c+1],v=J1(l,u,1)^r[a],x=Z1(l,u,1)^r[a+1];for(let S=0;S<50;S+=10)t[o+S]^=v,t[o+S+1]^=x}let n=t[2],s=t[3];for(let o=0;o<24;o++){const a=V1[o],c=J1(n,s,a),l=Z1(n,s,a),u=K1[o];n=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=e_[i],t[1]^=t_[i]}r.fill(0)}class yh extends bh{constructor(e,r,i,n=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=i,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ia(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=K9(this.state)}keccak(){z1||H1(this.state32),r_(this.state32,this.rounds),z1||H1(this.state32),this.posOut=0,this.pos=0}update(e){to(this);const{blockLen:r,state:i}=this;e=io(e);const n=e.length;for(let s=0;s<n;){const o=Math.min(r-this.pos,n-s);for(let a=0;a<o;a++)i[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:i,blockLen:n}=this;e[i]^=r,r&128&&i===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){to(this,!1),Fc(e),this.finish();const r=this.state,{blockLen:i}=this;for(let n=0,s=e.length;n<s;){this.posOut>=i&&this.keccak();const o=Math.min(i-this.posOut,s-n);e.set(r.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ia(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(j1(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:i,outputLen:n,rounds:s,enableXOF:o}=this;return e||(e=new yh(r,i,n,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=i,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}const i_=(t,e,r)=>W1(()=>new yh(e,t,r)),n_=i_(1,136,256/8),s_="https://rpc.walletconnect.org/v1";function Y1(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(n_(r)).toString("hex")}async function o_(t,e,r,i,n,s){switch(r.t){case"eip191":return a_(t,e,r.s);case"eip1271":return await c_(t,e,r.s,i,n,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function a_(t,e,r){return p4(Y1(e),r).toLowerCase()===t.toLowerCase()}async function c_(t,e,r,i,n,s){const o=eo(i);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=r.substring(2),v=Y1(e).substring(2),x=a+v+c+l+u,S=await fetch(`${s||s_}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:l_(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:x},"latest"]})}),{result:E}=await S.json();return E?E.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function l_(){return Date.now()+Math.floor(Math.random()*1e3)}var f_=Object.defineProperty,h_=Object.defineProperties,u_=Object.getOwnPropertyDescriptors,X1=Object.getOwnPropertySymbols,d_=Object.prototype.hasOwnProperty,p_=Object.prototype.propertyIsEnumerable,Q1=(t,e,r)=>e in t?f_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,g_=(t,e)=>{for(var r in e||(e={}))d_.call(e,r)&&Q1(t,r,e[r]);if(X1)for(var r of X1(e))p_.call(e,r)&&Q1(t,r,e[r]);return t},v_=(t,e)=>h_(t,u_(e));const m_="did:pkh:",wh=t=>t?.split(":"),b_=t=>{const e=t&&wh(t);if(e)return t.includes(m_)?e[3]:e[1]},_h=t=>{const e=t&&wh(t);if(e)return e[2]+":"+e[3]},Bc=t=>{const e=t&&wh(t);if(e)return e.pop()};async function eg(t){const{cacao:e,projectId:r}=t,{s:i,p:n}=e,s=tg(n,n.iss),o=Bc(n.iss);return await o_(o,s,i,_h(n.iss),r)}const tg=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,i=Bc(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let n=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${b_(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,v=t.nbf?`Not Before: ${t.nbf}`:void 0,x=t.requestId?`Request ID: ${t.requestId}`:void 0,S=t.resources?`Resources:${t.resources.map(I=>`
- ${I}`).join("")}`:void 0,E=Uc(t.resources);if(E){const I=oa(E);n=I_(n,I)}return[r,i,"",n,"",s,o,a,c,l,u,v,x,S].filter(I=>I!=null).join(`
`)};function y_(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function w_(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function cs(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const i=t.att[r];if(Array.isArray(i))throw new Error(`Resource must be an object: ${r}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(i).forEach(n=>{const s=i[n];if(!Array.isArray(s))throw new Error(`Ability limits ${n} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${n} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${n}) must be an array of objects, found: ${o}`)})})})}function __(t,e,r,i={}){return r?.sort((n,s)=>n.localeCompare(s)),{att:{[t]:x_(e,r,i)}}}function x_(t,e,r={}){e=e?.sort((n,s)=>n.localeCompare(s));const i=e.map(n=>({[`${t}/${n}`]:[r]}));return Object.assign({},...i)}function rg(t){return cs(t),`urn:recap:${y_(t).replace(/=/g,"")}`}function oa(t){const e=w_(t.replace("urn:recap:",""));return cs(e),e}function E_(t,e,r){const i=__(t,e,r);return rg(i)}function $_(t){return t&&t.includes("urn:recap:")}function S_(t,e){const r=oa(t),i=oa(e),n=A_(r,i);return rg(n)}function A_(t,e){cs(t),cs(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((n,s)=>n.localeCompare(s)),i={att:{}};return r.forEach(n=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[n])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[n])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;i.att[n]=v_(g_({},i.att[n]),{[a]:((c=t.att[n])==null?void 0:c[a])||((l=e.att[n])==null?void 0:l[a])})})}),i}function I_(t="",e){cs(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const i=[];let n=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(v=>({ability:v.split("/")[0],action:v.split("/")[1]}));c.sort((v,x)=>v.action.localeCompare(x.action));const l={};c.forEach(v=>{l[v.ability]||(l[v.ability]=[]),l[v.ability].push(v.action)});const u=Object.keys(l).map(v=>(n++,`(${n}) '${v}': '${l[v].join("', '")}' for '${a}'.`));i.push(u.join(", ").replace(".,","."))});const s=i.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function ig(t){var e;const r=oa(t);cs(r);const i=(e=r.att)==null?void 0:e.eip155;return i?Object.keys(i).map(n=>n.split("/")[1]):[]}function ng(t){const e=oa(t);cs(e);const r=[];return Object.values(e.att).forEach(i=>{Object.values(i).forEach(n=>{var s;(s=n?.[0])!=null&&s.chains&&r.push(n[0].chains)})}),[...new Set(r.flat())]}function Uc(t){if(!t)return;const e=t?.[t.length-1];return $_(e)?e:void 0}function xh(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function sg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Fr(t,...e){if(!sg(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function og(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function M_(t,e){Fr(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function ag(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Pn=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),P_=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);if(!(new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68))throw new Error("Non little-endian hardware is not supported");function O_(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Eh(t){if(typeof t=="string")t=O_(t);else if(sg(t))t=$h(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function C_(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function D_(t,e){if(t.length!==e.length)return!1;let r=0;for(let i=0;i<t.length;i++)r|=t[i]^e[i];return r===0}const R_=(t,e)=>{function r(i,...n){if(Fr(i),t.nonceLength!==void 0){const l=n[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Fr(l):Fr(l,t.nonceLength)}const s=t.tagLength;s&&n[1]!==void 0&&Fr(n[1]);const o=e(i,...n),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Fr(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Fr(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Fr(l),s&&l.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(r,t),r};function cg(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!N_(e))throw new Error("invalid output, must be aligned");return e}function lg(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,l=i?0:4;t.setUint32(e+c,o,i),t.setUint32(e+l,a,i)}function N_(t){return t.byteOffset%4===0}function $h(t){return Uint8Array.from(t)}function no(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const fg=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),T_=fg("expand 16-byte k"),F_=fg("expand 32-byte k"),L_=Pn(T_),B_=Pn(F_);function We(t,e){return t<<e|t>>>32-e}function Sh(t){return t.byteOffset%4===0}const qc=64,U_=16,hg=2**32-1,ug=new Uint32Array;function q_(t,e,r,i,n,s,o,a){const c=n.length,l=new Uint8Array(qc),u=Pn(l),v=Sh(n)&&Sh(s),x=v?Pn(n):ug,S=v?Pn(s):ug;for(let E=0;E<c;o++){if(t(e,r,i,u,o,a),o>=hg)throw new Error("arx: counter overflow");const I=Math.min(qc,c-E);if(v&&I===qc){const C=E/4;if(E%4!==0)throw new Error("arx: invalid block position");for(let O=0,R;O<U_;O++)R=C+O,S[R]=x[R]^u[O];E+=qc;continue}for(let C=0,O;C<I;C++)O=E+C,s[O]=n[O]^l[C];E+=I}}function j_(t,e){const{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:o}=C_({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return xh(n),xh(o),ag(s),ag(r),(a,c,l,u,v=0)=>{Fr(a),Fr(c),Fr(l);const x=l.length;if(u===void 0&&(u=new Uint8Array(x)),Fr(u),xh(v),v<0||v>=hg)throw new Error("arx: counter overflow");if(u.length<x)throw new Error(`arx: output (${u.length}) is shorter than data (${x})`);const S=[];let E=a.length,I,C;if(E===32)S.push(I=$h(a)),C=B_;else if(E===16&&r)I=new Uint8Array(32),I.set(a),I.set(a,16),C=L_,S.push(I);else throw new Error(`arx: invalid 32-byte key, got length=${E}`);Sh(c)||S.push(c=$h(c));const O=Pn(I);if(i){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");i(C,O,Pn(c.subarray(0,16)),O),c=c.subarray(16)}const R=16-n;if(R!==c.length)throw new Error(`arx: nonce must be ${R} or 16 bytes`);if(R!==12){const T=new Uint8Array(12);T.set(c,s?0:12-c.length),c=T,S.push(c)}const N=Pn(c);return q_(t,C,O,N,l,u,v,o),no(...S),u}}const rr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class k_{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Eh(e),Fr(e,32);const r=rr(e,0),i=rr(e,2),n=rr(e,4),s=rr(e,6),o=rr(e,8),a=rr(e,10),c=rr(e,12),l=rr(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|i<<3)&8191,this.r[2]=(i>>>10|n<<6)&7939,this.r[3]=(n>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=rr(e,16+2*u)}process(e,r,i=!1){const n=i?0:2048,{h:s,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],v=o[4],x=o[5],S=o[6],E=o[7],I=o[8],C=o[9],O=rr(e,r+0),R=rr(e,r+2),N=rr(e,r+4),T=rr(e,r+6),U=rr(e,r+8),z=rr(e,r+10),W=rr(e,r+12),K=rr(e,r+14);let B=s[0]+(O&8191),V=s[1]+((O>>>13|R<<3)&8191),M=s[2]+((R>>>10|N<<6)&8191),m=s[3]+((N>>>7|T<<9)&8191),g=s[4]+((T>>>4|U<<12)&8191),f=s[5]+(U>>>1&8191),h=s[6]+((U>>>14|z<<2)&8191),p=s[7]+((z>>>11|W<<5)&8191),_=s[8]+((W>>>8|K<<8)&8191),$=s[9]+(K>>>5|n),y=0,d=y+B*a+V*(5*C)+M*(5*I)+m*(5*E)+g*(5*S);y=d>>>13,d&=8191,d+=f*(5*x)+h*(5*v)+p*(5*u)+_*(5*l)+$*(5*c),y+=d>>>13,d&=8191;let w=y+B*c+V*a+M*(5*C)+m*(5*I)+g*(5*E);y=w>>>13,w&=8191,w+=f*(5*S)+h*(5*x)+p*(5*v)+_*(5*u)+$*(5*l),y+=w>>>13,w&=8191;let b=y+B*l+V*c+M*a+m*(5*C)+g*(5*I);y=b>>>13,b&=8191,b+=f*(5*E)+h*(5*S)+p*(5*x)+_*(5*v)+$*(5*u),y+=b>>>13,b&=8191;let P=y+B*u+V*l+M*c+m*a+g*(5*C);y=P>>>13,P&=8191,P+=f*(5*I)+h*(5*E)+p*(5*S)+_*(5*x)+$*(5*v),y+=P>>>13,P&=8191;let q=y+B*v+V*u+M*l+m*c+g*a;y=q>>>13,q&=8191,q+=f*(5*C)+h*(5*I)+p*(5*E)+_*(5*S)+$*(5*x),y+=q>>>13,q&=8191;let A=y+B*x+V*v+M*u+m*l+g*c;y=A>>>13,A&=8191,A+=f*a+h*(5*C)+p*(5*I)+_*(5*E)+$*(5*S),y+=A>>>13,A&=8191;let F=y+B*S+V*x+M*v+m*u+g*l;y=F>>>13,F&=8191,F+=f*c+h*a+p*(5*C)+_*(5*I)+$*(5*E),y+=F>>>13,F&=8191;let j=y+B*E+V*S+M*x+m*v+g*u;y=j>>>13,j&=8191,j+=f*l+h*c+p*a+_*(5*C)+$*(5*I),y+=j>>>13,j&=8191;let k=y+B*I+V*E+M*S+m*x+g*v;y=k>>>13,k&=8191,k+=f*u+h*l+p*c+_*a+$*(5*C),y+=k>>>13,k&=8191;let H=y+B*C+V*I+M*E+m*S+g*x;y=H>>>13,H&=8191,H+=f*v+h*u+p*l+_*c+$*a,y+=H>>>13,H&=8191,y=(y<<2)+y|0,y=y+d|0,d=y&8191,y=y>>>13,w+=y,s[0]=d,s[1]=w,s[2]=b,s[3]=P,s[4]=q,s[5]=A,s[6]=F,s[7]=j,s[8]=k,s[9]=H}finalize(){const{h:e,pad:r}=this,i=new Uint16Array(10);let n=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=n,n=e[a]>>>13,e[a]&=8191;e[0]+=n*5,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,i[0]=e[0]+5,n=i[0]>>>13,i[0]&=8191;for(let a=1;a<10;a++)i[a]=e[a]+n,n=i[a]>>>13,i[a]&=8191;i[9]-=8192;let s=(n^1)-1;for(let a=0;a<10;a++)i[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|i[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;no(i)}update(e){og(this);const{buffer:r,blockLen:i}=this;e=Eh(e);const n=e.length;for(let s=0;s<n;){const o=Math.min(i-this.pos,n-s);if(o===i){for(;i<=n-s;s+=i)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){no(this.h,this.r,this.buffer,this.pad)}digestInto(e){og(this),M_(e,this),this.finished=!0;const{buffer:r,h:i}=this;let{pos:n}=this;if(n){for(r[n++]=1;n<16;n++)r[n]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=i[o]>>>0,e[s++]=i[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const i=e.slice(0,r);return this.destroy(),i}}function z_(t){const e=(i,n)=>t(n).update(Eh(i)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=i=>t(i),e}const H_=z_(t=>new k_(t));function W_(t,e,r,i,n,s=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],v=e[1],x=e[2],S=e[3],E=e[4],I=e[5],C=e[6],O=e[7],R=n,N=r[0],T=r[1],U=r[2],z=o,W=a,K=c,B=l,V=u,M=v,m=x,g=S,f=E,h=I,p=C,_=O,$=R,y=N,d=T,w=U;for(let P=0;P<s;P+=2)z=z+V|0,$=We($^z,16),f=f+$|0,V=We(V^f,12),z=z+V|0,$=We($^z,8),f=f+$|0,V=We(V^f,7),W=W+M|0,y=We(y^W,16),h=h+y|0,M=We(M^h,12),W=W+M|0,y=We(y^W,8),h=h+y|0,M=We(M^h,7),K=K+m|0,d=We(d^K,16),p=p+d|0,m=We(m^p,12),K=K+m|0,d=We(d^K,8),p=p+d|0,m=We(m^p,7),B=B+g|0,w=We(w^B,16),_=_+w|0,g=We(g^_,12),B=B+g|0,w=We(w^B,8),_=_+w|0,g=We(g^_,7),z=z+M|0,w=We(w^z,16),p=p+w|0,M=We(M^p,12),z=z+M|0,w=We(w^z,8),p=p+w|0,M=We(M^p,7),W=W+m|0,$=We($^W,16),_=_+$|0,m=We(m^_,12),W=W+m|0,$=We($^W,8),_=_+$|0,m=We(m^_,7),K=K+g|0,y=We(y^K,16),f=f+y|0,g=We(g^f,12),K=K+g|0,y=We(y^K,8),f=f+y|0,g=We(g^f,7),B=B+V|0,d=We(d^B,16),h=h+d|0,V=We(V^h,12),B=B+V|0,d=We(d^B,8),h=h+d|0,V=We(V^h,7);let b=0;i[b++]=o+z|0,i[b++]=a+W|0,i[b++]=c+K|0,i[b++]=l+B|0,i[b++]=u+V|0,i[b++]=v+M|0,i[b++]=x+m|0,i[b++]=S+g|0,i[b++]=E+f|0,i[b++]=I+h|0,i[b++]=C+p|0,i[b++]=O+_|0,i[b++]=R+$|0,i[b++]=N+y|0,i[b++]=T+d|0,i[b++]=U+w|0}const K_=j_(W_,{counterRight:!1,counterLength:4,allowShortKeys:!1}),V_=new Uint8Array(16),dg=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(V_.subarray(r))},G_=new Uint8Array(32);function pg(t,e,r,i,n){const s=t(e,r,G_),o=H_.create(s);n&&dg(o,n),dg(o,i);const a=new Uint8Array(16),c=P_(a);lg(c,0,BigInt(n?n.length:0),!0),lg(c,8,BigInt(i.length),!0),o.update(a);const l=o.digest();return no(s,a),l}const J_=t=>(e,r,i)=>({encrypt(n,s){const o=n.length;s=cg(o+16,s,!1),s.set(n);const a=s.subarray(0,-16);t(e,r,a,a,1);const c=pg(t,e,r,a,i);return s.set(c,o),no(c),s},decrypt(n,s){s=cg(n.length-16,s,!1);const o=n.subarray(0,-16),a=n.subarray(-16),c=pg(t,e,r,o,i);if(!D_(a,c))throw new Error("invalid tag");return s.set(n.subarray(0,-16)),t(e,r,s,s,1),no(c),s}}),gg=R_({blockSize:64,nonceLength:12,tagLength:16},J_(K_));class vg extends bh{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,vh(e);const i=io(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,s=new Uint8Array(n);s.set(i.length>n?e.create().update(i).digest():i);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return to(this),this.iHash.update(e),this}digestInto(e){to(this),Fc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:i,finished:n,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=n,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ah=(t,e,r)=>new vg(t,e).update(r).digest();Ah.create=(t,e)=>new vg(t,e);function Z_(t,e,r){return vh(t),r===void 0&&(r=new Uint8Array(t.outputLen)),Ah(t,io(r),io(e))}const Ih=new Uint8Array([0]),mg=new Uint8Array;function Y_(t,e,r,i=32){if(vh(t),ia(i),i>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const n=Math.ceil(i/t.outputLen);r===void 0&&(r=mg);const s=new Uint8Array(n*t.outputLen),o=Ah.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<n;l++)Ih[0]=l+1,a.update(l===0?mg:c).update(r).update(Ih).digestInto(c),s.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),Ih.fill(0),s.slice(0,i)}const X_=(t,e,r,i,n)=>Y_(t,Z_(t,e,r),i,n);function Q_(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);const n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,l=i?0:4;t.setUint32(e+c,o,i),t.setUint32(e+l,a,i)}function ex(t,e,r){return t&e^~t&r}function tx(t,e,r){return t&e^t&r^e&r}class rx extends bh{constructor(e,r,i,n){super(),this.blockLen=e,this.outputLen=r,this.padOffset=i,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=mh(this.buffer)}update(e){to(this);const{view:r,buffer:i,blockLen:n}=this;e=io(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(n-this.pos,s-o);if(a===n){const c=mh(e);for(;n<=s-o;o+=n)this.process(c,o);continue}i.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){to(this),j1(e,this),this.finished=!0;const{buffer:r,view:i,blockLen:n,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(i,0),o=0);for(let v=o;v<n;v++)r[v]=0;Q_(i,n-8,BigInt(this.length*8),s),this.process(i,0);const a=mh(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<l;v++)a.setUint32(4*v,u[v],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:i,length:n,finished:s,destroyed:o,pos:a}=this;return e.length=n,e.pos=a,e.finished=s,e.destroyed=o,n%r&&e.buffer.set(i),e}}const ix=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),On=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cn=new Uint32Array(64);class nx extends rx{constructor(){super(64,32,8,!1),this.A=On[0]|0,this.B=On[1]|0,this.C=On[2]|0,this.D=On[3]|0,this.E=On[4]|0,this.F=On[5]|0,this.G=On[6]|0,this.H=On[7]|0}get(){const{A:e,B:r,C:i,D:n,E:s,F:o,G:a,H:c}=this;return[e,r,i,n,s,o,a,c]}set(e,r,i,n,s,o,a,c){this.A=e|0,this.B=r|0,this.C=i|0,this.D=n|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,r){for(let v=0;v<16;v++,r+=4)Cn[v]=e.getUint32(r,!1);for(let v=16;v<64;v++){const x=Cn[v-15],S=Cn[v-2],E=Pi(x,7)^Pi(x,18)^x>>>3,I=Pi(S,17)^Pi(S,19)^S>>>10;Cn[v]=I+Cn[v-7]+E+Cn[v-16]|0}let{A:i,B:n,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let v=0;v<64;v++){const x=Pi(a,6)^Pi(a,11)^Pi(a,25),S=u+x+ex(a,c,l)+ix[v]+Cn[v]|0,E=(Pi(i,2)^Pi(i,13)^Pi(i,22))+tx(i,n,s)|0;u=l,l=c,c=a,a=o+S|0,o=s,s=n,n=i,i=S+E|0}i=i+this.A|0,n=n+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(i,n,s,o,a,c,l,u)}roundClean(){Cn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const jc=W1(()=>new nx);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bg=BigInt(0);function Mh(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function yg(t){if(!Mh(t))throw new Error("Uint8Array expected")}const sx=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ox(t){yg(t);let e="";for(let r=0;r<t.length;r++)e+=sx[t[r]];return e}function ax(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?bg:BigInt("0x"+t)}const Gi={_0:48,_9:57,A:65,F:70,a:97,f:102};function wg(t){if(t>=Gi._0&&t<=Gi._9)return t-Gi._0;if(t>=Gi.A&&t<=Gi.F)return t-(Gi.A-10);if(t>=Gi.a&&t<=Gi.f)return t-(Gi.a-10)}function _g(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(r);for(let n=0,s=0;n<r;n++,s+=2){const o=wg(t.charCodeAt(s)),a=wg(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}i[n]=o*16+a}return i}function xg(t){return yg(t),ax(ox(Uint8Array.from(t).reverse()))}function cx(t,e){return _g(t.toString(16).padStart(e*2,"0"))}function lx(t,e){return cx(t,e).reverse()}function Eg(t,e,r){let i;if(typeof e=="string")try{i=_g(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Mh(e))i=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const n=i.length;if(typeof r=="number"&&n!==r)throw new Error(t+" of length "+r+" expected, got "+n);return i}const Ph=t=>typeof t=="bigint"&&bg<=t;function fx(t,e,r){return Ph(t)&&Ph(e)&&Ph(r)&&e<=t&&t<r}function $g(t,e,r,i){if(!fx(e,r,i))throw new Error("expected valid "+t+": "+r+" <= n < "+i+", got "+e)}const hx={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Mh(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function ux(t,e,r={}){const i=(n,s,o)=>{const a=hx[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[n];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(n)+" is invalid. Expected "+s+", got "+c)};for(const[n,s]of Object.entries(e))i(n,s,!1);for(const[n,s]of Object.entries(r))i(n,s,!0);return t}const so=BigInt(0),kc=BigInt(1);function Sg(t,e){const r=t%e;return r>=so?r:e+r}function dx(t,e,r){if(e<so)throw new Error("invalid exponent, negatives unsupported");if(r<=so)throw new Error("invalid modulus");if(r===kc)return so;let i=kc;for(;e>so;)e&kc&&(i=i*t%r),t=t*t%r,e>>=kc;return i}function ui(t,e,r){let i=t;for(;e-- >so;)i*=i,i%=r;return i}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const oo=BigInt(0),Oh=BigInt(1);function px(t){return ux(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze(y9({},t))}function gx(t){const e=px(t),{P:r}=e,i=R=>Sg(R,r),n=e.montgomeryBits,s=Math.ceil(n/8),o=e.nByteLength,a=e.adjustScalarBytes||(R=>R),c=e.powPminus2||(R=>dx(R,r-BigInt(2),r));function l(R,N,T){const U=i(R*(N-T));return N=i(N-U),T=i(T+U),[N,T]}const u=(e.a-BigInt(2))/BigInt(4);function v(R,N){$g("u",R,oo,r),$g("scalar",N,oo,r);const T=N,U=R;let z=Oh,W=oo,K=R,B=Oh,V=oo,M;for(let g=BigInt(n-1);g>=oo;g--){const f=T>>g&Oh;V^=f,M=l(V,z,K),z=M[0],K=M[1],M=l(V,W,B),W=M[0],B=M[1],V=f;const h=z+W,p=i(h*h),_=z-W,$=i(_*_),y=p-$,d=K+B,w=K-B,b=i(w*h),P=i(d*_),q=b+P,A=b-P;K=i(q*q),B=i(U*i(A*A)),z=i(p*$),W=i(y*(p+i(u*y)))}M=l(V,z,K),z=M[0],K=M[1],M=l(V,W,B),W=M[0],B=M[1];const m=c(W);return i(z*m)}function x(R){return lx(i(R),s)}function S(R){const N=Eg("u coordinate",R,s);return o===32&&(N[31]&=127),xg(N)}function E(R){const N=Eg("scalar",R),T=N.length;if(T!==s&&T!==o){let U=""+s+" or "+o;throw new Error("invalid scalar, expected "+U+" bytes, got "+T)}return xg(a(N))}function I(R,N){const T=S(N),U=E(R),z=v(T,U);if(z===oo)throw new Error("invalid private or public key received");return x(z)}const C=x(e.Gu);function O(R){return I(R,C)}return{scalarMult:I,scalarMultBase:O,getSharedSecret:(R,N)=>I(R,N),getPublicKey:R=>O(R),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:C}}const Ch=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const vx=BigInt(1),Ag=BigInt(2),mx=BigInt(3),bx=BigInt(5);BigInt(8);function yx(t){const e=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=Ch,o=t*t%s*t%s,a=ui(o,Ag,s)*o%s,c=ui(a,vx,s)*t%s,l=ui(c,bx,s)*c%s,u=ui(l,e,s)*l%s,v=ui(u,r,s)*u%s,x=ui(v,i,s)*v%s,S=ui(x,n,s)*x%s,E=ui(S,n,s)*x%s,I=ui(E,e,s)*l%s;return{pow_p_5_8:ui(I,Ag,s)*t%s,b2:o}}function wx(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Dh=(()=>gx({P:Ch,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=Ch,{pow_p_5_8:r,b2:i}=yx(t);return Sg(ui(r,mx,e)*i,e)},adjustScalarBytes:wx,randomBytes:na}))(),Ig="base10",ar="base16",Dn="base64pad",aa="base64url",ca="utf8",Mg=0,Ji=1,la=2,_x=0,Pg=1,fa=12,Rh=32;function xx(){const t=Dh.utils.randomPrivateKey(),e=Dh.getPublicKey(t);return{privateKey:dr(t,ar),publicKey:dr(e,ar)}}function Nh(){const t=na(Rh);return dr(t,ar)}function Ex(t,e){const r=Dh.getSharedSecret(Kr(t,ar),Kr(e,ar)),i=X_(jc,r,void 0,void 0,Rh);return dr(i,ar)}function zc(t){const e=jc(Kr(t,ar));return dr(e,ar)}function Zi(t){const e=jc(Kr(t,ca));return dr(e,ar)}function Og(t){return Kr(`${t}`,Ig)}function ls(t){return Number(dr(t,Ig))}function $x(t){const e=Og(typeof t.type<"u"?t.type:Mg);if(ls(e)===Ji&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Kr(t.senderPublicKey,ar):void 0,i=typeof t.iv<"u"?Kr(t.iv,ar):na(fa),n=Kr(t.symKey,ar),s=gg(n,i).encrypt(Kr(t.message,ca));return Cg({type:e,sealed:s,iv:i,senderPublicKey:r,encoding:t.encoding})}function Sx(t){const e=Kr(t.symKey,ar),{sealed:r,iv:i}=ha(t),n=gg(e,i).decrypt(r);if(n===null)throw new Error("Failed to decrypt");return dr(n,ca)}function Ax(t,e){const r=Og(la),i=na(fa),n=Kr(t,ca);return Cg({type:r,sealed:n,iv:i,encoding:e})}function Ix(t,e){const{sealed:r}=ha({encoded:t,encoding:e});return dr(r,ca)}function Cg(t){const{encoding:e=Dn}=t;if(ls(t.type)===la)return dr(eh([t.type,t.sealed]),e);if(ls(t.type)===Ji){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return dr(eh([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return dr(eh([t.type,t.iv,t.sealed]),e)}function ha(t){const{encoded:e,encoding:r=Dn}=t,i=Kr(e,r),n=i.slice(_x,Pg),s=Pg;if(ls(n)===Ji){const l=s+Rh,u=l+fa,v=i.slice(s,l),x=i.slice(l,u),S=i.slice(u);return{type:n,sealed:S,iv:x,senderPublicKey:v}}if(ls(n)===la){const l=i.slice(s),u=na(fa);return{type:n,sealed:l,iv:u}}const o=s+fa,a=i.slice(s,o),c=i.slice(o);return{type:n,sealed:c,iv:a}}function Mx(t,e){const r=ha({encoded:t,encoding:e?.encoding});return Dg({type:ls(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?dr(r.senderPublicKey,ar):void 0,receiverPublicKey:e?.receiverPublicKey})}function Dg(t){const e=t?.type||Mg;if(e===Ji){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function Rg(t){return t.type===Ji&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function Ng(t){return t.type===la}function Px(t){return new d1.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function Ox(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function Cx(t){return Buffer.from(Ox(t),"base64")}function Dx(t,e){const[r,i,n]=t.split("."),s=Cx(n);if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),c=`${r}.${i}`,l=jc(c),u=Px(e),v=dr(l,ar);if(!u.verify(v,{r:o,s:a}))throw new Error("Invalid signature");return Qf(t).payload}const Rx="irn";function Hc(t){return t?.relay||{protocol:Rx}}function ua(t){const e=g9[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function Nx(t,e="-"){const r={},i="relay"+e;return Object.keys(t).forEach(n=>{if(n.startsWith(i)){const s=n.replace(i,""),o=t[n];r[s]=o}}),r}function Tg(t){if(!t.includes("wc:")){const l=q1(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,i=t.substring(0,e),n=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:i,topic:Tx(n[0]),version:parseInt(n[1],10),symKey:a.symKey,relay:Nx(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Tx(t){return t.startsWith("//")?t.substring(2):t}function Fx(t,e="-"){const r="relay",i={};return Object.keys(t).forEach(n=>{const s=r+e+n;t[n]&&(i[s]=t[n])}),i}function Fg(t){const e=new URLSearchParams,r=Fx(t.relay);Object.keys(r).sort().forEach(n=>{e.set(n,r[n])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const i=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${i}`}function Wc(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function ao(t){const e=[];return t.forEach(r=>{const[i,n]=r.split(":");e.push(`${i}:${n}`)}),e}function Lx(t){const e=[];return Object.values(t).forEach(r=>{e.push(...ao(r.accounts))}),e}function Bx(t,e){const r=[];return Object.values(t).forEach(i=>{ao(i.accounts).includes(e)&&r.push(...i.methods)}),r}function Ux(t,e){const r=[];return Object.values(t).forEach(i=>{ao(i.accounts).includes(e)&&r.push(...i.events)}),r}function Th(t){return t.includes(":")}function da(t){return Th(t)?t.split(":")[0]:t}function qx(t){const e={};return t?.forEach(r=>{const[i,n]=r.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[]}),e[i].accounts.push(r),e[i].chains.push(`${i}:${n}`)}),e}function Lg(t,e){e=e.map(i=>i.replace("did:pkh:",""));const r=qx(e);for(const[i,n]of Object.entries(r))n.methods?n.methods=Tc(n.methods,t):n.methods=t,n.events=["chainChanged","accountsChanged"];return r}const jx={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},kx={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Q(t,e){const{message:r,code:i}=kx[t];return{message:e?`${r} ${e}`:r,code:i}}function vt(t,e){const{message:r,code:i}=jx[t];return{message:e?`${r} ${e}`:r,code:i}}function Yi(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function pa(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function pr(t){return typeof t>"u"}function Rt(t,e){return e&&pr(t)?!0:typeof t=="string"&&!!t.trim().length}function Fh(t,e){return e&&pr(t)?!0:typeof t=="number"&&!isNaN(t)}function zx(t,e){const{requiredNamespaces:r}=e,i=Object.keys(t.namespaces),n=Object.keys(r);let s=!0;return os(n,i)?(i.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=ao(a),v=r[o];(!os(O1(o,v),u)||!os(v.methods,c)||!os(v.events,l))&&(s=!1)}),s):!1}function Kc(t){return Rt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Hx(t){if(Rt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Kc(r)}}return!1}function Wx(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(Rt(t,!1)){if(e(t))return!0;const r=q1(t);return e(r)}}catch{}return!1}function Kx(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function Vx(t){return t?.topic}function Gx(t,e){let r=null;return Rt(t?.publicKey,!1)||(r=Q("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function Bg(t){let e=!0;return Yi(t)?t.length&&(e=t.every(r=>Rt(r,!1))):e=!1,e}function Jx(t,e,r){let i=null;return Yi(e)&&e.length?e.forEach(n=>{i||Kc(n)||(i=vt("UNSUPPORTED_CHAINS",`${r}, chain ${n} should be a string and conform to "namespace:chainId" format`))}):Kc(t)||(i=vt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function Zx(t,e,r){let i=null;return Object.entries(t).forEach(([n,s])=>{if(i)return;const o=Jx(n,O1(n,s),`${e} ${r}`);o&&(i=o)}),i}function Yx(t,e){let r=null;return Yi(t)?t.forEach(i=>{r||Hx(i)||(r=vt("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):r=vt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Xx(t,e){let r=null;return Object.values(t).forEach(i=>{if(r)return;const n=Yx(i?.accounts,`${e} namespace`);n&&(r=n)}),r}function Qx(t,e){let r=null;return Bg(t?.methods)?Bg(t?.events)||(r=vt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=vt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Ug(t,e){let r=null;return Object.values(t).forEach(i=>{if(r)return;const n=Qx(i,`${e}, namespace`);n&&(r=n)}),r}function eE(t,e,r){let i=null;if(t&&pa(t)){const n=Ug(t,e);n&&(i=n);const s=Zx(t,e,r);s&&(i=s)}else i=Q("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return i}function Lh(t,e){let r=null;if(t&&pa(t)){const i=Ug(t,e);i&&(r=i);const n=Xx(t,e);n&&(r=n)}else r=Q("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function qg(t){return Rt(t.protocol,!0)}function tE(t,e){let r=!1;return e&&!t?r=!0:t&&Yi(t)&&t.length&&t.forEach(i=>{r=qg(i)}),r}function rE(t){return typeof t=="number"}function xr(t){return typeof t<"u"&&typeof t!==null}function iE(t){return!(!t||typeof t!="object"||!t.code||!Fh(t.code,!1)||!t.message||!Rt(t.message,!1))}function nE(t){return!(pr(t)||!Rt(t.method,!1))}function sE(t){return!(pr(t)||pr(t.result)&&pr(t.error)||!Fh(t.id,!1)||!Rt(t.jsonrpc,!1))}function oE(t){return!(pr(t)||!Rt(t.name,!1))}function jg(t,e){return!(!Kc(e)||!Lx(t).includes(e))}function aE(t,e,r){return Rt(r,!1)?Bx(t,e).includes(r):!1}function cE(t,e,r){return Rt(r,!1)?Ux(t,e).includes(r):!1}function kg(t,e,r){let i=null;const n=lE(t),s=fE(e),o=Object.keys(n),a=Object.keys(s),c=zg(Object.keys(t)),l=zg(Object.keys(e)),u=c.filter(v=>!l.includes(v));return u.length&&(i=Q("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),os(o,a)||(i=Q("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(v=>{if(!v.includes(":")||i)return;const x=ao(e[v].accounts);x.includes(v)||(i=Q("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${v}
        Required: ${v}
        Approved: ${x.toString()}`))}),o.forEach(v=>{i||(os(n[v].methods,s[v].methods)?os(n[v].events,s[v].events)||(i=Q("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${v}`)):i=Q("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${v}`))}),i}function lE(t){const e={};return Object.keys(t).forEach(r=>{var i;r.includes(":")?e[r]=t[r]:(i=t[r].chains)==null||i.forEach(n=>{e[n]={methods:t[r].methods,events:t[r].events}})}),e}function zg(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function fE(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const i=ao(t[r].accounts);i?.forEach(n=>{e[n]={accounts:t[r].accounts.filter(s=>s.includes(`${n}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function hE(t,e){return Fh(t,!1)&&t<=e.max&&t>=e.min}function Hg(){const t=ra();return new Promise(e=>{switch(t){case Tr.browser:e(uE());break;case Tr.reactNative:e(dE());break;case Tr.node:e(pE());break;default:e(!0)}})}function uE(){return ta()&&navigator?.onLine}async function dE(){if(An()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t?.isConnected}return!0}function pE(){return!0}function gE(t){switch(ra()){case Tr.browser:vE(t);break;case Tr.reactNative:mE(t);break}}function vE(t){!An()&&ta()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function mE(t){An()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}const Bh={};class ga{static get(e){return Bh[e]}static set(e,r){Bh[e]=r}static delete(e){delete Bh[e]}}class fs{}class bE extends fs{constructor(e){super()}}const Wg=Y.FIVE_SECONDS,co={pulse:"heartbeat_pulse"};class Uh extends bE{constructor(e){super(e),this.events=new Zt.exports.EventEmitter,this.interval=Wg,this.interval=e?.interval||Wg}static async init(e){const r=new Uh(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Y.toMiliseconds(this.interval))}pulse(){this.events.emit(co.pulse)}}const yE=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,wE=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,_E=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function xE(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){EE(t);return}return e}function EE(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Vc(t,e={}){if(typeof t!="string")return t;const r=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!_E.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(yE.test(t)||wE.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,xE)}return JSON.parse(t)}catch(i){if(e.strict)throw i;return t}}function $E(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Wt(t,...e){try{return $E(t(...e))}catch(r){return Promise.reject(r)}}function SE(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function AE(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Gc(t){if(SE(t))return String(t);if(AE(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Gc(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const qh="base64:";function IE(t){return typeof t=="string"?t:qh+OE(t)}function ME(t){return typeof t!="string"||!t.startsWith(qh)?t:PE(t.slice(qh.length))}function PE(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function OE(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Er(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function CE(...t){return Er(t.join(":"))}function Jc(t){return t=Er(t),t?t+":":""}function _j(t){return t}const DE="memory",RE=()=>{const t=new Map;return{name:DE,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function NE(t={}){const e={mounts:{"":t.driver||RE()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},i=(l,u)=>e.mountpoints.filter(v=>v.startsWith(l)||u&&l.startsWith(v)).map(v=>({relativeBase:l.length>v.length?l.slice(v.length):void 0,mountpoint:v,driver:e.mounts[v]})),n=(l,u)=>{if(e.watching){u=Er(u);for(const v of e.watchListeners)v(l,u)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await Kg(e.mounts[l],n,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,v)=>{const x=new Map,S=E=>{let I=x.get(E.base);return I||(I={driver:E.driver,base:E.base,items:[]},x.set(E.base,I)),I};for(const E of l){const I=typeof E=="string",C=Er(I?E:E.key),O=I?void 0:E.value,R=I||!E.options?u:{...u,...E.options},N=r(C);S(N).items.push({key:C,value:O,relativeKey:N.relativeKey,options:R})}return Promise.all([...x.values()].map(E=>v(E))).then(E=>E.flat())},c={hasItem(l,u={}){l=Er(l);const{relativeKey:v,driver:x}=r(l);return Wt(x.hasItem,v,u)},getItem(l,u={}){l=Er(l);const{relativeKey:v,driver:x}=r(l);return Wt(x.getItem,v,u).then(S=>Vc(S))},getItems(l,u={}){return a(l,u,v=>v.driver.getItems?Wt(v.driver.getItems,v.items.map(x=>({key:x.relativeKey,options:x.options})),u).then(x=>x.map(S=>({key:CE(v.base,S.key),value:Vc(S.value)}))):Promise.all(v.items.map(x=>Wt(v.driver.getItem,x.relativeKey,x.options).then(S=>({key:x.key,value:Vc(S)})))))},getItemRaw(l,u={}){l=Er(l);const{relativeKey:v,driver:x}=r(l);return x.getItemRaw?Wt(x.getItemRaw,v,u):Wt(x.getItem,v,u).then(S=>ME(S))},async setItem(l,u,v={}){if(u===void 0)return c.removeItem(l);l=Er(l);const{relativeKey:x,driver:S}=r(l);S.setItem&&(await Wt(S.setItem,x,Gc(u),v),S.watch||n("update",l))},async setItems(l,u){await a(l,u,async v=>{if(v.driver.setItems)return Wt(v.driver.setItems,v.items.map(x=>({key:x.relativeKey,value:Gc(x.value),options:x.options})),u);v.driver.setItem&&await Promise.all(v.items.map(x=>Wt(v.driver.setItem,x.relativeKey,Gc(x.value),x.options)))})},async setItemRaw(l,u,v={}){if(u===void 0)return c.removeItem(l,v);l=Er(l);const{relativeKey:x,driver:S}=r(l);if(S.setItemRaw)await Wt(S.setItemRaw,x,u,v);else if(S.setItem)await Wt(S.setItem,x,IE(u),v);else return;S.watch||n("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Er(l);const{relativeKey:v,driver:x}=r(l);x.removeItem&&(await Wt(x.removeItem,v,u),(u.removeMeta||u.removeMata)&&await Wt(x.removeItem,v+"$",u),x.watch||n("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Er(l);const{relativeKey:v,driver:x}=r(l),S=Object.create(null);if(x.getMeta&&Object.assign(S,await Wt(x.getMeta,v,u)),!u.nativeOnly){const E=await Wt(x.getItem,v+"$",u).then(I=>Vc(I));E&&typeof E=="object"&&(typeof E.atime=="string"&&(E.atime=new Date(E.atime)),typeof E.mtime=="string"&&(E.mtime=new Date(E.mtime)),Object.assign(S,E))}return S},setMeta(l,u,v={}){return this.setItem(l+"$",u,v)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){l=Jc(l);const v=i(l,!0);let x=[];const S=[];for(const E of v){const I=await Wt(E.driver.getKeys,E.relativeBase,u);for(const C of I){const O=E.mountpoint+Er(C);x.some(R=>O.startsWith(R))||S.push(O)}x=[E.mountpoint,...x.filter(C=>!C.startsWith(E.mountpoint))]}return l?S.filter(E=>E.startsWith(l)&&E[E.length-1]!=="$"):S.filter(E=>E[E.length-1]!=="$")},async clear(l,u={}){l=Jc(l),await Promise.all(i(l,!1).map(async v=>{if(v.driver.clear)return Wt(v.driver.clear,v.relativeBase,u);if(v.driver.removeItem){const x=await v.driver.getKeys(v.relativeBase||"",u);return Promise.all(x.map(S=>v.driver.removeItem(S,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>Vg(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=Jc(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((v,x)=>x.length-v.length)),e.mounts[l]=u,e.watching&&Promise.resolve(Kg(u,n,l)).then(v=>{e.unwatch[l]=v}).catch(console.error),c},async unmount(l,u=!0){l=Jc(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l]?.(),delete e.unwatch[l]),u&&await Vg(e.mounts[l]),e.mountpoints=e.mountpoints.filter(v=>v!==l),delete e.mounts[l])},getMount(l=""){l=Er(l)+":";const u=r(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Er(l),i(l,u.parents).map(x=>({driver:x.driver,base:x.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,v={})=>c.setItem(l,u,v),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function Kg(t,e,r){return t.watch?t.watch((i,n)=>e(i,r+n)):()=>{}}async function Vg(t){typeof t.dispose=="function"&&await Wt(t.dispose)}function hs(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function Gg(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const i=hs(r);return(n,s)=>i.then(o=>s(o.transaction(e,n).objectStore(e)))}let jh;function va(){return jh||(jh=Gg("keyval-store","keyval")),jh}function Jg(t,e=va()){return e("readonly",r=>hs(r.get(t)))}function TE(t,e,r=va()){return r("readwrite",i=>(i.put(e,t),hs(i.transaction)))}function FE(t,e=va()){return e("readwrite",r=>(r.delete(t),hs(r.transaction)))}function LE(t=va()){return t("readwrite",e=>(e.clear(),hs(e.transaction)))}function BE(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},hs(t.transaction)}function UE(t=va()){return t("readonly",e=>{if(e.getAllKeys)return hs(e.getAllKeys());const r=[];return BE(e,i=>r.push(i.key)).then(()=>r)})}const qE="idb-keyval";var jE=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=n=>e+n;let i;return t.dbName&&t.storeName&&(i=Gg(t.dbName,t.storeName)),{name:qE,options:t,async hasItem(n){return!(typeof await Jg(r(n),i)>"u")},async getItem(n){return await Jg(r(n),i)??null},setItem(n,s){return TE(r(n),s,i)},removeItem(n){return FE(r(n),i)},getKeys(){return UE(i)},clear(){return LE(i)}}};const kE="WALLET_CONNECT_V2_INDEXED_DB",zE="keyvaluestorage";class HE{constructor(){this.indexedDb=NE({driver:jE({dbName:kE,storeName:zE})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Hi(r))}async removeItem(e){await this.indexedDb.removeItem(e)}}var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zc={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,i){this[r]=String(i)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(i){r[i]=void 0,delete r[i]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof kh<"u"&&kh.localStorage?Zc.exports=kh.localStorage:typeof window<"u"&&window.localStorage?Zc.exports=window.localStorage:Zc.exports=new e})();function WE(t){var e;return[t[0],es((e=t[1])!=null?e:"")]}class KE{constructor(){this.localStorage=Zc.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(WE)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return es(r)}async setItem(e,r){this.localStorage.setItem(e,Hi(r))}async removeItem(e){this.localStorage.removeItem(e)}}const VE="wc_storage_version",Zg=1,GE=async(t,e,r)=>{const i=VE,n=await e.getItem(i);if(n&&n>=Zg){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(i,Zg),r(e),JE(t,o)},JE=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};class ZE{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new KE;this.storage=e;try{const r=new HE;GE(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}}function YE(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var XE=QE;function QE(t,e,r){var i=r&&r.stringify||YE,n=1;if(typeof t=="object"&&t!==null){var s=e.length+n;if(s===1)return t;var o=new Array(s);o[0]=i(t);for(var a=1;a<s;a++)o[a]=i(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-n,v=-1,x=t&&t.length||0,S=0;S<x;){if(t.charCodeAt(S)===37&&S+1<x){switch(v=v>-1?v:0,t.charCodeAt(S+1)){case 100:case 102:if(u>=c||e[u]==null)break;v<S&&(l+=t.slice(v,S)),l+=Number(e[u]),v=S+2,S++;break;case 105:if(u>=c||e[u]==null)break;v<S&&(l+=t.slice(v,S)),l+=Math.floor(Number(e[u])),v=S+2,S++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;v<S&&(l+=t.slice(v,S));var E=typeof e[u];if(E==="string"){l+="'"+e[u]+"'",v=S+2,S++;break}if(E==="function"){l+=e[u].name||"<anonymous>",v=S+2,S++;break}l+=i(e[u]),v=S+2,S++;break;case 115:if(u>=c)break;v<S&&(l+=t.slice(v,S)),l+=String(e[u]),v=S+2,S++;break;case 37:v<S&&(l+=t.slice(v,S)),l+="%",v=S+2,S++,u--;break}++u}++S}return v===-1?t:(v<x&&(l+=t.slice(v)),l)}const Yg=XE;var Oi=Ci;const ma=l$().console||{},e$={mapHttpRequest:Xc,mapHttpResponse:Xc,wrapRequestSerializer:Hh,wrapResponseSerializer:Hh,wrapErrorSerializer:Hh,req:Xc,res:Xc,err:s$};function t$(t,e){return Array.isArray(t)?t.filter(function(i){return i!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Ci(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||ma;t.browser.write&&(t.browser.asObject=!0);const i=t.serializers||{},n=t$(t.browser.serialize,i);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(r);c.log||(c.log=ba),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:v,set:x});const l={transmit:e,serialize:n,asObject:t.browser.asObject,levels:o,timestamp:o$(t)};c.levels=Ci.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=ba,c.serializers=i,c._serialize=n,c._stdErrSerialize=s,c.child=S,e&&(c._logEvent=zh());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function v(){return this._level}function x(E){if(E!=="silent"&&!this.levels.values[E])throw Error("unknown level "+E);this._level=E,lo(l,c,"error","log"),lo(l,c,"fatal","error"),lo(l,c,"warn","error"),lo(l,c,"info","log"),lo(l,c,"debug","log"),lo(l,c,"trace","log")}function S(E,I){if(!E)throw new Error("missing bindings for child Pino");I=I||{},n&&E.serializers&&(I.serializers=E.serializers);const C=I.serializers;if(n&&C){var O=Object.assign({},i,C),R=t.browser.serialize===!0?Object.keys(O):n;delete E.serializers,Yc([E],R,O,this._stdErrSerialize)}function N(T){this._childLevel=(T._childLevel|0)+1,this.error=fo(T,E,"error"),this.fatal=fo(T,E,"fatal"),this.warn=fo(T,E,"warn"),this.info=fo(T,E,"info"),this.debug=fo(T,E,"debug"),this.trace=fo(T,E,"trace"),O&&(this.serializers=O,this._serialize=R),e&&(this._logEvent=zh([].concat(T._logEvent.bindings,E)))}return N.prototype=this,new N(this)}return c}Ci.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},Ci.stdSerializers=e$,Ci.stdTimeFunctions=Object.assign({},{nullTime:Xg,epochTime:Qg,unixTime:a$,isoTime:c$});function lo(t,e,r,i){const n=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?ba:n[r]?n[r]:ma[r]||ma[i]||ba,r$(t,e,r)}function r$(t,e,r){!t.transmit&&e[r]===ba||(e[r]=function(i){return function(){const s=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ma?ma:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&Yc(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?i.call(a,i$(this,r,o,s)):i.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Ci.levels.values[l],v=Ci.levels.values[r];if(v<u)return;n$(this,{ts:s,methodLevel:r,methodValue:v,transmitLevel:l,transmitValue:Ci.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[r]))}function i$(t,e,r,i){t._serialize&&Yc(r,t._serialize,t.serializers,t._stdErrSerialize);const n=r.slice();let s=n[0];const o={};i&&(o.time=i),o.level=Ci.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),s!==null&&typeof s=="object"){for(;a--&&typeof n[0]=="object";)Object.assign(o,n.shift());s=n.length?Yg(n.shift(),n):void 0}else typeof s=="string"&&(s=Yg(n.shift(),n));return s!==void 0&&(o.msg=s),o}function Yc(t,e,r,i){for(const n in t)if(i&&t[n]instanceof Error)t[n]=Ci.stdSerializers.err(t[n]);else if(typeof t[n]=="object"&&!Array.isArray(t[n]))for(const s in t[n])e&&e.indexOf(s)>-1&&s in r&&(t[n][s]=r[s](t[n][s]))}function fo(t,e,r){return function(){const i=new Array(1+arguments.length);i[0]=e;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return t[r].apply(this,i)}}function n$(t,e,r){const i=e.send,n=e.ts,s=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;Yc(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=n,t._logEvent.messages=r.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=s,t._logEvent.level.value=o,i(s,t._logEvent,a),t._logEvent=zh(c)}function zh(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function s$(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function o$(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Xg:Qg}function Xc(){return{}}function Hh(t){return t}function ba(){}function Xg(){return!1}function Qg(){return Date.now()}function a$(){return Math.round(Date.now()/1e3)}function c$(){return new Date(Date.now()).toISOString()}function l$(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const f$={level:"info"},ya="custom_context",Wh=1e3*1024;class h${constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class ev{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new h$(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}}class tv{constructor(e,r=Wh){this.level=e??"error",this.levelValue=Oi.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new ev(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===Oi.levels.values.error?console.error(e):r===Oi.levels.values.warn?console.warn(e):r===Oi.levels.values.debug?console.debug(e):r===Oi.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Hi({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new ev(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(Hi({extraMetadata:e})),new Blob(r,{type:"application/json"})}}class u${constructor(e,r=Wh){this.baseChunkLogger=new tv(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),i=document.createElement("a");i.href=r,i.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}}class d${constructor(e,r=Wh){this.baseChunkLogger=new tv(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var p$=Object.defineProperty,g$=Object.defineProperties,v$=Object.getOwnPropertyDescriptors,rv=Object.getOwnPropertySymbols,m$=Object.prototype.hasOwnProperty,b$=Object.prototype.propertyIsEnumerable,iv=(t,e,r)=>e in t?p$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qc=(t,e)=>{for(var r in e||(e={}))m$.call(e,r)&&iv(t,r,e[r]);if(rv)for(var r of rv(e))b$.call(e,r)&&iv(t,r,e[r]);return t},el=(t,e)=>g$(t,v$(e));function tl(t){return el(Qc({},t),{level:t?.level||f$.level})}function y$(t,e=ya){return t[e]||""}function w$(t,e,r=ya){return t[r]=e,t}function $r(t,e=ya){let r="";return typeof t.bindings>"u"?r=y$(t,e):r=t.bindings().context||"",r}function _$(t,e,r=ya){const i=$r(t,r);return i.trim()?`${i}/${e}`:e}function gr(t,e,r=ya){const i=_$(t,e,r),n=t.child({context:i});return w$(n,i,r)}function x$(t){var e,r;const i=new u$((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Oi(el(Qc({},t.opts),{level:"trace",browser:el(Qc({},(r=t.opts)==null?void 0:r.browser),{write:n=>i.write(n)})})),chunkLoggerController:i}}function E$(t){var e;const r=new d$((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Oi(el(Qc({},t.opts),{level:"trace"})),chunkLoggerController:r}}function $$(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?x$(t):E$(t)}class S$ extends fs{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class A$ extends fs{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}}class I${constructor(e,r){this.logger=e,this.core=r}}class M$ extends fs{constructor(e,r){super(),this.relayer=e,this.logger=r}}class P$ extends fs{constructor(e){super()}}class O${constructor(e,r,i,n){this.core=e,this.logger=r,this.name=i}}class C$ extends fs{constructor(e,r){super(),this.relayer=e,this.logger=r}}class D$ extends fs{constructor(e,r){super(),this.core=e,this.logger=r}}class R${constructor(e,r,i){this.core=e,this.logger=r,this.store=i}}class N${constructor(e,r){this.projectId=e,this.logger=r}}class T${constructor(e,r,i){this.core=e,this.logger=r,this.telemetryEnabled=i}}class F${constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class L${constructor(e){this.client=e}}const B$="PARSE_ERROR",U$="INVALID_REQUEST",q$="METHOD_NOT_FOUND",j$="INVALID_PARAMS",nv="INTERNAL_ERROR",Kh="SERVER_ERROR",k$=[-32700,-32600,-32601,-32602,-32603],wa={[B$]:{code:-32700,message:"Parse error"},[U$]:{code:-32600,message:"Invalid Request"},[q$]:{code:-32601,message:"Method not found"},[j$]:{code:-32602,message:"Invalid params"},[nv]:{code:-32603,message:"Internal error"},[Kh]:{code:-32e3,message:"Server error"}},sv=Kh;function z$(t){return k$.includes(t)}function ov(t){return Object.keys(wa).includes(t)?wa[t]:wa[sv]}function H$(t){const e=Object.values(wa).find(r=>r.code===t);return e||wa[sv]}function av(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var cv={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Vh=function(t,e){return Vh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Vh(t,e)};function W$(t,e){Vh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Gh=function(){return Gh=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Gh.apply(this,arguments)};function K$(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function V$(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,r,s):o(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}function G$(t,e){return function(r,i){e(r,i,t)}}function J$(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Z$(t,e,r,i){function n(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(v){o(v)}}function c(u){try{l(i.throw(u))}catch(v){o(v)}}function l(u){u.done?s(u.value):n(u.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}function Y$(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=l[0]&2?n.return:l[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,l[1])).done)return s;switch(n=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],n=0}finally{i=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function X$(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}function Q$(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Jh(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function lv(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,s=[],o;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function eS(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(lv(arguments[e]));return t}function tS(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function _a(t){return this instanceof _a?(this.v=t,this):new _a(t)}function rS(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),n,s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(x){i[x]&&(n[x]=function(S){return new Promise(function(E,I){s.push([x,S,E,I])>1||a(x,S)})})}function a(x,S){try{c(i[x](S))}catch(E){v(s[0][3],E)}}function c(x){x.value instanceof _a?Promise.resolve(x.value.v).then(l,u):v(s[0][2],x)}function l(x){a("next",x)}function u(x){a("throw",x)}function v(x,S){x(S),s.shift(),s.length&&a(s[0][0],s[0][1])}}function iS(t){var e,r;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=t[n]?function(o){return(r=!r)?{value:_a(t[n](o)),done:n==="return"}:s?s(o):o}:s}}function nS(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Jh=="function"?Jh(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),n(a,c,o.done,o.value)})}}function n(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function sS(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function oS(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function aS(t){return t&&t.__esModule?t:{default:t}}function cS(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function lS(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var fS=Object.freeze({__proto__:null,__extends:W$,get __assign(){return Gh},__rest:K$,__decorate:V$,__param:G$,__metadata:J$,__awaiter:Z$,__generator:Y$,__createBinding:X$,__exportStar:Q$,__values:Jh,__read:lv,__spread:eS,__spreadArrays:tS,__await:_a,__asyncGenerator:rS,__asyncDelegator:iS,__asyncValues:nS,__makeTemplateObject:sS,__importStar:oS,__importDefault:aS,__classPrivateFieldGet:cS,__classPrivateFieldSet:lS}),hS=tf(fS),Xi={},fv;function uS(){if(fv)return Xi;fv=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.isBrowserCryptoAvailable=Xi.getSubtleCrypto=Xi.getBrowerCrypto=void 0;function t(){return Ot?.crypto||Ot?.msCrypto||{}}Xi.getBrowerCrypto=t;function e(){const i=t();return i.subtle||i.webkitSubtle}Xi.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Xi.isBrowserCryptoAvailable=r,Xi}var Qi={},hv;function dS(){if(hv)return Qi;hv=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.isBrowser=Qi.isNode=Qi.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Qi.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Qi.isNode=e;function r(){return!t()&&!e()}return Qi.isBrowser=r,Qi}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=hS;e.__exportStar(uS(),t),e.__exportStar(dS(),t)})(cv);function en(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function us(t=6){return BigInt(en(t))}function Rn(t,e,r){return{id:r||en(),jsonrpc:"2.0",method:t,params:e}}function rl(t,e){return{id:t,jsonrpc:"2.0",result:e}}function il(t,e,r){return{id:t,jsonrpc:"2.0",error:pS(e,r)}}function pS(t,e){return typeof t>"u"?ov(nv):(typeof t=="string"&&(t=Object.assign(Object.assign({},ov(Kh)),{message:t})),typeof e<"u"&&(t.data=e),z$(t.code)&&(t=H$(t.code)),t)}class gS{}class vS extends gS{constructor(){super()}}class mS extends vS{constructor(e){super()}}const bS="^https?:",yS="^wss?:";function wS(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function uv(t,e){const r=wS(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function dv(t){return uv(t,bS)}function pv(t){return uv(t,yS)}function _S(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function gv(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Zh(t){return gv(t)&&"method"in t}function nl(t){return gv(t)&&(Di(t)||Zr(t))}function Di(t){return"result"in t}function Zr(t){return"error"in t}class Yr extends mS{constructor(e){super(e),this.events=new Zt.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Rn(e.method,e.params||[],e.id||us().toString()),r)}async requestStrict(e,r){return new Promise(async(i,n)=>{if(!this.connection.connected)try{await this.open()}catch(s){n(s)}this.events.on(`${e.id}`,s=>{Zr(s)?n(s.error):i(s.result)});try{await this.connection.send(e,r)}catch(s){n(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),nl(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const xS=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),ES=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",vv=t=>t.split("?")[0],mv=10,$S=xS();class SS{constructor(e){if(this.url=e,this.events=new Zt.exports.EventEmitter,this.registering=!1,!pv(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Hi(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!pv(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((i,n)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),n(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return n(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,i)=>{const n=cv.isReactNative()?void 0:{rejectUnauthorized:!_S(e)},s=new $S(e,[],n);ES()?s.onerror=o=>{const a=o;i(this.emitError(a.error))}:s.on("error",o=>{i(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?es(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const i=this.parseError(r),n=i.message||i.toString(),s=il(e,n);this.events.emit("payload",s)}parseError(e,r=this.url){return av(e,vv(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>mv&&this.events.setMaxListeners(mv)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${vv(this.url)}`));return this.events.emit("register_error",r),r}}var Yh={exports:{}};(function(t,e){var r=200,i="__lodash_hash_undefined__",n=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",v="[object Date]",x="[object Error]",S="[object Function]",E="[object GeneratorFunction]",I="[object Map]",C="[object Number]",O="[object Null]",R="[object Object]",N="[object Promise]",T="[object Proxy]",U="[object RegExp]",z="[object Set]",W="[object String]",K="[object Symbol]",B="[object Undefined]",V="[object WeakMap]",M="[object ArrayBuffer]",m="[object DataView]",g="[object Float32Array]",f="[object Float64Array]",h="[object Int8Array]",p="[object Int16Array]",_="[object Int32Array]",$="[object Uint8Array]",y="[object Uint8ClampedArray]",d="[object Uint16Array]",w="[object Uint32Array]",b=/[\\^$.*+?()[\]{}|]/g,P=/^\[object .+?Constructor\]$/,q=/^(?:0|[1-9]\d*)$/,A={};A[g]=A[f]=A[h]=A[p]=A[_]=A[$]=A[y]=A[d]=A[w]=!0,A[a]=A[c]=A[M]=A[u]=A[m]=A[v]=A[x]=A[S]=A[I]=A[C]=A[R]=A[U]=A[z]=A[W]=A[V]=!1;var F=typeof Ot=="object"&&Ot&&Ot.Object===Object&&Ot,j=typeof self=="object"&&self&&self.Object===Object&&self,k=F||j||Function("return this")(),H=e&&!e.nodeType&&e,Z=H&&!0&&t&&!t.nodeType&&t,X=Z&&Z.exports===H,J=X&&F.process,oe=function(){try{return J&&J.binding&&J.binding("util")}catch{}}(),te=oe&&oe.isTypedArray;function re(D,L){for(var G=-1,ie=D==null?0:D.length,xt=0,$e=[];++G<ie;){var Pt=D[G];L(Pt,G,D)&&($e[xt++]=Pt)}return $e}function Ve(D,L){for(var G=-1,ie=L.length,xt=D.length;++G<ie;)D[xt+G]=L[G];return D}function Ge(D,L){for(var G=-1,ie=D==null?0:D.length;++G<ie;)if(L(D[G],G,D))return!0;return!1}function ue(D,L){for(var G=-1,ie=Array(D);++G<D;)ie[G]=L(G);return ie}function Le(D){return function(L){return D(L)}}function Be(D,L){return D.has(L)}function le(D,L){return D?.[L]}function Ue(D){var L=-1,G=Array(D.size);return D.forEach(function(ie,xt){G[++L]=[xt,ie]}),G}function qe(D,L){return function(G){return D(L(G))}}function he(D){var L=-1,G=Array(D.size);return D.forEach(function(ie){G[++L]=ie}),G}var je=Array.prototype,ke=Function.prototype,ce=Object.prototype,Te=k["__core-js_shared__"],ze=ke.toString,se=ce.hasOwnProperty,et=function(){var D=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||"");return D?"Symbol(src)_1."+D:""}(),tt=ce.toString,ve=RegExp("^"+ze.call(se).replace(b,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rt=X?k.Buffer:void 0,He=k.Symbol,pe=k.Uint8Array,it=ce.propertyIsEnumerable,at=je.splice,ae=He?He.toStringTag:void 0,nt=Object.getOwnPropertySymbols,ct=rt?rt.isBuffer:void 0,me=qe(Object.keys,Object),Je=Lo(k,"DataView"),Fe=Lo(k,"Map"),de=Lo(k,"Promise"),Ze=Lo(k,"Set"),Ye=Lo(k,"WeakMap"),fe=Lo(Object,"create"),lt=Ds(Je),ft=Ds(Fe),be=Ds(de),ht=Ds(Ze),ut=Ds(Ye),ge=He?He.prototype:void 0,Xe=ge?ge.valueOf:void 0;function De(D){var L=-1,G=D==null?0:D.length;for(this.clear();++L<G;){var ie=D[L];this.set(ie[0],ie[1])}}function ye(){this.__data__=fe?fe(null):{},this.size=0}function dt(D){var L=this.has(D)&&delete this.__data__[D];return this.size-=L?1:0,L}function pt(D){var L=this.__data__;if(fe){var G=L[D];return G===i?void 0:G}return se.call(L,D)?L[D]:void 0}function we(D){var L=this.__data__;return fe?L[D]!==void 0:se.call(L,D)}function gt(D,L){var G=this.__data__;return this.size+=this.has(D)?0:1,G[D]=fe&&L===void 0?i:L,this}De.prototype.clear=ye,De.prototype.delete=dt,De.prototype.get=pt,De.prototype.has=we,De.prototype.set=gt;function Ae(D){var L=-1,G=D==null?0:D.length;for(this.clear();++L<G;){var ie=D[L];this.set(ie[0],ie[1])}}function st(){this.__data__=[],this.size=0}function Ir(D){var L=this.__data__,G=Zl(L,D);if(G<0)return!1;var ie=L.length-1;return G==ie?L.pop():at.call(L,G,1),--this.size,!0}function Mr(D){var L=this.__data__,G=Zl(L,D);return G<0?void 0:L[G][1]}function Pr(D){return Zl(this.__data__,D)>-1}function Or(D,L){var G=this.__data__,ie=Zl(G,D);return ie<0?(++this.size,G.push([D,L])):G[ie][1]=L,this}Ae.prototype.clear=st,Ae.prototype.delete=Ir,Ae.prototype.get=Mr,Ae.prototype.has=Pr,Ae.prototype.set=Or;function Tt(D){var L=-1,G=D==null?0:D.length;for(this.clear();++L<G;){var ie=D[L];this.set(ie[0],ie[1])}}function on(){this.size=0,this.__data__={hash:new De,map:new(Fe||Ae),string:new De}}function an(D){var L=Yl(this,D).delete(D);return this.size-=L?1:0,L}function cn(D){return Yl(this,D).get(D)}function ln(D){return Yl(this,D).has(D)}function fn(D,L){var G=Yl(this,D),ie=G.size;return G.set(D,L),this.size+=G.size==ie?0:1,this}Tt.prototype.clear=on,Tt.prototype.delete=an,Tt.prototype.get=cn,Tt.prototype.has=ln,Tt.prototype.set=fn;function ri(D){var L=-1,G=D==null?0:D.length;for(this.__data__=new Tt;++L<G;)this.add(D[L])}function hn(D){return this.__data__.set(D,i),this}function un(D){return this.__data__.has(D)}ri.prototype.add=ri.prototype.push=hn,ri.prototype.has=un;function lr(D){var L=this.__data__=new Ae(D);this.size=L.size}function dn(){this.__data__=new Ae,this.size=0}function pn(D){var L=this.__data__,G=L.delete(D);return this.size=L.size,G}function gn(D){return this.__data__.get(D)}function Ja(D){return this.__data__.has(D)}function Za(D,L){var G=this.__data__;if(G instanceof Ae){var ie=G.__data__;if(!Fe||ie.length<r-1)return ie.push([D,L]),this.size=++G.size,this;G=this.__data__=new Tt(ie)}return G.set(D,L),this.size=G.size,this}lr.prototype.clear=dn,lr.prototype.delete=pn,lr.prototype.get=gn,lr.prototype.has=Ja,lr.prototype.set=Za;function Jq(D,L){var G=Xl(D),ie=!G&&fj(D),xt=!G&&!ie&&Cd(D),$e=!G&&!ie&&!xt&&ty(D),Pt=G||ie||xt||$e,Jt=Pt?ue(D.length,String):[],nr=Jt.length;for(var $t in D)(L||se.call(D,$t))&&!(Pt&&($t=="length"||xt&&($t=="offset"||$t=="parent")||$e&&($t=="buffer"||$t=="byteLength"||$t=="byteOffset")||sj($t,nr)))&&Jt.push($t);return Jt}function Zl(D,L){for(var G=D.length;G--;)if(Y2(D[G][0],L))return G;return-1}function Zq(D,L,G){var ie=L(D);return Xl(D)?ie:Ve(ie,G(D))}function Ya(D){return D==null?D===void 0?B:O:ae&&ae in Object(D)?ij(D):lj(D)}function V2(D){return Xa(D)&&Ya(D)==a}function G2(D,L,G,ie,xt){return D===L?!0:D==null||L==null||!Xa(D)&&!Xa(L)?D!==D&&L!==L:Yq(D,L,G,ie,G2,xt)}function Yq(D,L,G,ie,xt,$e){var Pt=Xl(D),Jt=Xl(L),nr=Pt?c:Kn(D),$t=Jt?c:Kn(L);nr=nr==a?R:nr,$t=$t==a?R:$t;var jr=nr==R,mi=$t==R,fr=nr==$t;if(fr&&Cd(D)){if(!Cd(L))return!1;Pt=!0,jr=!1}if(fr&&!jr)return $e||($e=new lr),Pt||ty(D)?J2(D,L,G,ie,xt,$e):tj(D,L,nr,G,ie,xt,$e);if(!(G&n)){var ii=jr&&se.call(D,"__wrapped__"),ni=mi&&se.call(L,"__wrapped__");if(ii||ni){var Vn=ii?D.value():D,vn=ni?L.value():L;return $e||($e=new lr),xt(Vn,vn,G,ie,$e)}}return fr?($e||($e=new lr),rj(D,L,G,ie,xt,$e)):!1}function Xq(D){if(!ey(D)||aj(D))return!1;var L=X2(D)?ve:P;return L.test(Ds(D))}function Qq(D){return Xa(D)&&Q2(D.length)&&!!A[Ya(D)]}function ej(D){if(!cj(D))return me(D);var L=[];for(var G in Object(D))se.call(D,G)&&G!="constructor"&&L.push(G);return L}function J2(D,L,G,ie,xt,$e){var Pt=G&n,Jt=D.length,nr=L.length;if(Jt!=nr&&!(Pt&&nr>Jt))return!1;var $t=$e.get(D);if($t&&$e.get(L))return $t==L;var jr=-1,mi=!0,fr=G&s?new ri:void 0;for($e.set(D,L),$e.set(L,D);++jr<Jt;){var ii=D[jr],ni=L[jr];if(ie)var Vn=Pt?ie(ni,ii,jr,L,D,$e):ie(ii,ni,jr,D,L,$e);if(Vn!==void 0){if(Vn)continue;mi=!1;break}if(fr){if(!Ge(L,function(vn,Rs){if(!Be(fr,Rs)&&(ii===vn||xt(ii,vn,G,ie,$e)))return fr.push(Rs)})){mi=!1;break}}else if(!(ii===ni||xt(ii,ni,G,ie,$e))){mi=!1;break}}return $e.delete(D),$e.delete(L),mi}function tj(D,L,G,ie,xt,$e,Pt){switch(G){case m:if(D.byteLength!=L.byteLength||D.byteOffset!=L.byteOffset)return!1;D=D.buffer,L=L.buffer;case M:return!(D.byteLength!=L.byteLength||!$e(new pe(D),new pe(L)));case u:case v:case C:return Y2(+D,+L);case x:return D.name==L.name&&D.message==L.message;case U:case W:return D==L+"";case I:var Jt=Ue;case z:var nr=ie&n;if(Jt||(Jt=he),D.size!=L.size&&!nr)return!1;var $t=Pt.get(D);if($t)return $t==L;ie|=s,Pt.set(D,L);var jr=J2(Jt(D),Jt(L),ie,xt,$e,Pt);return Pt.delete(D),jr;case K:if(Xe)return Xe.call(D)==Xe.call(L)}return!1}function rj(D,L,G,ie,xt,$e){var Pt=G&n,Jt=Z2(D),nr=Jt.length,$t=Z2(L),jr=$t.length;if(nr!=jr&&!Pt)return!1;for(var mi=nr;mi--;){var fr=Jt[mi];if(!(Pt?fr in L:se.call(L,fr)))return!1}var ii=$e.get(D);if(ii&&$e.get(L))return ii==L;var ni=!0;$e.set(D,L),$e.set(L,D);for(var Vn=Pt;++mi<nr;){fr=Jt[mi];var vn=D[fr],Rs=L[fr];if(ie)var ry=Pt?ie(Rs,vn,fr,L,D,$e):ie(vn,Rs,fr,D,L,$e);if(!(ry===void 0?vn===Rs||xt(vn,Rs,G,ie,$e):ry)){ni=!1;break}Vn||(Vn=fr=="constructor")}if(ni&&!Vn){var Ql=D.constructor,ef=L.constructor;Ql!=ef&&"constructor"in D&&"constructor"in L&&!(typeof Ql=="function"&&Ql instanceof Ql&&typeof ef=="function"&&ef instanceof ef)&&(ni=!1)}return $e.delete(D),$e.delete(L),ni}function Z2(D){return Zq(D,dj,nj)}function Yl(D,L){var G=D.__data__;return oj(L)?G[typeof L=="string"?"string":"hash"]:G.map}function Lo(D,L){var G=le(D,L);return Xq(G)?G:void 0}function ij(D){var L=se.call(D,ae),G=D[ae];try{D[ae]=void 0;var ie=!0}catch{}var xt=tt.call(D);return ie&&(L?D[ae]=G:delete D[ae]),xt}var nj=nt?function(D){return D==null?[]:(D=Object(D),re(nt(D),function(L){return it.call(D,L)}))}:pj,Kn=Ya;(Je&&Kn(new Je(new ArrayBuffer(1)))!=m||Fe&&Kn(new Fe)!=I||de&&Kn(de.resolve())!=N||Ze&&Kn(new Ze)!=z||Ye&&Kn(new Ye)!=V)&&(Kn=function(D){var L=Ya(D),G=L==R?D.constructor:void 0,ie=G?Ds(G):"";if(ie)switch(ie){case lt:return m;case ft:return I;case be:return N;case ht:return z;case ut:return V}return L});function sj(D,L){return L=L??o,!!L&&(typeof D=="number"||q.test(D))&&D>-1&&D%1==0&&D<L}function oj(D){var L=typeof D;return L=="string"||L=="number"||L=="symbol"||L=="boolean"?D!=="__proto__":D===null}function aj(D){return!!et&&et in D}function cj(D){var L=D&&D.constructor,G=typeof L=="function"&&L.prototype||ce;return D===G}function lj(D){return tt.call(D)}function Ds(D){if(D!=null){try{return ze.call(D)}catch{}try{return D+""}catch{}}return""}function Y2(D,L){return D===L||D!==D&&L!==L}var fj=V2(function(){return arguments}())?V2:function(D){return Xa(D)&&se.call(D,"callee")&&!it.call(D,"callee")},Xl=Array.isArray;function hj(D){return D!=null&&Q2(D.length)&&!X2(D)}var Cd=ct||gj;function uj(D,L){return G2(D,L)}function X2(D){if(!ey(D))return!1;var L=Ya(D);return L==S||L==E||L==l||L==T}function Q2(D){return typeof D=="number"&&D>-1&&D%1==0&&D<=o}function ey(D){var L=typeof D;return D!=null&&(L=="object"||L=="function")}function Xa(D){return D!=null&&typeof D=="object"}var ty=te?Le(te):Qq;function dj(D){return hj(D)?Jq(D):ej(D)}function pj(){return[]}function gj(){return!1}t.exports=uj})(Yh,Yh.exports);var AS=Yh.exports,IS=Object.defineProperty,bv=Object.getOwnPropertySymbols,MS=Object.prototype.hasOwnProperty,PS=Object.prototype.propertyIsEnumerable,yv=(t,e,r)=>e in t?IS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vr=(t,e)=>{for(var r in e||(e={}))MS.call(e,r)&&yv(t,r,e[r]);if(bv)for(var r of bv(e))PS.call(e,r)&&yv(t,r,e[r]);return t};const wv="wc",_v=2,sl="core",Ri=`${wv}@2:${sl}:`,OS={name:sl,logger:"error"},CS={database:":memory:"},DS="crypto",xv="client_ed25519_seed",RS=Y.ONE_DAY,NS="keychain",TS="0.3",FS="messages",LS="0.3",Ev=Y.SIX_HOURS,BS="publisher",$v="irn",US="error",Sv="wss://relay.walletconnect.org",qS="relayer",Kt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},jS="_subscription",Xr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},kS=.1,Xh="2.18.0",wt={link_mode:"link_mode",relay:"relay"},zS="0.3",HS="WALLETCONNECT_CLIENT_ID",Av="WALLETCONNECT_LINK_MODE_APPS",Lr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},WS="subscription",KS="0.3",VS=Y.FIVE_SECONDS*1e3,GS="pairing",JS="0.3",xa={wc_pairingDelete:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Y.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Y.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Y.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:0},res:{ttl:Y.ONE_DAY,prompt:!1,tag:0}}},ds={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},di={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},ZS="history",YS="0.3",XS="expirer",Qr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},QS="0.3",eA="verify-api",tA="https://verify.walletconnect.com",Iv="https://verify.walletconnect.org",Ea=Iv,rA=`${Ea}/v3`,iA=[tA,Iv],nA="echo",sA="https://echo.walletconnect.com",Ni={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},tn={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},pi={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ps={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},gs={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},$a={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},oA=.1,aA="event-client",cA=86400,lA="https://pulse.walletconnect.org/batch";function fA(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=n}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function v(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var I=0,C=0,O=0,R=E.length;O!==R&&E[O]===0;)O++,I++;for(var N=(R-O)*u+1>>>0,T=new Uint8Array(N);O!==R;){for(var U=E[O],z=0,W=N-1;(U!==0||z<C)&&W!==-1;W--,z++)U+=256*T[W]>>>0,T[W]=U%a>>>0,U=U/a>>>0;if(U!==0)throw new Error("Non-zero carry");C=z,O++}for(var K=N-C;K!==N&&T[K]===0;)K++;for(var B=c.repeat(I);K<N;++K)B+=t.charAt(T[K]);return B}function x(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var I=0;if(E[I]!==" "){for(var C=0,O=0;E[I]===c;)C++,I++;for(var R=(E.length-I)*l+1>>>0,N=new Uint8Array(R);E[I];){var T=r[E.charCodeAt(I)];if(T===255)return;for(var U=0,z=R-1;(T!==0||U<O)&&z!==-1;z--,U++)T+=a*N[z]>>>0,N[z]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");O=U,I++}if(E[I]!==" "){for(var W=R-O;W!==R&&N[W]===0;)W++;for(var K=new Uint8Array(C+(R-W)),B=C;W!==R;)K[B++]=N[W++];return K}}}function S(E){var I=x(E);if(I)return I;throw new Error(`Non-${e} character`)}return{encode:v,decodeUnsafe:x,decode:S}}var hA=fA,uA=hA;const Mv=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},dA=t=>new TextEncoder().encode(t),pA=t=>new TextDecoder().decode(t);class gA{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class vA{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Pv(this,e)}}class mA{constructor(e){this.decoders=e}or(e){return Pv(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Pv=(t,e)=>new mA(vr(vr({},t.decoders||{[t.prefix]:t}),e.decoders||{[e.prefix]:e}));class bA{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new gA(e,r,i),this.decoder=new vA(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ol=({name:t,prefix:e,encode:r,decode:i})=>new bA(t,e,r,i),Sa=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:n}=uA(r,e);return ol({prefix:t,name:e,encode:i,decode:s=>Mv(n(s))})},yA=(t,e,r,i)=>{const n={};for(let u=0;u<e.length;++u)n[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const v=n[t[u]];if(v===void 0)throw new SyntaxError(`Non-${i} character`);c=c<<r|v,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},wA=(t,e,r)=>{const i=e[e.length-1]==="=",n=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)o-=r,s+=e[n&a>>o];if(o&&(s+=e[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},ir=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>ol({prefix:e,name:t,encode(n){return wA(n,i,r)},decode(n){return yA(n,i,r,t)}}),_A=ol({prefix:"\0",name:"identity",encode:t=>pA(t),decode:t=>dA(t)});var xA=Object.freeze({__proto__:null,identity:_A});const EA=ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var $A=Object.freeze({__proto__:null,base2:EA});const SA=ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var AA=Object.freeze({__proto__:null,base8:SA});const IA=Sa({prefix:"9",name:"base10",alphabet:"0123456789"});var MA=Object.freeze({__proto__:null,base10:IA});const PA=ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),OA=ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var CA=Object.freeze({__proto__:null,base16:PA,base16upper:OA});const DA=ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),RA=ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),NA=ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),TA=ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),FA=ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),LA=ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),BA=ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),UA=ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),qA=ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var jA=Object.freeze({__proto__:null,base32:DA,base32upper:RA,base32pad:NA,base32padupper:TA,base32hex:FA,base32hexupper:LA,base32hexpad:BA,base32hexpadupper:UA,base32z:qA});const kA=Sa({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),zA=Sa({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var HA=Object.freeze({__proto__:null,base36:kA,base36upper:zA});const WA=Sa({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),KA=Sa({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var VA=Object.freeze({__proto__:null,base58btc:WA,base58flickr:KA});const GA=ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),JA=ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ZA=ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),YA=ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var XA=Object.freeze({__proto__:null,base64:GA,base64pad:JA,base64url:ZA,base64urlpad:YA});const Ov=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),QA=Ov.reduce((t,e,r)=>(t[r]=e,t),[]),eI=Ov.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function tI(t){return t.reduce((e,r)=>(e+=QA[r],e),"")}function rI(t){const e=[];for(const r of t){const i=eI[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const iI=ol({prefix:"\u{1F680}",name:"base256emoji",encode:tI,decode:rI});var nI=Object.freeze({__proto__:null,base256emoji:iI}),sI=Dv,Cv=128,oI=127,aI=~oI,cI=Math.pow(2,31);function Dv(t,e,r){e=e||[],r=r||0;for(var i=r;t>=cI;)e[r++]=t&255|Cv,t/=128;for(;t&aI;)e[r++]=t&255|Cv,t>>>=7;return e[r]=t|0,Dv.bytes=r-i+1,e}var lI=Qh,fI=128,Rv=127;function Qh(t,i){var r=0,i=i||0,n=0,s=i,o,a=t.length;do{if(s>=a)throw Qh.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=n<28?(o&Rv)<<n:(o&Rv)*Math.pow(2,n),n+=7}while(o>=fI);return Qh.bytes=s-i,r}var hI=Math.pow(2,7),uI=Math.pow(2,14),dI=Math.pow(2,21),pI=Math.pow(2,28),gI=Math.pow(2,35),vI=Math.pow(2,42),mI=Math.pow(2,49),bI=Math.pow(2,56),yI=Math.pow(2,63),wI=function(t){return t<hI?1:t<uI?2:t<dI?3:t<pI?4:t<gI?5:t<vI?6:t<mI?7:t<bI?8:t<yI?9:10},_I={encode:sI,decode:lI,encodingLength:wI},Nv=_I;const Tv=(t,e,r=0)=>(Nv.encode(t,e,r),e),Fv=t=>Nv.encodingLength(t),eu=(t,e)=>{const r=e.byteLength,i=Fv(t),n=i+Fv(r),s=new Uint8Array(n+r);return Tv(t,s,0),Tv(r,s,i),s.set(e,n),new xI(t,r,e,s)};class xI{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}const Lv=({name:t,code:e,encode:r})=>new EI(t,e,r);class EI{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?eu(this.code,r):r.then(i=>eu(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Bv=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),$I=Lv({name:"sha2-256",code:18,encode:Bv("SHA-256")}),SI=Lv({name:"sha2-512",code:19,encode:Bv("SHA-512")});var AI=Object.freeze({__proto__:null,sha256:$I,sha512:SI});const Uv=0,II="identity",qv=Mv;var MI=Object.freeze({__proto__:null,identity:{code:Uv,name:II,encode:qv,digest:t=>eu(Uv,qv(t))}});new TextEncoder,new TextDecoder;const jv=vr(vr(vr(vr(vr(vr(vr(vr(vr(vr({},xA),$A),AA),MA),CA),jA),HA),VA),XA),nI);vr(vr({},AI),MI);function PI(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function kv(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const zv=kv("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),tu=kv("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=PI(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),OI=vr({utf8:zv,"utf-8":zv,hex:jv.base16,latin1:tu,ascii:tu,binary:tu},jv);function CI(t,e="utf8"){const r=OI[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}class DI{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=NS,this.version=TS,this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,n)=>{this.isInitialized(),this.keychain.set(i,n),await this.persist()},this.get=i=>{this.isInitialized();const n=this.keychain.get(i);if(typeof n>"u"){const{message:s}=Q("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(s)}return n},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=gr(r,this.name)}get context(){return $r(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,N1(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?T1(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class RI{constructor(e,r,i){this.core=e,this.logger=r,this.name=DS,this.randomSessionIdentifier=Nh(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=n=>(this.isInitialized(),this.keychain.has(n)),this.getClientId=async()=>{this.isInitialized();const n=await this.getClientSeed(),s=Gp(n);return Vp(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const n=xx();return this.setPrivateKey(n.publicKey,n.privateKey)},this.signJWT=async n=>{this.isInitialized();const s=await this.getClientSeed(),o=Gp(s),a=this.randomSessionIdentifier;return await s8(a,n,RS,o)},this.generateSharedKey=(n,s,o)=>{this.isInitialized();const a=this.getPrivateKey(n),c=Ex(a,s);return this.setSymKey(c,o)},this.setSymKey=async(n,s)=>{this.isInitialized();const o=s||zc(n);return await this.keychain.set(o,n),o},this.deleteKeyPair=async n=>{this.isInitialized(),await this.keychain.del(n)},this.deleteSymKey=async n=>{this.isInitialized(),await this.keychain.del(n)},this.encode=async(n,s,o)=>{this.isInitialized();const a=Dg(o),c=Hi(s);if(Ng(a))return Ax(c,o?.encoding);if(Rg(a)){const x=a.senderPublicKey,S=a.receiverPublicKey;n=await this.generateSharedKey(x,S)}const l=this.getSymKey(n),{type:u,senderPublicKey:v}=a;return $x({type:u,symKey:l,message:c,senderPublicKey:v,encoding:o?.encoding})},this.decode=async(n,s,o)=>{this.isInitialized();const a=Mx(s,o);if(Ng(a)){const c=Ix(s,o?.encoding);return es(c)}if(Rg(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;n=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(n),l=Sx({symKey:c,encoded:s,encoding:o?.encoding});return es(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${n}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}},this.getPayloadType=(n,s=Dn)=>{const o=ha({encoded:n,encoding:s});return ls(o.type)},this.getPayloadSenderPublicKey=(n,s=Dn)=>{const o=ha({encoded:n,encoding:s});return o.senderPublicKey?dr(o.senderPublicKey,ar):void 0},this.core=e,this.logger=gr(r,this.name),this.keychain=i||new DI(this.core,this.logger)}get context(){return $r(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(xv)}catch{e=Nh(),await this.keychain.set(xv,e)}return CI(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class NI extends I${constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=FS,this.version=LS,this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,n)=>{this.isInitialized();const s=Zi(n);let o=this.messages.get(i);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=n,this.messages.set(i,o),await this.persist()),s},this.get=i=>{this.isInitialized();let n=this.messages.get(i);return typeof n>"u"&&(n={}),n},this.has=(i,n)=>{this.isInitialized();const s=this.get(i),o=Zi(n);return typeof s[o]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=gr(e,this.name),this.core=r}get context(){return $r(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,N1(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?T1(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}}var TI=Object.defineProperty,FI=Object.defineProperties,LI=Object.getOwnPropertyDescriptors,Hv=Object.getOwnPropertySymbols,BI=Object.prototype.hasOwnProperty,UI=Object.prototype.propertyIsEnumerable,Wv=(t,e,r)=>e in t?TI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Kv=(t,e)=>{for(var r in e||(e={}))BI.call(e,r)&&Wv(t,r,e[r]);if(Hv)for(var r of Hv(e))UI.call(e,r)&&Wv(t,r,e[r]);return t},Vv=(t,e)=>FI(t,LI(e));class qI extends M${constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Zt.exports.EventEmitter,this.name=BS,this.queue=new Map,this.publishTimeout=Y.toMiliseconds(Y.ONE_MINUTE),this.initialPublishTimeout=Y.toMiliseconds(Y.ONE_SECOND*15),this.needsTransportRestart=!1,this.publish=async(i,n,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:n,opts:s}});const a=s?.ttl||Ev,c=Hc(s),l=s?.prompt||!1,u=s?.tag||0,v=s?.id||us().toString(),x={topic:i,message:n,opts:{ttl:a,relay:c,prompt:l,tag:u,id:v,attestation:s?.attestation}},S=`Failed to publish payload, please try again. id:${v} tag:${u}`;try{const E=new Promise(async I=>{const C=({id:R})=>{x.opts.id===R&&(this.removeRequestFromQueue(R),this.relayer.events.removeListener(Kt.publish,C),I(x))};this.relayer.events.on(Kt.publish,C);const O=In(new Promise((R,N)=>{this.rpcPublish({topic:i,message:n,ttl:a,prompt:l,tag:u,id:v,attestation:s?.attestation}).then(R).catch(T=>{this.logger.warn(T,T?.message),N(T)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${v} tag:${u}`);try{await O,this.events.removeListener(Kt.publish,C)}catch(R){this.queue.set(v,Vv(Kv({},x),{attempt:1})),this.logger.warn(R,R?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:v,topic:i,message:n,opts:s}}),await In(E,this.publishTimeout,S)}catch(E){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(E),(o=s?.internal)!=null&&o.throwOnFailedPublish)throw E}finally{this.queue.delete(v)}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.relayer=e,this.logger=gr(r,this.name),this.registerEventListeners()}get context(){return $r(this.logger)}async rpcPublish(e){var r,i,n,s;const{topic:o,message:a,ttl:c=Ev,prompt:l,tag:u,id:v,attestation:x}=e,S={method:ua(Hc().protocol).publish,params:{topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:x},id:v};pr((r=S.params)==null?void 0:r.prompt)&&((i=S.params)==null||delete i.prompt),pr((n=S.params)==null?void 0:n.tag)&&((s=S.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:S});const E=await this.relayer.request(S);return this.relayer.events.emit(Kt.publish,e),this.logger.debug("Successfully Published Payload"),E}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const i=e.attempt+1;this.queue.set(r,Vv(Kv({},e),{attempt:i}));const{topic:n,message:s,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${i}`),await this.rpcPublish({topic:n,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a}),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(co.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Kt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Kt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class jI{constructor(){this.map=new Map,this.set=(e,r)=>{const i=this.get(e);this.exists(e,r)||this.map.set(e,[...i,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,r))return;const n=i.filter(s=>s!==r);if(!n.length){this.map.delete(e);return}this.map.set(e,n)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var kI=Object.defineProperty,zI=Object.defineProperties,HI=Object.getOwnPropertyDescriptors,Gv=Object.getOwnPropertySymbols,WI=Object.prototype.hasOwnProperty,KI=Object.prototype.propertyIsEnumerable,Jv=(t,e,r)=>e in t?kI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Aa=(t,e)=>{for(var r in e||(e={}))WI.call(e,r)&&Jv(t,r,e[r]);if(Gv)for(var r of Gv(e))KI.call(e,r)&&Jv(t,r,e[r]);return t},ru=(t,e)=>zI(t,HI(e));class VI extends C${constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new jI,this.events=new Zt.exports.EventEmitter,this.name=WS,this.version=KS,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Ri,this.subscribeTimeout=Y.toMiliseconds(Y.ONE_MINUTE),this.initialSubscribeTimeout=Y.toMiliseconds(Y.ONE_SECOND*15),this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(i,n)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}});try{const s=Hc(n),o={topic:i,relay:s,transportType:n?.transportType};this.pending.set(i,o);const a=await this.rpcSubscribe(i,s,n);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}})),a}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(i,n)=>{await this.restartToComplete(),this.isInitialized(),typeof n?.id<"u"?await this.unsubscribeById(i,n.id,n):await this.unsubscribeByTopic(i,n)},this.isSubscribed=async i=>{if(this.topics.includes(i))return!0;const n=`${this.pendingSubscriptionWatchLabel}_${i}`;return await new Promise((s,o)=>{const a=new Y.Watch;a.start(n);const c=setInterval(()=>{(!this.pending.has(i)&&this.topics.includes(i)||this.cached.some(l=>l.topic===i))&&(clearInterval(c),a.stop(n),s(!0)),a.elapsed(n)>=VS&&(clearInterval(c),a.stop(n),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{await this.restore(),await this.onRestart()},this.checkPending=async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const i=[];this.pending.forEach(n=>{i.push(n)}),await this.batchSubscribe(i)},this.registerEventListeners=()=>{this.relayer.core.heartbeat.on(co.pulse,async()=>{await this.checkPending()}),this.events.on(Lr.created,async i=>{const n=Lr.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:i}),await this.persist()}),this.events.on(Lr.deleted,async i=>{const n=Lr.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:i}),await this.persist()})},this.relayer=e,this.logger=gr(r,this.name),this.clientId=""}get context(){return $r(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let i=!1;try{i=this.getSubscription(e).topic===r}catch{}return i}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const i=this.topicMap.get(e);await Promise.all(i.map(async n=>await this.unsubscribeById(e,n,r)))}async unsubscribeById(e,r,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}});try{const n=Hc(i);await this.rpcUnsubscribe(e,r,n);const s=vt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}})}catch(n){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(n),n}}async rpcSubscribe(e,r,i){var n;i?.transportType===wt.relay&&await this.restartToComplete();const s={method:ua(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(n=i?.internal)==null?void 0:n.throwOnFailedPublish;try{const a=this.getSubscriptionId(e);if(i?.transportType===wt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(u=>this.logger.warn(u))},Y.toMiliseconds(Y.ONE_SECOND)),a;const c=new Promise(async u=>{const v=x=>{x.topic===e&&(this.events.removeListener(Lr.created,v),u(x.id))};this.events.on(Lr.created,v);try{const x=await In(new Promise((S,E)=>{this.relayer.request(s).catch(I=>{this.logger.warn(I,I?.message),E(I)}).then(S)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Lr.created,v),u(x)}catch{}}),l=await In(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Kt.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,i={method:ua(r.protocol).batchSubscribe,params:{topics:e.map(n=>n.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await In(new Promise(n=>{this.relayer.request(i).catch(s=>this.logger.warn(s)).then(n)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Kt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,i={method:ua(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let n;try{n=await await In(new Promise((s,o)=>{this.relayer.request(i).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Kt.connection_stalled)}return n}rpcUnsubscribe(e,r,i){const n={method:ua(i.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,r){this.setSubscription(e,ru(Aa({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Aa({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,i){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,Aa({},r)),this.topicMap.set(r.topic,e),this.events.emit(Lr.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:i}=Q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(Lr.deleted,ru(Aa({},i),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Lr.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let i=0;i<r;i++){const n=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(Lr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(e.map(r=>ru(Aa({},r),{id:this.getSubscriptionId(r.topic)}))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await B9(Y.toMiliseconds(Y.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen()}getSubscriptionId(e){return Zi(e+this.clientId)}}var GI=Object.defineProperty,Zv=Object.getOwnPropertySymbols,JI=Object.prototype.hasOwnProperty,ZI=Object.prototype.propertyIsEnumerable,Yv=(t,e,r)=>e in t?GI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xv=(t,e)=>{for(var r in e||(e={}))JI.call(e,r)&&Yv(t,r,e[r]);if(Zv)for(var r of Zv(e))ZI.call(e,r)&&Yv(t,r,e[r]);return t};class YI extends P${constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Zt.exports.EventEmitter,this.name=qS,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1,this.heartBeatTimeout=Y.toMiliseconds(Y.THIRTY_SECONDS+Y.FIVE_SECONDS),this.requestsInFlight=[],this.connectTimeout=Y.toMiliseconds(Y.ONE_SECOND*15),this.request=async r=>{var i,n;this.logger.debug("Publishing Request Payload");const s=r.id||us().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(i=r.params)==null?void 0:i.topic},"relayer.request - publishing...");const o=`${s}:${((n=r.params)==null?void 0:n.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}},this.resetPingTimeout=()=>{if(Nc())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,i,n;this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(n=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||n.terminate()},this.heartBeatTimeout)}catch(r){this.logger.warn(r,r?.message)}},this.onPayloadHandler=r=>{this.onProviderPayload(r),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.warn({},"Relayer connected \u{1F6DC}"),this.startPingTimeout(),this.events.emit(Kt.connect)},this.onDisconnectHandler=()=>{this.logger.warn({},"Relayer disconnected \u{1F6D1}"),this.requestsInFlight=[],this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.fatal(r,`Fatal socket error: ${r?.message}`),this.events.emit(Kt.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Xr.payload,this.onPayloadHandler),this.provider.on(Xr.connect,this.onConnectHandler),this.provider.on(Xr.disconnect,this.onDisconnectHandler),this.provider.on(Xr.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?gr(e.logger,this.name):Oi(tl({level:e.logger||US})),this.messages=new NI(this.logger,e.core),this.subscriber=new VI(this,this.logger),this.publisher=new qI(this,this.logger),this.relayUrl=e?.relayUrl||Sv,this.projectId=e.projectId,E9()?this.packageName=C1():$9()&&(this.bundleId=C1()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return $r(this.logger)}get connected(){var e,r,i;return((i=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===1}get connecting(){var e,r,i;return((i=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===0}async publish(e,r,i){this.isInitialized(),await this.publisher.publish(e,r,i),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:wt.relay})}async subscribe(e,r){var i,n,s;this.isInitialized(),(!(r!=null&&r.transportType)||r?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((i=r?.internal)==null?void 0:i.throwOnFailedPublish)>"u"?!0:(n=r?.internal)==null?void 0:n.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Lr.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Lr.created,l)}),new Promise(async(u,v)=>{a=await this.subscriber.subscribe(e,Xv({internal:{throwOnFailedPublish:o}},r)).catch(x=>{o&&v(x)})||a,u()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await In(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,i)=>{await this.connect(e).then(r).catch(i).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Hg())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((i,n)=>i.publishedAt-n.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const i of r)try{await this.onMessageEvent(i)}catch(n){this.logger.warn(n,"Error while processing batch message event: "+n?.message)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:i}=e;if(!r.sessionExists){const n=Bt(Y.FIVE_MINUTES),s={topic:i,expiry:n,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(i,s)}this.events.emit(Kt.message,e),await this.recordMessageEvent(e)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(i,n)=>{const s=()=>{n(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Xr.disconnect,s),await In(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{n(o)}).finally(()=>{this.provider.off(Xr.disconnect,s),clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Xr.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Xr.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,i()})}catch(i){await this.subscriber.stop();const n=i;this.logger.warn({},n.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(i=>setTimeout(i,Y.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,i,n,s;if(Nc())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(n=(i=this.provider)==null?void 0:i.connection)==null?void 0:n.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Yr(new SS(M9({sdkVersion:Xh,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:i}=e;await this.messages.set(r,i)}async shouldIgnoreMessageEvent(e){const{topic:r,message:i}=e;if(!i||i.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.warn(`Ignoring message for non-subscribed topic ${r}`),!0;const n=this.messages.has(r,i);return n&&this.logger.warn(`Ignoring duplicate message: ${i}`),n}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Zh(e)){if(!e.method.endsWith(jS))return;const r=e.params,{topic:i,message:n,publishedAt:s,attestation:o}=r.data,a={topic:i,message:n,publishedAt:s,transportType:wt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Xv({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else nl(e)&&this.events.emit(Kt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Kt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=rl(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Xr.payload,this.onPayloadHandler),this.provider.off(Xr.connect,this.onConnectHandler),this.provider.off(Xr.disconnect,this.onDisconnectHandler),this.provider.off(Xr.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Hg();gE(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(i=>this.logger.error(i,i?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),clearTimeout(this.pingTimeout),this.events.emit(Kt.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||this.connectPromise||(this.reconnectTimeout=setTimeout(async()=>{clearTimeout(this.reconnectTimeout),await this.transportOpen().catch(e=>this.logger.error(e,e?.message))},Y.toMiliseconds(kS))))}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.transportOpen()}}var XI=Object.defineProperty,Qv=Object.getOwnPropertySymbols,QI=Object.prototype.hasOwnProperty,eM=Object.prototype.propertyIsEnumerable,em=(t,e,r)=>e in t?XI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tm=(t,e)=>{for(var r in e||(e={}))QI.call(e,r)&&em(t,r,e[r]);if(Qv)for(var r of Qv(e))eM.call(e,r)&&em(t,r,e[r]);return t};class vs extends O${constructor(e,r,i,n=Ri,s=void 0){super(e,r,i,n),this.core=e,this.logger=r,this.name=i,this.map=new Map,this.version=zS,this.cached=[],this.initialized=!1,this.storagePrefix=Ri,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!pr(o)?this.map.set(this.getKey(o),o):Kx(o)?this.map.set(o.id,o):Vx(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>AS(a[c],o[c]))):this.values),this.update=async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=tm(tm({},this.getData(o)),a);this.map.set(o,c),await this.persist()},this.delete=async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())},this.logger=gr(r,this.name),this.storagePrefix=n,this.getKey=s}get context(){return $r(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:n}=Q("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}const{message:i}=Q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class tM{constructor(e,r){this.core=e,this.logger=r,this.name=GS,this.version=JS,this.events=new Zt.exports,this.initialized=!1,this.storagePrefix=Ri,this.ignoredPayloadTypes=[Ji],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async i=>{this.isInitialized();const n=Nh(),s=await this.core.crypto.setSymKey(n),o=Bt(Y.FIVE_MINUTES),a={protocol:$v},c={topic:s,expiry:o,relay:a,active:!1,methods:i?.methods},l=Fg({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:n,relay:a,expiryTimestamp:o,methods:i?.methods});return this.events.emit(ds.create,c),this.core.expirer.set(s,o),await this.pairings.set(s,c),await this.core.relayer.subscribe(s,{transportType:i?.transportType}),{topic:s,uri:l}},this.pair=async i=>{this.isInitialized();const n=this.core.eventClient.createEvent({properties:{topic:i?.uri,trace:[Ni.pairing_started]}});this.isValidPair(i,n);const{topic:s,symKey:o,relay:a,expiryTimestamp:c,methods:l}=Tg(i.uri);n.props.properties.topic=s,n.addTrace(Ni.pairing_uri_validation_success),n.addTrace(Ni.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),n.addTrace(Ni.existing_pairing),u.active)throw n.setError(tn.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);n.addTrace(Ni.pairing_not_expired)}const v=c||Bt(Y.FIVE_MINUTES),x={topic:s,relay:a,expiry:v,active:!1,methods:l};this.core.expirer.set(s,v),await this.pairings.set(s,x),n.addTrace(Ni.store_new_pairing),i.activatePairing&&await this.activate({topic:s}),this.events.emit(ds.create,x),n.addTrace(Ni.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),n.addTrace(Ni.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{n.setError(tn.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(S){throw n.setError(tn.subscribe_pairing_topic_failure),S}return n.addTrace(Ni.subscribe_pairing_topic_success),x},this.activate=async({topic:i})=>{this.isInitialized();const n=Bt(Y.FIVE_MINUTES);this.core.expirer.set(i,n),await this.pairings.update(i,{active:!0,expiry:n})},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:n}=i;if(this.pairings.keys.includes(n)){const s=await this.sendRequest(n,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=as();this.events.once(Pe("pairing_ping",s),({error:l})=>{l?c(l):a()}),await o()}},this.updateExpiry=async({topic:i,expiry:n})=>{this.isInitialized(),await this.pairings.update(i,{expiry:n})},this.updateMetadata=async({topic:i,metadata:n})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:n})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:n}=i;this.pairings.keys.includes(n)&&(await this.sendRequest(n,"wc_pairingDelete",vt("USER_DISCONNECTED")),await this.deletePairing(n))},this.formatUriFromPairing=i=>{this.isInitialized();const{topic:n,relay:s,expiry:o,methods:a}=i,c=this.core.crypto.keychain.get(n);return Fg({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:c,relay:s,expiryTimestamp:o,methods:a})},this.sendRequest=async(i,n,s)=>{const o=Rn(n,s),a=await this.core.crypto.encode(i,o),c=xa[n].req;return this.core.history.set(i,o),this.core.relayer.publish(i,a,c),o.id},this.sendResult=async(i,n,s)=>{const o=rl(i,s),a=await this.core.crypto.encode(n,o),c=await this.core.history.get(n,i),l=xa[c.request.method].res;await this.core.relayer.publish(n,a,l),await this.core.history.resolve(o)},this.sendError=async(i,n,s)=>{const o=il(i,s),a=await this.core.crypto.encode(n,o),c=await this.core.history.get(n,i),l=xa[c.request.method]?xa[c.request.method].res:xa.unregistered_method.res;await this.core.relayer.publish(n,a,l),await this.core.history.resolve(o)},this.deletePairing=async(i,n)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,vt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),n?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(n=>Mn(n.expiry));await Promise.all(i.map(n=>this.deletePairing(n.topic)))},this.onRelayEventRequest=i=>{const{topic:n,payload:s}=i;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(n,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(n,s);default:return this.onUnknownRpcMethodRequest(n,s)}},this.onRelayEventResponse=async i=>{const{topic:n,payload:s}=i,o=(await this.core.history.get(n,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(n,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(i,n)=>{const{id:s}=n;try{this.isValidPing({topic:i}),await this.sendResult(s,i,!0),this.events.emit(ds.ping,{id:s,topic:i})}catch(o){await this.sendError(s,i,o),this.logger.error(o)}},this.onPairingPingResponse=(i,n)=>{const{id:s}=n;setTimeout(()=>{Di(n)?this.events.emit(Pe("pairing_ping",s),{}):Zr(n)&&this.events.emit(Pe("pairing_ping",s),{error:n.error})},500)},this.onPairingDeleteRequest=async(i,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(ds.delete,{id:s,topic:i})}catch(o){await this.sendError(s,i,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(i,n)=>{const{id:s,method:o}=n;try{if(this.registeredMethods.includes(o))return;const a=vt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,i,a),this.logger.error(a)}catch(a){await this.sendError(s,i,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(vt("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=(i,n)=>{var s;if(!xr(i)){const{message:a}=Q("MISSING_OR_INVALID",`pair() params: ${i}`);throw n.setError(tn.malformed_pairing_uri),new Error(a)}if(!Wx(i.uri)){const{message:a}=Q("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw n.setError(tn.malformed_pairing_uri),new Error(a)}const o=Tg(i?.uri);if(!((s=o?.relay)!=null&&s.protocol)){const{message:a}=Q("MISSING_OR_INVALID","pair() uri#relay-protocol");throw n.setError(tn.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Q("MISSING_OR_INVALID","pair() uri#symKey");throw n.setError(tn.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Y.toMiliseconds(o?.expiryTimestamp)<Date.now()){n.setError(tn.pairing_expired);const{message:a}=Q("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}},this.isValidPing=async i=>{if(!xr(i)){const{message:s}=Q("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(s)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidDisconnect=async i=>{if(!xr(i)){const{message:s}=Q("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(s)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidPairingTopic=async i=>{if(!Rt(i,!1)){const{message:n}=Q("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(n)}if(!this.pairings.keys.includes(i)){const{message:n}=Q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(n)}if(Mn(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:n}=Q("EXPIRED",`pairing topic: ${i}`);throw new Error(n)}},this.core=e,this.logger=gr(r,this.name),this.pairings=new vs(this.core,this.logger,this.name,this.storagePrefix)}get context(){return $r(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Kt.message,async e=>{const{topic:r,message:i,transportType:n}=e;if(!this.pairings.keys.includes(r)||n===wt.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const s=await this.core.crypto.decode(r,i);try{Zh(s)?(this.core.history.set(r,s),this.onRelayEventRequest({topic:r,payload:s})):nl(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id))}catch(o){this.logger.error(o)}})}registerExpirerEvents(){this.core.expirer.on(Qr.expired,async e=>{const{topic:r}=L1(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(ds.expire,{topic:r}))})}}class rM extends A${constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Zt.exports.EventEmitter,this.name=ZS,this.version=YS,this.cached=[],this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,n,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:n,chainId:s}),this.records.has(n.id))return;const o={id:n.id,topic:i,request:{method:n.method,params:n.params||null},chainId:s,expiry:Bt(Y.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(di.created,o)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const n=await this.getRecord(i.id);typeof n.response>"u"&&(n.response=Zr(i)?{error:i.error}:{result:i.result},this.records.set(n.id,n),this.persist(),this.events.emit(di.updated,n))},this.get=async(i,n)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:n}),await this.getRecord(n)),this.delete=(i,n)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:n}),this.values.forEach(s=>{if(s.topic===i){if(typeof n<"u"&&s.id!==n)return;this.records.delete(s.id),this.events.emit(di.deleted,s)}}),this.persist()},this.exists=async(i,n)=>(this.isInitialized(),this.records.has(n)?(await this.getRecord(n)).topic===i:!1),this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=gr(r,this.name)}get context(){return $r(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const i={topic:r.topic,request:Rn(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:i}=Q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(di.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(di.created,e=>{const r=di.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(di.updated,e=>{const r=di.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(di.deleted,e=>{const r=di.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(co.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{Y.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(di.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class iM extends D${constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Zt.exports.EventEmitter,this.name=XS,this.version=QS,this.cached=[],this.initialized=!1,this.storagePrefix=Ri,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const n=this.formatTarget(i);return typeof this.getExpiration(n)<"u"}catch{return!1}},this.set=(i,n)=>{this.isInitialized();const s=this.formatTarget(i),o={target:s,expiry:n};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Qr.created,{target:s,expiration:o})},this.get=i=>{this.isInitialized();const n=this.formatTarget(i);return this.getExpiration(n)},this.del=i=>{if(this.isInitialized(),this.has(i)){const n=this.formatTarget(i),s=this.getExpiration(n);this.expirations.delete(n),this.events.emit(Qr.deleted,{target:n,expiration:s})}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=gr(r,this.name)}get context(){return $r(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return P9(e);if(typeof e=="number")return O9(e);const{message:r}=Q("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Qr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=Q("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:i}=Q("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(i),new Error(i)}return r}checkExpiry(e,r){const{expiry:i}=r;Y.toMiliseconds(i)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Qr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(co.pulse,()=>this.checkExpirations()),this.events.on(Qr.created,e=>{const r=Qr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Qr.expired,e=>{const r=Qr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Qr.deleted,e=>{const r=Qr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}}class nM extends R${constructor(e,r,i){super(e,r,i),this.core=e,this.logger=r,this.store=i,this.name=eA,this.verifyUrlV3=rA,this.storagePrefix=Ri,this.version=_v,this.init=async()=>{var n;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Y.toMiliseconds((n=this.publicKey)==null?void 0:n.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async n=>{if(!ta()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=n,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const l=jo(),u=this.startAbortTimer(Y.ONE_SECOND*5),v=await new Promise((x,S)=>{const E=()=>{window.removeEventListener("message",C),l.body.removeChild(I),S("attestation aborted")};this.abortController.signal.addEventListener("abort",E);const I=l.createElement("iframe");I.src=c,I.style.display="none",I.addEventListener("error",E,{signal:this.abortController.signal});const C=O=>{if(O.data&&typeof O.data=="string")try{const R=JSON.parse(O.data);if(R.type==="verify_attestation"){if(Qf(R.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(I),this.abortController.signal.removeEventListener("abort",E),window.removeEventListener("message",C),x(R.attestation===null?"":R.attestation)}}catch(R){this.logger.warn(R)}};l.body.appendChild(I),window.addEventListener("message",C,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",v),v}catch(l){this.logger.warn(l)}return""},this.resolve=async n=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=n;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(Qf(s).payload.id!==a)return;const l=await this.isValidJwtAttestation(s);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(n?.verifyUrl);return this.fetchAttestation(o,c)},this.fetchAttestation=async(n,s)=>{this.logger.debug(`resolving attestation: ${n} from url: ${s}`);const o=this.startAbortTimer(Y.ONE_SECOND*5),a=await fetch(`${s}/attestation/${n}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0},this.getVerifyUrl=n=>{let s=n||Ea;return iA.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Ea}`),s=Ea),s},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const n=this.startAbortTimer(Y.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(n),await s.json()}catch(n){this.logger.warn(n)}},this.persistPublicKey=async n=>{this.logger.debug("persisting public key to local storage",n),await this.store.setItem(this.storeKey,n),this.publicKey=n},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async n=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(n,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(n,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const n=await this.fetchPromise;return this.fetchPromise=void 0,n},this.validateAttestation=(n,s)=>{const o=Dx(n,s.publicKey),a={hasExpired:Y.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}},this.logger=gr(r,this.name),this.abortController=new AbortController,this.isDevEnv=gh(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return $r(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Y.toMiliseconds(e))}}class sM extends N${constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.context=nA,this.registerDeviceToken=async i=>{const{clientId:n,token:s,notificationType:o,enableEncrypted:a=!1}=i,c=`${sA}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:n,type:o,token:s,always_raw:a})})},this.logger=gr(r,this.context)}}var oM=Object.defineProperty,rm=Object.getOwnPropertySymbols,aM=Object.prototype.hasOwnProperty,cM=Object.prototype.propertyIsEnumerable,im=(t,e,r)=>e in t?oM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ia=(t,e)=>{for(var r in e||(e={}))aM.call(e,r)&&im(t,r,e[r]);if(rm)for(var r of rm(e))cM.call(e,r)&&im(t,r,e[r]);return t};class lM extends T${constructor(e,r,i=!0){super(e,r,i),this.core=e,this.logger=r,this.context=aA,this.storagePrefix=Ri,this.storageVersion=oA,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{if(!gh())try{const n={eventId:U1(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:R1(this.core.relayer.protocol,this.core.relayer.version,Xh)}}};await this.sendEvent([n])}catch(n){this.logger.warn(n)}},this.createEvent=n=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:c}}=n,l=U1(),u=this.core.projectId||"",v=Date.now(),x=Ia({eventId:l,timestamp:v,props:{event:s,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,x),this.shouldPersist=!0),x},this.getEvent=n=>{const{eventId:s,topic:o}=n;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Ia(Ia({},a),this.setMethods(a.eventId))},this.deleteEvent=n=>{const{eventId:s}=n;this.events.delete(s),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(co.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(n=>{Y.fromMiliseconds(Date.now())-Y.fromMiliseconds(n.timestamp)>cA&&(this.events.delete(n.eventId),this.shouldPersist=!0)})})},this.setMethods=n=>({addTrace:s=>this.addTrace(n,s),setError:s=>this.setError(n,s)}),this.addTrace=(n,s)=>{const o=this.events.get(n);o&&(o.props.properties.trace.push(s),this.events.set(n,o),this.shouldPersist=!0)},this.setError=(n,s)=>{const o=this.events.get(n);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(n,o),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const n=await this.core.storage.getItem(this.storageKey)||[];if(!n.length)return;n.forEach(s=>{this.events.set(s.eventId,Ia(Ia({},s),this.setMethods(s.eventId)))})}catch(n){this.logger.warn(n)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const n=[];for(const[s,o]of this.events)o.props.type&&n.push(o);if(n.length!==0)try{if((await this.sendEvent(n)).ok)for(const s of n)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}},this.sendEvent=async n=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${lA}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Xh}${s}`,{method:"POST",body:JSON.stringify(n)})},this.getAppDomain=()=>D1().url,this.logger=gr(r,this.context),this.telemetryEnabled=i,i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var fM=Object.defineProperty,nm=Object.getOwnPropertySymbols,hM=Object.prototype.hasOwnProperty,uM=Object.prototype.propertyIsEnumerable,sm=(t,e,r)=>e in t?fM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,om=(t,e)=>{for(var r in e||(e={}))hM.call(e,r)&&sm(t,r,e[r]);if(nm)for(var r of nm(e))uM.call(e,r)&&sm(t,r,e[r]);return t};class iu extends S${constructor(e){var r;super(e),this.protocol=wv,this.version=_v,this.name=sl,this.events=new Zt.exports.EventEmitter,this.initialized=!1,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.dispatchEnvelope=({topic:o,message:a,sessionExists:c})=>{if(!o||!a)return;const l={topic:o,message:a,publishedAt:Date.now(),transportType:wt.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:c})},this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Sv,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=tl({level:typeof e?.logger=="string"&&e.logger?e.logger:OS.logger,name:sl}),{logger:n,chunkLoggerController:s}=$$({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,a;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((a=this.logChunkController)==null||a.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=gr(n,this.name),this.heartbeat=new Uh,this.crypto=new RI(this,this.logger,e?.keychain),this.history=new rM(this,this.logger),this.expirer=new iM(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new ZE(om(om({},CS),e?.storageOptions)),this.relayer=new YI({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new tM(this,this.logger),this.verify=new nM(this,this.logger,this.storage),this.echoClient=new sM(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new lM(this,this.logger,e?.telemetryEnabled)}static async init(e){const r=new iu(e);await r.initialize();const i=await r.crypto.getClientId();return await r.storage.setItem(HS,i),r}get context(){return $r(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Av,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Av)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const dM=iu,am="wc",cm=2,lm="client",nu=`${am}@${cm}:${lm}:`,su={name:lm,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},fm="WALLETCONNECT_DEEPLINK_CHOICE",pM="proposal",hm="Proposal expired",gM="session",ho=Y.SEVEN_DAYS,vM="engine",Vt={wc_sessionPropose:{req:{ttl:Y.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Y.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Y.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Y.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Y.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Y.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Y.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Y.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Y.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Y.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Y.FIVE_MINUTES,prompt:!1,tag:1119}}},ou={min:Y.FIVE_MINUTES,max:Y.SEVEN_DAYS},Ti={idle:"IDLE",active:"ACTIVE"},mM="request",bM=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],yM="wc",wM="auth",_M="authKeys",xM="pairingTopics",EM="requests",al=`${yM}@${1.5}:${wM}:`,cl=`${al}:PUB_KEY`;var $M=Object.defineProperty,SM=Object.defineProperties,AM=Object.getOwnPropertyDescriptors,um=Object.getOwnPropertySymbols,IM=Object.prototype.hasOwnProperty,MM=Object.prototype.propertyIsEnumerable,dm=(t,e,r)=>e in t?$M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,It=(t,e)=>{for(var r in e||(e={}))IM.call(e,r)&&dm(t,r,e[r]);if(um)for(var r of um(e))MM.call(e,r)&&dm(t,r,e[r]);return t},gi=(t,e)=>SM(t,AM(e));class PM extends L${constructor(e){super(e),this.name=vM,this.events=new Zt.exports,this.initialized=!1,this.requestQueue={state:Ti.idle,queue:[]},this.sessionRequestQueue={state:Ti.idle,queue:[]},this.requestQueueDelay=Y.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Vt)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Y.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const i=gi(It({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:a,relays:c}=i;let l=n,u,v=!1;try{if(l){const T=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),v=T.active}}catch(T){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),T}if(!l||!v){const{topic:T,uri:U}=await this.client.core.pairing.create();l=T,u=U}if(!l){const{message:T}=Q("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(T)}const x=await this.client.core.crypto.generateKeyPair(),S=Vt.wc_sessionPropose.req.ttl||Y.FIVE_MINUTES,E=Bt(S),I=It({requiredNamespaces:s,optionalNamespaces:o,relays:c??[{protocol:$v}],proposer:{publicKey:x,metadata:this.client.metadata},expiryTimestamp:E,pairingTopic:l},a&&{sessionProperties:a}),{reject:C,resolve:O,done:R}=as(S,hm);this.events.once(Pe("session_connect"),async({error:T,session:U})=>{if(T)C(T);else if(U){U.self.publicKey=x;const z=gi(It({},U),{pairingTopic:I.pairingTopic,requiredNamespaces:I.requiredNamespaces,optionalNamespaces:I.optionalNamespaces,transportType:wt.relay});await this.client.session.set(U.topic,z),await this.setExpiry(U.topic,U.expiry),l&&await this.client.core.pairing.updateMetadata({topic:l,metadata:U.peer.metadata}),this.cleanupDuplicatePairings(z),O(z)}});const N=await this.sendRequest({topic:l,method:"wc_sessionPropose",params:I,throwOnFailedPublish:!0});return await this.setProposal(N,It({id:N},I)),{uri:u,approval:R}},this.pair=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(i){throw this.client.logger.error("pair() failed"),i}},this.approve=async r=>{var i,n,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(i=r?.id)==null?void 0:i.toString(),trace:[pi.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(K){throw o.setError(ps.no_internet_connection),K}try{await this.isValidProposalId(r?.id)}catch(K){throw this.client.logger.error(`approve() -> proposal.get(${r?.id}) failed`),o.setError(ps.proposal_not_found),K}try{await this.isValidApprove(r)}catch(K){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(ps.session_approve_namespace_validation_failure),K}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,sessionConfig:v}=r,x=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:S,proposer:E,requiredNamespaces:I,optionalNamespaces:C}=x;let O=(n=this.client.core.eventClient)==null?void 0:n.getEvent({topic:S});O||(O=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:pi.session_approve_started,properties:{topic:S,trace:[pi.session_approve_started,pi.session_namespaces_validation_success]}}));const R=await this.client.core.crypto.generateKeyPair(),N=E.publicKey,T=await this.client.core.crypto.generateSharedKey(R,N),U=It(It({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:R,metadata:this.client.metadata},expiry:Bt(ho)},u&&{sessionProperties:u}),v&&{sessionConfig:v}),z=wt.relay;O.addTrace(pi.subscribing_session_topic);try{await this.client.core.relayer.subscribe(T,{transportType:z})}catch(K){throw O.setError(ps.subscribe_session_topic_failure),K}O.addTrace(pi.subscribe_session_topic_success);const W=gi(It({},U),{topic:T,requiredNamespaces:I,optionalNamespaces:C,pairingTopic:S,acknowledged:!1,self:U.controller,peer:{publicKey:E.publicKey,metadata:E.metadata},controller:R,transportType:wt.relay});await this.client.session.set(T,W),O.addTrace(pi.store_session);try{O.addTrace(pi.publishing_session_settle),await this.sendRequest({topic:T,method:"wc_sessionSettle",params:U,throwOnFailedPublish:!0}).catch(K=>{throw O?.setError(ps.session_settle_publish_failure),K}),O.addTrace(pi.session_settle_publish_success),O.addTrace(pi.publishing_session_approve),await this.sendResult({id:a,topic:S,result:{relay:{protocol:c??"irn"},responderPublicKey:R},throwOnFailedPublish:!0}).catch(K=>{throw O?.setError(ps.session_approve_publish_failure),K}),O.addTrace(pi.session_approve_publish_success)}catch(K){throw this.client.logger.error(K),this.client.session.delete(T,vt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(T),K}return this.client.core.eventClient.deleteEvent({eventId:O.eventId}),await this.client.core.pairing.updateMetadata({topic:S,metadata:E.metadata}),await this.client.proposal.delete(a,vt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:S}),await this.setExpiry(T,Bt(ho)),{topic:T,acknowledged:()=>Promise.resolve(this.client.session.get(T))}},this.reject=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:i,reason:n}=r;let s;try{s=this.client.proposal.get(i).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),o}s&&(await this.sendError({id:i,topic:s,error:n,rpcOpts:Vt.wc_sessionPropose.reject}),await this.client.proposal.delete(i,vt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(v){throw this.client.logger.error("update() -> isValidUpdate() failed"),v}const{topic:i,namespaces:n}=r,{done:s,resolve:o,reject:a}=as(),c=en(),l=us().toString(),u=this.client.session.get(i).namespaces;return this.events.once(Pe("session_update",c),({error:v})=>{v?a(v):o()}),await this.client.session.update(i,{namespaces:n}),await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:n},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(v=>{this.client.logger.error(v),this.client.session.update(i,{namespaces:u}),a(v)}),{acknowledged:s}},this.extend=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:i}=r,n=en(),{done:s,resolve:o,reject:a}=as();return this.events.once(Pe("session_extend",n),({error:c})=>{c?a(c):o()}),await this.setExpiry(i,Bt(ho)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:n,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:s}},this.request=async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(E){throw this.client.logger.error("request() -> isValidRequest() failed"),E}const{chainId:i,request:n,topic:s,expiry:o=Vt.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);a?.transportType===wt.relay&&await this.confirmOnlineStateOrThrow();const c=en(),l=us().toString(),{done:u,resolve:v,reject:x}=as(o,"Request expired. Please try again.");this.events.once(Pe("session_request",c),({error:E,result:I})=>{E?x(E):v(I)});const S=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);return S?(await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:"wc_sessionRequest",params:{request:gi(It({},n),{expiryTimestamp:Bt(o)}),chainId:i},expiry:o,throwOnFailedPublish:!0,appLink:S}).catch(E=>x(E)),this.client.events.emit("session_request_sent",{topic:s,request:n,chainId:i,id:c}),await u()):await Promise.all([new Promise(async E=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:s,method:"wc_sessionRequest",params:{request:gi(It({},n),{expiryTimestamp:Bt(o)}),chainId:i},expiry:o,throwOnFailedPublish:!0}).catch(I=>x(I)),this.client.events.emit("session_request_sent",{topic:s,request:n,chainId:i,id:c}),E()}),new Promise(async E=>{var I;if(!((I=a.sessionConfig)!=null&&I.disableDeepLink)){const C=await N9(this.client.core.storage,fm);await C9({id:c,topic:s,wcDeepLink:C})}E()}),u()]).then(E=>E[2])},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:i,response:n}=r,{id:s}=n,o=this.client.session.get(i);o.transportType===wt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Di(n)?await this.sendResult({id:s,topic:i,result:n.result,throwOnFailedPublish:!0,appLink:a}):Zr(n)&&await this.sendError({id:s,topic:i,error:n.error,appLink:a}),this.cleanupAfterResponse(r)},this.ping=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(n){throw this.client.logger.error("ping() -> isValidPing() failed"),n}const{topic:i}=r;if(this.client.session.keys.includes(i)){const n=en(),s=us().toString(),{done:o,resolve:a,reject:c}=as();this.events.once(Pe("session_ping",n),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:n,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(i)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:i}))},this.emit=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:i,event:n,chainId:s}=r,o=us().toString(),a=en();await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:n,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})},this.disconnect=async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:i}=r;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:vt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{const{message:n}=Q("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(n)}},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(i=>zx(i,r))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(r,i)=>{var n;this.isInitialized(),this.isValidAuthenticate(r);const s=i&&this.client.core.linkModeSupportedApps.includes(i)&&((n=this.client.metadata.redirect)==null?void 0:n.linkMode),o=s?wt.link_mode:wt.relay;o===wt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:v,type:x,exp:S,nbf:E,methods:I=[],expiry:C}=r,O=[...r.resources||[]],{topic:R,uri:N}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:R,uri:N}});const T=await this.client.core.crypto.generateKeyPair(),U=zc(T);if(await Promise.all([this.client.auth.authKeys.set(cl,{responseTopic:U,publicKey:T}),this.client.auth.pairingTopics.set(U,{topic:U,pairingTopic:R})]),await this.client.core.relayer.subscribe(U,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${R}`),I.length>0){const{namespace:$}=eo(a[0]);let y=E_($,"request",I);Uc(O)&&(y=S_(y,O.pop())),O.push(y)}const z=C&&C>Vt.wc_sessionAuthenticate.req.ttl?C:Vt.wc_sessionAuthenticate.req.ttl,W={authPayload:{type:x??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:v,iat:new Date().toISOString(),exp:S,nbf:E,resources:O},requester:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Bt(z)},K={eip155:{chains:a,methods:[...new Set(["personal_sign",...I])],events:["chainChanged","accountsChanged"]}},B={requiredNamespaces:{},optionalNamespaces:K,relays:[{protocol:"irn"}],pairingTopic:R,proposer:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Bt(Vt.wc_sessionPropose.req.ttl)},{done:V,resolve:M,reject:m}=as(z,"Request expired"),g=async({error:$,session:y})=>{if(this.events.off(Pe("session_request",h),f),$)m($);else if(y){y.self.publicKey=T,await this.client.session.set(y.topic,y),await this.setExpiry(y.topic,y.expiry),R&&await this.client.core.pairing.updateMetadata({topic:R,metadata:y.peer.metadata});const d=this.client.session.get(y.topic);await this.deleteProposal(p),M({session:d})}},f=async $=>{var y,d,w;if(await this.deletePendingAuthRequest(h,{message:"fulfilled",code:0}),$.error){const k=vt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return $.error.code===k.code?void 0:(this.events.off(Pe("session_connect"),g),m($.error.message))}await this.deleteProposal(p),this.events.off(Pe("session_connect"),g);const{cacaos:b,responder:P}=$.result,q=[],A=[];for(const k of b){await eg({cacao:k,projectId:this.client.core.projectId})||(this.client.logger.error(k,"Signature verification failed"),m(vt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:H}=k,Z=Uc(H.resources),X=[_h(H.iss)],J=Bc(H.iss);if(Z){const oe=ig(Z),te=ng(Z);q.push(...oe),X.push(...te)}for(const oe of X)A.push(`${oe}:${J}`)}const F=await this.client.core.crypto.generateSharedKey(T,P.publicKey);let j;q.length>0&&(j={topic:F,acknowledged:!0,self:{publicKey:T,metadata:this.client.metadata},peer:P,controller:P.publicKey,expiry:Bt(ho),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:R,namespaces:Lg([...new Set(q)],[...new Set(A)]),transportType:o},await this.client.core.relayer.subscribe(F,{transportType:o}),await this.client.session.set(F,j),R&&await this.client.core.pairing.updateMetadata({topic:R,metadata:P.metadata}),j=this.client.session.get(F)),(y=this.client.metadata.redirect)!=null&&y.linkMode&&(d=P.metadata.redirect)!=null&&d.linkMode&&(w=P.metadata.redirect)!=null&&w.universal&&i&&(this.client.core.addLinkModeSupportedApp(P.metadata.redirect.universal),this.client.session.update(F,{transportType:wt.link_mode})),M({auths:b,session:j})},h=en(),p=en();this.events.once(Pe("session_connect"),g),this.events.once(Pe("session_request",h),f);let _;try{if(s){const $=Rn("wc_sessionAuthenticate",W,h);this.client.core.history.set(R,$);const y=await this.client.core.crypto.encode("",$,{type:la,encoding:aa});_=Wc(i,R,y)}else await Promise.all([this.sendRequest({topic:R,method:"wc_sessionAuthenticate",params:W,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:h}),this.sendRequest({topic:R,method:"wc_sessionPropose",params:B,expiry:Vt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:p})])}catch($){throw this.events.off(Pe("session_connect"),g),this.events.off(Pe("session_request",h),f),$}return await this.setProposal(p,It({id:p},B)),await this.setAuthRequest(h,{request:gi(It({},W),{verifyContext:{}}),pairingTopic:R,transportType:o}),{uri:_??N,response:V}},this.approveSessionAuthenticate=async r=>{const{id:i,auths:n}=r,s=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:[gs.authenticated_session_approve_started]}});try{this.isInitialized()}catch(C){throw s.setError($a.no_internet_connection),C}const o=this.getPendingAuthRequest(i);if(!o)throw s.setError($a.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${i}`);const a=o.transportType||wt.relay;a===wt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=zc(c),v={type:Ji,receiverPublicKey:c,senderPublicKey:l},x=[],S=[];for(const C of n){if(!await eg({cacao:C,projectId:this.client.core.projectId})){s.setError($a.invalid_cacao);const U=vt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:u,error:U,encodeOpts:v}),new Error(U.message)}s.addTrace(gs.cacaos_verified);const{p:O}=C,R=Uc(O.resources),N=[_h(O.iss)],T=Bc(O.iss);if(R){const U=ig(R),z=ng(R);x.push(...U),N.push(...z)}for(const U of N)S.push(`${U}:${T}`)}const E=await this.client.core.crypto.generateSharedKey(l,c);s.addTrace(gs.create_authenticated_session_topic);let I;if(x?.length>0){I={topic:E,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Bt(ho),authentication:n,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Lg([...new Set(x)],[...new Set(S)]),transportType:a},s.addTrace(gs.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(E,{transportType:a})}catch(C){throw s.setError($a.subscribe_authenticated_session_topic_failure),C}s.addTrace(gs.subscribe_authenticated_session_topic_success),await this.client.session.set(E,I),s.addTrace(gs.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(gs.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:i,result:{cacaos:n,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:v,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(C){throw s.setError($a.authenticated_session_approve_publish_failure),C}return await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:I}},this.rejectSessionAuthenticate=async r=>{this.isInitialized();const{id:i,reason:n}=r,s=this.getPendingAuthRequest(i);if(!s)throw new Error(`Could not find pending auth request with id ${i}`);s.transportType===wt.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=zc(o),l={type:Ji,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:i,topic:c,error:n,encodeOpts:l,rpcOpts:Vt.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(i,{message:"rejected",code:0}),await this.client.proposal.delete(i,vt("USER_DISCONNECTED"))},this.formatAuthMessage=r=>{this.isInitialized();const{request:i,iss:n}=r;return tg(i,n)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)},this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const i=this.client.core.pairing.pairings.get(r.pairingTopic),n=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==i.topic});if(n.length===0)return;this.client.logger.info(`Cleaning up ${n.length} duplicate pairing(s)`),await Promise.all(n.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async r=>{var i;const{topic:n,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:c}=this.client.session.get(n);await this.client.core.relayer.unsubscribe(n),await this.client.session.delete(n,vt("USER_DISCONNECTED")),this.addToRecentlyDeleted(n,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(n)&&await this.client.core.crypto.deleteSymKey(n),s||this.client.core.expirer.del(n),this.client.core.storage.removeItem(fm).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===n&&this.deletePendingSessionRequest(l.id,vt("USER_DISCONNECTED"))}),n===((i=this.sessionRequestQueue.queue[0])==null?void 0:i.topic)&&(this.sessionRequestQueue.state=Ti.idle),o&&this.client.events.emit("session_delete",{id:a,topic:n})},this.deleteProposal=async(r,i)=>{if(i)try{const n=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:n.pairingTopic});s?.setError(ps.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,vt("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")},this.deletePendingSessionRequest=async(r,i,n=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,i),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),n&&(this.sessionRequestQueue.state=Ti.idle,this.client.events.emit("session_request_expire",{id:r}))},this.deletePendingAuthRequest=async(r,i,n=!1)=>{await Promise.all([this.client.auth.requests.delete(r,i),n?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,i)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,i),await this.client.session.update(r,{expiry:i}))},this.setProposal=async(r,i)=>{this.client.core.expirer.set(r,Bt(Vt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,i)},this.setAuthRequest=async(r,i)=>{const{request:n,pairingTopic:s,transportType:o=wt.relay}=i;this.client.core.expirer.set(r,n.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:n.authPayload,requester:n.requester,expiryTimestamp:n.expiryTimestamp,id:r,pairingTopic:s,verifyContext:n.verifyContext,transportType:o})},this.setPendingSessionRequest=async r=>{const{id:i,topic:n,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||Bt(Vt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,a),await this.client.pendingRequest.set(i,{id:i,topic:n,params:s,verifyContext:o})},this.sendRequest=async r=>{const{topic:i,method:n,params:s,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u}=r,v=Rn(n,s,c);let x;const S=!!u;try{const C=S?aa:Dn;x=await this.client.core.crypto.encode(i,v,{encoding:C})}catch(C){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),C}let E;if(bM.includes(n)){const C=Zi(JSON.stringify(v)),O=Zi(x);E=await this.client.core.verify.register({id:O,decryptedId:C})}const I=Vt[n].req;if(I.attestation=E,o&&(I.ttl=o),a&&(I.id=a),this.client.core.history.set(i,v),S){const C=Wc(u,i,x);await global.Linking.openURL(C,this.client.name)}else{const C=Vt[n].req;o&&(C.ttl=o),a&&(C.id=a),l?(C.internal=gi(It({},C.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,x,C)):this.client.core.relayer.publish(i,x,C).catch(O=>this.client.logger.error(O))}return v.id},this.sendResult=async r=>{const{id:i,topic:n,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=r,l=rl(i,s);let u;const v=c&&typeof(global==null?void 0:global.Linking)<"u";try{const S=v?aa:Dn;u=await this.client.core.crypto.encode(n,l,gi(It({},a||{}),{encoding:S}))}catch(S){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${n} failed`),S}let x;try{x=await this.client.core.history.get(n,i)}catch(S){throw this.client.logger.error(`sendResult() -> history.get(${n}, ${i}) failed`),S}if(v){const S=Wc(c,n,u);await global.Linking.openURL(S,this.client.name)}else{const S=Vt[x.request.method].res;o?(S.internal=gi(It({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,u,S)):this.client.core.relayer.publish(n,u,S).catch(E=>this.client.logger.error(E))}await this.client.core.history.resolve(l)},this.sendError=async r=>{const{id:i,topic:n,error:s,encodeOpts:o,rpcOpts:a,appLink:c}=r,l=il(i,s);let u;const v=c&&typeof(global==null?void 0:global.Linking)<"u";try{const S=v?aa:Dn;u=await this.client.core.crypto.encode(n,l,gi(It({},o||{}),{encoding:S}))}catch(S){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${n} failed`),S}let x;try{x=await this.client.core.history.get(n,i)}catch(S){throw this.client.logger.error(`sendError() -> history.get(${n}, ${i}) failed`),S}if(v){const S=Wc(c,n,u);await global.Linking.openURL(S,this.client.name)}else{const S=a||Vt[x.request.method].res;this.client.core.relayer.publish(n,u,S)}await this.client.core.history.resolve(l)},this.cleanup=async()=>{const r=[],i=[];this.client.session.getAll().forEach(n=>{let s=!1;Mn(n.expiry)&&(s=!0),this.client.core.crypto.keychain.has(n.topic)||(s=!0),s&&r.push(n.topic)}),this.client.proposal.getAll().forEach(n=>{Mn(n.expiryTimestamp)&&i.push(n.id)}),await Promise.all([...r.map(n=>this.deleteSession({topic:n})),...i.map(n=>this.deleteProposal(n))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Ti.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ti.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=Ti.idle},this.processRequest=async r=>{const{topic:i,payload:n,attestation:s,transportType:o,encryptedId:a}=r,c=n.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:i,payload:n,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(i,n);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(i,n);case"wc_sessionExtend":return await this.onSessionExtendRequest(i,n);case"wc_sessionPing":return await this.onSessionPingRequest(i,n);case"wc_sessionDelete":return await this.onSessionDeleteRequest(i,n);case"wc_sessionRequest":return await this.onSessionRequest({topic:i,payload:n,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(i,n);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:i,payload:n,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async r=>{const{topic:i,payload:n,transportType:s}=r,o=(await this.client.core.history.get(i,n.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(i,n,s);case"wc_sessionSettle":return this.onSessionSettleResponse(i,n);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,n);case"wc_sessionExtend":return this.onSessionExtendResponse(i,n);case"wc_sessionPing":return this.onSessionPingResponse(i,n);case"wc_sessionRequest":return this.onSessionRequestResponse(i,n);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,n);default:return this.client.logger.info(`Unsupported response method ${o}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:i}=r,{message:n}=Q("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(n)},this.shouldIgnorePairingRequest=r=>{const{topic:i,requestMethod:n}=r,s=this.expectedPairingMethodMap.get(i);return!s||s.includes(n)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async r=>{const{topic:i,payload:n,attestation:s,encryptedId:o}=r,{params:a,id:c}=n;try{const l=this.client.core.eventClient.getEvent({topic:i});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l?.setError(tn.proposal_listener_not_found)),this.isValidConnect(It({},n.params));const u=a.expiryTimestamp||Bt(Vt.wc_sessionPropose.req.ttl),v=It({id:c,pairingTopic:i,expiryTimestamp:u},a);await this.setProposal(c,v);const x=await this.getVerifyContext({attestationId:s,hash:Zi(JSON.stringify(n)),encryptedId:o,metadata:v.proposer.metadata});l?.addTrace(Ni.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:v,verifyContext:x})}catch(l){await this.sendError({id:c,topic:i,error:l,rpcOpts:Vt.wc_sessionPropose.autoReject}),this.client.logger.error(l)}},this.onSessionProposeResponse=async(r,i,n)=>{const{id:s}=i;if(Di(i)){const{result:o}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:u});const v=await this.client.core.relayer.subscribe(u,{transportType:n});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:v}),await this.client.core.pairing.activate({topic:r})}else if(Zr(i)){await this.client.proposal.delete(s,vt("USER_DISCONNECTED"));const o=Pe("session_connect");if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(Pe("session_connect"),{error:i.error})}},this.onSessionSettleRequest=async(r,i)=>{const{id:n,params:s}=i;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,sessionConfig:v}=i.params,x=gi(It(It({topic:r,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),v&&{sessionConfig:v}),{transportType:wt.relay}),S=Pe("session_connect");if(this.events.listenerCount(S)===0)throw new Error(`emitting ${S} without any listeners 997`);this.events.emit(Pe("session_connect"),{session:x}),await this.sendResult({id:i.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:n,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionSettleResponse=async(r,i)=>{const{id:n}=i;Di(i)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Pe("session_approve",n),{})):Zr(i)&&(await this.client.session.delete(r,vt("USER_DISCONNECTED")),this.events.emit(Pe("session_approve",n),{error:i.error}))},this.onSessionUpdateRequest=async(r,i)=>{const{params:n,id:s}=i;try{const o=`${r}_session_update`,a=ga.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:vt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(It({topic:r},n));try{ga.set(o,s),await this.client.session.update(r,{namespaces:n.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(c){throw ga.delete(o),c}this.client.events.emit("session_update",{id:s,topic:r,params:n})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}},this.isRequestOutOfSync=(r,i)=>i.toString().slice(0,-3)<r.toString().slice(0,-3),this.onSessionUpdateResponse=(r,i)=>{const{id:n}=i,s=Pe("session_update",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Di(i)?this.events.emit(Pe("session_update",n),{}):Zr(i)&&this.events.emit(Pe("session_update",n),{error:i.error})},this.onSessionExtendRequest=async(r,i)=>{const{id:n}=i;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Bt(ho)),await this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:n,topic:r})}catch(s){await this.sendError({id:n,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,i)=>{const{id:n}=i,s=Pe("session_extend",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Di(i)?this.events.emit(Pe("session_extend",n),{}):Zr(i)&&this.events.emit(Pe("session_extend",n),{error:i.error})},this.onSessionPingRequest=async(r,i)=>{const{id:n}=i;try{this.isValidPing({topic:r}),await this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:n,topic:r})}catch(s){await this.sendError({id:n,topic:r,error:s}),this.client.logger.error(s)}},this.onSessionPingResponse=(r,i)=>{const{id:n}=i,s=Pe("session_ping",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);setTimeout(()=>{Di(i)?this.events.emit(Pe("session_ping",n),{}):Zr(i)&&this.events.emit(Pe("session_ping",n),{error:i.error})},500)},this.onSessionDeleteRequest=async(r,i)=>{const{id:n}=i;try{this.isValidDisconnect({topic:r,reason:i.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(Kt.publish,async()=>{s(await this.deleteSession({topic:r,id:n}))})}),this.sendResult({id:n,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:vt("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async r=>{var i,n,s;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=r,{id:v,params:x}=a;try{await this.isValidRequest(It({topic:o},x));const S=this.client.session.get(o),E=await this.getVerifyContext({attestationId:c,hash:Zi(JSON.stringify(Rn("wc_sessionRequest",x,v))),encryptedId:l,metadata:S.peer.metadata,transportType:u}),I={id:v,topic:o,params:x,verifyContext:E};await this.setPendingSessionRequest(I),u===wt.link_mode&&(i=S.peer.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp((n=S.peer.metadata.redirect)==null?void 0:n.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(I):(this.addSessionRequestToSessionRequestQueue(I),this.processSessionRequestQueue())}catch(S){await this.sendError({id:v,topic:o,error:S}),this.client.logger.error(S)}},this.onSessionRequestResponse=(r,i)=>{const{id:n}=i,s=Pe("session_request",n);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Di(i)?this.events.emit(Pe("session_request",n),{result:i.result}):Zr(i)&&this.events.emit(Pe("session_request",n),{error:i.error})},this.onSessionEventRequest=async(r,i)=>{const{id:n,params:s}=i;try{const o=`${r}_session_event_${s.event.name}`,a=ga.get(o);if(a&&this.isRequestOutOfSync(a,n)){this.client.logger.info(`Discarding out of sync request - ${n}`);return}this.isValidEmit(It({topic:r},s)),this.client.events.emit("session_event",{id:n,topic:r,params:s}),ga.set(o,n)}catch(o){await this.sendError({id:n,topic:r,error:o}),this.client.logger.error(o)}},this.onSessionAuthenticateResponse=(r,i)=>{const{id:n}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:i}),Di(i)?this.events.emit(Pe("session_request",n),{result:i.result}):Zr(i)&&this.events.emit(Pe("session_request",n),{error:i.error})},this.onSessionAuthenticateRequest=async r=>{var i;const{topic:n,payload:s,attestation:o,encryptedId:a,transportType:c}=r;try{const{requester:l,authPayload:u,expiryTimestamp:v}=s.params,x=await this.getVerifyContext({attestationId:o,hash:Zi(JSON.stringify(s)),encryptedId:a,metadata:l.metadata,transportType:c}),S={requester:l,pairingTopic:n,id:s.id,authPayload:u,verifyContext:x,expiryTimestamp:v};await this.setAuthRequest(s.id,{request:S,pairingTopic:n,transportType:c}),c===wt.link_mode&&(i=l.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:n,params:s.params,id:s.id,verifyContext:x})}catch(l){this.client.logger.error(l);const u=s.params.requester.publicKey,v=await this.client.core.crypto.generateKeyPair(),x=this.getAppLinkIfEnabled(s.params.requester.metadata,c),S={type:Ji,receiverPublicKey:u,senderPublicKey:v};await this.sendError({id:s.id,topic:n,error:l,encodeOpts:S,rpcOpts:Vt.wc_sessionAuthenticate.autoReject,appLink:x})}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ti.idle,this.processSessionRequestQueue()},Y.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:r,error:i})=>{const n=this.client.core.history.pending;n.length>0&&n.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,a=Pe("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Pe("session_request",s.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Ti.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Ti.active,this.emitSessionRequest(r)}catch(i){this.client.logger.error(i)}},this.emitSessionRequest=r=>{this.client.events.emit("session_request",r)},this.onPairingCreated=r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const i=this.client.proposal.getAll().find(n=>n.pairingTopic===r.topic);i&&this.onSessionProposeRequest({topic:r.topic,payload:Rn("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id)})},this.isValidConnect=async r=>{if(!xr(r)){const{message:c}=Q("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:i,requiredNamespaces:n,optionalNamespaces:s,sessionProperties:o,relays:a}=r;if(pr(i)||await this.isValidPairingTopic(i),!tE(a,!0)){const{message:c}=Q("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(c)}!pr(n)&&pa(n)!==0&&this.validateNamespaces(n,"requiredNamespaces"),!pr(s)&&pa(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),pr(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(r,i)=>{const n=eE(r,"connect()",i);if(n)throw new Error(n.message)},this.isValidApprove=async r=>{if(!xr(r))throw new Error(Q("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:i,namespaces:n,relayProtocol:s,sessionProperties:o}=r;this.checkRecentlyDeleted(i),await this.isValidProposalId(i);const a=this.client.proposal.get(i),c=Lh(n,"approve()");if(c)throw new Error(c.message);const l=kg(a.requiredNamespaces,n,"approve()");if(l)throw new Error(l.message);if(!Rt(s,!0)){const{message:u}=Q("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(u)}pr(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async r=>{if(!xr(r)){const{message:s}=Q("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:i,reason:n}=r;if(this.checkRecentlyDeleted(i),await this.isValidProposalId(i),!iE(n)){const{message:s}=Q("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(n)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!xr(r)){const{message:l}=Q("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:i,controller:n,namespaces:s,expiry:o}=r;if(!qg(i)){const{message:l}=Q("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=Gx(n,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=Lh(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Mn(o)){const{message:l}=Q("EXPIRED","onSessionSettleRequest()");throw new Error(l)}},this.isValidUpdate=async r=>{if(!xr(r)){const{message:c}=Q("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(c)}const{topic:i,namespaces:n}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const s=this.client.session.get(i),o=Lh(n,"update()");if(o)throw new Error(o.message);const a=kg(s.requiredNamespaces,n,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!xr(r)){const{message:n}=Q("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(n)}const{topic:i}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i)},this.isValidRequest=async r=>{if(!xr(r)){const{message:c}=Q("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(c)}const{topic:i,request:n,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const{namespaces:a}=this.client.session.get(i);if(!jg(a,s)){const{message:c}=Q("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(c)}if(!nE(n)){const{message:c}=Q("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw new Error(c)}if(!aE(a,s,n.method)){const{message:c}=Q("MISSING_OR_INVALID",`request() method: ${n.method}`);throw new Error(c)}if(o&&!hE(o,ou)){const{message:c}=Q("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${ou.min} and ${ou.max}`);throw new Error(c)}},this.isValidRespond=async r=>{var i;if(!xr(r)){const{message:o}=Q("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:n,response:s}=r;try{await this.isValidSessionTopic(n)}catch(o){throw(i=r?.response)!=null&&i.id&&this.cleanupAfterResponse(r),o}if(!sE(s)){const{message:o}=Q("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidPing=async r=>{if(!xr(r)){const{message:n}=Q("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async r=>{if(!xr(r)){const{message:a}=Q("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:i,event:n,chainId:s}=r;await this.isValidSessionTopic(i);const{namespaces:o}=this.client.session.get(i);if(!jg(o,s)){const{message:a}=Q("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!oE(n)){const{message:a}=Q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(a)}if(!cE(o,s,n.name)){const{message:a}=Q("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!xr(r)){const{message:n}=Q("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidAuthenticate=r=>{const{chains:i,uri:n,domain:s,nonce:o}=r;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!Rt(n,!1))throw new Error("uri is required parameter");if(!Rt(s,!1))throw new Error("domain is required parameter");if(!Rt(o,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(c=>eo(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=eo(i[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async r=>{const{attestationId:i,hash:n,encryptedId:s,metadata:o,transportType:a}=r,c={verified:{verifyUrl:o.verifyUrl||Ea,validation:"UNKNOWN",origin:o.url||""}};try{if(a===wt.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:i,hash:n,encryptedId:s,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c},this.validateSessionProps=(r,i)=>{Object.values(r).forEach(n=>{if(!Rt(n,!1)){const{message:s}=Q("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(n)}`);throw new Error(s)}})},this.getPendingAuthRequest=r=>{const i=this.client.auth.requests.get(r);return typeof i=="object"?i:void 0},this.addToRecentlyDeleted=(r,i)=>{if(this.recentlyDeletedMap.set(r,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let n=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(n++>=s)break;this.recentlyDeletedMap.delete(o)}}},this.checkRecentlyDeleted=r=>{const i=this.recentlyDeletedMap.get(r);if(i){const{message:n}=Q("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${r}`);throw new Error(n)}},this.isLinkModeEnabled=(r,i)=>{var n,s,o,a,c,l,u,v,x;return!r||i!==wt.link_mode?!1:((s=(n=this.client.metadata)==null?void 0:n.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=r?.redirect)==null?void 0:u.universal)!==void 0&&((v=r?.redirect)==null?void 0:v.universal)!==""&&((x=r?.redirect)==null?void 0:x.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"},this.getAppLinkIfEnabled=(r,i)=>{var n;return this.isLinkModeEnabled(r,i)?(n=r?.redirect)==null?void 0:n.universal:void 0},this.handleLinkModeMessage=({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const i=B1(r,"topic")||"",n=decodeURIComponent(B1(r,"wc_ev")||""),s=this.client.session.keys.includes(i);s&&this.client.session.update(i,{transportType:wt.link_mode}),this.client.core.dispatchEnvelope({topic:i,message:n,sessionExists:s})},this.registerLinkModeListeners=async()=>{var r;if(gh()||An()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const i=global==null?void 0:global.Linking;if(typeof i<"u"){i.addEventListener("url",this.handleLinkModeMessage,this.client.name);const n=await i.getInitialURL();n&&setTimeout(()=>{this.handleLinkModeMessage({url:n})},50)}}}}isInitialized(){if(!this.initialized){const{message:e}=Q("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Kt.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:r,message:i,attestation:n,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(cl)?this.client.auth.authKeys.get(cl):{responseTopic:void 0,publicKey:void 0},a=await this.client.core.crypto.decode(r,i,{receiverPublicKey:o,encoding:s===wt.link_mode?aa:Dn});try{Zh(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a,attestation:n,transportType:s,encryptedId:Zi(i)})):nl(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s})}catch(c){this.client.logger.error(c)}}registerExpirerEvents(){this.client.core.expirer.on(Qr.expired,async e=>{const{topic:r,id:i}=L1(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,Q("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,Q("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(ds.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ds.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Rt(e,!1)){const{message:r}=Q("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=Q("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Mn(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=Q("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Rt(e,!1)){const{message:r}=Q("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=Q("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Mn(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=Q("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=Q("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Rt(e,!1)){const{message:r}=Q("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=Q("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!rE(e)){const{message:r}=Q("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=Q("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Mn(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=Q("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class OM extends vs{constructor(e,r){super(e,r,pM,nu),this.core=e,this.logger=r}}class CM extends vs{constructor(e,r){super(e,r,gM,nu),this.core=e,this.logger=r}}class DM extends vs{constructor(e,r){super(e,r,mM,nu,i=>i.id),this.core=e,this.logger=r}}class RM extends vs{constructor(e,r){super(e,r,_M,al,()=>cl),this.core=e,this.logger=r}}class NM extends vs{constructor(e,r){super(e,r,xM,al),this.core=e,this.logger=r}}class TM extends vs{constructor(e,r){super(e,r,EM,al,i=>i.id),this.core=e,this.logger=r}}class FM{constructor(e,r){this.core=e,this.logger=r,this.authKeys=new RM(this.core,this.logger),this.pairingTopics=new NM(this.core,this.logger),this.requests=new TM(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class au extends F${constructor(e){super(e),this.protocol=am,this.version=cm,this.name=su.name,this.events=new Zt.exports.EventEmitter,this.on=(i,n)=>this.events.on(i,n),this.once=(i,n)=>this.events.once(i,n),this.off=(i,n)=>this.events.off(i,n),this.removeListener=(i,n)=>this.events.removeListener(i,n),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(n){throw this.logger.error(n.message),n}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(n){throw this.logger.error(n.message),n}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(n){throw this.logger.error(n.message),n}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(n){throw this.logger.error(n.message),n}},this.update=async i=>{try{return await this.engine.update(i)}catch(n){throw this.logger.error(n.message),n}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(n){throw this.logger.error(n.message),n}},this.request=async i=>{try{return await this.engine.request(i)}catch(n){throw this.logger.error(n.message),n}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(n){throw this.logger.error(n.message),n}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(n){throw this.logger.error(n.message),n}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(n){throw this.logger.error(n.message),n}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(n){throw this.logger.error(n.message),n}},this.find=i=>{try{return this.engine.find(i)}catch(n){throw this.logger.error(n.message),n}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.authenticate=async(i,n)=>{try{return await this.engine.authenticate(i,n)}catch(s){throw this.logger.error(s.message),s}},this.formatAuthMessage=i=>{try{return this.engine.formatAuthMessage(i)}catch(n){throw this.logger.error(n.message),n}},this.approveSessionAuthenticate=async i=>{try{return await this.engine.approveSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}},this.rejectSessionAuthenticate=async i=>{try{return await this.engine.rejectSessionAuthenticate(i)}catch(n){throw this.logger.error(n.message),n}},this.name=e?.name||su.name,this.metadata=e?.metadata||D1(),this.signConfig=e?.signConfig;const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Oi(tl({level:e?.logger||su.logger}));this.core=e?.core||new dM(e),this.logger=gr(r,this.name),this.session=new CM(this.core,this.logger),this.proposal=new OM(this.core,this.logger),this.pendingRequest=new DM(this.core,this.logger),this.engine=new PM(this),this.auth=new FM(this.core,this.logger)}static async init(e){const r=new au(e);return await r.initialize(),r}get context(){return $r(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},Y.toMiliseconds(Y.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var cu={exports:{}};(function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Ot<"u"&&Ot,i=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof Ot<"u"&&Ot||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(h){return h&&DataView.prototype.isPrototypeOf(h)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=ArrayBuffer.isView||function(h){return h&&u.indexOf(Object.prototype.toString.call(h))>-1};function x(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(h)||h==="")throw new TypeError('Invalid character in header field name: "'+h+'"');return h.toLowerCase()}function S(h){return typeof h!="string"&&(h=String(h)),h}function E(h){var p={next:function(){var _=h.shift();return{done:_===void 0,value:_}}};return c.iterable&&(p[Symbol.iterator]=function(){return p}),p}function I(h){this.map={},h instanceof I?h.forEach(function(p,_){this.append(_,p)},this):Array.isArray(h)?h.forEach(function(p){if(p.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+p.length);this.append(p[0],p[1])},this):h&&Object.getOwnPropertyNames(h).forEach(function(p){this.append(p,h[p])},this)}I.prototype.append=function(h,p){h=x(h),p=S(p);var _=this.map[h];this.map[h]=_?_+", "+p:p},I.prototype.delete=function(h){delete this.map[x(h)]},I.prototype.get=function(h){return h=x(h),this.has(h)?this.map[h]:null},I.prototype.has=function(h){return this.map.hasOwnProperty(x(h))},I.prototype.set=function(h,p){this.map[x(h)]=S(p)},I.prototype.forEach=function(h,p){for(var _ in this.map)this.map.hasOwnProperty(_)&&h.call(p,this.map[_],_,this)},I.prototype.keys=function(){var h=[];return this.forEach(function(p,_){h.push(_)}),E(h)},I.prototype.values=function(){var h=[];return this.forEach(function(p){h.push(p)}),E(h)},I.prototype.entries=function(){var h=[];return this.forEach(function(p,_){h.push([_,p])}),E(h)},c.iterable&&(I.prototype[Symbol.iterator]=I.prototype.entries);function C(h){if(!h._noBody){if(h.bodyUsed)return Promise.reject(new TypeError("Already read"));h.bodyUsed=!0}}function O(h){return new Promise(function(p,_){h.onload=function(){p(h.result)},h.onerror=function(){_(h.error)}})}function R(h){var p=new FileReader,_=O(p);return p.readAsArrayBuffer(h),_}function N(h){var p=new FileReader,_=O(p),$=/charset=([A-Za-z0-9_-]+)/.exec(h.type),y=$?$[1]:"utf-8";return p.readAsText(h,y),_}function T(h){for(var p=new Uint8Array(h),_=new Array(p.length),$=0;$<p.length;$++)_[$]=String.fromCharCode(p[$]);return _.join("")}function U(h){if(h.slice)return h.slice(0);var p=new Uint8Array(h.byteLength);return p.set(new Uint8Array(h)),p.buffer}function z(){return this.bodyUsed=!1,this._initBody=function(h){this.bodyUsed=this.bodyUsed,this._bodyInit=h,h?typeof h=="string"?this._bodyText=h:c.blob&&Blob.prototype.isPrototypeOf(h)?this._bodyBlob=h:c.formData&&FormData.prototype.isPrototypeOf(h)?this._bodyFormData=h:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)?this._bodyText=h.toString():c.arrayBuffer&&c.blob&&l(h)?(this._bodyArrayBuffer=U(h.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(h)||v(h))?this._bodyArrayBuffer=U(h):this._bodyText=h=Object.prototype.toString.call(h):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof h=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var h=C(this);if(h)return h;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var h=C(this);return h||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(R);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var h=C(this);if(h)return h;if(this._bodyBlob)return N(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(V)}),this.json=function(){return this.text().then(JSON.parse)},this}var W=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function K(h){var p=h.toUpperCase();return W.indexOf(p)>-1?p:h}function B(h,p){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');p=p||{};var _=p.body;if(h instanceof B){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,p.headers||(this.headers=new I(h.headers)),this.method=h.method,this.mode=h.mode,this.signal=h.signal,!_&&h._bodyInit!=null&&(_=h._bodyInit,h.bodyUsed=!0)}else this.url=String(h);if(this.credentials=p.credentials||this.credentials||"same-origin",(p.headers||!this.headers)&&(this.headers=new I(p.headers)),this.method=K(p.method||this.method||"GET"),this.mode=p.mode||this.mode||null,this.signal=p.signal||this.signal||function(){if("AbortController"in a){var d=new AbortController;return d.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&_)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(_),(this.method==="GET"||this.method==="HEAD")&&(p.cache==="no-store"||p.cache==="no-cache")){var $=/([?&])_=[^&]*/;if($.test(this.url))this.url=this.url.replace($,"$1_="+new Date().getTime());else{var y=/\?/;this.url+=(y.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function V(h){var p=new FormData;return h.trim().split("&").forEach(function(_){if(_){var $=_.split("="),y=$.shift().replace(/\+/g," "),d=$.join("=").replace(/\+/g," ");p.append(decodeURIComponent(y),decodeURIComponent(d))}}),p}function M(h){var p=new I,_=h.replace(/\r?\n[\t ]+/g," ");return _.split("\r").map(function($){return $.indexOf(`
`)===0?$.substr(1,$.length):$}).forEach(function($){var y=$.split(":"),d=y.shift().trim();if(d){var w=y.join(":").trim();try{p.append(d,w)}catch(b){console.warn("Response "+b.message)}}}),p}z.call(B.prototype);function m(h,p){if(!(this instanceof m))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(p||(p={}),this.type="default",this.status=p.status===void 0?200:p.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=p.statusText===void 0?"":""+p.statusText,this.headers=new I(p.headers),this.url=p.url||"",this._initBody(h)}z.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new I(this.headers),url:this.url})},m.error=function(){var h=new m(null,{status:200,statusText:""});return h.ok=!1,h.status=0,h.type="error",h};var g=[301,302,303,307,308];m.redirect=function(h,p){if(g.indexOf(p)===-1)throw new RangeError("Invalid status code");return new m(null,{status:p,headers:{location:h}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(p,_){this.message=p,this.name=_;var $=Error(p);this.stack=$.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function f(h,p){return new Promise(function(_,$){var y=new B(h,p);if(y.signal&&y.signal.aborted)return $(new o.DOMException("Aborted","AbortError"));var d=new XMLHttpRequest;function w(){d.abort()}d.onload=function(){var q={statusText:d.statusText,headers:M(d.getAllResponseHeaders()||"")};y.url.indexOf("file://")===0&&(d.status<200||d.status>599)?q.status=200:q.status=d.status,q.url="responseURL"in d?d.responseURL:q.headers.get("X-Request-URL");var A="response"in d?d.response:d.responseText;setTimeout(function(){_(new m(A,q))},0)},d.onerror=function(){setTimeout(function(){$(new TypeError("Network request failed"))},0)},d.ontimeout=function(){setTimeout(function(){$(new TypeError("Network request timed out"))},0)},d.onabort=function(){setTimeout(function(){$(new o.DOMException("Aborted","AbortError"))},0)};function b(q){try{return q===""&&a.location.href?a.location.href:q}catch{return q}}if(d.open(y.method,b(y.url),!0),y.credentials==="include"?d.withCredentials=!0:y.credentials==="omit"&&(d.withCredentials=!1),"responseType"in d&&(c.blob?d.responseType="blob":c.arrayBuffer&&(d.responseType="arraybuffer")),p&&typeof p.headers=="object"&&!(p.headers instanceof I||a.Headers&&p.headers instanceof a.Headers)){var P=[];Object.getOwnPropertyNames(p.headers).forEach(function(q){P.push(x(q)),d.setRequestHeader(q,S(p.headers[q]))}),y.headers.forEach(function(q,A){P.indexOf(A)===-1&&d.setRequestHeader(A,q)})}else y.headers.forEach(function(q,A){d.setRequestHeader(A,q)});y.signal&&(y.signal.addEventListener("abort",w),d.onreadystatechange=function(){d.readyState===4&&y.signal.removeEventListener("abort",w)}),d.send(typeof y._bodyInit>"u"?null:y._bodyInit)})}return f.polyfill=!0,a.fetch||(a.fetch=f,a.Headers=I,a.Request=B,a.Response=m),o.Headers=I,o.Request=B,o.Response=m,o.fetch=f,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var n=r.fetch?r:i;e=n.fetch,e.default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,t.exports=e})(cu,cu.exports);var pm=iy(cu.exports),LM=Object.defineProperty,BM=Object.defineProperties,UM=Object.getOwnPropertyDescriptors,gm=Object.getOwnPropertySymbols,qM=Object.prototype.hasOwnProperty,jM=Object.prototype.propertyIsEnumerable,vm=(t,e,r)=>e in t?LM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mm=(t,e)=>{for(var r in e||(e={}))qM.call(e,r)&&vm(t,r,e[r]);if(gm)for(var r of gm(e))jM.call(e,r)&&vm(t,r,e[r]);return t},bm=(t,e)=>BM(t,UM(e));const kM={Accept:"application/json","Content-Type":"application/json"},zM="POST",ym={headers:kM,method:zM},wm=10;class vi{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Zt.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!dv(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=Hi(e),i=await(await pm(this.url,bm(mm({},ym),{body:r}))).json();this.onPayload({data:i})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!dv(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((i,n)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),n(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return n(new Error("HTTP connection is missing or invalid"));i()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=Hi({id:1,jsonrpc:"2.0",method:"test",params:[]});await pm(e,bm(mm({},ym),{body:r}))}this.onOpen()}catch(r){const i=this.parseError(r);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?es(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const i=this.parseError(r),n=i.message||i.toString(),s=il(e,n);this.events.emit("payload",s)}parseError(e,r=this.url){return av(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>wm&&this.events.setMaxListeners(wm)}}const _m="error",HM="wss://relay.walletconnect.org",WM="wc",KM="universal_provider",xm=`${WM}@2:${KM}:`,Em="https://rpc.walletconnect.org/v1/",uo="generic",VM=`${Em}bundler`,ei={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function GM(){this.__data__=[],this.size=0}var JM=GM;function ZM(t,e){return t===e||t!==t&&e!==e}var fl=ZM,YM=fl;function XM(t,e){for(var r=t.length;r--;)if(YM(t[r][0],e))return r;return-1}var hl=XM,QM=hl,eP=Array.prototype,tP=eP.splice;function rP(t){var e=this.__data__,r=QM(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():tP.call(e,r,1),--this.size,!0}var iP=rP,nP=hl;function sP(t){var e=this.__data__,r=nP(e,t);return r<0?void 0:e[r][1]}var oP=sP,aP=hl;function cP(t){return aP(this.__data__,t)>-1}var lP=cP,fP=hl;function hP(t,e){var r=this.__data__,i=fP(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}var uP=hP,dP=JM,pP=iP,gP=oP,vP=lP,mP=uP;function po(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}po.prototype.clear=dP,po.prototype.delete=pP,po.prototype.get=gP,po.prototype.has=vP,po.prototype.set=mP;var ul=po,bP=ul;function yP(){this.__data__=new bP,this.size=0}var wP=yP;function _P(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var xP=_P;function EP(t){return this.__data__.get(t)}var $P=EP;function SP(t){return this.__data__.has(t)}var AP=SP,IP=typeof ll=="object"&&ll&&ll.Object===Object&&ll,$m=IP,MP=$m,PP=typeof self=="object"&&self&&self.Object===Object&&self,OP=MP||PP||Function("return this")(),go=OP,CP=go,DP=CP.Symbol,Sm=DP,Am=Sm,Im=Object.prototype,RP=Im.hasOwnProperty,NP=Im.toString,Ma=Am?Am.toStringTag:void 0;function TP(t){var e=RP.call(t,Ma),r=t[Ma];try{t[Ma]=void 0;var i=!0}catch{}var n=NP.call(t);return i&&(e?t[Ma]=r:delete t[Ma]),n}var FP=TP,LP=Object.prototype,BP=LP.toString;function UP(t){return BP.call(t)}var qP=UP,Mm=Sm,jP=FP,kP=qP,zP="[object Null]",HP="[object Undefined]",Pm=Mm?Mm.toStringTag:void 0;function WP(t){return t==null?t===void 0?HP:zP:Pm&&Pm in Object(t)?jP(t):kP(t)}var dl=WP;function KP(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ms=KP,VP=dl,GP=ms,JP="[object AsyncFunction]",ZP="[object Function]",YP="[object GeneratorFunction]",XP="[object Proxy]";function QP(t){if(!GP(t))return!1;var e=VP(t);return e==ZP||e==YP||e==JP||e==XP}var lu=QP,eO=go,tO=eO["__core-js_shared__"],rO=tO,fu=rO,Om=function(){var t=/[^.]+$/.exec(fu&&fu.keys&&fu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function iO(t){return!!Om&&Om in t}var nO=iO,sO=Function.prototype,oO=sO.toString;function aO(t){if(t!=null){try{return oO.call(t)}catch{}try{return t+""}catch{}}return""}var cO=aO,lO=lu,fO=nO,hO=ms,uO=cO,dO=/[\\^$.*+?()[\]{}|]/g,pO=/^\[object .+?Constructor\]$/,gO=Function.prototype,vO=Object.prototype,mO=gO.toString,bO=vO.hasOwnProperty,yO=RegExp("^"+mO.call(bO).replace(dO,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wO(t){if(!hO(t)||fO(t))return!1;var e=lO(t)?yO:pO;return e.test(uO(t))}var _O=wO;function xO(t,e){return t?.[e]}var EO=xO,$O=_O,SO=EO;function AO(t,e){var r=SO(t,e);return $O(r)?r:void 0}var hu=AO,IO=hu,MO=go,PO=IO(MO,"Map"),Cm=PO,OO=hu,CO=OO(Object,"create"),pl=CO,Dm=pl;function DO(){this.__data__=Dm?Dm(null):{},this.size=0}var RO=DO;function NO(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var TO=NO,FO=pl,LO="__lodash_hash_undefined__",BO=Object.prototype,UO=BO.hasOwnProperty;function qO(t){var e=this.__data__;if(FO){var r=e[t];return r===LO?void 0:r}return UO.call(e,t)?e[t]:void 0}var jO=qO,kO=pl,zO=Object.prototype,HO=zO.hasOwnProperty;function WO(t){var e=this.__data__;return kO?e[t]!==void 0:HO.call(e,t)}var KO=WO,VO=pl,GO="__lodash_hash_undefined__";function JO(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=VO&&e===void 0?GO:e,this}var ZO=JO,YO=RO,XO=TO,QO=jO,eC=KO,tC=ZO;function vo(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}vo.prototype.clear=YO,vo.prototype.delete=XO,vo.prototype.get=QO,vo.prototype.has=eC,vo.prototype.set=tC;var rC=vo,Rm=rC,iC=ul,nC=Cm;function sC(){this.size=0,this.__data__={hash:new Rm,map:new(nC||iC),string:new Rm}}var oC=sC;function aC(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var cC=aC,lC=cC;function fC(t,e){var r=t.__data__;return lC(e)?r[typeof e=="string"?"string":"hash"]:r.map}var gl=fC,hC=gl;function uC(t){var e=hC(this,t).delete(t);return this.size-=e?1:0,e}var dC=uC,pC=gl;function gC(t){return pC(this,t).get(t)}var vC=gC,mC=gl;function bC(t){return mC(this,t).has(t)}var yC=bC,wC=gl;function _C(t,e){var r=wC(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}var xC=_C,EC=oC,$C=dC,SC=vC,AC=yC,IC=xC;function mo(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}mo.prototype.clear=EC,mo.prototype.delete=$C,mo.prototype.get=SC,mo.prototype.has=AC,mo.prototype.set=IC;var MC=mo,PC=ul,OC=Cm,CC=MC,DC=200;function RC(t,e){var r=this.__data__;if(r instanceof PC){var i=r.__data__;if(!OC||i.length<DC-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new CC(i)}return r.set(t,e),this.size=r.size,this}var NC=RC,TC=ul,FC=wP,LC=xP,BC=$P,UC=AP,qC=NC;function bo(t){var e=this.__data__=new TC(t);this.size=e.size}bo.prototype.clear=FC,bo.prototype.delete=LC,bo.prototype.get=BC,bo.prototype.has=UC,bo.prototype.set=qC;var jC=bo,kC=hu,zC=function(){try{var t=kC(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Nm=zC,Tm=Nm;function HC(t,e,r){e=="__proto__"&&Tm?Tm(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var uu=HC,WC=uu,KC=fl;function VC(t,e,r){(r!==void 0&&!KC(t[e],r)||r===void 0&&!(e in t))&&WC(t,e,r)}var Fm=VC;function GC(t){return function(e,r,i){for(var n=-1,s=Object(e),o=i(e),a=o.length;a--;){var c=o[t?a:++n];if(r(s[c],c,s)===!1)break}return e}}var JC=GC,ZC=JC,YC=ZC(),XC=YC,du={exports:{}};(function(t,e){var r=go,i=e&&!e.nodeType&&e,n=i&&!0&&t&&!t.nodeType&&t,s=n&&n.exports===i,o=s?r.Buffer:void 0,a=o?o.allocUnsafe:void 0;function c(l,u){if(u)return l.slice();var v=l.length,x=a?a(v):new l.constructor(v);return l.copy(x),x}t.exports=c})(du,du.exports);var QC=go,eD=QC.Uint8Array,tD=eD,Lm=tD;function rD(t){var e=new t.constructor(t.byteLength);return new Lm(e).set(new Lm(t)),e}var iD=rD,nD=iD;function sD(t,e){var r=e?nD(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var oD=sD;function aD(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e}var cD=aD,lD=ms,Bm=Object.create,fD=function(){function t(){}return function(e){if(!lD(e))return{};if(Bm)return Bm(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),hD=fD;function uD(t,e){return function(r){return t(e(r))}}var dD=uD,pD=dD,gD=pD(Object.getPrototypeOf,Object),Um=gD,vD=Object.prototype;function mD(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||vD;return t===r}var qm=mD,bD=hD,yD=Um,wD=qm;function _D(t){return typeof t.constructor=="function"&&!wD(t)?bD(yD(t)):{}}var xD=_D;function ED(t){return t!=null&&typeof t=="object"}var Pa=ED,$D=dl,SD=Pa,AD="[object Arguments]";function ID(t){return SD(t)&&$D(t)==AD}var MD=ID,jm=MD,PD=Pa,km=Object.prototype,OD=km.hasOwnProperty,CD=km.propertyIsEnumerable,DD=jm(function(){return arguments}())?jm:function(t){return PD(t)&&OD.call(t,"callee")&&!CD.call(t,"callee")},zm=DD,RD=Array.isArray,Hm=RD,ND=9007199254740991;function TD(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ND}var Wm=TD,FD=lu,LD=Wm;function BD(t){return t!=null&&LD(t.length)&&!FD(t)}var pu=BD,UD=pu,qD=Pa;function jD(t){return qD(t)&&UD(t)}var kD=jD,vl={exports:{}};function zD(){return!1}var HD=zD;(function(t,e){var r=go,i=HD,n=e&&!e.nodeType&&e,s=n&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===n,a=o?r.Buffer:void 0,c=a?a.isBuffer:void 0,l=c||i;t.exports=l})(vl,vl.exports);var WD=dl,KD=Um,VD=Pa,GD="[object Object]",JD=Function.prototype,ZD=Object.prototype,Km=JD.toString,YD=ZD.hasOwnProperty,XD=Km.call(Object);function QD(t){if(!VD(t)||WD(t)!=GD)return!1;var e=KD(t);if(e===null)return!0;var r=YD.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Km.call(r)==XD}var eR=QD,tR=dl,rR=Wm,iR=Pa,nR="[object Arguments]",sR="[object Array]",oR="[object Boolean]",aR="[object Date]",cR="[object Error]",lR="[object Function]",fR="[object Map]",hR="[object Number]",uR="[object Object]",dR="[object RegExp]",pR="[object Set]",gR="[object String]",vR="[object WeakMap]",mR="[object ArrayBuffer]",bR="[object DataView]",yR="[object Float32Array]",wR="[object Float64Array]",_R="[object Int8Array]",xR="[object Int16Array]",ER="[object Int32Array]",$R="[object Uint8Array]",SR="[object Uint8ClampedArray]",AR="[object Uint16Array]",IR="[object Uint32Array]",_t={};_t[yR]=_t[wR]=_t[_R]=_t[xR]=_t[ER]=_t[$R]=_t[SR]=_t[AR]=_t[IR]=!0,_t[nR]=_t[sR]=_t[mR]=_t[oR]=_t[bR]=_t[aR]=_t[cR]=_t[lR]=_t[fR]=_t[hR]=_t[uR]=_t[dR]=_t[pR]=_t[gR]=_t[vR]=!1;function MR(t){return iR(t)&&rR(t.length)&&!!_t[tR(t)]}var PR=MR;function OR(t){return function(e){return t(e)}}var CR=OR,gu={exports:{}};(function(t,e){var r=$m,i=e&&!e.nodeType&&e,n=i&&!0&&t&&!t.nodeType&&t,s=n&&n.exports===i,o=s&&r.process,a=function(){try{var c=n&&n.require&&n.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(gu,gu.exports);var DR=PR,RR=CR,Vm=gu.exports,Gm=Vm&&Vm.isTypedArray,NR=Gm?RR(Gm):DR,Jm=NR;function TR(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Zm=TR,FR=uu,LR=fl,BR=Object.prototype,UR=BR.hasOwnProperty;function qR(t,e,r){var i=t[e];(!(UR.call(t,e)&&LR(i,r))||r===void 0&&!(e in t))&&FR(t,e,r)}var jR=qR,kR=jR,zR=uu;function HR(t,e,r,i){var n=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],c=i?i(r[a],t[a],a,r,t):void 0;c===void 0&&(c=t[a]),n?zR(r,a,c):kR(r,a,c)}return r}var WR=HR;function KR(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}var VR=KR,GR=9007199254740991,JR=/^(?:0|[1-9]\d*)$/;function ZR(t,e){var r=typeof t;return e=e??GR,!!e&&(r=="number"||r!="symbol"&&JR.test(t))&&t>-1&&t%1==0&&t<e}var Ym=ZR,YR=VR,XR=zm,QR=Hm,eN=vl.exports,tN=Ym,rN=Jm,iN=Object.prototype,nN=iN.hasOwnProperty;function sN(t,e){var r=QR(t),i=!r&&XR(t),n=!r&&!i&&eN(t),s=!r&&!i&&!n&&rN(t),o=r||i||n||s,a=o?YR(t.length,String):[],c=a.length;for(var l in t)(e||nN.call(t,l))&&!(o&&(l=="length"||n&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||tN(l,c)))&&a.push(l);return a}var oN=sN;function aN(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var cN=aN,lN=ms,fN=qm,hN=cN,uN=Object.prototype,dN=uN.hasOwnProperty;function pN(t){if(!lN(t))return hN(t);var e=fN(t),r=[];for(var i in t)i=="constructor"&&(e||!dN.call(t,i))||r.push(i);return r}var gN=pN,vN=oN,mN=gN,bN=pu;function yN(t){return bN(t)?vN(t,!0):mN(t)}var Xm=yN,wN=WR,_N=Xm;function xN(t){return wN(t,_N(t))}var EN=xN,Qm=Fm,$N=du.exports,SN=oD,AN=cD,IN=xD,eb=zm,tb=Hm,MN=kD,PN=vl.exports,ON=lu,CN=ms,DN=eR,RN=Jm,rb=Zm,NN=EN;function TN(t,e,r,i,n,s,o){var a=rb(t,r),c=rb(e,r),l=o.get(c);if(l){Qm(t,r,l);return}var u=s?s(a,c,r+"",t,e,o):void 0,v=u===void 0;if(v){var x=tb(c),S=!x&&PN(c),E=!x&&!S&&RN(c);u=c,x||S||E?tb(a)?u=a:MN(a)?u=AN(a):S?(v=!1,u=$N(c,!0)):E?(v=!1,u=SN(c,!0)):u=[]:DN(c)||eb(c)?(u=a,eb(a)?u=NN(a):(!CN(a)||ON(a))&&(u=IN(c))):v=!1}v&&(o.set(c,u),n(u,c,i,s,o),o.delete(c)),Qm(t,r,u)}var FN=TN,LN=jC,BN=Fm,UN=XC,qN=FN,jN=ms,kN=Xm,zN=Zm;function ib(t,e,r,i,n){t!==e&&UN(e,function(s,o){if(n||(n=new LN),jN(s))qN(t,e,o,r,ib,i,n);else{var a=i?i(zN(t,o),s,o+"",t,e,n):void 0;a===void 0&&(a=s),BN(t,o,a)}},kN)}var HN=ib;function WN(t){return t}var nb=WN;function KN(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var VN=KN,GN=VN,sb=Math.max;function JN(t,e,r){return e=sb(e===void 0?t.length-1:e,0),function(){for(var i=arguments,n=-1,s=sb(i.length-e,0),o=Array(s);++n<s;)o[n]=i[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=i[n];return a[e]=r(o),GN(t,this,a)}}var ZN=JN;function YN(t){return function(){return t}}var XN=YN,QN=XN,ob=Nm,eT=nb,tT=ob?function(t,e){return ob(t,"toString",{configurable:!0,enumerable:!1,value:QN(e),writable:!0})}:eT,rT=tT,iT=800,nT=16,sT=Date.now;function oT(t){var e=0,r=0;return function(){var i=sT(),n=nT-(i-r);if(r=i,n>0){if(++e>=iT)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var aT=oT,cT=rT,lT=aT,fT=lT(cT),hT=fT,uT=nb,dT=ZN,pT=hT;function gT(t,e){return pT(dT(t,e,uT),t+"")}var vT=gT,mT=fl,bT=pu,yT=Ym,wT=ms;function _T(t,e,r){if(!wT(r))return!1;var i=typeof e;return(i=="number"?bT(r)&&yT(e,r.length):i=="string"&&e in r)?mT(r[e],t):!1}var xT=_T,ET=vT,$T=xT;function ST(t){return ET(function(e,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,o=n>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(n--,s):void 0,o&&$T(r[0],r[1],o)&&(s=n<3?void 0:s,n=1),e=Object(e);++i<n;){var a=r[i];a&&t(e,a,i,s)}return e})}var AT=ST,IT=HN,MT=AT,PT=MT(function(t,e,r){IT(t,e,r)}),OT=PT,CT=Object.defineProperty,DT=Object.defineProperties,RT=Object.getOwnPropertyDescriptors,ab=Object.getOwnPropertySymbols,NT=Object.prototype.hasOwnProperty,TT=Object.prototype.propertyIsEnumerable,cb=(t,e,r)=>e in t?CT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ml=(t,e)=>{for(var r in e||(e={}))NT.call(e,r)&&cb(t,r,e[r]);if(ab)for(var r of ab(e))TT.call(e,r)&&cb(t,r,e[r]);return t},FT=(t,e)=>DT(t,RT(e));function Br(t,e,r){var i;const n=eo(t);return((i=e.rpcMap)==null?void 0:i[n.reference])||`${Em}?chainId=${n.namespace}:${n.reference}&projectId=${r}`}function bs(t){return t.includes(":")?t.split(":")[1]:t}function lb(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function LT(t,e){const r=Object.keys(e.namespaces).filter(n=>n.includes(t));if(!r.length)return[];const i=[];return r.forEach(n=>{const s=e.namespaces[n].accounts;i.push(...s)}),i}function vu(t={},e={}){const r=fb(t),i=fb(e);return OT(r,i)}function fb(t){var e,r,i,n;const s={};if(!pa(t))return s;for(const[o,a]of Object.entries(t)){const c=Th(o)?[o]:a.chains,l=a.methods||[],u=a.events||[],v=a.rpcMap||{},x=da(o);s[x]=FT(ml(ml({},s[x]),a),{chains:Tc(c,(e=s[x])==null?void 0:e.chains),methods:Tc(l,(r=s[x])==null?void 0:r.methods),events:Tc(u,(i=s[x])==null?void 0:i.events),rpcMap:ml(ml({},v),(n=s[x])==null?void 0:n.rpcMap)})}return s}function BT(t){return t.includes(":")?t.split(":")[2]:t}function hb(t){const e={};for(const[r,i]of Object.entries(t)){const n=i.methods||[],s=i.events||[],o=i.accounts||[],a=Th(r)?[r]:i.chains?i.chains:lb(i.accounts);e[r]={chains:a,methods:n,events:s,accounts:o}}return e}function mu(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const ub={},Ke=t=>ub[t],bu=(t,e)=>{ub[t]=e};class UT{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;const n=bs(r);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||Br(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new vi(i,Ke("disableProviderPing")))}}var qT=Object.defineProperty,jT=Object.defineProperties,kT=Object.getOwnPropertyDescriptors,db=Object.getOwnPropertySymbols,zT=Object.prototype.hasOwnProperty,HT=Object.prototype.propertyIsEnumerable,pb=(t,e,r)=>e in t?qT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gb=(t,e)=>{for(var r in e||(e={}))zT.call(e,r)&&pb(t,r,e[r]);if(db)for(var r of db(e))HT.call(e,r)&&pb(t,r,e[r]);return t},vb=(t,e)=>jT(t,kT(e));class WT{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Ke("events"),this.client=Ke("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const i=r||Br(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new vi(i,Ke("disableProviderPing")))}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;const n=parseInt(bs(r));e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,i;let n=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";n=n.startsWith("0x")?n:`0x${n}`;const s=parseInt(n,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:n}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,i,n;const s=(i=(r=e.request)==null?void 0:r.params)==null?void 0:i[0];if(!s)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),a=((n=o?.sessionProperties)==null?void 0:n.capabilities)||{};if(a!=null&&a[s])return a?.[s];const c=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:vb(gb({},o.sessionProperties||{}),{capabilities:vb(gb({},a||{}),{[s]:c})})})}catch(l){console.warn("Failed to update session with capabilities",l)}return c}async getCallStatus(e){var r,i;const n=this.client.session.get(e.topic),s=(r=n.sessionProperties)==null?void 0:r.bundler_name;if(s){const a=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(i=n.sessionProperties)==null?void 0:i.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var i;const n=new URL(e),s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Rn("eth_getUserOperationReceipt",[(i=r.request.params)==null?void 0:i[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${VM}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}class KT{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;const n=bs(r);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||Br(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new vi(i,Ke("disableProviderPing")))}}class VT{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;const n=bs(r);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||Br(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new vi(i,Ke("disableProviderPing")))}}class GT{constructor(e){this.name="algorand",this.namespace=e.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const i=r||Br(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;e[r]=this.createHttpProvider(r,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||Br(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new Yr(new vi(i,Ke("disableProviderPing")))}}class JT{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const i=this.getCardanoRPCUrl(r),n=bs(r);e[n]=this.createHttpProvider(n,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new vi(i,Ke("disableProviderPing")))}}class ZT{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;const n=bs(r);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||Br(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new vi(i,Ke("disableProviderPing")))}}class YT{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;const n=bs(r);e[n]=this.createHttpProvider(n,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||Br(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new vi(i,Ke("disableProviderPing")))}}class XT{constructor(e){this.name="near",this.namespace=e.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const i=r||Br(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var i;e[r]=this.createHttpProvider(r,(i=this.namespace.rpcMap)==null?void 0:i[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||Br(e,this.namespace);return typeof i>"u"?void 0:new Yr(new vi(i,Ke("disableProviderPing")))}}class QT{constructor(e){this.name="tezos",this.namespace=e.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const i=r||Br(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||Br(e,this.namespace);return typeof i>"u"?void 0:new Yr(new vi(i))}}class eF{constructor(e){this.name=uo,this.namespace=e.namespace,this.events=Ke("events"),this.client=Ke("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ei.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const i={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(n=>{const s=eo(n);i[`${s.namespace}:${s.reference}`]=this.createHttpProvider(n)}),i}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const i=this.createHttpProvider(e,r);i&&(this.httpProviders[e]=i)}createHttpProvider(e,r){const i=r||Br(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Yr(new vi(i,Ke("disableProviderPing")))}}var tF=Object.defineProperty,rF=Object.defineProperties,iF=Object.getOwnPropertyDescriptors,mb=Object.getOwnPropertySymbols,nF=Object.prototype.hasOwnProperty,sF=Object.prototype.propertyIsEnumerable,bb=(t,e,r)=>e in t?tF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bl=(t,e)=>{for(var r in e||(e={}))nF.call(e,r)&&bb(t,r,e[r]);if(mb)for(var r of mb(e))sF.call(e,r)&&bb(t,r,e[r]);return t},yu=(t,e)=>rF(t,iF(e));class wu{constructor(e){this.events=new Zt.exports,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:Oi(tl({level:e?.logger||_m})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const r=new wu(e);return await r.initialize(),r}async request(e,r,i){const[n,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:bl({},e),chainId:`${n}:${s}`,topic:this.session.topic,expiry:i})}sendAsync(e,r,i,n){const s=new Date().getTime();this.request(e,i,n).then(o=>r(null,rl(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:vt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:i,response:n}=await this.client.authenticate(e,r);i&&(this.uri=i,this.events.emit("display_uri",i));const s=await n();if(this.session=s.session,this.session){const o=hb(this.session.namespaces);this.namespaces=vu(this.namespaces,o),this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await n().then(s=>{this.session=s;const o=hb(s.namespaces);this.namespaces=vu(this.namespaces,o),this.persist("namespaces",this.namespaces)}).catch(s=>{if(s.message!==hm)throw s;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[i,n]=this.validateChain(e),s=this.getProvider(i);s.name===uo?s.setDefaultChain(`${i}:${n}`,r):s.setDefaultChain(n,r)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Yi(r)){for(const i of r)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await au.init({core:this.providerOpts.core,logger:this.providerOpts.logger||_m,relayUrl:this.providerOpts.relayUrl||HM,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>da(r)))];bu("client",this.client),bu("events",this.events),bu("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const i=LT(r,this.session),n=lb(i),s=vu(this.namespaces,this.optionalNamespaces),o=yu(bl({},s[r]),{accounts:i,chains:n});switch(r){case"eip155":this.rpcProviders[r]=new WT({namespace:o});break;case"algorand":this.rpcProviders[r]=new GT({namespace:o});break;case"solana":this.rpcProviders[r]=new KT({namespace:o});break;case"cosmos":this.rpcProviders[r]=new VT({namespace:o});break;case"polkadot":this.rpcProviders[r]=new UT({namespace:o});break;case"cip34":this.rpcProviders[r]=new JT({namespace:o});break;case"elrond":this.rpcProviders[r]=new ZT({namespace:o});break;case"multiversx":this.rpcProviders[r]=new YT({namespace:o});break;case"near":this.rpcProviders[r]=new XT({namespace:o});break;case"tezos":this.rpcProviders[r]=new QT({namespace:o});break;default:this.rpcProviders[uo]?this.rpcProviders[uo].updateNamespace(o):this.rpcProviders[uo]=new eF({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:i}=r;if(i.name==="accountsChanged"){const n=i.data;n&&Yi(n)&&this.events.emit("accountsChanged",n.map(BT))}else if(i.name==="chainChanged"){const n=r.chainId,s=r.event.data,o=da(n),a=mu(n)!==mu(s)?`${o}:${mu(s)}`:n;this.onChainChanged(a)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var i;const{namespaces:n}=r,s=(i=this.client)==null?void 0:i.session.get(e);this.session=yu(bl({},s),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",yu(bl({},vt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(ei.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[uo]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:i,sessionProperties:n}=e;r&&Object.keys(r).length&&(this.namespaces=r),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=n,this.persist("namespaces",r),this.persist("optionalNamespaces",i)}validateChain(e){const[r,i]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,i];if(r&&!Object.keys(this.namespaces||{}).map(o=>da(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&i)return[r,i];const n=da(Object.keys(this.namespaces)[0]),s=this.rpcProviders[n].getDefaultChain();return[n,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){if(!this.namespaces)return;const[i,n]=this.validateChain(e);n&&(r||this.getProvider(i).setDefaultChain(n),this.namespaces[i]?this.namespaces[i].defaultChain=n:this.namespaces[`${i}:${n}`]?this.namespaces[`${i}:${n}`].defaultChain=n:this.namespaces[`${i}:${n}`]={defaultChain:n},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",n))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${xm}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${xm}/${e}`)}}const oF=wu,aF="wc",cF="ethereum_provider",lF=`${aF}@2:${cF}:`,fF="https://rpc.walletconnect.org/v1/",yl=["eth_sendTransaction","personal_sign"],yb=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],wl=["chainChanged","accountsChanged"],wb=["chainChanged","accountsChanged","message","disconnect","connect"];var hF=Object.defineProperty,uF=Object.defineProperties,dF=Object.getOwnPropertyDescriptors,_b=Object.getOwnPropertySymbols,pF=Object.prototype.hasOwnProperty,gF=Object.prototype.propertyIsEnumerable,xb=(t,e,r)=>e in t?hF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yo=(t,e)=>{for(var r in e||(e={}))pF.call(e,r)&&xb(t,r,e[r]);if(_b)for(var r of _b(e))gF.call(e,r)&&xb(t,r,e[r]);return t},_u=(t,e)=>uF(t,dF(e));function _l(t){return Number(t[0].split(":")[1])}function xl(t){return`0x${t.toString(16)}`}function vF(t){const{chains:e,optionalChains:r,methods:i,optionalMethods:n,events:s,optionalEvents:o,rpcMap:a}=t;if(!Yi(e))throw new Error("Invalid chains");const c={chains:e,methods:i||yl,events:s||wl,rpcMap:yo({},e.length?{[_l(e)]:a[_l(e)]}:{})},l=s?.filter(S=>!wl.includes(S)),u=i?.filter(S=>!yl.includes(S));if(!r&&!o&&!n&&!(l!=null&&l.length)&&!(u!=null&&u.length))return{required:e.length?c:void 0};const v=l?.length&&u?.length||!r,x={chains:[...new Set(v?c.chains.concat(r||[]):r)],methods:[...new Set(c.methods.concat(n!=null&&n.length?n:yb))],events:[...new Set(c.events.concat(o!=null&&o.length?o:wb))],rpcMap:a};return{required:e.length?c:void 0,optional:r.length?x:void 0}}class El{constructor(){this.events=new Zt.exports.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=lF,this.on=(e,r)=>(this.events.on(e,r),this),this.once=(e,r)=>(this.events.once(e,r),this),this.removeListener=(e,r)=>(this.events.removeListener(e,r),this),this.off=(e,r)=>(this.events.off(e,r),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const r=new El;return await r.initialize(e),r}async request(e,r){return await this.signer.request(e,this.formatChainId(this.chainId),r)}sendAsync(e,r,i){this.signer.sendAsync(e,r,this.formatChainId(this.chainId),i)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:i}=vF(this.rpc);try{const n=await new Promise(async(o,a)=>{var c;this.rpc.showQrModal&&((c=this.modal)==null||c.subscribeModal(l=>{!l.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),a(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(_u(yo({namespaces:yo({},r&&{[this.namespace]:r})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e?.pairingTopic})).then(l=>{o(l)}).catch(l=>{a(new Error(l.message))})});if(!n)return;const s=P1(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:s),this.setAccounts(s),this.events.emit("connect",{chainId:xl(this.chainId)})}catch(n){throw this.signer.logger.error(n),n}finally{this.modal&&this.modal.closeModal()}}async authenticate(e,r){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e?.chains});try{const i=await new Promise(async(s,o)=>{var a;this.rpc.showQrModal&&((a=this.modal)==null||a.subscribeModal(c=>{!c.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),o(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(_u(yo({},e),{chains:this.rpc.chains}),r).then(c=>{s(c)}).catch(c=>{o(new Error(c.message))})}),n=i.session;if(n){const s=P1(n.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:s),this.setAccounts(s),this.events.emit("connect",{chainId:xl(this.chainId)})}return i}catch(i){throw this.signer.logger.error(i),i}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:r}=e,{event:i}=r;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const r=parseInt(e);this.chainId=r,this.events.emit("chainChanged",xl(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",_u(yo({},vt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var r,i;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(i=this.modal)==null||i.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const r=e.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",xl(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const r=this.parseChainId(e);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(e){const[r,i,n]=e.split(":");return{chainId:`${r}:${i}`,address:n}}setAccounts(e){this.accounts=e.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var r,i;const n=(r=e?.chains)!=null?r:[],s=(i=e?.optionalChains)!=null?i:[],o=n.concat(s);if(!o.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const a=n.length?e?.methods||yl:[],c=n.length?e?.events||wl:[],l=e?.optionalMethods||[],u=e?.optionalEvents||[],v=e?.rpcMap||this.buildRpcMap(o,e.projectId),x=e?.qrModalOptions||void 0;return{chains:n?.map(S=>this.formatChainId(S)),optionalChains:s.map(S=>this.formatChainId(S)),methods:a,events:c,optionalMethods:l,optionalEvents:u,rpcMap:v,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:x,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,r){const i={};return e.forEach(n=>{i[n]=this.getRpcUrl(n,r)}),i}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?_l(this.rpc.chains):_l(this.rpc.optionalChains),this.signer=await oF.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:i}=await Promise.resolve().then(function(){return UF});r=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(yo({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:r,optionalChains:i,rpcMap:n}=e;r&&Yi(r)&&(this.rpc.chains=r.map(s=>this.formatChainId(s)),r.forEach(s=>{this.rpc.rpcMap[s]=n?.[s]||this.getRpcUrl(s)})),i&&Yi(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i?.map(s=>this.formatChainId(s)),i.forEach(s=>{this.rpc.rpcMap[s]=n?.[s]||this.getRpcUrl(s)}))}getRpcUrl(e,r){var i;return((i=this.rpc.rpcMap)==null?void 0:i[e])||`${fF}?chainId=eip155:${e}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:r?.accounts),this.setAccounts(r?.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(r=>this.signer.logger.warn(r))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(r=>this.parseAccount(r))}}const mF=El,bF=Symbol(),Eb=Object.getPrototypeOf,xu=new WeakMap,yF=t=>t&&(xu.has(t)?xu.get(t):Eb(t)===Object.prototype||Eb(t)===Array.prototype),wF=t=>yF(t)&&t[bF]||null,$b=(t,e=!0)=>{xu.set(t,e)},Eu=t=>typeof t=="object"&&t!==null,Nn=new WeakMap,$l=new WeakSet,_F=(t=Object.is,e=(l,u)=>new Proxy(l,u),r=l=>Eu(l)&&!$l.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),i=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},n=new WeakMap,s=(l,u,v=i)=>{const x=n.get(l);if(x?.[0]===u)return x[1];const S=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return $b(S,!0),n.set(l,[u,S]),Reflect.ownKeys(l).forEach(E=>{if(Object.getOwnPropertyDescriptor(S,E))return;const I=Reflect.get(l,E),C={value:I,enumerable:!0,configurable:!0};if($l.has(I))$b(I,!1);else if(I instanceof Promise)delete C.value,C.get=()=>v(I);else if(Nn.has(I)){const[O,R]=Nn.get(I);C.value=s(O,R(),v)}Object.defineProperty(S,E,C)}),Object.preventExtensions(S)},o=new WeakMap,a=[1,1],c=l=>{if(!Eu(l))throw new Error("object required");const u=o.get(l);if(u)return u;let v=a[0];const x=new Set,S=(B,V=++a[0])=>{v!==V&&(v=V,x.forEach(M=>M(B,V)))};let E=a[1];const I=(B=++a[1])=>(E!==B&&!x.size&&(E=B,O.forEach(([V])=>{const M=V[1](B);M>v&&(v=M)})),v),C=B=>(V,M)=>{const m=[...V];m[1]=[B,...m[1]],S(m,M)},O=new Map,R=(B,V)=>{if(O.has(B))throw new Error("prop listener already exists");if(x.size){const M=V[3](C(B));O.set(B,[V,M])}else O.set(B,[V])},N=B=>{var V;const M=O.get(B);M&&(O.delete(B),(V=M[1])==null||V.call(M))},T=B=>(x.add(B),x.size===1&&O.forEach(([M,m],g)=>{if(m)throw new Error("remove already exists");const f=M[3](C(g));O.set(g,[M,f])}),()=>{x.delete(B),x.size===0&&O.forEach(([M,m],g)=>{m&&(m(),O.set(g,[M]))})}),U=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),W=e(U,{deleteProperty(B,V){const M=Reflect.get(B,V);N(V);const m=Reflect.deleteProperty(B,V);return m&&S(["delete",[V],M]),m},set(B,V,M,m){const g=Reflect.has(B,V),f=Reflect.get(B,V,m);if(g&&(t(f,M)||o.has(M)&&t(f,o.get(M))))return!0;N(V),Eu(M)&&(M=wF(M)||M);let h=M;if(M instanceof Promise)M.then(p=>{M.status="fulfilled",M.value=p,S(["resolve",[V],p])}).catch(p=>{M.status="rejected",M.reason=p,S(["reject",[V],p])});else{!Nn.has(M)&&r(M)&&(h=c(M));const p=!$l.has(h)&&Nn.get(h);p&&R(V,p)}return Reflect.set(B,V,h,m),S(["set",[V],M,f]),!0}});o.set(l,W);const K=[U,I,s,T];return Nn.set(W,K),Reflect.ownKeys(l).forEach(B=>{const V=Object.getOwnPropertyDescriptor(l,B);"value"in V&&(W[B]=l[B],delete V.value,delete V.writable),Object.defineProperty(U,B,V)}),W})=>[c,Nn,$l,t,e,r,i,n,s,o,a],[xF]=_F();function Tn(t={}){return xF(t)}function ys(t,e,r){const i=Nn.get(t);i||console.warn("Please use proxy object");let n;const s=[],o=i[3];let a=!1;const l=o(u=>{if(s.push(u),r){e(s.splice(0));return}n||(n=Promise.resolve().then(()=>{n=void 0,a&&e(s.splice(0))}))});return a=!0,()=>{a=!1,l()}}function EF(t,e){const r=Nn.get(t);r||console.warn("Please use proxy object");const[i,n,s]=r;return s(i,n(),e)}const Gt=Tn({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),Et={state:Gt,subscribe(t){return ys(Gt,()=>t(Gt))},push(t,e){t!==Gt.view&&(Gt.view=t,e&&(Gt.data=e),Gt.history.push(t))},reset(t){Gt.view=t,Gt.history=[t]},replace(t){Gt.history.length>1&&(Gt.history[Gt.history.length-1]=t,Gt.view=t)},goBack(){if(Gt.history.length>1){Gt.history.pop();const[t]=Gt.history.slice(-1);Gt.view=t}},setData(t){Gt.data=t}},ne={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return ne.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return ne.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},formatNativeUrl(t,e,r){if(ne.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let i=t;i.includes("://")||(i=t.replaceAll("/","").replaceAll(":",""),i=`${i}://`),i.endsWith("/")||(i=`${i}/`),this.setWalletConnectDeepLink(i,r);const n=encodeURIComponent(e);return`${i}wc?uri=${n}`},formatUniversalUrl(t,e,r){if(!ne.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let i=t;if(i.startsWith("https://t.me")){const s=Buffer.from(e).toString("base64").replace(/[=]/g,"");i.endsWith("/")&&(i=i.slice(0,-1)),this.setWalletConnectDeepLink(i,r);const o=new URL(i);return o.searchParams.set("startapp",s),o.toString()}i.endsWith("/")||(i=`${i}/`),this.setWalletConnectDeepLink(i,r);const n=encodeURIComponent(e);return`${i}wc?uri=${n}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){const r=this.isTelegram()?"_blank":e;window.open(t,r,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(ne.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(ne.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(ne.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(ne.WCM_VERSION,"2.7.0")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=Et.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},$F=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),cr=Tn({enabled:$F,userSessionId:"",events:[],connectedWalletId:void 0}),Sb={state:cr,subscribe(t){return ys(cr.events,()=>t(EF(cr.events[cr.events.length-1])))},initialize(){cr.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(cr.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){cr.connectedWalletId=t},click(t){if(cr.enabled){const e={type:"CLICK",name:t.name,userSessionId:cr.userSessionId,timestamp:Date.now(),data:t};cr.events.push(e)}},track(t){if(cr.enabled){const e={type:"TRACK",name:t.name,userSessionId:cr.userSessionId,timestamp:Date.now(),data:t};cr.events.push(e)}},view(t){if(cr.enabled){const e={type:"VIEW",name:t.name,userSessionId:cr.userSessionId,timestamp:Date.now(),data:t};cr.events.push(e)}}},Fi=Tn({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),Nt={state:Fi,subscribe(t){return ys(Fi,()=>t(Fi))},setChains(t){Fi.chains=t},setWalletConnectUri(t){Fi.walletConnectUri=t},setIsCustomDesktop(t){Fi.isCustomDesktop=t},setIsCustomMobile(t){Fi.isCustomMobile=t},setIsDataLoaded(t){Fi.isDataLoaded=t},setIsUiLoaded(t){Fi.isUiLoaded=t},setIsAuth(t){Fi.isAuth=t}},Sl=Tn({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Ur={state:Sl,subscribe(t){return ys(Sl,()=>t(Sl))},setConfig(t){var e,r;Sb.initialize(),Nt.setChains(t.chains),Nt.setIsAuth(!!t.enableAuthMode),Nt.setIsCustomMobile(!!((e=t.mobileWallets)!=null&&e.length)),Nt.setIsCustomDesktop(!!((r=t.desktopWallets)!=null&&r.length)),ne.setModalVersionInStorage(),Object.assign(Sl,t)}};var SF=Object.defineProperty,Ab=Object.getOwnPropertySymbols,AF=Object.prototype.hasOwnProperty,IF=Object.prototype.propertyIsEnumerable,Ib=(t,e,r)=>e in t?SF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,MF=(t,e)=>{for(var r in e||(e={}))AF.call(e,r)&&Ib(t,r,e[r]);if(Ab)for(var r of Ab(e))IF.call(e,r)&&Ib(t,r,e[r]);return t};const $u="https://explorer-api.walletconnect.com",Su="wcm",Au="js-2.7.0";async function Al(t,e){const r=MF({sdkType:Su,sdkVersion:Au},e),i=new URL(t,$u);return i.searchParams.append("projectId",Ur.state.projectId),Object.entries(r).forEach(([s,o])=>{o&&i.searchParams.append(s,String(o))}),(await fetch(i)).json()}const ws={async getDesktopListings(t){return Al("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return Al("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return Al("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return Al("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${$u}/w3m/v1/getWalletImage/${t}?projectId=${Ur.state.projectId}&sdkType=${Su}&sdkVersion=${Au}`},getAssetImageUrl(t){return`${$u}/w3m/v1/getAssetImage/${t}?projectId=${Ur.state.projectId}&sdkType=${Su}&sdkVersion=${Au}`}};var PF=Object.defineProperty,Mb=Object.getOwnPropertySymbols,OF=Object.prototype.hasOwnProperty,CF=Object.prototype.propertyIsEnumerable,Pb=(t,e,r)=>e in t?PF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,DF=(t,e)=>{for(var r in e||(e={}))OF.call(e,r)&&Pb(t,r,e[r]);if(Mb)for(var r of Mb(e))CF.call(e,r)&&Pb(t,r,e[r]);return t};const Ob=ne.isMobile(),Li=Tn({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),Sr={state:Li,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=Ur.state;if(t==="NONE"||e==="ALL"&&!t)return Li.recomendedWallets;if(ne.isArray(t)){const i={recommendedIds:t.join(",")},{listings:n}=await ws.getAllListings(i),s=Object.values(n);s.sort((o,a)=>{const c=t.indexOf(o.id),l=t.indexOf(a.id);return c-l}),Li.recomendedWallets=s}else{const{chains:r,isAuth:i}=Nt.state,n=r?.join(","),s=ne.isArray(e),o={page:1,sdks:i?"auth_v1":void 0,entries:ne.RECOMMENDED_WALLET_AMOUNT,chains:n,version:2,excludedIds:s?e.join(","):void 0},{listings:a}=Ob?await ws.getMobileListings(o):await ws.getDesktopListings(o);Li.recomendedWallets=Object.values(a)}return Li.recomendedWallets},async getWallets(t){const e=DF({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:i}=Ur.state,{recomendedWallets:n}=Li;if(i==="ALL")return Li.wallets;n.length?e.excludedIds=n.map(v=>v.id).join(","):ne.isArray(r)&&(e.excludedIds=r.join(",")),ne.isArray(i)&&(e.excludedIds=[e.excludedIds,i].filter(Boolean).join(",")),Nt.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=t,{listings:a,total:c}=Ob?await ws.getMobileListings(e):await ws.getDesktopListings(e),l=Object.values(a),u=o?"search":"wallets";return Li[u]={listings:[...Li[u].listings,...l],total:c,page:s??1},{listings:l,total:c}},getWalletImageUrl(t){return ws.getWalletImageUrl(t)},getAssetImageUrl(t){return ws.getAssetImageUrl(t)},resetSearch(){Li.search={listings:[],total:0,page:1}}},wo=Tn({open:!1}),_s={state:wo,subscribe(t){return ys(wo,()=>t(wo))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:i}=Nt.state;if(ne.removeWalletConnectDeepLink(),Nt.setWalletConnectUri(t?.uri),Nt.setChains(t?.chains),Et.reset("ConnectWallet"),r&&i)wo.open=!0,e();else{const n=setInterval(()=>{const s=Nt.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(n),wo.open=!0,e())},200)}})},close(){wo.open=!1}};var RF=Object.defineProperty,Cb=Object.getOwnPropertySymbols,NF=Object.prototype.hasOwnProperty,TF=Object.prototype.propertyIsEnumerable,Db=(t,e,r)=>e in t?RF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,FF=(t,e)=>{for(var r in e||(e={}))NF.call(e,r)&&Db(t,r,e[r]);if(Cb)for(var r of Cb(e))TF.call(e,r)&&Db(t,r,e[r]);return t};function LF(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const Oa=Tn({themeMode:LF()?"dark":"light"}),Fn={state:Oa,subscribe(t){return ys(Oa,()=>t(Oa))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(Oa.themeMode=e),r&&(Oa.themeVariables=FF({},r))}},xs=Tn({open:!1,message:"",variant:"success"}),Ln={state:xs,subscribe(t){return ys(xs,()=>t(xs))},openToast(t,e){xs.open=!0,xs.message=t,xs.variant=e},closeToast(){xs.open=!1}};class BF{constructor(e){this.openModal=_s.open,this.closeModal=_s.close,this.subscribeModal=_s.subscribe,this.setTheme=Fn.setThemeConfig,Fn.setThemeConfig(e),Ur.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Promise.resolve().then(function(){return Gq});const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),Nt.setIsUiLoaded(!0)}}}var UF=Object.freeze({__proto__:null,WalletConnectModal:BF});/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Il=window,Iu=Il.ShadowRoot&&(Il.ShadyCSS===void 0||Il.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Mu=Symbol(),Rb=new WeakMap;class Nb{constructor(e,r,i){if(this._$cssResult$=!0,i!==Mu)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(Iu&&e===void 0){const i=r!==void 0&&r.length===1;i&&(e=Rb.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&Rb.set(r,e))}return e}toString(){return this.cssText}}const qF=t=>new Nb(typeof t=="string"?t:t+"",void 0,Mu),Qe=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((i,n,s)=>i+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[s+1],t[0]);return new Nb(r,t,Mu)},jF=(t,e)=>{Iu?t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet):e.forEach(r=>{const i=document.createElement("style"),n=Il.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=r.cssText,t.appendChild(i)})},Tb=Iu?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const i of e.cssRules)r+=i.cssText;return qF(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Pu;const Ml=window,Fb=Ml.trustedTypes,kF=Fb?Fb.emptyScript:"",Lb=Ml.reactiveElementPolyfillSupport,Ou={toAttribute(t,e){switch(e){case Boolean:t=t?kF:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Bb=(t,e)=>e!==t&&(e==e||t==t),Cu={attribute:!0,type:String,converter:Ou,reflect:!1,hasChanged:Bb},Du="finalized";class _o extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var r;this.finalize(),((r=this.h)!==null&&r!==void 0?r:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((r,i)=>{const n=this._$Ep(i,r);n!==void 0&&(this._$Ev.set(n,i),e.push(n))}),e}static createProperty(e,r=Cu){if(r.state&&(r.attribute=!1),this.finalize(),this.elementProperties.set(e,r),!r.noAccessor&&!this.prototype.hasOwnProperty(e)){const i=typeof e=="symbol"?Symbol():"__"+e,n=this.getPropertyDescriptor(e,i,r);n!==void 0&&Object.defineProperty(this.prototype,e,n)}}static getPropertyDescriptor(e,r,i){return{get(){return this[r]},set(n){const s=this[e];this[r]=n,this.requestUpdate(e,s,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Cu}static finalize(){if(this.hasOwnProperty(Du))return!1;this[Du]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const r=this.properties,i=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(const n of i)this.createProperty(n,r[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const n of i)r.unshift(Tb(n))}else e!==void 0&&r.push(Tb(e));return r}static _$Ep(e,r){const i=r.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(r=>r(this))}addController(e){var r,i;((r=this._$ES)!==null&&r!==void 0?r:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((i=e.hostConnected)===null||i===void 0||i.call(e))}removeController(e){var r;(r=this._$ES)===null||r===void 0||r.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,r)=>{this.hasOwnProperty(r)&&(this._$Ei.set(r,this[r]),delete this[r])})}createRenderRoot(){var e;const r=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return jF(r,this.constructor.elementStyles),r}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(r=>{var i;return(i=r.hostConnected)===null||i===void 0?void 0:i.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(r=>{var i;return(i=r.hostDisconnected)===null||i===void 0?void 0:i.call(r)})}attributeChangedCallback(e,r,i){this._$AK(e,i)}_$EO(e,r,i=Cu){var n;const s=this.constructor._$Ep(e,i);if(s!==void 0&&i.reflect===!0){const o=(((n=i.converter)===null||n===void 0?void 0:n.toAttribute)!==void 0?i.converter:Ou).toAttribute(r,i.type);this._$El=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$El=null}}_$AK(e,r){var i;const n=this.constructor,s=n._$Ev.get(e);if(s!==void 0&&this._$El!==s){const o=n.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((i=o.converter)===null||i===void 0?void 0:i.fromAttribute)!==void 0?o.converter:Ou;this._$El=s,this[s]=a.fromAttribute(r,o.type),this._$El=null}}requestUpdate(e,r,i){let n=!0;e!==void 0&&(((i=i||this.constructor.getPropertyOptions(e)).hasChanged||Bb)(this[e],r)?(this._$AL.has(e)||this._$AL.set(e,r),i.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,i))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((n,s)=>this[s]=n),this._$Ei=void 0);let r=!1;const i=this._$AL;try{r=this.shouldUpdate(i),r?(this.willUpdate(i),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var s;return(s=n.hostUpdate)===null||s===void 0?void 0:s.call(n)}),this.update(i)):this._$Ek()}catch(n){throw r=!1,this._$Ek(),n}r&&this._$AE(i)}willUpdate(e){}_$AE(e){var r;(r=this._$ES)===null||r===void 0||r.forEach(i=>{var n;return(n=i.hostUpdated)===null||n===void 0?void 0:n.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((r,i)=>this._$EO(i,this[i],r)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}_o[Du]=!0,_o.elementProperties=new Map,_o.elementStyles=[],_o.shadowRootOptions={mode:"open"},Lb?.({ReactiveElement:_o}),((Pu=Ml.reactiveElementVersions)!==null&&Pu!==void 0?Pu:Ml.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ru;const Pl=window,xo=Pl.trustedTypes,Ub=xo?xo.createPolicy("lit-html",{createHTML:t=>t}):void 0,Nu="$lit$",Bn=`lit$${(Math.random()+"").slice(9)}$`,qb="?"+Bn,zF=`<${qb}>`,Es=document,Ca=()=>Es.createComment(""),Da=t=>t===null||typeof t!="object"&&typeof t!="function",jb=Array.isArray,HF=t=>jb(t)||typeof t?.[Symbol.iterator]=="function",Tu=`[ 	
\f\r]`,Ra=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,kb=/-->/g,zb=/>/g,$s=RegExp(`>|${Tu}(?:([^\\s"'>=/]+)(${Tu}*=${Tu}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Hb=/'/g,Wb=/"/g,Kb=/^(?:script|style|textarea|title)$/i,Vb=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),ee=Vb(1),Mt=Vb(2),Ss=Symbol.for("lit-noChange"),Ut=Symbol.for("lit-nothing"),Gb=new WeakMap,As=Es.createTreeWalker(Es,129,null,!1);function Jb(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Ub!==void 0?Ub.createHTML(e):e}const WF=(t,e)=>{const r=t.length-1,i=[];let n,s=e===2?"<svg>":"",o=Ra;for(let a=0;a<r;a++){const c=t[a];let l,u,v=-1,x=0;for(;x<c.length&&(o.lastIndex=x,u=o.exec(c),u!==null);)x=o.lastIndex,o===Ra?u[1]==="!--"?o=kb:u[1]!==void 0?o=zb:u[2]!==void 0?(Kb.test(u[2])&&(n=RegExp("</"+u[2],"g")),o=$s):u[3]!==void 0&&(o=$s):o===$s?u[0]===">"?(o=n??Ra,v=-1):u[1]===void 0?v=-2:(v=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?$s:u[3]==='"'?Wb:Hb):o===Wb||o===Hb?o=$s:o===kb||o===zb?o=Ra:(o=$s,n=void 0);const S=o===$s&&t[a+1].startsWith("/>")?" ":"";s+=o===Ra?c+zF:v>=0?(i.push(l),c.slice(0,v)+Nu+c.slice(v)+Bn+S):c+Bn+(v===-2?(i.push(void 0),a):S)}return[Jb(t,s+(t[r]||"<?>")+(e===2?"</svg>":"")),i]};class Na{constructor({strings:e,_$litType$:r},i){let n;this.parts=[];let s=0,o=0;const a=e.length-1,c=this.parts,[l,u]=WF(e,r);if(this.el=Na.createElement(l,i),As.currentNode=this.el.content,r===2){const v=this.el.content,x=v.firstChild;x.remove(),v.append(...x.childNodes)}for(;(n=As.nextNode())!==null&&c.length<a;){if(n.nodeType===1){if(n.hasAttributes()){const v=[];for(const x of n.getAttributeNames())if(x.endsWith(Nu)||x.startsWith(Bn)){const S=u[o++];if(v.push(x),S!==void 0){const E=n.getAttribute(S.toLowerCase()+Nu).split(Bn),I=/([.?@])?(.*)/.exec(S);c.push({type:1,index:s,name:I[2],strings:E,ctor:I[1]==="."?VF:I[1]==="?"?JF:I[1]==="@"?ZF:Ol})}else c.push({type:6,index:s})}for(const x of v)n.removeAttribute(x)}if(Kb.test(n.tagName)){const v=n.textContent.split(Bn),x=v.length-1;if(x>0){n.textContent=xo?xo.emptyScript:"";for(let S=0;S<x;S++)n.append(v[S],Ca()),As.nextNode(),c.push({type:2,index:++s});n.append(v[x],Ca())}}}else if(n.nodeType===8)if(n.data===qb)c.push({type:2,index:s});else{let v=-1;for(;(v=n.data.indexOf(Bn,v+1))!==-1;)c.push({type:7,index:s}),v+=Bn.length-1}s++}}static createElement(e,r){const i=Es.createElement("template");return i.innerHTML=e,i}}function Eo(t,e,r=t,i){var n,s,o,a;if(e===Ss)return e;let c=i!==void 0?(n=r._$Co)===null||n===void 0?void 0:n[i]:r._$Cl;const l=Da(e)?void 0:e._$litDirective$;return c?.constructor!==l&&((s=c?._$AO)===null||s===void 0||s.call(c,!1),l===void 0?c=void 0:(c=new l(t),c._$AT(t,r,i)),i!==void 0?((o=(a=r)._$Co)!==null&&o!==void 0?o:a._$Co=[])[i]=c:r._$Cl=c),c!==void 0&&(e=Eo(t,c._$AS(t,e.values),c,i)),e}class KF{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:i},parts:n}=this._$AD,s=((r=e?.creationScope)!==null&&r!==void 0?r:Es).importNode(i,!0);As.currentNode=s;let o=As.nextNode(),a=0,c=0,l=n[0];for(;l!==void 0;){if(a===l.index){let u;l.type===2?u=new Ta(o,o.nextSibling,this,e):l.type===1?u=new l.ctor(o,l.name,l.strings,this,e):l.type===6&&(u=new YF(o,this,e)),this._$AV.push(u),l=n[++c]}a!==l?.index&&(o=As.nextNode(),a++)}return As.currentNode=Es,s}v(e){let r=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,r),r+=i.strings.length-2):i._$AI(e[r])),r++}}class Ta{constructor(e,r,i,n){var s;this.type=2,this._$AH=Ut,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=i,this.options=n,this._$Cp=(s=n?.isConnected)===null||s===void 0||s}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&e?.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Eo(this,e,r),Da(e)?e===Ut||e==null||e===""?(this._$AH!==Ut&&this._$AR(),this._$AH=Ut):e!==this._$AH&&e!==Ss&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):HF(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==Ut&&Da(this._$AH)?this._$AA.nextSibling.data=e:this.$(Es.createTextNode(e)),this._$AH=e}g(e){var r;const{values:i,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=Na.createElement(Jb(n.h,n.h[0]),this.options)),n);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===s)this._$AH.v(i);else{const o=new KF(s,this),a=o.u(this.options);o.v(i),this.$(a),this._$AH=o}}_$AC(e){let r=Gb.get(e.strings);return r===void 0&&Gb.set(e.strings,r=new Na(e)),r}T(e){jb(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let i,n=0;for(const s of e)n===r.length?r.push(i=new Ta(this.k(Ca()),this.k(Ca()),this,this.options)):i=r[n],i._$AI(s),n++;n<r.length&&(this._$AR(i&&i._$AB.nextSibling,n),r.length=n)}_$AR(e=this._$AA.nextSibling,r){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,r);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class Ol{constructor(e,r,i,n,s){this.type=1,this._$AH=Ut,this._$AN=void 0,this.element=e,this.name=r,this._$AM=n,this.options=s,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Ut}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,i,n){const s=this.strings;let o=!1;if(s===void 0)e=Eo(this,e,r,0),o=!Da(e)||e!==this._$AH&&e!==Ss,o&&(this._$AH=e);else{const a=e;let c,l;for(e=s[0],c=0;c<s.length-1;c++)l=Eo(this,a[i+c],r,c),l===Ss&&(l=this._$AH[c]),o||(o=!Da(l)||l!==this._$AH[c]),l===Ut?e=Ut:e!==Ut&&(e+=(l??"")+s[c+1]),this._$AH[c]=l}o&&!n&&this.j(e)}j(e){e===Ut?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class VF extends Ol{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Ut?void 0:e}}const GF=xo?xo.emptyScript:"";class JF extends Ol{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Ut?this.element.setAttribute(this.name,GF):this.element.removeAttribute(this.name)}}class ZF extends Ol{constructor(e,r,i,n,s){super(e,r,i,n,s),this.type=5}_$AI(e,r=this){var i;if((e=(i=Eo(this,e,r,0))!==null&&i!==void 0?i:Ut)===Ss)return;const n=this._$AH,s=e===Ut&&n!==Ut||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,o=e!==Ut&&(n===Ut||s);s&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,i;typeof this._$AH=="function"?this._$AH.call((i=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}}class YF{constructor(e,r,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Eo(this,e)}}const Zb=Pl.litHtmlPolyfillSupport;Zb?.(Na,Ta),((Ru=Pl.litHtmlVersions)!==null&&Ru!==void 0?Ru:Pl.litHtmlVersions=[]).push("2.8.0");const XF=(t,e,r)=>{var i,n;const s=(i=r?.renderBefore)!==null&&i!==void 0?i:e;let o=s._$litPart$;if(o===void 0){const a=(n=r?.renderBefore)!==null&&n!==void 0?n:null;s._$litPart$=o=new Ta(e.insertBefore(Ca(),a),a,void 0,r??{})}return o._$AI(t),o};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Fu,Lu;class Me extends _o{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,r;const i=super.createRenderRoot();return(e=(r=this.renderOptions).renderBefore)!==null&&e!==void 0||(r.renderBefore=i.firstChild),i}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=XF(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return Ss}}Me.finalized=!0,Me._$litElement$=!0,(Fu=globalThis.litElementHydrateSupport)===null||Fu===void 0||Fu.call(globalThis,{LitElement:Me});const Yb=globalThis.litElementPolyfillSupport;Yb?.({LitElement:Me}),((Lu=globalThis.litElementVersions)!==null&&Lu!==void 0?Lu:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ne=t=>e=>typeof e=="function"?((r,i)=>(customElements.define(r,i),i))(t,e):((r,i)=>{const{kind:n,elements:s}=i;return{kind:n,elements:s,finisher(o){customElements.define(r,o)}}})(t,e);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const QF=(t,e)=>e.kind==="method"&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){typeof e.initializer=="function"&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}},eL=(t,e,r)=>{e.constructor.createProperty(r,t)};function Ee(t){return(e,r)=>r!==void 0?eL(t,e,r):QF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Ar(t){return Ee({...t,state:!0})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Bu;((Bu=window.HTMLSlotElement)===null||Bu===void 0?void 0:Bu.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const tL={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},rL=t=>(...e)=>({_$litDirective$:t,values:e});class iL{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,i){this._$Ct=e,this._$AM=r,this._$Ci=i}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const rn=rL(class extends iL{constructor(t){var e;if(super(t),t.type!==tL.ATTRIBUTE||t.name!=="class"||((e=t.strings)===null||e===void 0?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){var r,i;if(this.it===void 0){this.it=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(s=>s!=="")));for(const s in e)e[s]&&!(!((r=this.nt)===null||r===void 0)&&r.has(s))&&this.it.add(s);return this.render(e)}const n=t.element.classList;this.it.forEach(s=>{s in e||(n.remove(s),this.it.delete(s))});for(const s in e){const o=!!e[s];o===this.it.has(s)||!((i=this.nt)===null||i===void 0)&&i.has(s)||(o?(n.add(s),this.it.add(s)):(n.remove(s),this.it.delete(s)))}return Ss}});function nL(t,e){t.indexOf(e)===-1&&t.push(e)}const Xb=(t,e,r)=>Math.min(Math.max(r,t),e),ti={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},Cl=t=>typeof t=="number",$o=t=>Array.isArray(t)&&!Cl(t[0]),sL=(t,e,r)=>{const i=e-t;return((r-t)%i+i)%i+t};function oL(t,e){return $o(t)?t[sL(0,t.length,e)]:t}const Qb=(t,e,r)=>-r*t+r*e+t,e2=()=>{},Un=t=>t,Uu=(t,e,r)=>e-t===0?1:(r-t)/(e-t);function t2(t,e){const r=t[t.length-1];for(let i=1;i<=e;i++){const n=Uu(0,e,i);t.push(Qb(r,1,n))}}function aL(t){const e=[0];return t2(e,t-1),e}function cL(t,e=aL(t.length),r=Un){const i=t.length,n=i-e.length;return n>0&&t2(e,n),s=>{let o=0;for(;o<i-2&&!(s<e[o+1]);o++);let a=Xb(0,1,Uu(e[o],e[o+1],s));return a=oL(r,o)(a),Qb(t[o],t[o+1],a)}}const r2=t=>Array.isArray(t)&&Cl(t[0]),qu=t=>typeof t=="object"&&!!t.createAnimation,Is=t=>typeof t=="function",lL=t=>typeof t=="string",Fa={ms:t=>t*1e3,s:t=>t/1e3},i2=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,fL=1e-7,hL=12;function uL(t,e,r,i,n){let s,o,a=0;do o=e+(r-e)/2,s=i2(o,i,n)-t,s>0?r=o:e=o;while(Math.abs(s)>fL&&++a<hL);return o}function La(t,e,r,i){if(t===e&&r===i)return Un;const n=s=>uL(s,0,1,t,r);return s=>s===0||s===1?s:i2(n(s),e,i)}const dL=(t,e="end")=>r=>{r=e==="end"?Math.min(r,.999):Math.max(r,.001);const i=r*t,n=e==="end"?Math.floor(i):Math.ceil(i);return Xb(0,1,n/t)},pL={ease:La(.25,.1,.25,1),"ease-in":La(.42,0,1,1),"ease-in-out":La(.42,0,.58,1),"ease-out":La(0,0,.58,1)},gL=/\((.*?)\)/;function n2(t){if(Is(t))return t;if(r2(t))return La(...t);const e=pL[t];if(e)return e;if(t.startsWith("steps")){const r=gL.exec(t);if(r){const i=r[1].split(",");return dL(parseFloat(i[0]),i[1].trim())}}return Un}class s2{constructor(e,r=[0,1],{easing:i,duration:n=ti.duration,delay:s=ti.delay,endDelay:o=ti.endDelay,repeat:a=ti.repeat,offset:c,direction:l="normal",autoplay:u=!0}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=Un,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((x,S)=>{this.resolve=x,this.reject=S}),i=i||ti.easing,qu(i)){const x=i.createAnimation(r);i=x.easing,r=x.keyframes||r,n=x.duration||n}this.repeat=a,this.easing=$o(i)?Un:n2(i),this.updateDuration(n);const v=cL(r,c,$o(i)?i.map(n2):Un);this.tick=x=>{var S;s=s;let E=0;this.pauseTime!==void 0?E=this.pauseTime:E=(x-this.startTime)*this.rate,this.t=E,E/=1e3,E=Math.max(E-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(E=this.totalDuration);const I=E/this.duration;let C=Math.floor(I),O=I%1;!O&&I>=1&&(O=1),O===1&&C--;const R=C%2;(l==="reverse"||l==="alternate"&&R||l==="alternate-reverse"&&!R)&&(O=1-O);const N=E>=this.totalDuration?1:Math.min(O,1),T=v(this.easing(N));e(T),this.pauseTime===void 0&&(this.playState==="finished"||E>=this.totalDuration+o)?(this.playState="finished",(S=this.resolve)===null||S===void 0||S.call(this,T)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},u&&this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}var ju=function(){};process.env.NODE_ENV!=="production"&&(ju=function(t,e){if(!t)throw new Error(e)});class vL{setAnimation(e){this.animation=e,e?.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const ku=new WeakMap;function o2(t){return ku.has(t)||ku.set(t,{transforms:[],values:new Map}),ku.get(t)}function mL(t,e){return t.has(e)||t.set(e,new vL),t.get(e)}const bL=["","X","Y","Z"],yL=["translate","scale","rotate","skew"],Dl={x:"translateX",y:"translateY",z:"translateZ"},a2={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},wL={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:a2,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:Un},skew:a2},Ba=new Map,zu=t=>`--motion-${t}`,Rl=["x","y","z"];yL.forEach(t=>{bL.forEach(e=>{Rl.push(t+e),Ba.set(zu(t+e),wL[t])})});const _L=(t,e)=>Rl.indexOf(t)-Rl.indexOf(e),xL=new Set(Rl),c2=t=>xL.has(t),EL=(t,e)=>{Dl[e]&&(e=Dl[e]);const{transforms:r}=o2(t);nL(r,e),t.style.transform=$L(r)},$L=t=>t.sort(_L).reduce(SL,"").trim(),SL=(t,e)=>`${t} ${e}(var(${zu(e)}))`,Hu=t=>t.startsWith("--"),l2=new Set;function AL(t){if(!l2.has(t)){l2.add(t);try{const{syntax:e,initialValue:r}=Ba.has(t)?Ba.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:r})}catch{}}}const Wu=(t,e)=>document.createElement("div").animate(t,e),f2={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{Wu({opacity:[1]})}catch{return!1}return!0},finished:()=>!!Wu({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{Wu({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},Ku={},So={};for(const t in f2)So[t]=()=>(Ku[t]===void 0&&(Ku[t]=f2[t]()),Ku[t]);const IL=.015,ML=(t,e)=>{let r="";const i=Math.round(e/IL);for(let n=0;n<i;n++)r+=t(Uu(0,i-1,n))+", ";return r.substring(0,r.length-2)},h2=(t,e)=>Is(t)?So.linearEasing()?`linear(${ML(t,e)})`:ti.easing:r2(t)?PL(t):t,PL=([t,e,r,i])=>`cubic-bezier(${t}, ${e}, ${r}, ${i})`;function OL(t,e){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r?t[r-1]:e());return t}const CL=t=>Array.isArray(t)?t:[t];function Vu(t){return Dl[t]&&(t=Dl[t]),c2(t)?zu(t):t}const Nl={get:(t,e)=>{e=Vu(e);let r=Hu(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!r&&r!==0){const i=Ba.get(e);i&&(r=i.initialValue)}return r},set:(t,e,r)=>{e=Vu(e),Hu(e)?t.style.setProperty(e,r):t.style[e]=r}};function u2(t,e=!0){if(!(!t||t.playState==="finished"))try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch{}}function DL(t,e){var r;let i=e?.toDefaultUnit||Un;const n=t[t.length-1];if(lL(n)){const s=((r=n.match(/(-?[\d.]+)([a-z%]*)/))===null||r===void 0?void 0:r[2])||"";s&&(i=o=>o+s)}return i}function RL(){return window.__MOTION_DEV_TOOLS_RECORD}function NL(t,e,r,i={},n){const s=RL(),o=i.record!==!1&&s;let a,{duration:c=ti.duration,delay:l=ti.delay,endDelay:u=ti.endDelay,repeat:v=ti.repeat,easing:x=ti.easing,persist:S=!1,direction:E,offset:I,allowWebkitAcceleration:C=!1,autoplay:O=!0}=i;const R=o2(t),N=c2(e);let T=So.waapi();N&&EL(t,e);const U=Vu(e),z=mL(R.values,U),W=Ba.get(U);return u2(z.animation,!(qu(x)&&z.generator)&&i.record!==!1),()=>{const K=()=>{var M,m;return(m=(M=Nl.get(t,U))!==null&&M!==void 0?M:W?.initialValue)!==null&&m!==void 0?m:0};let B=OL(CL(r),K);const V=DL(B,W);if(qu(x)){const M=x.createAnimation(B,e!=="opacity",K,U,z);x=M.easing,B=M.keyframes||B,c=M.duration||c}if(Hu(U)&&(So.cssRegisterProperty()?AL(U):T=!1),N&&!So.linearEasing()&&(Is(x)||$o(x)&&x.some(Is))&&(T=!1),T){W&&(B=B.map(g=>Cl(g)?W.toDefaultUnit(g):g)),B.length===1&&(!So.partialKeyframes()||o)&&B.unshift(K());const M={delay:Fa.ms(l),duration:Fa.ms(c),endDelay:Fa.ms(u),easing:$o(x)?void 0:h2(x,c),direction:E,iterations:v+1,fill:"both"};a=t.animate({[U]:B,offset:I,easing:$o(x)?x.map(g=>h2(g,c)):void 0},M),a.finished||(a.finished=new Promise((g,f)=>{a.onfinish=g,a.oncancel=f}));const m=B[B.length-1];a.finished.then(()=>{S||(Nl.set(t,U,m),a.cancel())}).catch(e2),C||(a.playbackRate=1.000001)}else if(n&&N)B=B.map(M=>typeof M=="string"?parseFloat(M):M),B.length===1&&B.unshift(parseFloat(K())),a=new n(M=>{Nl.set(t,U,V?V(M):M)},B,Object.assign(Object.assign({},i),{duration:c,easing:x}));else{const M=B[B.length-1];Nl.set(t,U,W&&Cl(M)?W.toDefaultUnit(M):M)}return o&&s(t,e,B,{duration:c,delay:l,easing:x,repeat:v,offset:I},"motion-one"),z.setAnimation(a),a&&!O&&a.pause(),a}}const TL=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);function d2(t,e){var r;return typeof t=="string"?e?((r=e[t])!==null&&r!==void 0||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}const FL=t=>t(),p2=(t,e,r=ti.duration)=>new Proxy({animations:t.map(FL).filter(Boolean),duration:r,options:e},BL),LL=t=>t.animations[0],BL={get:(t,e)=>{const r=LL(t);switch(e){case"duration":return t.duration;case"currentTime":return Fa.s(r?.[e]||0);case"playbackRate":case"playState":return r?.[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(UL)).catch(e2)),t.finished;case"stop":return()=>{t.animations.forEach(i=>u2(i))};case"forEachNative":return i=>{t.animations.forEach(n=>i(n,t))};default:return typeof r?.[e]>"u"?void 0:()=>t.animations.forEach(i=>i[e]())}},set:(t,e,r)=>{switch(e){case"currentTime":r=Fa.ms(r);case"playbackRate":for(let i=0;i<t.animations.length;i++)t.animations[i][e]=r;return!0}return!1}},UL=t=>t.finished;function qL(t,e,r){return Is(t)?t(e,r):t}function jL(t){return function(r,i,n={}){r=d2(r);const s=r.length;ju(!!s,"No valid element provided."),ju(!!i,"No keyframes defined.");const o=[];for(let a=0;a<s;a++){const c=r[a];for(const l in i){const u=TL(n,l);u.delay=qL(u.delay,a,s);const v=NL(c,l,i[l],u,t);o.push(v)}}return p2(o,n,n.duration)}}const kL=jL(s2);function zL(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}typeof SuppressedError=="function"&&SuppressedError;const HL={any:0,all:1};function WL(t,e,{root:r,margin:i,amount:n="any"}={}){if(typeof IntersectionObserver>"u")return()=>{};const s=d2(t),o=new WeakMap,a=l=>{l.forEach(u=>{const v=o.get(u.target);if(u.isIntersecting!==!!v)if(u.isIntersecting){const x=e(u);Is(x)?o.set(u.target,x):c.unobserve(u.target)}else v&&(v(u),o.delete(u.target))})},c=new IntersectionObserver(a,{root:r,rootMargin:i,threshold:typeof n=="number"?n:HL[n]});return s.forEach(l=>c.observe(l)),()=>c.disconnect()}function Gu(t,e,r){t.dispatchEvent(new CustomEvent(e,{detail:{originalEvent:r}}))}function g2(t,e,r){t.dispatchEvent(new CustomEvent(e,{detail:{originalEntry:r}}))}const KL={isActive:t=>!!t.inView,subscribe:(t,{enable:e,disable:r},{inViewOptions:i={}})=>{const{once:n}=i,s=zL(i,["once"]);return WL(t,o=>{if(e(),g2(t,"viewenter",o),!n)return a=>{r(),g2(t,"viewleave",a)}},s)}},v2=(t,e,r)=>i=>{i.pointerType&&i.pointerType!=="mouse"||(r(),Gu(t,e,i))};[...Object.keys({inView:KL,hover:{isActive:t=>!!t.hover,subscribe:(t,{enable:e,disable:r})=>{const i=v2(t,"hoverstart",e),n=v2(t,"hoverend",r);return t.addEventListener("pointerenter",i),t.addEventListener("pointerleave",n),()=>{t.removeEventListener("pointerenter",i),t.removeEventListener("pointerleave",n)}}},press:{isActive:t=>!!t.press,subscribe:(t,{enable:e,disable:r})=>{const i=s=>{r(),Gu(t,"pressend",s),window.removeEventListener("pointerup",i)},n=s=>{e(),Gu(t,"pressstart",s),window.addEventListener("pointerup",i)};return t.addEventListener("pointerdown",n),()=>{t.removeEventListener("pointerdown",n),window.removeEventListener("pointerup",i)}}}})];function VL(t,e={}){return p2([()=>{const r=new s2(t,[0,1],e);return r.finished.catch(()=>{}),r}],e,e.duration)}function Ms(t,e,r){return(Is(t)?VL:kL)(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const mr=t=>t??Ut;var Ua={},GL=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},m2={},qr={};let Ju;const JL=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];qr.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17},qr.getSymbolTotalCodewords=function(e){return JL[e]},qr.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e},qr.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Ju=e},qr.isKanjiModeEnabled=function(){return typeof Ju<"u"},qr.toSJIS=function(e){return Ju(e)};var Tl={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,n){if(t.isValid(i))return i;try{return e(i)}catch{return n}}})(Tl);function b2(){this.buffer=[],this.length=0}b2.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var ZL=b2;function qa(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}qa.prototype.set=function(t,e,r,i){const n=t*this.size+e;this.data[n]=r,i&&(this.reservedBit[n]=!0)},qa.prototype.get=function(t,e){return this.data[t*this.size+e]},qa.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},qa.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var YL=qa,y2={};(function(t){const e=qr.getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const n=Math.floor(i/7)+2,s=e(i),o=s===145?26:Math.ceil((s-13)/(2*n-2))*2,a=[s-7];for(let c=1;c<n-1;c++)a[c]=a[c-1]-o;return a.push(6),a.reverse()},t.getPositions=function(i){const n=[],s=t.getRowColCoords(i),o=s.length;for(let a=0;a<o;a++)for(let c=0;c<o;c++)a===0&&c===0||a===0&&c===o-1||a===o-1&&c===0||n.push([s[a],s[c]]);return n}})(y2);var w2={};const XL=qr.getSymbolSize,_2=7;w2.getPositions=function(e){const r=XL(e);return[[0,0],[r-_2,0],[0,r-_2]]};var x2={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},t.from=function(n){return t.isValid(n)?parseInt(n,10):void 0},t.getPenaltyN1=function(n){const s=n.size;let o=0,a=0,c=0,l=null,u=null;for(let v=0;v<s;v++){a=c=0,l=u=null;for(let x=0;x<s;x++){let S=n.get(v,x);S===l?a++:(a>=5&&(o+=e.N1+(a-5)),l=S,a=1),S=n.get(x,v),S===u?c++:(c>=5&&(o+=e.N1+(c-5)),u=S,c=1)}a>=5&&(o+=e.N1+(a-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(n){const s=n.size;let o=0;for(let a=0;a<s-1;a++)for(let c=0;c<s-1;c++){const l=n.get(a,c)+n.get(a,c+1)+n.get(a+1,c)+n.get(a+1,c+1);(l===4||l===0)&&o++}return o*e.N2},t.getPenaltyN3=function(n){const s=n.size;let o=0,a=0,c=0;for(let l=0;l<s;l++){a=c=0;for(let u=0;u<s;u++)a=a<<1&2047|n.get(l,u),u>=10&&(a===1488||a===93)&&o++,c=c<<1&2047|n.get(u,l),u>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(n){let s=0;const o=n.data.length;for(let c=0;c<o;c++)s+=n.data[c];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(i,n,s){switch(i){case t.Patterns.PATTERN000:return(n+s)%2===0;case t.Patterns.PATTERN001:return n%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(n+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return n*s%2+n*s%3===0;case t.Patterns.PATTERN110:return(n*s%2+n*s%3)%2===0;case t.Patterns.PATTERN111:return(n*s%3+(n+s)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(n,s){const o=s.size;for(let a=0;a<o;a++)for(let c=0;c<o;c++)s.isReserved(c,a)||s.xor(c,a,r(n,c,a))},t.getBestMask=function(n,s){const o=Object.keys(t.Patterns).length;let a=0,c=1/0;for(let l=0;l<o;l++){s(l),t.applyMask(l,n);const u=t.getPenaltyN1(n)+t.getPenaltyN2(n)+t.getPenaltyN3(n)+t.getPenaltyN4(n);t.applyMask(l,n),u<c&&(c=u,a=l)}return a}})(x2);var Fl={};const qn=Tl,Ll=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Bl=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Fl.getBlocksCount=function(e,r){switch(r){case qn.L:return Ll[(e-1)*4+0];case qn.M:return Ll[(e-1)*4+1];case qn.Q:return Ll[(e-1)*4+2];case qn.H:return Ll[(e-1)*4+3];default:return}},Fl.getTotalCodewordsCount=function(e,r){switch(r){case qn.L:return Bl[(e-1)*4+0];case qn.M:return Bl[(e-1)*4+1];case qn.Q:return Bl[(e-1)*4+2];case qn.H:return Bl[(e-1)*4+3];default:return}};var E2={},Ul={};const ja=new Uint8Array(512),ql=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)ja[r]=e,ql[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)ja[r]=ja[r-255]})(),Ul.log=function(e){if(e<1)throw new Error("log("+e+")");return ql[e]},Ul.exp=function(e){return ja[e]},Ul.mul=function(e,r){return e===0||r===0?0:ja[ql[e]+ql[r]]},function(t){const e=Ul;t.mul=function(i,n){const s=new Uint8Array(i.length+n.length-1);for(let o=0;o<i.length;o++)for(let a=0;a<n.length;a++)s[o+a]^=e.mul(i[o],n[a]);return s},t.mod=function(i,n){let s=new Uint8Array(i);for(;s.length-n.length>=0;){const o=s[0];for(let c=0;c<n.length;c++)s[c]^=e.mul(n[c],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(i){let n=new Uint8Array([1]);for(let s=0;s<i;s++)n=t.mul(n,new Uint8Array([1,e.exp(s)]));return n}}(E2);const $2=E2;function Zu(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Zu.prototype.initialize=function(e){this.degree=e,this.genPoly=$2.generateECPolynomial(this.degree)},Zu.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const i=$2.mod(r,this.genPoly),n=this.degree-i.length;if(n>0){const s=new Uint8Array(this.degree);return s.set(i,n),s}return i};var QL=Zu,S2={},jn={},Yu={};Yu.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Bi={};const A2="[0-9]+",eB="[A-Z $%*+\\-./:]+";let ka="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ka=ka.replace(/u/g,"\\u");const tB="(?:(?![A-Z0-9 $%*+\\-./:]|"+ka+`)(?:.|[\r
]))+`;Bi.KANJI=new RegExp(ka,"g"),Bi.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Bi.BYTE=new RegExp(tB,"g"),Bi.NUMERIC=new RegExp(A2,"g"),Bi.ALPHANUMERIC=new RegExp(eB,"g");const rB=new RegExp("^"+ka+"$"),iB=new RegExp("^"+A2+"$"),nB=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Bi.testKanji=function(e){return rB.test(e)},Bi.testNumeric=function(e){return iB.test(e)},Bi.testAlphanumeric=function(e){return nB.test(e)},function(t){const e=Yu,r=Bi;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function i(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+n)}}t.from=function(s,o){if(t.isValid(s))return s;try{return i(s)}catch{return o}}}(jn),function(t){const e=qr,r=Fl,i=Tl,n=jn,s=Yu,o=7973,a=e.getBCHDigit(o);function c(x,S,E){for(let I=1;I<=40;I++)if(S<=t.getCapacity(I,E,x))return I}function l(x,S){return n.getCharCountIndicator(x,S)+4}function u(x,S){let E=0;return x.forEach(function(I){const C=l(I.mode,S);E+=C+I.getBitsLength()}),E}function v(x,S){for(let E=1;E<=40;E++)if(u(x,E)<=t.getCapacity(E,S,n.MIXED))return E}t.from=function(S,E){return s.isValid(S)?parseInt(S,10):E},t.getCapacity=function(S,E,I){if(!s.isValid(S))throw new Error("Invalid QR Code version");typeof I>"u"&&(I=n.BYTE);const C=e.getSymbolTotalCodewords(S),O=r.getTotalCodewordsCount(S,E),R=(C-O)*8;if(I===n.MIXED)return R;const N=R-l(I,S);switch(I){case n.NUMERIC:return Math.floor(N/10*3);case n.ALPHANUMERIC:return Math.floor(N/11*2);case n.KANJI:return Math.floor(N/13);case n.BYTE:default:return Math.floor(N/8)}},t.getBestVersionForData=function(S,E){let I;const C=i.from(E,i.M);if(Array.isArray(S)){if(S.length>1)return v(S,C);if(S.length===0)return 1;I=S[0]}else I=S;return c(I.mode,I.getLength(),C)},t.getEncodedBits=function(S){if(!s.isValid(S)||S<7)throw new Error("Invalid QR Code version");let E=S<<12;for(;e.getBCHDigit(E)-a>=0;)E^=o<<e.getBCHDigit(E)-a;return S<<12|E}}(S2);var I2={};const Xu=qr,M2=1335,sB=21522,P2=Xu.getBCHDigit(M2);I2.getEncodedBits=function(e,r){const i=e.bit<<3|r;let n=i<<10;for(;Xu.getBCHDigit(n)-P2>=0;)n^=M2<<Xu.getBCHDigit(n)-P2;return(i<<10|n)^sB};var O2={};const oB=jn;function Ao(t){this.mode=oB.NUMERIC,this.data=t.toString()}Ao.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},Ao.prototype.getLength=function(){return this.data.length},Ao.prototype.getBitsLength=function(){return Ao.getBitsLength(this.data.length)},Ao.prototype.write=function(e){let r,i,n;for(r=0;r+3<=this.data.length;r+=3)i=this.data.substr(r,3),n=parseInt(i,10),e.put(n,10);const s=this.data.length-r;s>0&&(i=this.data.substr(r),n=parseInt(i,10),e.put(n,s*3+1))};var aB=Ao;const cB=jn,Qu=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Io(t){this.mode=cB.ALPHANUMERIC,this.data=t}Io.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},Io.prototype.getLength=function(){return this.data.length},Io.prototype.getBitsLength=function(){return Io.getBitsLength(this.data.length)},Io.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let i=Qu.indexOf(this.data[r])*45;i+=Qu.indexOf(this.data[r+1]),e.put(i,11)}this.data.length%2&&e.put(Qu.indexOf(this.data[r]),6)};var lB=Io,fB=function(e){for(var r=[],i=e.length,n=0;n<i;n++){var s=e.charCodeAt(n);if(s>=55296&&s<=56319&&i>n+1){var o=e.charCodeAt(n+1);o>=56320&&o<=57343&&(s=(s-55296)*1024+o-56320+65536,n+=1)}if(s<128){r.push(s);continue}if(s<2048){r.push(s>>6|192),r.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128);continue}if(s>=65536&&s<=1114111){r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(s&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const hB=fB,uB=jn;function Mo(t){this.mode=uB.BYTE,typeof t=="string"&&(t=hB(t)),this.data=new Uint8Array(t)}Mo.getBitsLength=function(e){return e*8},Mo.prototype.getLength=function(){return this.data.length},Mo.prototype.getBitsLength=function(){return Mo.getBitsLength(this.data.length)},Mo.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var dB=Mo;const pB=jn,gB=qr;function Po(t){this.mode=pB.KANJI,this.data=t}Po.getBitsLength=function(e){return e*13},Po.prototype.getLength=function(){return this.data.length},Po.prototype.getBitsLength=function(){return Po.getBitsLength(this.data.length)},Po.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let r=gB.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var vB=Po,C2={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,i,n){var s={},o={};o[i]=0;var a=e.PriorityQueue.make();a.push(i,0);for(var c,l,u,v,x,S,E,I,C;!a.empty();){c=a.pop(),l=c.value,v=c.cost,x=r[l]||{};for(u in x)x.hasOwnProperty(u)&&(S=x[u],E=v+S,I=o[u],C=typeof o[u]>"u",(C||I>E)&&(o[u]=E,a.push(u,E),s[u]=l))}if(typeof n<"u"&&typeof o[n]>"u"){var O=["Could not find a path from ",i," to ",n,"."].join("");throw new Error(O)}return s},extract_shortest_path_from_predecessor_list:function(r,i){for(var n=[],s=i;s;)n.push(s),r[s],s=r[s];return n.reverse(),n},find_path:function(r,i,n){var s=e.single_source_shortest_paths(r,i,n);return e.extract_shortest_path_from_predecessor_list(s,n)},PriorityQueue:{make:function(r){var i=e.PriorityQueue,n={},s;r=r||{};for(s in i)i.hasOwnProperty(s)&&(n[s]=i[s]);return n.queue=[],n.sorter=r.sorter||i.default_sorter,n},default_sorter:function(r,i){return r.cost-i.cost},push:function(r,i){var n={value:r,cost:i};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(C2),function(t){const e=jn,r=aB,i=lB,n=dB,s=vB,o=Bi,a=qr,c=C2.exports;function l(O){return unescape(encodeURIComponent(O)).length}function u(O,R,N){const T=[];let U;for(;(U=O.exec(N))!==null;)T.push({data:U[0],index:U.index,mode:R,length:U[0].length});return T}function v(O){const R=u(o.NUMERIC,e.NUMERIC,O),N=u(o.ALPHANUMERIC,e.ALPHANUMERIC,O);let T,U;return a.isKanjiModeEnabled()?(T=u(o.BYTE,e.BYTE,O),U=u(o.KANJI,e.KANJI,O)):(T=u(o.BYTE_KANJI,e.BYTE,O),U=[]),R.concat(N,T,U).sort(function(W,K){return W.index-K.index}).map(function(W){return{data:W.data,mode:W.mode,length:W.length}})}function x(O,R){switch(R){case e.NUMERIC:return r.getBitsLength(O);case e.ALPHANUMERIC:return i.getBitsLength(O);case e.KANJI:return s.getBitsLength(O);case e.BYTE:return n.getBitsLength(O)}}function S(O){return O.reduce(function(R,N){const T=R.length-1>=0?R[R.length-1]:null;return T&&T.mode===N.mode?(R[R.length-1].data+=N.data,R):(R.push(N),R)},[])}function E(O){const R=[];for(let N=0;N<O.length;N++){const T=O[N];switch(T.mode){case e.NUMERIC:R.push([T,{data:T.data,mode:e.ALPHANUMERIC,length:T.length},{data:T.data,mode:e.BYTE,length:T.length}]);break;case e.ALPHANUMERIC:R.push([T,{data:T.data,mode:e.BYTE,length:T.length}]);break;case e.KANJI:R.push([T,{data:T.data,mode:e.BYTE,length:l(T.data)}]);break;case e.BYTE:R.push([{data:T.data,mode:e.BYTE,length:l(T.data)}])}}return R}function I(O,R){const N={},T={start:{}};let U=["start"];for(let z=0;z<O.length;z++){const W=O[z],K=[];for(let B=0;B<W.length;B++){const V=W[B],M=""+z+B;K.push(M),N[M]={node:V,lastCount:0},T[M]={};for(let m=0;m<U.length;m++){const g=U[m];N[g]&&N[g].node.mode===V.mode?(T[g][M]=x(N[g].lastCount+V.length,V.mode)-x(N[g].lastCount,V.mode),N[g].lastCount+=V.length):(N[g]&&(N[g].lastCount=V.length),T[g][M]=x(V.length,V.mode)+4+e.getCharCountIndicator(V.mode,R))}}U=K}for(let z=0;z<U.length;z++)T[U[z]].end=0;return{map:T,table:N}}function C(O,R){let N;const T=e.getBestModeForData(O);if(N=e.from(R,T),N!==e.BYTE&&N.bit<T.bit)throw new Error('"'+O+'" cannot be encoded with mode '+e.toString(N)+`.
 Suggested mode is: `+e.toString(T));switch(N===e.KANJI&&!a.isKanjiModeEnabled()&&(N=e.BYTE),N){case e.NUMERIC:return new r(O);case e.ALPHANUMERIC:return new i(O);case e.KANJI:return new s(O);case e.BYTE:return new n(O)}}t.fromArray=function(R){return R.reduce(function(N,T){return typeof T=="string"?N.push(C(T,null)):T.data&&N.push(C(T.data,T.mode)),N},[])},t.fromString=function(R,N){const T=v(R,a.isKanjiModeEnabled()),U=E(T),z=I(U,N),W=c.find_path(z.map,"start","end"),K=[];for(let B=1;B<W.length-1;B++)K.push(z.table[W[B]].node);return t.fromArray(S(K))},t.rawSplit=function(R){return t.fromArray(v(R,a.isKanjiModeEnabled()))}}(O2);const jl=qr,ed=Tl,mB=ZL,bB=YL,yB=y2,wB=w2,td=x2,rd=Fl,_B=QL,kl=S2,xB=I2,EB=jn,id=O2;function $B(t,e){const r=t.size,i=wB.getPositions(e);for(let n=0;n<i.length;n++){const s=i[n][0],o=i[n][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||r<=s+a))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(a>=0&&a<=6&&(c===0||c===6)||c>=0&&c<=6&&(a===0||a===6)||a>=2&&a<=4&&c>=2&&c<=4?t.set(s+a,o+c,!0,!0):t.set(s+a,o+c,!1,!0))}}function SB(t){const e=t.size;for(let r=8;r<e-8;r++){const i=r%2===0;t.set(r,6,i,!0),t.set(6,r,i,!0)}}function AB(t,e){const r=yB.getPositions(e);for(let i=0;i<r.length;i++){const n=r[i][0],s=r[i][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(n+o,s+a,!0,!0):t.set(n+o,s+a,!1,!0)}}function IB(t,e){const r=t.size,i=kl.getEncodedBits(e);let n,s,o;for(let a=0;a<18;a++)n=Math.floor(a/3),s=a%3+r-8-3,o=(i>>a&1)===1,t.set(n,s,o,!0),t.set(s,n,o,!0)}function nd(t,e,r){const i=t.size,n=xB.getEncodedBits(e,r);let s,o;for(s=0;s<15;s++)o=(n>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(i-15+s,8,o,!0),s<8?t.set(8,i-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(i-8,8,1,!0)}function MB(t,e){const r=t.size;let i=-1,n=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(a===6&&a--;;){for(let c=0;c<2;c++)if(!t.isReserved(n,a-c)){let l=!1;o<e.length&&(l=(e[o]>>>s&1)===1),t.set(n,a-c,l),s--,s===-1&&(o++,s=7)}if(n+=i,n<0||r<=n){n-=i,i=-i;break}}}function PB(t,e,r){const i=new mB;r.forEach(function(c){i.put(c.mode.bit,4),i.put(c.getLength(),EB.getCharCountIndicator(c.mode,t)),c.write(i)});const n=jl.getSymbolTotalCodewords(t),s=rd.getTotalCodewordsCount(t,e),o=(n-s)*8;for(i.getLengthInBits()+4<=o&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const a=(o-i.getLengthInBits())/8;for(let c=0;c<a;c++)i.put(c%2?17:236,8);return OB(i,t,e)}function OB(t,e,r){const i=jl.getSymbolTotalCodewords(e),n=rd.getTotalCodewordsCount(e,r),s=i-n,o=rd.getBlocksCount(e,r),a=i%o,c=o-a,l=Math.floor(i/o),u=Math.floor(s/o),v=u+1,x=l-u,S=new _B(x);let E=0;const I=new Array(o),C=new Array(o);let O=0;const R=new Uint8Array(t.buffer);for(let W=0;W<o;W++){const K=W<c?u:v;I[W]=R.slice(E,E+K),C[W]=S.encode(I[W]),E+=K,O=Math.max(O,K)}const N=new Uint8Array(i);let T=0,U,z;for(U=0;U<O;U++)for(z=0;z<o;z++)U<I[z].length&&(N[T++]=I[z][U]);for(U=0;U<x;U++)for(z=0;z<o;z++)N[T++]=C[z][U];return N}function CB(t,e,r,i){let n;if(Array.isArray(t))n=id.fromArray(t);else if(typeof t=="string"){let l=e;if(!l){const u=id.rawSplit(t);l=kl.getBestVersionForData(u,r)}n=id.fromString(t,l||40)}else throw new Error("Invalid data");const s=kl.getBestVersionForData(n,r);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=PB(e,r,n),a=jl.getSymbolSize(e),c=new bB(a);return $B(c,e),SB(c),AB(c,e),nd(c,r,0),e>=7&&IB(c,e),MB(c,o),isNaN(i)&&(i=td.getBestMask(c,nd.bind(null,c,r))),td.applyMask(i,c),nd(c,r,i),{modules:c,version:e,errorCorrectionLevel:r,maskPattern:i,segments:n}}m2.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");let i=ed.M,n,s;return typeof r<"u"&&(i=ed.from(r.errorCorrectionLevel,ed.M),n=kl.from(r.version),s=td.from(r.maskPattern),r.toSJISFunc&&jl.setToSJISFunction(r.toSJISFunc)),CB(e,n,i,s)};var D2={},sd={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let i=r.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+r);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(s){return[s,s]}))),i.length===6&&i.push("F","F");const n=parseInt(i.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const n=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,s=i.width&&i.width>=21?i.width:void 0,o=i.scale||4;return{width:s,scale:s?4:o,margin:n,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,n){return n.width&&n.width>=i+n.margin*2?n.width/(i+n.margin*2):n.scale},t.getImageWidth=function(i,n){const s=t.getScale(i,n);return Math.floor((i+n.margin*2)*s)},t.qrToImageData=function(i,n,s){const o=n.modules.size,a=n.modules.data,c=t.getScale(o,s),l=Math.floor((o+s.margin*2)*c),u=s.margin*c,v=[s.color.light,s.color.dark];for(let x=0;x<l;x++)for(let S=0;S<l;S++){let E=(x*l+S)*4,I=s.color.light;if(x>=u&&S>=u&&x<l-u&&S<l-u){const C=Math.floor((x-u)/c),O=Math.floor((S-u)/c);I=v[a[C*o+O]?1:0]}i[E++]=I.r,i[E++]=I.g,i[E++]=I.b,i[E]=I.a}}})(sd),function(t){const e=sd;function r(n,s,o){n.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let c=a,l=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(l=i()),c=e.getOptions(c);const u=e.getImageWidth(s.modules.size,c),v=l.getContext("2d"),x=v.createImageData(u,u);return e.qrToImageData(x.data,s,c),r(v,l,u),v.putImageData(x,0,0),l},t.renderToDataURL=function(s,o,a){let c=a;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const l=t.render(s,o,c),u=c.type||"image/png",v=c.rendererOpts||{};return l.toDataURL(u,v.quality)}}(D2);var R2={};const DB=sd;function N2(t,e){const r=t.a/255,i=e+'="'+t.hex+'"';return r<1?i+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':i}function od(t,e,r){let i=t+e;return typeof r<"u"&&(i+=" "+r),i}function RB(t,e,r){let i="",n=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);!c&&!s&&(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(i+=s?od("M",c+r,.5+l+r):od("m",n,0),n=0,s=!1),c+1<e&&t[a+1]||(i+=od("h",o),o=0)):n++}return i}R2.render=function(e,r,i){const n=DB.getOptions(r),s=e.modules.size,o=e.modules.data,a=s+n.margin*2,c=n.color.light.a?"<path "+N2(n.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",l="<path "+N2(n.color.dark,"stroke")+' d="'+RB(o,s,n.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',x='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+l+`</svg>
`;return typeof i=="function"&&i(null,x),x};const NB=GL,ad=m2,T2=D2,TB=R2;function cd(t,e,r,i,n){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!NB())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(n=r,r=e,e=i=void 0):o===3&&(e.getContext&&typeof n>"u"?(n=i,i=void 0):(n=i,i=r,r=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=e,e=i=void 0):o===2&&!e.getContext&&(i=r,r=e,e=void 0),new Promise(function(c,l){try{const u=ad.create(r,i);c(t(u,e,i))}catch(u){l(u)}})}try{const c=ad.create(r,i);n(null,t(c,e,i))}catch(c){n(c)}}Ua.create=ad.create,Ua.toCanvas=cd.bind(null,T2.render),Ua.toDataURL=cd.bind(null,T2.renderToDataURL),Ua.toString=cd.bind(null,function(t,e,r){return TB.render(t,r)});var FB=Object.defineProperty,F2=Object.getOwnPropertySymbols,LB=Object.prototype.hasOwnProperty,BB=Object.prototype.propertyIsEnumerable,L2=(t,e,r)=>e in t?FB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ld=(t,e)=>{for(var r in e||(e={}))LB.call(e,r)&&L2(t,r,e[r]);if(F2)for(var r of F2(e))BB.call(e,r)&&L2(t,r,e[r]);return t};function UB(){var t;const e=(t=Fn.state.themeMode)!=null?t:"dark",i={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":i.foreground[1],"--wcm-color-fg-2":i.foreground[2],"--wcm-color-fg-3":i.foreground[3],"--wcm-color-bg-1":i.background[1],"--wcm-color-bg-2":i.background[2],"--wcm-color-bg-3":i.background[3],"--wcm-color-overlay":i.overlay}}function B2(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const Re={getPreset(t){return B2()[t]},setTheme(){const t=document.querySelector(":root"),{themeVariables:e}=Fn.state;if(t){const r=ld(ld(ld({},UB()),B2()),e);Object.entries(r).forEach(([i,n])=>t.style.setProperty(i,n))}},globalCss:Qe`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},qB=Qe`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var jB=Object.defineProperty,kB=Object.getOwnPropertyDescriptor,Oo=(t,e,r,i)=>{for(var n=i>1?void 0:i?kB(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&jB(e,r,n),n};let kn=class extends Me{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const t={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),ee`<button class="${rn(t)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};kn.styles=[Re.globalCss,qB],Oo([Ee({type:Boolean})],kn.prototype,"disabled",2),Oo([Ee()],kn.prototype,"iconLeft",2),Oo([Ee()],kn.prototype,"iconRight",2),Oo([Ee()],kn.prototype,"onClick",2),Oo([Ee()],kn.prototype,"variant",2),kn=Oo([Ne("wcm-button")],kn);const zB=Qe`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var HB=Object.defineProperty,WB=Object.getOwnPropertyDescriptor,fd=(t,e,r,i)=>{for(var n=i>1?void 0:i?WB(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&HB(e,r,n),n};let za=class extends Me{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const t={"wcm-secondary":this.variant==="secondary"};return ee`<button ?disabled="${this.disabled}" class="${rn(t)}"><slot></slot></button>`}};za.styles=[Re.globalCss,zB],fd([Ee({type:Boolean})],za.prototype,"disabled",2),fd([Ee()],za.prototype,"variant",2),za=fd([Ne("wcm-button-big")],za);const KB=Qe`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var VB=Object.defineProperty,GB=Object.getOwnPropertyDescriptor,JB=(t,e,r,i)=>{for(var n=i>1?void 0:i?GB(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&VB(e,r,n),n};let hd=class extends Me{render(){return ee`<div><slot></slot></div>`}};hd.styles=[Re.globalCss,KB],hd=JB([Ne("wcm-info-footer")],hd);const ot={CROSS_ICON:Mt`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:Mt`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:Mt`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:Mt`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:Mt`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:Mt`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:Mt`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:Mt`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:Mt`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:Mt`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:Mt`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:Mt`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:Mt`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:Mt`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:Mt`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:Mt`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:Mt`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:Mt`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},ZB=Qe`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var YB=Object.defineProperty,XB=Object.getOwnPropertyDescriptor,QB=(t,e,r,i)=>{for(var n=i>1?void 0:i?XB(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&YB(e,r,n),n};let ud=class extends Me{render(){return ee`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${ot.WALLET_CONNECT_LOGO} <button @click="${_s.close}">${ot.CROSS_ICON}</button></div>`}};ud.styles=[Re.globalCss,ZB],ud=QB([Ne("wcm-modal-backcard")],ud);const eU=Qe`main{padding:20px;padding-top:0;width:100%}`;var tU=Object.defineProperty,rU=Object.getOwnPropertyDescriptor,iU=(t,e,r,i)=>{for(var n=i>1?void 0:i?rU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&tU(e,r,n),n};let dd=class extends Me{render(){return ee`<main><slot></slot></main>`}};dd.styles=[Re.globalCss,eU],dd=iU([Ne("wcm-modal-content")],dd);const nU=Qe`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var sU=Object.defineProperty,oU=Object.getOwnPropertyDescriptor,aU=(t,e,r,i)=>{for(var n=i>1?void 0:i?oU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&sU(e,r,n),n};let pd=class extends Me{render(){return ee`<footer><slot></slot></footer>`}};pd.styles=[Re.globalCss,nU],pd=aU([Ne("wcm-modal-footer")],pd);const cU=Qe`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var lU=Object.defineProperty,fU=Object.getOwnPropertyDescriptor,Ha=(t,e,r,i)=>{for(var n=i>1?void 0:i?fU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&lU(e,r,n),n};let Ps=class extends Me{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return ee`<button class="wcm-back-btn" @click="${Et.goBack}">${ot.BACK_ICON}</button>`}actionBtnTemplate(){return ee`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const t={"wcm-border":this.border},e=Et.state.history.length>1,r=this.title?ee`<wcm-text variant="big-bold">${this.title}</wcm-text>`:ee`<slot></slot>`;return ee`<header class="${rn(t)}">${e?this.backBtnTemplate():null} ${r} ${this.onAction?this.actionBtnTemplate():null}</header>`}};Ps.styles=[Re.globalCss,cU],Ha([Ee()],Ps.prototype,"title",2),Ha([Ee()],Ps.prototype,"onAction",2),Ha([Ee()],Ps.prototype,"actionIcon",2),Ha([Ee({type:Boolean})],Ps.prototype,"border",2),Ps=Ha([Ne("wcm-modal-header")],Ps);const _e={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(t,e){const r=t.renderRoot.querySelector(e);if(!r)throw new Error(`${e} not found`);return r},getWalletIcon({id:t,image_id:e}){const{walletImages:r}=Ur.state;return r?.[t]?r[t]:e?Sr.getWalletImageUrl(e):""},getWalletName(t,e=!1){return e&&t.length>8?`${t.substring(0,8)}..`:t},isMobileAnimation(){return window.innerWidth<=_e.MOBILE_BREAKPOINT},async preloadImage(t){const e=new Promise((r,i)=>{const n=new Image;n.onload=r,n.onerror=i,n.crossOrigin="anonymous",n.src=t});return Promise.race([e,ne.wait(3e3)])},getErrorMessage(t){return t instanceof Error?t.message:"Unknown Error"},debounce(t,e=500){let r;return(...i)=>{function n(){t(...i)}r&&clearTimeout(r),r=setTimeout(n,e)}},handleMobileLinking(t,e="_self"){const{walletConnectUri:r}=Nt.state,{mobile:i,name:n}=t,s=i?.native,o=i?.universal;_e.setRecentWallet(t);function a(c){if(s){const l=ne.formatNativeUrl(s,c,n);ne.openHref(l,e)}else if(o){const l=ne.formatUniversalUrl(o,c,n);ne.openHref(l,e)}}r&&a(r)},handleAndroidLinking(){const{walletConnectUri:t}=Nt.state;t&&(ne.setWalletConnectAndroidDeepLink(t),ne.openHref(t,ne.isTelegram()?"_blank":"_self"))},async handleUriCopy(){const{walletConnectUri:t}=Nt.state;if(t)try{await navigator.clipboard.writeText(t),Ln.openToast("Link copied","success")}catch{Ln.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:t}=Ur.state,e=Object.values(t??{});return Object.values(e)},truncate(t,e=8){return t.length<=e?t:`${t.substring(0,4)}...${t.substring(t.length-4)}`},setRecentWallet(t){try{localStorage.setItem(_e.WCM_RECENT_WALLET_DATA,JSON.stringify(t))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const t=localStorage.getItem(_e.WCM_RECENT_WALLET_DATA);return t?JSON.parse(t):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(t,e){return t.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){ne.openHref(_e.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:t,mobile:e}=ne.getWalletRouterData(),r=!!t?.native,i=!!t?.universal,n=!!e?.native||!!e?.universal;return{isDesktop:r,isMobile:n,isWeb:i}},goToConnectingView(t){Et.setData({Wallet:t});const e=ne.isMobile(),{isDesktop:r,isWeb:i,isMobile:n}=_e.getCachedRouterWalletPlatforms();e?n?(Et.push("MobileConnecting"),!ne.isAndroid()&&ne.isTelegram()&&this.handleMobileLinking(t,"_blank")):i?Et.push("WebConnecting"):Et.push("InstallWallet"):r?Et.push("DesktopConnecting"):i?Et.push("WebConnecting"):n?Et.push("MobileQrcodeConnecting"):Et.push("InstallWallet")}},hU=Qe`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var uU=Object.defineProperty,dU=Object.getOwnPropertyDescriptor,gd=(t,e,r,i)=>{for(var n=i>1?void 0:i?dU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&uU(e,r,n),n};let Wa=class extends Me{constructor(){super(),this.view=Et.state.view,this.prevView=Et.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=Et.subscribe(t=>{this.view!==t.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([t])=>{const e=`${t.contentRect.height}px`;this.oldHeight!=="0px"&&Ms(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var t,e;(t=this.unsubscribe)==null||t.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return _e.getShadowRootElement(this,".wcm-router")}get contentEl(){return _e.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return ee`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return ee`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return ee`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return ee`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return ee`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return ee`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return ee`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return ee`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return ee`<div>Not Found</div>`}}async onChangeRoute(){await Ms(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=Et.state.view,Ms(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return ee`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};Wa.styles=[Re.globalCss,hU],gd([Ar()],Wa.prototype,"view",2),gd([Ar()],Wa.prototype,"prevView",2),Wa=gd([Ne("wcm-modal-router")],Wa);const pU=Qe`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var gU=Object.defineProperty,vU=Object.getOwnPropertyDescriptor,U2=(t,e,r,i)=>{for(var n=i>1?void 0:i?vU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&gU(e,r,n),n};let zl=class extends Me{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=Ln.subscribe(t=>{t.open?(this.open=!0,this.timeout=setTimeout(()=>Ln.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var t;(t=this.unsubscribe)==null||t.call(this),clearTimeout(this.timeout),Ln.closeToast()}render(){const{message:t,variant:e}=Ln.state,r={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?ee`<div class="${rn(r)}">${e==="success"?ot.CHECKMARK_ICON:null} ${e==="error"?ot.CROSS_ICON:null}<wcm-text variant="small-regular">${t}</wcm-text></div>`:null}};zl.styles=[Re.globalCss,pU],U2([Ar()],zl.prototype,"open",2),zl=U2([Ne("wcm-modal-toast")],zl);const mU=.1,q2=2.5,nn=7;function vd(t,e,r){return t===e?!1:(t-e<0?e-t:t-e)<=r+mU}function bU(t,e){const r=Array.prototype.slice.call(Ua.create(t,{errorCorrectionLevel:e}).modules.data,0),i=Math.sqrt(r.length);return r.reduce((n,s,o)=>(o%i===0?n.push([s]):n[n.length-1].push(s))&&n,[])}const yU={generate(t,e,r){const i="#141414",n="#ffffff",s=[],o=bU(t,"Q"),a=e/o.length,c=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];c.forEach(({x:E,y:I})=>{const C=(o.length-nn)*a*E,O=(o.length-nn)*a*I,R=.45;for(let N=0;N<c.length;N+=1){const T=a*(nn-N*2);s.push(Mt`<rect fill="${N%2===0?i:n}" height="${T}" rx="${T*R}" ry="${T*R}" width="${T}" x="${C+a*N}" y="${O+a*N}">`)}});const l=Math.floor((r+25)/a),u=o.length/2-l/2,v=o.length/2+l/2-1,x=[];o.forEach((E,I)=>{E.forEach((C,O)=>{if(o[I][O]&&!(I<nn&&O<nn||I>o.length-(nn+1)&&O<nn||I<nn&&O>o.length-(nn+1))&&!(I>u&&I<v&&O>u&&O<v)){const R=I*a+a/2,N=O*a+a/2;x.push([R,N])}})});const S={};return x.forEach(([E,I])=>{S[E]?S[E].push(I):S[E]=[I]}),Object.entries(S).map(([E,I])=>{const C=I.filter(O=>I.every(R=>!vd(O,R,a)));return[Number(E),C]}).forEach(([E,I])=>{I.forEach(C=>{s.push(Mt`<circle cx="${E}" cy="${C}" fill="${i}" r="${a/q2}">`)})}),Object.entries(S).filter(([E,I])=>I.length>1).map(([E,I])=>{const C=I.filter(O=>I.some(R=>vd(O,R,a)));return[Number(E),C]}).map(([E,I])=>{I.sort((O,R)=>O<R?-1:1);const C=[];for(const O of I){const R=C.find(N=>N.some(T=>vd(O,T,a)));R?R.push(O):C.push([O])}return[E,C.map(O=>[O[0],O[O.length-1]])]}).forEach(([E,I])=>{I.forEach(([C,O])=>{s.push(Mt`<line x1="${E}" x2="${E}" y1="${C}" y2="${O}" stroke="${i}" stroke-width="${a/(q2/2)}" stroke-linecap="round">`)})}),s}},wU=Qe`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var _U=Object.defineProperty,xU=Object.getOwnPropertyDescriptor,Co=(t,e,r,i)=>{for(var n=i>1?void 0:i?xU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&_U(e,r,n),n};let sn=class extends Me{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const e=Fn.state.themeMode==="light"?this.size:this.size-18*2;return Mt`<svg height="${e}" width="${e}">${yU.generate(this.uri,e,e/4)}</svg>`}render(){const t={"wcm-dark":Fn.state.themeMode==="dark"};return ee`<div style="${`width: ${this.size}px`}" class="${rn(t)}">${this.walletId||this.imageUrl?ee`<wcm-wallet-image walletId="${mr(this.walletId)}" imageId="${mr(this.imageId)}" imageUrl="${mr(this.imageUrl)}"></wcm-wallet-image>`:ot.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};sn.styles=[Re.globalCss,wU],Co([Ee()],sn.prototype,"uri",2),Co([Ee({type:Number})],sn.prototype,"size",2),Co([Ee()],sn.prototype,"imageId",2),Co([Ee()],sn.prototype,"walletId",2),Co([Ee()],sn.prototype,"imageUrl",2),sn=Co([Ne("wcm-qrcode")],sn);const EU=Qe`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var $U=Object.defineProperty,SU=Object.getOwnPropertyDescriptor,j2=(t,e,r,i)=>{for(var n=i>1?void 0:i?SU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&$U(e,r,n),n};let Hl=class extends Me{constructor(){super(...arguments),this.onChange=()=>null}render(){return ee`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${ot.SEARCH_ICON}`}};Hl.styles=[Re.globalCss,EU],j2([Ee()],Hl.prototype,"onChange",2),Hl=j2([Ne("wcm-search-input")],Hl);const AU=Qe`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var IU=Object.defineProperty,MU=Object.getOwnPropertyDescriptor,PU=(t,e,r,i)=>{for(var n=i>1?void 0:i?MU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&IU(e,r,n),n};let md=class extends Me{render(){return ee`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};md.styles=[Re.globalCss,AU],md=PU([Ne("wcm-spinner")],md);const OU=Qe`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var CU=Object.defineProperty,DU=Object.getOwnPropertyDescriptor,bd=(t,e,r,i)=>{for(var n=i>1?void 0:i?DU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&CU(e,r,n),n};let Ka=class extends Me{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const t={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return ee`<span><slot class="${rn(t)}"></slot></span>`}};Ka.styles=[Re.globalCss,OU],bd([Ee()],Ka.prototype,"variant",2),bd([Ee()],Ka.prototype,"color",2),Ka=bd([Ne("wcm-text")],Ka);const RU=Qe`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var NU=Object.defineProperty,TU=Object.getOwnPropertyDescriptor,zn=(t,e,r,i)=>{for(var n=i>1?void 0:i?TU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&NU(e,r,n),n};let Ui=class extends Me{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?ee`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?ee`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){Sb.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var t;return ee`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${mr(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(t=this.label)!=null?t:_e.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};Ui.styles=[Re.globalCss,RU],zn([Ee()],Ui.prototype,"onClick",2),zn([Ee()],Ui.prototype,"name",2),zn([Ee()],Ui.prototype,"walletId",2),zn([Ee()],Ui.prototype,"label",2),zn([Ee()],Ui.prototype,"imageId",2),zn([Ee({type:Boolean})],Ui.prototype,"installed",2),zn([Ee({type:Boolean})],Ui.prototype,"recent",2),Ui=zn([Ne("wcm-wallet-button")],Ui);const FU=Qe`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var LU=Object.defineProperty,BU=Object.getOwnPropertyDescriptor,Wl=(t,e,r,i)=>{for(var n=i>1?void 0:i?BU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&LU(e,r,n),n};let Do=class extends Me{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var t;const e=(t=this.imageUrl)!=null&&t.length?this.imageUrl:_e.getWalletIcon({id:this.walletId,image_id:this.imageId});return ee`${e.length?ee`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:ot.WALLET_PLACEHOLDER}`}};Do.styles=[Re.globalCss,FU],Wl([Ee()],Do.prototype,"walletId",2),Wl([Ee()],Do.prototype,"imageId",2),Wl([Ee()],Do.prototype,"imageUrl",2),Do=Wl([Ne("wcm-wallet-image")],Do);var UU=Object.defineProperty,qU=Object.getOwnPropertyDescriptor,k2=(t,e,r,i)=>{for(var n=i>1?void 0:i?qU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&UU(e,r,n),n};let yd=class extends Me{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(t){try{t?.length&&await Promise.all(t.map(async e=>_e.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",t)}}async preloadListings(){if(Ur.state.enableExplorer){await Sr.getRecomendedWallets(),Nt.setIsDataLoaded(!0);const{recomendedWallets:t}=Sr.state,e=t.map(r=>_e.getWalletIcon(r));await this.loadImages(e)}else Nt.setIsDataLoaded(!0)}async preloadCustomImages(){const t=_e.getCustomImageUrls();await this.loadImages(t)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(t){console.error(t),Ln.openToast("Failed preloading","error")}}};k2([Ar()],yd.prototype,"preload",2),yd=k2([Ne("wcm-explorer-context")],yd);var jU=Object.defineProperty,kU=Object.getOwnPropertyDescriptor,zU=(t,e,r,i)=>{for(var n=i>1?void 0:i?kU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&jU(e,r,n),n};let z2=class extends Me{constructor(){super(),this.unsubscribeTheme=void 0,Re.setTheme(),this.unsubscribeTheme=Fn.subscribe(Re.setTheme)}disconnectedCallback(){var t;(t=this.unsubscribeTheme)==null||t.call(this)}};z2=zU([Ne("wcm-theme-context")],z2);const HU=Qe`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var WU=Object.defineProperty,KU=Object.getOwnPropertyDescriptor,VU=(t,e,r,i)=>{for(var n=i>1?void 0:i?KU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&WU(e,r,n),n};let wd=class extends Me{onGoToQrcode(){Et.push("Qrcode")}render(){const{recomendedWallets:t}=Sr.state,e=[...t,...t],r=ne.RECOMMENDED_WALLET_AMOUNT*2;return ee`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${ot.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${ot.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(r)].map((i,n)=>{const s=e[n%e.length];return s?ee`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:ot.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${_e.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};wd.styles=[Re.globalCss,HU],wd=VU([Ne("wcm-android-wallet-selection")],wd);const GU=Qe`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var JU=Object.defineProperty,ZU=Object.getOwnPropertyDescriptor,Ro=(t,e,r,i)=>{for(var n=i>1?void 0:i?ZU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&JU(e,r,n),n};let Hn=class extends Me{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var t,e;const s=(e=(t=Fn.state.themeVariables)==null?void 0:t["--wcm-wallet-icon-large-border-radius"])!=null?e:Re.getPreset("--wcm-wallet-icon-large-border-radius");let o=0;s.includes("%")?o=88/100*parseInt(s,10):o=parseInt(s,10),o*=1.17;const a=317-o*1.57,c=425-o*1.8;return ee`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${o}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${a}" stroke-dashoffset="${c}"></use></svg>`}render(){const t={"wcm-error":this.isError,"wcm-stale":this.isStale};return ee`<div class="${rn(t)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${mr(this.walletId)}" imageId="${mr(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};Hn.styles=[Re.globalCss,GU],Ro([Ee()],Hn.prototype,"walletId",2),Ro([Ee()],Hn.prototype,"imageId",2),Ro([Ee({type:Boolean})],Hn.prototype,"isError",2),Ro([Ee({type:Boolean})],Hn.prototype,"isStale",2),Ro([Ee()],Hn.prototype,"label",2),Hn=Ro([Ne("wcm-connector-waiting")],Hn);const No={manualWallets(){var t,e;const{mobileWallets:r,desktopWallets:i}=Ur.state,n=(t=No.recentWallet())==null?void 0:t.id,s=ne.isMobile()?r:i,o=s?.filter(a=>n!==a.id);return(e=ne.isMobile()?o?.map(({id:a,name:c,links:l})=>({id:a,name:c,mobile:l,links:l})):o?.map(({id:a,name:c,links:l})=>({id:a,name:c,desktop:l,links:l})))!=null?e:[]},recentWallet(){return _e.getRecentWallet()},recomendedWallets(t=!1){var e;const r=t||(e=No.recentWallet())==null?void 0:e.id,{recomendedWallets:i}=Sr.state;return i.filter(s=>r!==s.id)}},Wn={onConnecting(t){_e.goToConnectingView(t)},manualWalletsTemplate(){return No.manualWallets().map(e=>ee`<wcm-wallet-button walletId="${e.id}" name="${e.name}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(t=!1){return No.recomendedWallets(t).map(r=>ee`<wcm-wallet-button name="${r.name}" walletId="${r.id}" imageId="${r.image_id}" .onClick="${()=>this.onConnecting(r)}"></wcm-wallet-button>`)},recentWalletTemplate(){const t=No.recentWallet();if(t)return ee`<wcm-wallet-button name="${t.name}" walletId="${t.id}" imageId="${mr(t.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(t)}"></wcm-wallet-button>`}},YU=Qe`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var XU=Object.defineProperty,QU=Object.getOwnPropertyDescriptor,eq=(t,e,r,i)=>{for(var n=i>1?void 0:i?QU(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&XU(e,r,n),n};let _d=class extends Me{render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Ur.state,r=t!=="ALL"&&e,i=Wn.manualWalletsTemplate(),n=Wn.recomendedWalletsTemplate();let o=[Wn.recentWalletTemplate(),...i,...n];o=o.filter(Boolean);const a=o.length>4||r;let c=[];a?c=o.slice(0,3):c=o;const l=!!c.length;return ee`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${_e.handleUriCopy}" .actionIcon="${ot.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${ot.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${ot.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${l?ee`<wcm-modal-footer><div class="wcm-desktop-title">${ot.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${c} ${a?ee`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};_d.styles=[Re.globalCss,YU],_d=eq([Ne("wcm-desktop-wallet-selection")],_d);const tq=Qe`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var rq=Object.defineProperty,iq=Object.getOwnPropertyDescriptor,nq=(t,e,r,i)=>{for(var n=i>1?void 0:i?iq(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&rq(e,r,n),n};let xd=class extends Me{render(){const{termsOfServiceUrl:t,privacyPolicyUrl:e}=Ur.state;return t??e?ee`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${t?ee`<a href="${t}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${t&&e?"and":null} ${e?ee`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};xd.styles=[Re.globalCss,tq],xd=nq([Ne("wcm-legal-notice")],xd);const sq=Qe`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var oq=Object.defineProperty,aq=Object.getOwnPropertyDescriptor,cq=(t,e,r,i)=>{for(var n=i>1?void 0:i?aq(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&oq(e,r,n),n};let Ed=class extends Me{onQrcode(){Et.push("Qrcode")}render(){const{explorerExcludedWalletIds:t,enableExplorer:e}=Ur.state,r=t!=="ALL"&&e,i=Wn.manualWalletsTemplate(),n=Wn.recomendedWalletsTemplate();let o=[Wn.recentWalletTemplate(),...i,...n];o=o.filter(Boolean);const a=o.length>8||r;let c=[];a?c=o.slice(0,7):c=o;const l=!!c.length;return ee`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${ot.QRCODE_ICON}"></wcm-modal-header>${l?ee`<wcm-modal-content><div>${c} ${a?ee`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};Ed.styles=[Re.globalCss,sq],Ed=cq([Ne("wcm-mobile-wallet-selection")],Ed);const lq=Qe`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var fq=Object.defineProperty,hq=Object.getOwnPropertyDescriptor,$d=(t,e,r,i)=>{for(var n=i>1?void 0:i?hq(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&fq(e,r,n),n};let To=class extends Me{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=_s.subscribe(t=>{t.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var t;(t=this.unsubscribeModal)==null||t.call(this)}get overlayEl(){return _e.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return _e.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(t){if(document.querySelector("body"))if(t){const r=document.getElementById("wcm-styles");r?.remove()}else document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>')}onCloseModal(t){t.target===t.currentTarget&&_s.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const t=_e.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,r=.2;await Promise.all([Ms(this.overlayEl,{opacity:[0,1]},{delay:e,duration:r}).finished,Ms(this.containerEl,t,{delay:e,duration:r}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const t=_e.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([Ms(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,Ms(this.containerEl,t,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",t=>{var e;t.key==="Escape"?_s.close():t.key==="Tab"&&((e=t.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var t;(t=this.abortController)==null||t.abort(),this.abortController=void 0}render(){const t={"wcm-overlay":!0,"wcm-active":this.active};return ee`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${rn(t)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?ee`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};To.styles=[Re.globalCss,lq],$d([Ar()],To.prototype,"open",2),$d([Ar()],To.prototype,"active",2),To=$d([Ne("wcm-modal")],To);const uq=Qe`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var dq=Object.defineProperty,pq=Object.getOwnPropertyDescriptor,Va=(t,e,r,i)=>{for(var n=i>1?void 0:i?pq(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&dq(e,r,n),n};let Os=class extends Me{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){ne.isMobile()?Et.replace("MobileConnecting"):Et.replace("MobileQrcodeConnecting")}onDesktop(){Et.replace("DesktopConnecting")}onWeb(){Et.replace("WebConnecting")}render(){return ee`<div>${this.isRetry?ee`<slot></slot>`:null} ${this.isMobile?ee`<wcm-button .onClick="${this.onMobile}" .iconLeft="${ot.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?ee`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${ot.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?ee`<wcm-button .onClick="${this.onWeb}" .iconLeft="${ot.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};Os.styles=[Re.globalCss,uq],Va([Ee({type:Boolean})],Os.prototype,"isMobile",2),Va([Ee({type:Boolean})],Os.prototype,"isDesktop",2),Va([Ee({type:Boolean})],Os.prototype,"isWeb",2),Va([Ee({type:Boolean})],Os.prototype,"isRetry",2),Os=Va([Ne("wcm-platform-selection")],Os);const gq=Qe`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var vq=Object.defineProperty,mq=Object.getOwnPropertyDescriptor,bq=(t,e,r,i)=>{for(var n=i>1?void 0:i?mq(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&vq(e,r,n),n};let Sd=class extends Me{onClick(){Et.push("WalletExplorer")}render(){const{recomendedWallets:t}=Sr.state,e=No.manualWallets(),r=[...t,...e].reverse().slice(0,4);return ee`<button @click="${this.onClick}"><div class="wcm-icons">${r.map(i=>{const n=_e.getWalletIcon(i);if(n)return ee`<img crossorigin="anonymous" src="${n}">`;const s=_e.getWalletIcon({id:i.id});return s?ee`<img crossorigin="anonymous" src="${s}">`:ot.WALLET_PLACEHOLDER})} ${[...Array(4-r.length)].map(()=>ot.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};Sd.styles=[Re.globalCss,gq],Sd=bq([Ne("wcm-view-all-wallets-button")],Sd);const yq=Qe`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var wq=Object.defineProperty,_q=Object.getOwnPropertyDescriptor,Kl=(t,e,r,i)=>{for(var n=i>1?void 0:i?_q(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&wq(e,r,n),n};let Fo=class extends Me{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:t}=Nt.state;this.uri=t},0)}get overlayEl(){return _e.getShadowRootElement(this,".wcm-qr-container")}render(){return ee`<div class="wcm-qr-container">${this.uri?ee`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${mr(this.walletId)}" imageId="${mr(this.imageId)}"></wcm-qrcode>`:ee`<wcm-spinner></wcm-spinner>`}</div>`}};Fo.styles=[Re.globalCss,yq],Kl([Ee()],Fo.prototype,"walletId",2),Kl([Ee()],Fo.prototype,"imageId",2),Kl([Ar()],Fo.prototype,"uri",2),Fo=Kl([Ne("wcm-walletconnect-qr")],Fo);var xq=Object.defineProperty,Eq=Object.getOwnPropertyDescriptor,$q=(t,e,r,i)=>{for(var n=i>1?void 0:i?Eq(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&xq(e,r,n),n};let Ad=class extends Me{viewTemplate(){return ne.isAndroid()&&!ne.isTelegram()?ee`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:ne.isMobile()?ee`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:ee`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return ee`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};Ad.styles=[Re.globalCss],Ad=$q([Ne("wcm-connect-wallet-view")],Ad);const Sq=Qe`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var Aq=Object.defineProperty,Iq=Object.getOwnPropertyDescriptor,H2=(t,e,r,i)=>{for(var n=i>1?void 0:i?Iq(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&Aq(e,r,n),n};let Vl=class extends Me{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(t){const{desktop:e,name:r}=ne.getWalletRouterData(),i=e?.native,n=e?.universal;if(i){const s=ne.formatNativeUrl(i,t,r);ne.openHref(s,"_self")}else if(n){const s=ne.formatUniversalUrl(n,t,r);ne.openHref(s,"_blank")}}openDesktopApp(){const{walletConnectUri:t}=Nt.state,e=ne.getWalletRouterData();_e.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ne.getWalletRouterData(),{isMobile:i,isWeb:n}=_e.getCachedRouterWalletPlatforms();return ee`<wcm-modal-header title="${t}" .onAction="${_e.handleUriCopy}" .actionIcon="${ot.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${mr(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${t} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${i}" .isWeb="${n}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${ot.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Vl.styles=[Re.globalCss,Sq],H2([Ar()],Vl.prototype,"isError",2),Vl=H2([Ne("wcm-desktop-connecting-view")],Vl);const Mq=Qe`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var Pq=Object.defineProperty,Oq=Object.getOwnPropertyDescriptor,Cq=(t,e,r,i)=>{for(var n=i>1?void 0:i?Oq(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&Pq(e,r,n),n};let Id=class extends Me{onInstall(t){t&&ne.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,homepage:i}=ne.getWalletRouterData();return ee`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${mr(r)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${t} to continue. If multiple browser extensions are installed, disable non ${t} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(i)}" .iconLeft="${ot.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};Id.styles=[Re.globalCss,Mq],Id=Cq([Ne("wcm-install-wallet-view")],Id);const Dq=Qe`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var Rq=Object.defineProperty,Nq=Object.getOwnPropertyDescriptor,W2=(t,e,r,i)=>{for(var n=i>1?void 0:i?Nq(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&Rq(e,r,n),n};let Gl=class extends Me{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(t,e=!1){const{mobile:r,name:i}=ne.getWalletRouterData(),n=r?.native,s=r?.universal,o=ne.isTelegram()?"_blank":"_self";if(t=ne.isTelegram()&&ne.isAndroid()?encodeURIComponent(t):t,n&&!e){const a=ne.formatNativeUrl(n,t,i);ne.openHref(a,o)}else if(s){const a=ne.formatUniversalUrl(s,t,i);ne.openHref(a,o)}}openMobileApp(t=!1){const{walletConnectUri:e}=Nt.state,r=ne.getWalletRouterData();e&&this.onFormatAndRedirect(e,t),_e.setRecentWallet(r)}onGoToAppStore(t){t&&ne.openHref(t,"_blank")}render(){const{name:t,id:e,image_id:r,app:i,mobile:n}=ne.getWalletRouterData(),{isWeb:s}=_e.getCachedRouterWalletPlatforms(),o=i?.ios,a=n?.universal;return ee`<wcm-modal-header title="${t}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${mr(r)}" label="Tap 'Open' to continue" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${ot.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${a?ee`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${mr(r)}"></wcm-wallet-image><wcm-text>${`Get ${t}`}</wcm-text></div><wcm-button .iconRight="${ot.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};Gl.styles=[Re.globalCss,Dq],W2([Ar()],Gl.prototype,"isError",2),Gl=W2([Ne("wcm-mobile-connecting-view")],Gl);const Tq=Qe`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var Fq=Object.defineProperty,Lq=Object.getOwnPropertyDescriptor,Bq=(t,e,r,i)=>{for(var n=i>1?void 0:i?Lq(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&Fq(e,r,n),n};let Md=class extends Me{render(){const{name:t,id:e,image_id:r}=ne.getWalletRouterData(),{isDesktop:i,isWeb:n}=_e.getCachedRouterWalletPlatforms();return ee`<wcm-modal-header title="${t}" .onAction="${_e.handleUriCopy}" .actionIcon="${ot.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${mr(r)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${t} app`}</wcm-text><wcm-platform-selection .isDesktop="${i}" .isWeb="${n}"></wcm-platform-selection></wcm-info-footer>`}};Md.styles=[Re.globalCss,Tq],Md=Bq([Ne("wcm-mobile-qr-connecting-view")],Md);var Uq=Object.defineProperty,qq=Object.getOwnPropertyDescriptor,jq=(t,e,r,i)=>{for(var n=i>1?void 0:i?qq(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&Uq(e,r,n),n};let Pd=class extends Me{render(){return ee`<wcm-modal-header title="Scan the code" .onAction="${_e.handleUriCopy}" .actionIcon="${ot.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};Pd.styles=[Re.globalCss],Pd=jq([Ne("wcm-qrcode-view")],Pd);const kq=Qe`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var zq=Object.defineProperty,Hq=Object.getOwnPropertyDescriptor,Ga=(t,e,r,i)=>{for(var n=i>1?void 0:i?Hq(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&zq(e,r,n),n};const Od=40;let Cs=class extends Me{constructor(){super(...arguments),this.loading=!Sr.state.wallets.listings.length,this.firstFetch=!Sr.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=_e.debounce(t=>{t.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=t,Sr.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),Sr.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect()}get placeholderEl(){return _e.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([t])=>{t.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:t,search:e}=Sr.state,{listings:r,total:i}=this.search?e:t;return i<=Od||r.length>=i}async fetchWallets(){var t;const{wallets:e,search:r}=Sr.state,{listings:i,total:n,page:s}=this.search?r:e;if(!this.endReached&&(this.firstFetch||n>Od&&i.length<n))try{this.loading=!0;const o=(t=Nt.state.chains)==null?void 0:t.join(","),{listings:a}=await Sr.getWallets({page:this.firstFetch?1:s+1,entries:Od,search:this.search,version:2,chains:o}),c=a.map(l=>_e.getWalletIcon(l));await Promise.all([...c.map(async l=>_e.preloadImage(l)),ne.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),Ln.openToast(_e.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(t){ne.isAndroid()?_e.handleMobileLinking(t):_e.goToConnectingView(t)}onSearchChange(t){const{value:e}=t.target;this.searchDebounce(e)}render(){const{wallets:t,search:e}=Sr.state,{listings:r}=this.search?e:t,i=this.loading&&!r.length,n=this.search.length>=3;let s=Wn.manualWalletsTemplate(),o=Wn.recomendedWalletsTemplate(!0);n&&(s=s.filter(({values:l})=>_e.caseSafeIncludes(l[0],this.search)),o=o.filter(({values:l})=>_e.caseSafeIncludes(l[0],this.search)));const a=!this.loading&&!r.length&&!o.length,c={"wcm-loading":i,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":a};return ee`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${rn(c)}"><div class="wcm-grid">${i?null:s} ${i?null:o} ${i?null:r.map(l=>ee`${l?ee`<wcm-wallet-button imageId="${l.image_id}" name="${l.name}" walletId="${l.id}" .onClick="${()=>this.onConnect(l)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${a?ee`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!a&&this.loading?ee`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};Cs.styles=[Re.globalCss,kq],Ga([Ar()],Cs.prototype,"loading",2),Ga([Ar()],Cs.prototype,"firstFetch",2),Ga([Ar()],Cs.prototype,"search",2),Ga([Ar()],Cs.prototype,"endReached",2),Cs=Ga([Ne("wcm-wallet-explorer-view")],Cs);const Wq=Qe`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var Kq=Object.defineProperty,Vq=Object.getOwnPropertyDescriptor,K2=(t,e,r,i)=>{for(var n=i>1?void 0:i?Vq(e,r):e,s=t.length-1,o;s>=0;s--)(o=t[s])&&(n=(i?o(e,r,n):o(n))||n);return i&&n&&Kq(e,r,n),n};let Jl=class extends Me{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(t){const{desktop:e,name:r}=ne.getWalletRouterData(),i=e?.universal;if(i){const n=ne.formatUniversalUrl(i,t,r);ne.openHref(n,"_blank")}}openWebWallet(){const{walletConnectUri:t}=Nt.state,e=ne.getWalletRouterData();_e.setRecentWallet(e),t&&this.onFormatAndRedirect(t)}render(){const{name:t,id:e,image_id:r}=ne.getWalletRouterData(),{isMobile:i,isDesktop:n}=_e.getCachedRouterWalletPlatforms(),s=ne.isMobile();return ee`<wcm-modal-header title="${t}" .onAction="${_e.handleUriCopy}" .actionIcon="${ot.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${mr(r)}" label="${`Continue in ${t}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${t} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${i}" .isDesktop="${s?!1:n}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${ot.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Jl.styles=[Re.globalCss,Wq],K2([Ar()],Jl.prototype,"isError",2),Jl=K2([Ne("wcm-web-connecting-view")],Jl);var Gq=Object.freeze({__proto__:null,get WcmModal(){return To},get WcmQrCode(){return sn}});si.EthereumProvider=mF,si.OPTIONAL_EVENTS=wb,si.OPTIONAL_METHODS=yb,si.REQUIRED_EVENTS=wl,si.REQUIRED_METHODS=yl,si.default=El,Object.defineProperty(si,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map

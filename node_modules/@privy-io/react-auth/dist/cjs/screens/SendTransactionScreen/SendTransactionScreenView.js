"use strict";var e=require("react/jsx-runtime"),r=require("@heroicons/react/24/outline"),s=require("styled-components"),n=require("../../components/Button.js"),i=require("../../components/ModalFooter.js"),o=require("../../components/ModalHeader.js"),a=require("../../components/primitives/InteractiveLabel.js"),t=require("../../components/ui/layout/Row.js"),l=require("../../components/ui/typography/ErrorMessage.js"),c=require("../../components/ui/typography/LabelSm.js"),d=require("../../components/ui/typography/Subtitle.js"),u=require("../../components/ui/typography/Title.js"),j=require("../../components/ui/typography/Value.js"),h=require("../../components/ui/wallet/Address.js"),m=require("../../components/ui/wallet/WalletInfoCard.js"),x=require("../LandingScreen/styles.js"),p=require("./TokenDescription.js"),g=require("./TransactionDetail.js"),q=require("./TransactionValidation.js"),b=require("./useTransactionDetails.js");require("../../components/Loader.js"),require("../../configuration/context.js"),require("react"),require("../../config.js"),require("../../configuration/defaultClientConfig.js"),require("../../constants.js"),require("../../configuration/login-methods.js"),require("../../configuration/wallets.js"),require("../../connectors/chains/index.js"),require("../../connectors/chains/arbitrum.js"),require("../../connectors/chains/arbitrumSepolia.js"),require("../../connectors/chains/avalanche.js"),require("../../connectors/chains/avalancheFuji.js"),require("../../connectors/chains/base.js"),require("../../connectors/chains/baseSepolia.js"),require("../../connectors/chains/berachainArtio.js"),require("../../connectors/chains/celo.js"),require("../../connectors/chains/celoAlfajores.js"),require("../../connectors/chains/filecoin.js"),require("../../connectors/chains/filecoinCalibration.js"),require("../../connectors/chains/garnetHolesky.js"),require("../../connectors/chains/holesky.js"),require("../../connectors/chains/linea.js"),require("../../connectors/chains/lineaTestnet.js"),require("../../connectors/chains/lukso.js"),require("../../connectors/chains/mainnet.js"),require("../../connectors/chains/optimism.js"),require("../../connectors/chains/optimismSepolia.js"),require("../../connectors/chains/polygon.js"),require("../../connectors/chains/polygonAmoy.js"),require("../../connectors/chains/redstone.js"),require("../../connectors/chains/sepolia.js"),require("../../connectors/chains/zora.js"),require("../../connectors/chains/zoraSepolia.js"),require("../../connectors/chains/zoraTestnet.js"),require("../../connectors/chains/utils.js"),require("../../lib/solana/index.js"),require("../../theme.js"),require("tinycolor2"),require("../../lib/cybr53.js"),require("../../svg/protected-by-privy.js"),require("@heroicons/react/24/outline/ArrowLeftIcon"),require("@heroicons/react/24/outline/ArrowRightIcon"),require("@heroicons/react/24/outline/QuestionMarkCircleIcon"),require("@heroicons/react/24/outline/XMarkIcon"),require("../../hooks/internal-context.js"),require("../../hooks/index.js"),require("../../components/ui/animation/LoadingSkeleton.js"),require("@heroicons/react/24/outline/CheckIcon"),require("@heroicons/react/24/outline/Square2StackIcon"),require("../../utils/index.js"),require("../../connectors/get-legacy-injected-providers.js"),require("../../connectors/is-wallet-installed.js"),require("../../errors.js"),require("ofetch"),require("../../utils/eth/getPublicClient.js"),require("viem"),require("../../components/ui/chips/Chip.js"),require("../../components/ui/layout/Column.js"),require("../../components/ui/typography/LabelXs.js"),require("../../components/ui/wallet/shared.js"),require("@heroicons/react/24/outline/ExclamationTriangleIcon"),require("../../components/Checkbox.js"),require("../../components/Pill.js");const y=({transactionIndex:e,maxIndex:r})=>"number"!=typeof e||0===r?"":` (${e+1} / ${r+1})`;let w=/*#__PURE__*/s.styled(m.WalletInfoCard).withConfig({displayName:"StyledWalletInfoCard",componentId:"sc-4bd3bb7d-0"})(["",""],(e=>e.$useSmallMargins?"margin-top: 0.5rem;":"margin-top: 2rem;")),S="There was an error preparing your transaction. Your transaction request will likely fail.",k=/*#__PURE__*/s.styled.div.withConfig({displayName:"ImageContainer",componentId:"sc-4bd3bb7d-1"})(["display:flex;width:100%;justify-content:center;max-height:40px;> img{object-fit:contain;border-radius:var(--privy-border-radius-sm);}"]);exports.SendSolanaTransactionScreenView=({img:r,title:s,subtitle:a,cta:m,network:p,blockExplorerUrl:g,transactionIndex:q,maxIndex:b,isMissingFunds:f,submitError:T,parseError:I,total:C,amount:L,fee:v,balance:A,from:R,to:V,tokenAddress:M,tokenAccount:E,tokenAccountOwner:D,programAddress:N,transactingWalletAddress:F,disabled:P,isSubmitting:$,isPreparing:B,isTokenPriceLoading:U,onClick:W,onClose:H,onBack:z})=>{let Y=B||U;/*#__PURE__*/return e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(o.ModalHeader,{onClose:H,backFn:z}),r&&/*#__PURE__*/e.jsx(k,{children:r}),/*#__PURE__*/e.jsxs(u.Title,{style:{marginTop:r?"1.5rem":0},children:[s,/*#__PURE__*/e.jsx(y,{maxIndex:b,transactionIndex:q})]}),/*#__PURE__*/e.jsx(d.Subtitle,{children:a}),/*#__PURE__*/e.jsxs(t.Rows,{style:{marginTop:"2rem"},children:[(C||Y)&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Total"}),/*#__PURE__*/e.jsx(j.Value,{$isLoading:Y,children:C})]}),R&&R!==F&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"From"}),/*#__PURE__*/e.jsx(j.Value,{children:/*#__PURE__*/e.jsx(h.Address,{address:R,url:g,showCopyIcon:!1})})]}),V&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"To"}),/*#__PURE__*/e.jsx(j.Value,{children:/*#__PURE__*/e.jsx(h.Address,{address:V,url:g,showCopyIcon:!1})})]}),D&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Token account owner"}),/*#__PURE__*/e.jsx(j.Value,{children:/*#__PURE__*/e.jsx(h.Address,{address:D,url:g,showCopyIcon:!1})})]}),E&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Token account"}),/*#__PURE__*/e.jsx(j.Value,{children:/*#__PURE__*/e.jsx(h.Address,{address:E,url:g,showCopyIcon:!1})})]}),M&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Token address"}),/*#__PURE__*/e.jsx(j.Value,{children:/*#__PURE__*/e.jsx(h.Address,{address:M,url:g,showCopyIcon:!1})})]}),N&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Program address"}),/*#__PURE__*/e.jsx(j.Value,{children:/*#__PURE__*/e.jsx(h.Address,{address:N,url:g,showCopyIcon:!1})})]}),p&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Network"}),/*#__PURE__*/e.jsx(j.Value,{children:p})]}),(L||Y)&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Amount"}),/*#__PURE__*/e.jsx(j.Value,{children:/*#__PURE__*/e.jsx(j.Value,{$isLoading:Y,children:L})})]}),(v||Y)&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Estimated fee"}),/*#__PURE__*/e.jsx(j.Value,{$isLoading:Y,children:v})]})]}),/*#__PURE__*/e.jsx(x.Grow,{}),T?/*#__PURE__*/e.jsx(l.ErrorMessage,{style:{marginTop:"2rem"},children:T.message}):I?/*#__PURE__*/e.jsx(l.ErrorMessage,{style:{marginTop:"2rem"},children:S}):null,/*#__PURE__*/e.jsx(w,{$useSmallMargins:!(!I&&!T),title:"Your wallet",address:F,balance:A,isLoading:B||U,errMsg:B||I||T||!f?void 0:"Add funds on Solana to complete transaction."}),/*#__PURE__*/e.jsx(n.PrimaryButton,{style:{marginTop:"1rem"},loading:$,disabled:P||B,onClick:W,children:m}),/*#__PURE__*/e.jsx(i.BlobbyFooter,{})]})},exports.SendTransactionScreenView=({img:s,submitError:m,prepareError:f,onClose:T,action:I,title:C,subtitle:L,txValue:v,to:A,tokenAddress:R,network:V,missingFunds:M,fee:E,from:D,cta:N,disabled:F,chain:P,isSubmitting:$,isPreparing:B,isTokenPriceLoading:U,isTokenContractInfoLoading:W,isSponsored:H,symbol:z,balance:Y,onClick:G,transactionDetails:O,transactionIndex:X,maxIndex:Q,onBack:J,chainName:K,validation:Z,hasScanDetails:_,setIsScanDetailsOpen:ee,preventMaliciousTransaction:re,setPreventMaliciousTransaction:se,tokensSent:ne,tokensReceived:ie,isScanning:oe,isCancellable:ae})=>{let{showTransactionDetails:te,setShowTransactionDetails:le,hasMoreDetails:ce,isErc20Ish:de}=b.useTransactionDetails(O),ue=de&&W||B||U||oe;/*#__PURE__*/return e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(o.ModalHeader,{onClose:T,backFn:J}),s&&/*#__PURE__*/e.jsx(k,{children:s}),/*#__PURE__*/e.jsxs(u.Title,{style:{marginTop:s?"1.5rem":0},children:[C,/*#__PURE__*/e.jsx(y,{maxIndex:Q,transactionIndex:X})]}),/*#__PURE__*/e.jsx(d.Subtitle,{children:L}),/*#__PURE__*/e.jsxs(t.Rows,{style:{marginTop:"2rem"},children:[(!!ne[0]||ue)&&/*#__PURE__*/e.jsxs(t.Row,{children:[ie.length>0?/*#__PURE__*/e.jsx(c.LabelSm,{children:"Send"}):/*#__PURE__*/e.jsx(c.LabelSm,{children:"Amount"}),/*#__PURE__*/e.jsx(p.default,{iconUrl:ne[0]?.iconUrl,value:ne[0]?.value,usdValue:ne[0]?.usdValue,symbol:ne[0]?.symbol,nftName:ne[0]?.nftName,$isLoading:ue})]}),ie.length>0&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Receive"}),/*#__PURE__*/e.jsx("div",{className:"flex flex-col",children:ie.map(((r,s)=>/*#__PURE__*/e.jsx(p.default,{iconUrl:r.iconUrl,value:r.value,usdValue:r.usdValue,symbol:r.symbol,nftName:r.nftName},s)))})]}),O&&"spender"in O&&O?.spender?/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Spender"}),/*#__PURE__*/e.jsx(j.Value,{children:/*#__PURE__*/e.jsx(h.Address,{address:O.spender,url:P?.blockExplorers?.default?.url,showCopyIcon:!1})})]}):null,A&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"To"}),/*#__PURE__*/e.jsx(j.Value,{children:/*#__PURE__*/e.jsx(h.Address,{address:A,url:P?.blockExplorers?.default?.url,showCopyIcon:!1})})]}),R&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Token address"}),/*#__PURE__*/e.jsx(j.Value,{children:/*#__PURE__*/e.jsx(h.Address,{address:R,url:P?.blockExplorers?.default?.url,showCopyIcon:!1})})]}),/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Network"}),/*#__PURE__*/e.jsx(j.Value,{children:V})]}),/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Estimated fee"}),/*#__PURE__*/e.jsx(j.Value,{$isLoading:B||U||void 0===H,children:H?"Sponsored":E})]}),ce&&!_&&/*#__PURE__*/e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(t.Row,{className:"cursor-pointer",onClick:()=>le(!te),children:/*#__PURE__*/e.jsxs(c.LabelSmPrimary,{className:"flex items-center gap-x-1",children:["Details"," ",/*#__PURE__*/e.jsx(r.ChevronDownIcon,{style:{width:"0.75rem",marginLeft:"0.25rem",transform:te?"rotate(180deg)":void 0}})]})}),te&&O&&/*#__PURE__*/e.jsx(g.TransactionDetail,{action:I,chain:P,transactionDetails:O,isTokenContractInfoLoading:W,symbol:z})]}),_&&/*#__PURE__*/e.jsx(t.Row,{children:/*#__PURE__*/e.jsxs(a.InteractiveLabel,{onClick:()=>ee(!0),children:[/*#__PURE__*/e.jsx("span",{className:"text-color-primary",children:"Details"}),/*#__PURE__*/e.jsx(r.ArrowRightIcon,{height:"14px",width:"14px",strokeWidth:"2"})]})})]}),/*#__PURE__*/e.jsx(x.Grow,{}),m?/*#__PURE__*/e.jsx(l.ErrorMessage,{style:{marginTop:"2rem"},children:m.message}):f?/*#__PURE__*/e.jsx(l.ErrorMessage,{style:{marginTop:"2rem"},children:f.shortMessage??S}):null,/*#__PURE__*/e.jsx(q.TransactionValidation,{variant:Z,preventMaliciousTransaction:re,setPreventMaliciousTransaction:se}),/*#__PURE__*/e.jsx(w,{$useSmallMargins:!(!f&&!m&&"warn"!==Z&&"error"!==Z),title:Number(v)>0?void 0:!1!==H?"Your wallet":void 0,address:D,balance:Y,isLoading:B||U,errMsg:B||f||m||!M?void 0:`Add funds on ${P?.name??K} to complete transaction.`}),/*#__PURE__*/e.jsx(n.PrimaryButton,{style:{marginTop:"1rem"},loading:$,disabled:F||B,onClick:G,children:N}),ae&&/*#__PURE__*/e.jsx(n.EmbeddedButton,{style:{marginTop:"1rem"},onClick:T,isSubmitting:!1,children:"Not now"}),/*#__PURE__*/e.jsx(i.BlobbyFooter,{})]})},exports.TransactionIndex=y;

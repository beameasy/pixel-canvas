"use strict";var e=require("react/jsx-runtime"),r=require("@heroicons/react/24/outline/ExclamationTriangleIcon"),i=require("@heroicons/react/24/outline/PhoneIcon"),t=require("styled-components"),n=require("../components/Button.js"),o=require("../components/CircleBorder.js"),a=require("../components/ModalHeader.js"),s=require("../components/layout/StackedContainer.js"),c=require("../embedded-wallets/errors.js"),l=require("../errors.js"),u=require("../hooks/captcha-context.js"),d=require("../hooks/modal-context.js"),h=require("../lib/funding/reservoir.js"),g=require("../svg/lock-closed.js"),y=require("./index.js");function j(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("../components/Loader.js"),require("@heroicons/react/24/outline/ArrowLeftIcon"),require("@heroicons/react/24/outline/ArrowRightIcon"),require("@heroicons/react/24/outline/QuestionMarkCircleIcon"),require("@heroicons/react/24/outline/XMarkIcon"),require("../configuration/context.js"),require("react"),require("../config.js"),require("../configuration/defaultClientConfig.js"),require("../constants.js"),require("../configuration/login-methods.js"),require("../configuration/wallets.js"),require("../connectors/chains/index.js"),require("../connectors/chains/arbitrum.js"),require("../connectors/chains/arbitrumSepolia.js"),require("../connectors/chains/avalanche.js"),require("../connectors/chains/avalancheFuji.js"),require("../connectors/chains/base.js"),require("../connectors/chains/baseSepolia.js"),require("../connectors/chains/berachainArtio.js"),require("../connectors/chains/celo.js"),require("../connectors/chains/celoAlfajores.js"),require("../connectors/chains/filecoin.js"),require("../connectors/chains/filecoinCalibration.js"),require("../connectors/chains/garnetHolesky.js"),require("../connectors/chains/holesky.js"),require("../connectors/chains/linea.js"),require("../connectors/chains/lineaTestnet.js"),require("../connectors/chains/lukso.js"),require("../connectors/chains/mainnet.js"),require("../connectors/chains/optimism.js"),require("../connectors/chains/optimismSepolia.js"),require("../connectors/chains/polygon.js"),require("../connectors/chains/polygonAmoy.js"),require("../connectors/chains/redstone.js"),require("../connectors/chains/sepolia.js"),require("../connectors/chains/zora.js"),require("../connectors/chains/zoraSepolia.js"),require("../connectors/chains/zoraTestnet.js"),require("../connectors/chains/utils.js"),require("../lib/solana/index.js"),require("../theme.js"),require("tinycolor2"),require("../lib/cybr53.js"),require("../hooks/internal-context.js"),require("../hooks/index.js"),require("../embedded-wallets/types.js"),require("ofetch"),require("../utils/index.js"),require("../connectors/get-legacy-injected-providers.js"),require("../connectors/is-wallet-installed.js"),require("../utils/eth/getPublicClient.js"),require("viem"),require("../components/PrefetchedImage.js");var T=/*#__PURE__*/j(r),q=/*#__PURE__*/j(i);const p=({error:r,backFn:i,onClick:t})=>{let{reset:y}=u.useCaptcha(),{app:j}=d.usePrivyModal(),p=((r,i)=>{let t=/*#__PURE__*/e.jsx(T.default,{height:38,width:38,stroke:"var(--privy-color-error)"});if(r instanceof h.RelayRequestError)return{title:"Transaction failed",detail:/*#__PURE__*/e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx("p",{children:r.message}),/*#__PURE__*/e.jsxs("p",{children:["Check the"," ",/*#__PURE__*/e.jsx(x,{href:r.relayLink,target:"_blank",children:"refund status"}),"."]})]}),ctaText:"Try again",icon:t};if(r instanceof l.PrivyClientError)switch(r.privyErrorCode){case l.PrivyErrorCode.CLIENT_REQUEST_TIMEOUT:return{title:"Timed out",detail:r.message,ctaText:"Try again",icon:t};case l.PrivyErrorCode.INSUFFICIENT_BALANCE:return{title:"Insufficient balance",detail:r.message,ctaText:"Try again",icon:t};case l.PrivyErrorCode.TRANSACTION_FAILURE:return{title:"Transaction failure",detail:r.message,ctaText:"Try again",icon:t};default:return{title:"Something went wrong",detail:"Try again later",ctaText:"Try again",icon:t}}else{if(r instanceof c.PrivyIframeError&&"twilio_verification_failed"===r.type)return{title:"Something went wrong",detail:r.message,ctaText:"Try again",icon:/*#__PURE__*/e.jsx(q.default,{height:38,width:38,stroke:"var(--privy-color-error)"})};if(!(r instanceof l.PrivyError))return r instanceof l.PrivyApiError&&r.status&&[400,422].includes(r.status)?{title:"Something went wrong",detail:r.message,ctaText:"Try again",icon:t}:{title:"Something went wrong",detail:"Try again later",ctaText:"Try again",icon:t};switch(r.privyErrorCode){case l.PrivyErrorCode.INVALID_CAPTCHA:return{title:"Something went wrong",detail:"Please try again.",ctaText:"Try again",icon:t};case l.PrivyErrorCode.DISALLOWED_LOGIN_METHOD:return{title:"Not allowed",detail:r.message,ctaText:"Try another method",icon:t};case l.PrivyErrorCode.ALLOWLIST_REJECTED:return{title:i.errorTitle||"You don't have access to this app",detail:i.errorDetail||"Have you been invited?",ctaText:i.errorCtaText||"Try another account",icon:/*#__PURE__*/e.jsx(g.LockClosed,{style:{width:"38px",height:"38px",strokeWidth:"1",stroke:"var(--privy-color-accent)",fill:"var(--privy-color-accent)"}})};case l.PrivyErrorCode.CAPTCHA_FAILURE:return{title:"Something went wrong",detail:"You did not pass CAPTCHA. Please try again.",ctaText:"Try again",icon:/*#__PURE__*/e.jsx("span",{})};case l.PrivyErrorCode.CAPTCHA_TIMEOUT:return{title:"Something went wrong",detail:"Something went wrong! Please try again later.",ctaText:"Try again",icon:/*#__PURE__*/e.jsx("span",{})};case l.PrivyErrorCode.LINKED_TO_ANOTHER_USER:return{title:"Authentication failed",detail:"This account has already been linked to another user.",ctaText:"Try again",icon:t};case l.PrivyErrorCode.NOT_SUPPORTED:return{title:"This region is not supported",detail:"SMS authentication from this region is not available",ctaText:"Try another method",icon:t};case l.PrivyErrorCode.TOO_MANY_REQUESTS:return{title:"Request failed",detail:"Too many attempts.",ctaText:"Try again later",icon:t};default:return{title:"Something went wrong",detail:"Try again later",ctaText:"Try again",icon:t}}}})(r,j.allowlistConfig);/*#__PURE__*/return e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(a.ModalHeader,{backFn:i}),/*#__PURE__*/e.jsxs(f,{children:[/*#__PURE__*/e.jsx(s.default,{children:/*#__PURE__*/e.jsxs("div",{children:[/*#__PURE__*/e.jsx(o.CircleBorder,{color:"var(--privy-color-error)"}),p.icon]})}),/*#__PURE__*/e.jsxs(m,{children:[/*#__PURE__*/e.jsx("h3",{children:p.title}),"string"==typeof p.detail?/*#__PURE__*/e.jsx("p",{children:p.detail}):p.detail]}),/*#__PURE__*/e.jsx(n.PrimaryButton,{color:"var(--privy-color-error)",onClick:()=>{r instanceof l.PrivyError&&(r.privyErrorCode===l.PrivyErrorCode.INVALID_CAPTCHA&&y(),r.privyErrorCode===l.PrivyErrorCode.ALLOWLIST_REJECTED&&j.allowlistConfig.errorCtaLink)?window.location.href=j.allowlistConfig.errorCtaLink:t?.()},children:p.ctaText})]})]})};let f=/*#__PURE__*/t.styled.div.withConfig({displayName:"ConnectContainer",componentId:"sc-f1b9e2cb-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;gap:24px;width:100%;padding-bottom:16px;"]),m=/*#__PURE__*/t.styled.div.withConfig({displayName:"GappedContainer",componentId:"sc-f1b9e2cb-1"})(["display:flex;flex-direction:column;gap:8px;"]),x=/*#__PURE__*/t.styled.a.withConfig({displayName:"Link",componentId:"sc-f1b9e2cb-2"})(["color:var(--privy-color-accent) !important;font-weight:600;"]);exports.ErrorScreen=()=>{let{navigate:r,navigateBack:i,data:t,lastScreen:n,currentScreen:o}=d.usePrivyModal(),a=t?.errorModalData?.previousScreen||(n===o?void 0:n);/*#__PURE__*/return e.jsx(p,{error:t?.errorModalData?.error||Error(),backFn:()=>a?r(a,!1):i(),onClick:()=>r(a||y.ModalScreen.LANDING,!1)})},exports.ErrorScreenView=p;

"use strict";var e=require("react/jsx-runtime"),r=require("react"),n=require("react-device-detect"),s=require("styled-components"),o=require("../components/Button.js"),i=require("../components/Layouts.js"),t=require("../components/ModalFooter.js"),c=require("../components/ModalHeader.js"),a=require("../connectors/errors.js"),l=require("../constants.js"),u=require("../hooks/internal-context.js"),j=require("../hooks/modal-context.js"),q=require("../lib/external-wallets/displayHelpers.js"),d=require("../svg/browser-extension-wallet-icon.js"),h=require("./ConnectionStatusScreen.js");require("../components/Loader.js"),require("../configuration/context.js"),require("../config.js"),require("../configuration/defaultClientConfig.js"),require("../configuration/login-methods.js"),require("../configuration/wallets.js"),require("../connectors/chains/index.js"),require("../connectors/chains/arbitrum.js"),require("../connectors/chains/arbitrumSepolia.js"),require("../connectors/chains/avalanche.js"),require("../connectors/chains/avalancheFuji.js"),require("../connectors/chains/base.js"),require("../connectors/chains/baseSepolia.js"),require("../connectors/chains/berachainArtio.js"),require("../connectors/chains/celo.js"),require("../connectors/chains/celoAlfajores.js"),require("../connectors/chains/filecoin.js"),require("../connectors/chains/filecoinCalibration.js"),require("../connectors/chains/garnetHolesky.js"),require("../connectors/chains/holesky.js"),require("../connectors/chains/linea.js"),require("../connectors/chains/lineaTestnet.js"),require("../connectors/chains/lukso.js"),require("../connectors/chains/mainnet.js"),require("../connectors/chains/optimism.js"),require("../connectors/chains/optimismSepolia.js"),require("../connectors/chains/polygon.js"),require("../connectors/chains/polygonAmoy.js"),require("../connectors/chains/redstone.js"),require("../connectors/chains/sepolia.js"),require("../connectors/chains/zora.js"),require("../connectors/chains/zoraSepolia.js"),require("../connectors/chains/zoraTestnet.js"),require("../connectors/chains/utils.js"),require("../lib/solana/index.js"),require("../theme.js"),require("tinycolor2"),require("../lib/cybr53.js"),require("../svg/protected-by-privy.js"),require("@heroicons/react/24/outline/ArrowLeftIcon"),require("@heroicons/react/24/outline/ArrowRightIcon"),require("@heroicons/react/24/outline/QuestionMarkCircleIcon"),require("@heroicons/react/24/outline/XMarkIcon"),require("../hooks/index.js"),require("@privy-io/js-sdk-core"),require("../errors.js"),require("ofetch"),require("../components/PrefetchedImage.js"),require("./index.js"),require("../svg/backpack.js"),require("../svg/brave-browser-icon.js"),require("../svg/bybit.js"),require("../svg/coinbase-wallet.js"),require("../svg/cryptocom.js"),require("../svg/metamask.js"),require("../svg/okx-wallet.js"),require("../svg/phantom.js"),require("../svg/rabby.js"),require("../svg/rainbow.js"),require("../svg/safe.js"),require("../svg/solflare.js"),require("../svg/uniswap.js"),require("../svg/universal-profile.js"),require("../svg/wallet-connect.js"),require("../svg/zerion.js"),require("../auth-flows/siwe.js"),require("../effect.js"),require("../lib/siwe.js"),require("../auth-flows/siws.js"),require("../lib/siws.js"),require("../connectors/is-wallet-installed.js"),require("../connectors/get-legacy-injected-providers.js"),require("../connectors/userAlreadyHasConnectedCoinbaseWallet.js"),require("viem"),require("../connectors/walletconnect-v2.js"),require("@walletconnect/ethereum-provider"),require("../utils/index.js"),require("../utils/eth/getPublicClient.js"),require("../connectors/ethereum/index.js"),require("viem/utils"),require("../storage.js"),require("../connectors/areWalletArraysEqual.js"),require("../connectors/isBaseConnectedEthereumWallet.js"),require("../connectors/base.js"),require("eventemitter3"),require("../connectors/getRpcTimeout.js"),require("../connectors/privyProxyProvider.js"),require("../connectors/walletconnect-registry.js"),require("../hook-utils/useInterval.js"),require("../hooks/captcha-context.js"),require("../hooks/privy-context.js"),require("../lib/useHasTabbedAway.js"),require("../lib/user/shouldProceedtoEmbeddedWalletCreationFlow.js"),require("../lib/user/shouldCreateEmbeddedEthWallet.js"),require("../client/user.js"),require("../lib/user/shouldCreateEmbeddedSolWallet.js");let g=/*#__PURE__*/s.styled.div.withConfig({displayName:"ConnectContainer",componentId:"sc-1346f57-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;gap:24px;width:100%;"]);exports.ConnectOnlyStatusScreen=()=>{let s,{navigateBack:p,navigate:m,lastScreen:w,currentScreen:y,data:v,setModalData:b}=j.usePrivyModal(),{walletConnectionStatus:f,closePrivyModal:x}=u.usePrivyInternal(),[C,S]=r.useState(void 0),[k,E]=r.useState(0),T="connected"===f?.status,_="switching_to_supported_chain"===f?.status;r.useEffect((()=>{if(T){let e;if(v?.externalConnectWallet?.onCompleteNavigateTo){let r=v.externalConnectWallet.onCompleteNavigateTo,n=f.connectedWallet?.address;e=setTimeout((()=>{v.funding&&b({...v,funding:{...v.funding,connectedWalletAddress:n}}),m(r({walletChainType:f.connector?.chainType}))}),l.DEFAULT_SUCCESS_SCREEN_DURATION_MS)}else e=setTimeout(x,l.DEFAULT_SUCCESS_SCREEN_DURATION_MS);return()=>clearTimeout(e)}}),[T]);r.useEffect((()=>{f?.connectError&&(e=>{S(h.getErrorDetails(e))})(f?.connectError)}),[f]);let A=f?.connector?.connectorType||"injected",M=f?.connector?.walletClientType||"unknown",W=q.WALLET_UI_MAP[M]?.displayName||f?.connector?.walletBranding.name||"Browser Extension",I=q.WALLET_UI_MAP[M]?.logo||f?.connector?.walletBranding.icon||(r=>/*#__PURE__*/e.jsx(d.BrowserExtensionWallet,{...r})),P="Browser Extension"===W?W.toLowerCase():W;s=T?`Successfully connected with ${P}`:C?C.message:_?"Switching networks":`Waiting for ${P}`;let L="Don’t see your wallet? Check your other browser windows.";return T?L="You’re good to go!":k>=2&&C?L="Unable to connect wallet":C?L=C.detail:_?L="Switch your wallet to the requested network.":"metamask"===M&&n.isMobile?L="Click to continue to open and connect MetaMask.":"metamask"===M?L="For the best experience, connect only one wallet at a time.":"wallet_connect_v2"===A?L="Open your mobile wallet app to continue":"coinbase_wallet"===A&&(L="Open the Coinbase app on your phone to continue."),/*#__PURE__*/e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(c.ModalHeader,{backFn:y===w?void 0:p}),/*#__PURE__*/e.jsxs(g,{children:[/*#__PURE__*/e.jsx(h.WalletLoading,{walletLogo:I,success:T,fail:!!C}),/*#__PURE__*/e.jsxs(i.FixedGappedContainer,{children:[/*#__PURE__*/e.jsx("h3",{children:s}),/*#__PURE__*/e.jsx("p",{children:L})]}),C==a.ConnectorErrors.ERROR_USER_EXISTS?/*#__PURE__*/e.jsx(o.PrimaryButton,{onClick:p,children:"Use a different wallet"}):!T&&C?.retryable&&k<2?/*#__PURE__*/e.jsx(o.PrimaryButton,{onClick:()=>{E(k+1),S(void 0),f?.connectRetry()},disabled:!T&&(!C?.retryable||k>=2),children:"Retry"}):!T&&C&&k>=2?/*#__PURE__*/e.jsx(o.PrimaryButton,{onClick:p,children:"Use a different wallet"}):null]}),/*#__PURE__*/e.jsx(t.ModalFooter,{})]})};

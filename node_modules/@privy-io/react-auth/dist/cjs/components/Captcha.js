"use strict";var e=require("react/jsx-runtime"),r=require("@marsidev/react-turnstile"),t=require("react"),s=require("../hooks/captcha-context.js");require("../hooks/index.js"),require("../errors.js"),require("ofetch"),require("../utils/index.js"),require("../connectors/get-legacy-injected-providers.js"),require("../connectors/is-wallet-installed.js"),require("../utils/eth/getPublicClient.js"),require("viem");exports.Captcha=i=>{let{enabled:n,siteKey:o,appId:c,setError:u,setToken:a,setExecuting:p,ref:d}=s.useCaptcha(),[,l]=t.useMemo((()=>o?.split("t:")||[]),[o]);if(t.useEffect((()=>d.current?.remove),[]),!n)return null;if(!l)throw Error("Unsupported captcha site key");/*#__PURE__*/return e.jsx("div",{className:"hidden h-0 w-0",children:/*#__PURE__*/e.jsx(r.Turnstile,{...i,ref:d,siteKey:l,options:{action:c,size:"invisible",...i.delayedExecution?{appearance:"execute",execution:"execute"}:{appearance:"always",execution:"render"}},onUnsupported:()=>{i.onUnsupported?.(),console.warn("Browser does not support Turnstile.")},onError:()=>{i.onError?.(),u("Captcha failed"),p(!1)},onSuccess:e=>{i.onSuccess?.(e),a(e),p(!1)},onExpire:()=>{i.onExpire?.();try{d.current?.reset(),u(void 0),a(void 0)}catch(e){u("expired_and_failed_reset")}}})})};

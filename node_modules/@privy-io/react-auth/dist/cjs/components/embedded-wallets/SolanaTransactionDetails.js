"use strict";var e=require("react/jsx-runtime"),n=require("@heroicons/react/24/outline/ChevronDownIcon"),r=require("react"),i=require("styled-components"),s=require("../ModalHeader.js"),o=require("../primitives/InteractiveLabel.js"),t=require("../ui/layout/Row.js"),c=require("../ui/typography/LabelSm.js"),a=require("../ui/typography/Value.js"),l=require("./PriceDisplay.js"),u=require("./WalletLink.js");function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("@heroicons/react/24/outline/ArrowLeftIcon"),require("@heroicons/react/24/outline/ArrowRightIcon"),require("@heroicons/react/24/outline/QuestionMarkCircleIcon"),require("@heroicons/react/24/outline/XMarkIcon"),require("../../configuration/context.js"),require("../../config.js"),require("../../configuration/defaultClientConfig.js"),require("../../constants.js"),require("../../configuration/login-methods.js"),require("../../configuration/wallets.js"),require("../../connectors/chains/index.js"),require("../../connectors/chains/arbitrum.js"),require("../../connectors/chains/arbitrumSepolia.js"),require("../../connectors/chains/avalanche.js"),require("../../connectors/chains/avalancheFuji.js"),require("../../connectors/chains/base.js"),require("../../connectors/chains/baseSepolia.js"),require("../../connectors/chains/berachainArtio.js"),require("../../connectors/chains/celo.js"),require("../../connectors/chains/celoAlfajores.js"),require("../../connectors/chains/filecoin.js"),require("../../connectors/chains/filecoinCalibration.js"),require("../../connectors/chains/garnetHolesky.js"),require("../../connectors/chains/holesky.js"),require("../../connectors/chains/linea.js"),require("../../connectors/chains/lineaTestnet.js"),require("../../connectors/chains/lukso.js"),require("../../connectors/chains/mainnet.js"),require("../../connectors/chains/optimism.js"),require("../../connectors/chains/optimismSepolia.js"),require("../../connectors/chains/polygon.js"),require("../../connectors/chains/polygonAmoy.js"),require("../../connectors/chains/redstone.js"),require("../../connectors/chains/sepolia.js"),require("../../connectors/chains/zora.js"),require("../../connectors/chains/zoraSepolia.js"),require("../../connectors/chains/zoraTestnet.js"),require("../../connectors/chains/utils.js"),require("../../lib/solana/index.js"),require("../../theme.js"),require("tinycolor2"),require("../../lib/cybr53.js"),require("../../hooks/internal-context.js"),require("../../hooks/index.js"),require("../ui/animation/LoadingSkeleton.js"),require("viem"),require("../../lib/ethers.js"),require("../../utils/index.js"),require("../../connectors/get-legacy-injected-providers.js"),require("../../connectors/is-wallet-installed.js"),require("../../errors.js"),require("ofetch"),require("../../utils/eth/getPublicClient.js"),require("../../lib/solana/transaction.js"),require("../../utils/buffer/readBigInt64LE.js"),require("../../lib/attempt.js");var j=/*#__PURE__*/d(n);function h({instruction:n,rpcEndpoint:r,solPrice:i,hideAmount:s}){return n?/*#__PURE__*/e.jsxs(t.Rows,{children:[!s&&!!n.amount&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Amount"}),/*#__PURE__*/e.jsx(a.Value,{children:/*#__PURE__*/e.jsx(l.SolanaPriceDisplay,{quantities:[n.amount],tokenPrice:i,tokenSymbol:n.token?.symbol??"SOL",tokenDecimals:n.token?.decimals??9})})]}),n.to&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"To"}),/*#__PURE__*/e.jsx(a.Value,{children:/*#__PURE__*/e.jsx(u.WalletLink,{walletAddress:n.to,rpcEndpoint:r,network:"solana"})})]}),n.tokenAccount&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Token account"}),/*#__PURE__*/e.jsx(a.Value,{children:/*#__PURE__*/e.jsx(u.WalletLink,{walletAddress:n.tokenAccount,rpcEndpoint:r,network:"solana"})})]}),n.tokenAccountOwner&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Token account owner"}),/*#__PURE__*/e.jsx(a.Value,{children:/*#__PURE__*/e.jsx(u.WalletLink,{walletAddress:n.tokenAccountOwner,rpcEndpoint:r,network:"solana"})})]}),n.from&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"From"}),/*#__PURE__*/e.jsx(a.Value,{children:/*#__PURE__*/e.jsx(u.WalletLink,{walletAddress:n.from,rpcEndpoint:r,network:"solana"})})]})]}):null}let x=/*#__PURE__*/i.styled.div.withConfig({displayName:"InstructionsBox",componentId:"sc-5a140027-0"})(["display:flex;flex-direction:column;width:100%;overflow:hidden;&&{border:1px solid;border-color:var(--privy-color-foreground-4);border-radius:var(--privy-border-radius-md);}"]),q=/*#__PURE__*/i.styled.header.withConfig({displayName:"InstructionsBoxHeader",componentId:"sc-5a140027-1"})(["display:flex;justify-content:space-between;align-items:center;padding:12px;background-color:var(--privy-color-background-2);"]),p=/*#__PURE__*/i.styled.h4.withConfig({displayName:"HeaderTitle",componentId:"sc-5a140027-2"})(["font-size:14px;font-weight:500;line-height:19.6px;"]),m=/*#__PURE__*/i.styled.div.withConfig({displayName:"InstructionsBoxContent",componentId:"sc-5a140027-3"})(["padding:12px;"]),f=/*#__PURE__*/i.styled.div.withConfig({displayName:"NavigationButtonsConatiner",componentId:"sc-5a140027-4"})(["display:flex;gap:8px;align-items:center;"]);exports.SolanaTransactionDetails=({instructions:n,fees:i,transactionInfo:u,solPrice:d,rpcEndpoint:g})=>{let y=n.reduce(((e,{amount:n,token:r})=>n&&"SOL"===r?.symbol?e+n:e),0n),[w,b]=r.useState(0),[k,S]=r.useState(!1),v=n[w];/*#__PURE__*/return e.jsxs(t.Rows,{children:[/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Total"}),/*#__PURE__*/e.jsx(a.Value,{children:/*#__PURE__*/e.jsx(l.SolanaPriceDisplay,{quantities:[y,i],tokenPrice:d})})]}),u&&u.action&&/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Action"}),/*#__PURE__*/e.jsx(a.Value,{children:u.action})]}),/*#__PURE__*/e.jsxs(t.Row,{children:[/*#__PURE__*/e.jsx(c.LabelSm,{children:"Fees"}),/*#__PURE__*/e.jsx(a.Value,{children:/*#__PURE__*/e.jsx(l.SolanaPriceDisplay,{quantities:[i||0n],tokenPrice:d})})]}),n.length>1?/*#__PURE__*/e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(t.Row,{children:/*#__PURE__*/e.jsxs(o.InteractiveLabel,{onClick:()=>S((e=>!e)),children:[/*#__PURE__*/e.jsx("span",{children:"Details"}),/*#__PURE__*/e.jsx(j.default,{height:"16px",width:"16px",strokeWidth:"2",style:{transition:"all 300ms",transform:k?"rotate(180deg)":void 0}})]})}),k&&/*#__PURE__*/e.jsx(t.Row,{children:/*#__PURE__*/e.jsxs(x,{children:[/*#__PURE__*/e.jsxs(q,{children:[/*#__PURE__*/e.jsxs(p,{children:[w+1," of ",n.length," instructions"]}),/*#__PURE__*/e.jsxs(f,{children:[w>0&&/*#__PURE__*/e.jsx(s.BackButton,{backFn:()=>b((e=>e-1))}),w<n.length-1&&/*#__PURE__*/e.jsx(s.NextButton,{nextFn:()=>b((e=>e+1))})]})]}),/*#__PURE__*/e.jsx(m,{children:/*#__PURE__*/e.jsx(h,{instruction:v,rpcEndpoint:g,solPrice:d})})]})})]}):/*#__PURE__*/e.jsx(h,{instruction:v,rpcEndpoint:g,solPrice:d,hideAmount:!0})]})};

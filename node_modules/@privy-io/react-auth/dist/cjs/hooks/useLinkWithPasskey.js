"use strict";var e=require("react"),r=require("../errors.js"),t=require("./internal-context.js");require("ofetch"),require("./index.js");exports.useLinkWithPasskey=s=>{let{initLinkWithPasskey:i,linkWithPasskey:a,passkeyAuthState:o,setPasskeyAuthState:n}=t.usePrivyInternal();return{linkWithPasskey:e.useCallback((async()=>{try{await i();let e=await a();if(!e)throw Error("Error, user not found");let r=e.linkedAccounts.filter((e=>"passkey"===e.type)).sort(((e,r)=>r.latestVerifiedAt.getTime()-e.latestVerifiedAt.getTime()))[0];s?.onSuccess?.({user:e,linkMethod:"passkey",linkedAccount:r})}catch(e){throw n({status:"error",error:e}),s?.onError?.(e.privyErrorCode||r.PrivyErrorCode.UNKNOWN_AUTH_ERROR,{linkMethod:"passkey"}),e}}),[a]),state:o}};

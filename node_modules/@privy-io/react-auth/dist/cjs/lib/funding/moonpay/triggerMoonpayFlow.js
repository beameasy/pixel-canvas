"use strict";var e=require("@privy-io/js-sdk-core"),n=require("../../../screens/index.js"),r=require("../../popup/triggerPopup.js"),o=require("./index.js");require("ofetch"),require("react"),require("../../../constants.js"),require("../../../hooks/internal-context.js"),require("../../../hooks/index.js"),require("../../../hooks/modal-context.js"),require("react/jsx-runtime"),require("../../../components/PrefetchedImage.js"),require("../../../configuration/context.js"),require("../../../config.js"),require("../../../configuration/defaultClientConfig.js"),require("../../../configuration/login-methods.js"),require("../../../configuration/wallets.js"),require("../../../connectors/chains/index.js"),require("../../../connectors/chains/arbitrum.js"),require("../../../connectors/chains/arbitrumSepolia.js"),require("../../../connectors/chains/avalanche.js"),require("../../../connectors/chains/avalancheFuji.js"),require("../../../connectors/chains/base.js"),require("../../../connectors/chains/baseSepolia.js"),require("../../../connectors/chains/berachainArtio.js"),require("../../../connectors/chains/celo.js"),require("../../../connectors/chains/celoAlfajores.js"),require("../../../connectors/chains/filecoin.js"),require("../../../connectors/chains/filecoinCalibration.js"),require("../../../connectors/chains/garnetHolesky.js"),require("../../../connectors/chains/holesky.js"),require("../../../connectors/chains/linea.js"),require("../../../connectors/chains/lineaTestnet.js"),require("../../../connectors/chains/lukso.js"),require("../../../connectors/chains/mainnet.js"),require("../../../connectors/chains/optimism.js"),require("../../../connectors/chains/optimismSepolia.js"),require("../../../connectors/chains/polygon.js"),require("../../../connectors/chains/polygonAmoy.js"),require("../../../connectors/chains/redstone.js"),require("../../../connectors/chains/sepolia.js"),require("../../../connectors/chains/zora.js"),require("../../../connectors/chains/zoraSepolia.js"),require("../../../connectors/chains/zoraTestnet.js"),require("../../../connectors/chains/utils.js"),require("../../solana/index.js"),require("../../../theme.js"),require("tinycolor2"),require("../../cybr53.js"),require("../analytics.js");exports.triggerMoonpayFlow=async(i,s,c,a,t,u,h,l)=>{let q=r.triggerPopup();if(!q)throw Error("Unable to initialize flow");let j="ethereum"===s.chainType?s.moonpayConfigOverride?.currencyCode??e.chainToMoonpayCurrency(s.chain.id,a):"SOL",{signedUrl:d,externalTransactionId:p}=await i.signMoonpayOnRampUrl({address:s.address,useSandbox:c.fundingMethodConfig.moonpay.useSandbox??!1,config:{uiConfig:{accentColor:c.appearance.palette.accent,theme:c.appearance.palette.colorScheme},...s.moonpayConfigOverride,paymentMethod:l??c.fundingMethodConfig.moonpay.paymentMethod,currencyCode:j,quoteCurrencyAmount:s.moonpayConfigOverride?.quoteCurrencyAmount??o.amountToMoonpayAmount(s.amount)}});i.createAnalyticsEvent({eventName:"sdk_fiat_on_ramp_started",payload:{provider:"moonpay",value:s.amount,chainType:s.chainType,chainId:"ethereum"===s.chainType?s.chain.id:s.cluster.name}}),q.location=d;let m={...h?.funding,showAlternateFundingMethod:!0};s.usingDefaultFundingMethod&&(m.usingDefaultFundingMethod=!1),t({moonpayStatus:{},funding:m}),u(n.ModalScreen.MOONPAY_STATUS_SCREEN),setTimeout((()=>{t({moonpayStatus:{externalTransactionId:p},funding:m})}),8e3)};

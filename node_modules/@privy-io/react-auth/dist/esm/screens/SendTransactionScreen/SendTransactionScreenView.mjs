import{jsxs as o,Fragment as n,jsx as e}from"react/jsx-runtime";import{ChevronDownIcon as r,ArrowRightIcon as i}from"@heroicons/react/24/outline";import{styled as t}from"styled-components";import{PrimaryButton as s}from"../../components/Button.mjs";import{BlobbyFooter as c}from"../../components/ModalFooter.mjs";import{ModalHeader as a}from"../../components/ModalHeader.mjs";import{InteractiveLabel as m}from"../../components/primitives/InteractiveLabel.mjs";import{Rows as l,Row as d}from"../../components/ui/layout/Row.mjs";import{ErrorMessage as p}from"../../components/ui/typography/ErrorMessage.mjs";import{LabelSm as h,LabelSmPrimary as u}from"../../components/ui/typography/LabelSm.mjs";import{Subtitle as g}from"../../components/ui/typography/Subtitle.mjs";import{Title as j}from"../../components/ui/typography/Title.mjs";import{Value as f}from"../../components/ui/typography/Value.mjs";import{Address as y}from"../../components/ui/wallet/Address.mjs";import{WalletInfoCard as b}from"../../components/ui/wallet/WalletInfoCard.mjs";import{Grow as k}from"../LandingScreen/styles.mjs";import x from"./TokenDescription.mjs";import{TransactionDetail as I}from"./TransactionDetail.mjs";import{TransactionValidation as T}from"./TransactionValidation.mjs";import{useTransactionDetails as w}from"./useTransactionDetails.mjs";import"../../components/Loader.mjs";import"../../configuration/context.mjs";import"react";import"../../config.mjs";import"../../configuration/defaultClientConfig.mjs";import"../../constants.mjs";import"../../configuration/login-methods.mjs";import"../../configuration/wallets.mjs";import"../../connectors/chains/index.mjs";import"../../connectors/chains/arbitrum.mjs";import"../../connectors/chains/arbitrumSepolia.mjs";import"../../connectors/chains/avalanche.mjs";import"../../connectors/chains/avalancheFuji.mjs";import"../../connectors/chains/base.mjs";import"../../connectors/chains/baseSepolia.mjs";import"../../connectors/chains/berachainArtio.mjs";import"../../connectors/chains/celo.mjs";import"../../connectors/chains/celoAlfajores.mjs";import"../../connectors/chains/filecoin.mjs";import"../../connectors/chains/filecoinCalibration.mjs";import"../../connectors/chains/garnetHolesky.mjs";import"../../connectors/chains/holesky.mjs";import"../../connectors/chains/linea.mjs";import"../../connectors/chains/lineaTestnet.mjs";import"../../connectors/chains/lukso.mjs";import"../../connectors/chains/mainnet.mjs";import"../../connectors/chains/optimism.mjs";import"../../connectors/chains/optimismSepolia.mjs";import"../../connectors/chains/polygon.mjs";import"../../connectors/chains/polygonAmoy.mjs";import"../../connectors/chains/redstone.mjs";import"../../connectors/chains/sepolia.mjs";import"../../connectors/chains/zora.mjs";import"../../connectors/chains/zoraSepolia.mjs";import"../../connectors/chains/zoraTestnet.mjs";import"../../connectors/chains/utils.mjs";import"../../lib/solana/index.mjs";import"../../theme.mjs";import"tinycolor2";import"../../lib/cybr53.mjs";import"../../svg/protected-by-privy.mjs";import"@heroicons/react/24/outline/ArrowLeftIcon";import"@heroicons/react/24/outline/ArrowRightIcon";import"@heroicons/react/24/outline/QuestionMarkCircleIcon";import"@heroicons/react/24/outline/XMarkIcon";import"../../hooks/internal-context.mjs";import"../../hooks/index.mjs";import"../../components/ui/animation/LoadingSkeleton.mjs";import"@heroicons/react/24/outline/CheckIcon";import"@heroicons/react/24/outline/Square2StackIcon";import"../../utils/index.mjs";import"../../connectors/get-legacy-injected-providers.mjs";import"../../connectors/is-wallet-installed.mjs";import"../../errors.mjs";import"ofetch";import"../../utils/eth/getPublicClient.mjs";import"viem";import"../../components/ui/chips/Chip.mjs";import"../../components/ui/layout/Column.mjs";import"../../components/ui/typography/LabelXs.mjs";import"../../components/ui/wallet/shared.mjs";import"@heroicons/react/24/outline/ExclamationTriangleIcon";import"../../components/Checkbox.mjs";import"../../components/Pill.mjs";const C=({transactionIndex:o,maxIndex:n})=>"number"!=typeof o||0===n?"":` (${o+1} / ${n+1})`,v=({img:t,submitError:b,prepareError:v,onClose:S,action:N,title:E,subtitle:D,txValue:$,to:P,tokenAddress:F,network:V,missingFunds:U,fee:R,from:W,cta:z,disabled:B,chain:Y,isSubmitting:q,isPreparing:H,isTokenPriceLoading:O,isTokenContractInfoLoading:X,isSponsored:Q,symbol:G,balance:J,onClick:K,transactionDetails:Z,transactionIndex:_,maxIndex:oo,onBack:no,chainName:eo,validation:ro,hasScanDetails:io,setIsScanDetailsOpen:to,preventMaliciousTransaction:so,setPreventMaliciousTransaction:co,tokensSent:ao,tokensReceived:mo,isScanning:lo})=>{let{showTransactionDetails:po,setShowTransactionDetails:ho,hasMoreDetails:uo,isErc20Ish:go}=w(Z),jo=go&&X||H||O||lo;/*#__PURE__*/return o(n,{children:[/*#__PURE__*/e(a,{onClose:S,backFn:no}),t&&/*#__PURE__*/e(A,{children:t}),/*#__PURE__*/o(j,{style:{marginTop:t?"1.5rem":0},children:[E,/*#__PURE__*/e(C,{maxIndex:oo,transactionIndex:_})]}),/*#__PURE__*/e(g,{children:D}),/*#__PURE__*/o(l,{style:{marginTop:"2rem"},children:[(!!ao[0]||jo)&&/*#__PURE__*/o(d,{children:[mo.length>0?/*#__PURE__*/e(h,{children:"Send"}):/*#__PURE__*/e(h,{children:"Amount"}),/*#__PURE__*/e(x,{iconUrl:ao[0]?.iconUrl,value:ao[0]?.value,usdValue:ao[0]?.usdValue,symbol:ao[0]?.symbol,nftName:ao[0]?.nftName,$isLoading:jo})]}),mo.length>0&&/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"Receive"}),/*#__PURE__*/e("div",{className:"flex flex-col",children:mo.map(((o,n)=>/*#__PURE__*/e(x,{iconUrl:o.iconUrl,value:o.value,usdValue:o.usdValue,symbol:o.symbol,nftName:o.nftName},n)))})]}),Z&&"spender"in Z&&Z?.spender?/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"Spender"}),/*#__PURE__*/e(f,{children:/*#__PURE__*/e(y,{address:Z.spender,url:Y?.blockExplorers?.default?.url,showCopyIcon:!1})})]}):null,P&&/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"To"}),/*#__PURE__*/e(f,{children:/*#__PURE__*/e(y,{address:P,url:Y?.blockExplorers?.default?.url,showCopyIcon:!1})})]}),F&&/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"Token address"}),/*#__PURE__*/e(f,{children:/*#__PURE__*/e(y,{address:F,url:Y?.blockExplorers?.default?.url,showCopyIcon:!1})})]}),/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"Network"}),/*#__PURE__*/e(f,{children:V})]}),/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"Estimated fee"}),/*#__PURE__*/e(f,{$isLoading:H||O||void 0===Q,children:Q?"Sponsored":R})]}),uo&&!io&&/*#__PURE__*/o(n,{children:[/*#__PURE__*/e(d,{className:"cursor-pointer",onClick:()=>ho(!po),children:/*#__PURE__*/o(u,{className:"flex items-center gap-x-1",children:["Details"," ",/*#__PURE__*/e(r,{style:{width:"0.75rem",marginLeft:"0.25rem",transform:po?"rotate(180deg)":void 0}})]})}),po&&Z&&/*#__PURE__*/e(I,{action:N,chain:Y,transactionDetails:Z,isTokenContractInfoLoading:X,symbol:G})]}),io&&/*#__PURE__*/e(d,{children:/*#__PURE__*/o(m,{onClick:()=>to(!0),children:[/*#__PURE__*/e("span",{className:"text-color-primary",children:"Details"}),/*#__PURE__*/e(i,{height:"14px",width:"14px",strokeWidth:"2"})]})})]}),/*#__PURE__*/e(k,{}),b?/*#__PURE__*/e(p,{style:{marginTop:"2rem"},children:b.message}):v?/*#__PURE__*/e(p,{style:{marginTop:"2rem"},children:v.shortMessage??M}):null,/*#__PURE__*/e(T,{variant:ro,preventMaliciousTransaction:so,setPreventMaliciousTransaction:co}),/*#__PURE__*/e(L,{$useSmallMargins:!(!v&&!b&&"warn"!==ro&&"error"!==ro),title:Number($)>0?void 0:!1!==Q?"Your wallet":void 0,address:W,balance:J,isLoading:H||O,errMsg:H||v||b||!U?void 0:`Add funds on ${Y?.name??eo} to complete transaction.`}),/*#__PURE__*/e(s,{style:{marginTop:"1rem"},loading:q,disabled:B||H,onClick:K,children:z}),/*#__PURE__*/e(c,{})]})},S=({img:r,title:i,subtitle:t,cta:m,network:u,blockExplorerUrl:b,transactionIndex:x,maxIndex:I,isMissingFunds:T,submitError:w,parseError:v,total:S,amount:N,fee:E,balance:D,from:$,to:P,tokenAddress:F,tokenAccount:V,tokenAccountOwner:U,programAddress:R,transactingWalletAddress:W,disabled:z,isSubmitting:B,isPreparing:Y,isTokenPriceLoading:q,onClick:H,onClose:O,onBack:X})=>{let Q=Y||q;/*#__PURE__*/return o(n,{children:[/*#__PURE__*/e(a,{onClose:O,backFn:X}),r&&/*#__PURE__*/e(A,{children:r}),/*#__PURE__*/o(j,{style:{marginTop:r?"1.5rem":0},children:[i,/*#__PURE__*/e(C,{maxIndex:I,transactionIndex:x})]}),/*#__PURE__*/e(g,{children:t}),/*#__PURE__*/o(l,{style:{marginTop:"2rem"},children:[(S||Q)&&/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"Total"}),/*#__PURE__*/e(f,{$isLoading:Q,children:S})]}),$&&$!==W&&/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"From"}),/*#__PURE__*/e(f,{children:/*#__PURE__*/e(y,{address:$,url:b,showCopyIcon:!1})})]}),P&&/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"To"}),/*#__PURE__*/e(f,{children:/*#__PURE__*/e(y,{address:P,url:b,showCopyIcon:!1})})]}),U&&/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"Token account owner"}),/*#__PURE__*/e(f,{children:/*#__PURE__*/e(y,{address:U,url:b,showCopyIcon:!1})})]}),V&&/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"Token account"}),/*#__PURE__*/e(f,{children:/*#__PURE__*/e(y,{address:V,url:b,showCopyIcon:!1})})]}),F&&/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"Token address"}),/*#__PURE__*/e(f,{children:/*#__PURE__*/e(y,{address:F,url:b,showCopyIcon:!1})})]}),R&&/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"Program address"}),/*#__PURE__*/e(f,{children:/*#__PURE__*/e(y,{address:R,url:b,showCopyIcon:!1})})]}),u&&/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"Network"}),/*#__PURE__*/e(f,{children:u})]}),(N||Q)&&/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"Amount"}),/*#__PURE__*/e(f,{children:/*#__PURE__*/e(f,{$isLoading:Q,children:N})})]}),(E||Q)&&/*#__PURE__*/o(d,{children:[/*#__PURE__*/e(h,{children:"Estimated fee"}),/*#__PURE__*/e(f,{$isLoading:Q,children:E})]})]}),/*#__PURE__*/e(k,{}),w?/*#__PURE__*/e(p,{style:{marginTop:"2rem"},children:w.message}):v?/*#__PURE__*/e(p,{style:{marginTop:"2rem"},children:M}):null,/*#__PURE__*/e(L,{$useSmallMargins:!(!v&&!w),title:"Your wallet",address:W,balance:D,isLoading:Y||q,errMsg:Y||v||w||!T?void 0:"Add funds on Solana to complete transaction."}),/*#__PURE__*/e(s,{style:{marginTop:"1rem"},loading:B,disabled:z||Y,onClick:H,children:m}),/*#__PURE__*/e(c,{})]})};let L=/*#__PURE__*/t(b).withConfig({displayName:"StyledWalletInfoCard",componentId:"sc-52cd61f8-0"})(["",""],(o=>o.$useSmallMargins?"margin-top: 0.5rem;":"margin-top: 2rem;")),M="There was an error preparing your transaction. Your transaction request will likely fail.",A=/*#__PURE__*/t.div.withConfig({displayName:"ImageContainer",componentId:"sc-52cd61f8-1"})(["display:flex;width:100%;justify-content:center;max-height:40px;> img{object-fit:contain;border-radius:var(--privy-border-radius-sm);}"]);export{S as SendSolanaTransactionScreenView,v as SendTransactionScreenView,C as TransactionIndex};

import{jsxs as o,Fragment as n,jsx as e}from"react/jsx-runtime";import{ChevronDownIcon as r,ArrowRightIcon as i}from"@heroicons/react/24/outline";import{styled as t}from"styled-components";import{PrimaryButton as s,EmbeddedButton as c}from"../../components/Button.mjs";import{BlobbyFooter as a}from"../../components/ModalFooter.mjs";import{ModalHeader as l}from"../../components/ModalHeader.mjs";import{InteractiveLabel as m}from"../../components/primitives/InteractiveLabel.mjs";import{Rows as d,Row as p}from"../../components/ui/layout/Row.mjs";import{ErrorMessage as h}from"../../components/ui/typography/ErrorMessage.mjs";import{LabelSm as u,LabelSmPrimary as g}from"../../components/ui/typography/LabelSm.mjs";import{Subtitle as j}from"../../components/ui/typography/Subtitle.mjs";import{Title as f}from"../../components/ui/typography/Title.mjs";import{Value as y}from"../../components/ui/typography/Value.mjs";import{Address as b}from"../../components/ui/wallet/Address.mjs";import{WalletInfoCard as k}from"../../components/ui/wallet/WalletInfoCard.mjs";import{Grow as x}from"../LandingScreen/styles.mjs";import C from"./TokenDescription.mjs";import{TransactionDetail as T}from"./TransactionDetail.mjs";import{TransactionValidation as w}from"./TransactionValidation.mjs";import{useTransactionDetails as I}from"./useTransactionDetails.mjs";import"../../components/Loader.mjs";import"../../configuration/context.mjs";import"react";import"../../config.mjs";import"../../configuration/defaultClientConfig.mjs";import"../../constants.mjs";import"../../configuration/login-methods.mjs";import"../../configuration/wallets.mjs";import"../../connectors/chains/index.mjs";import"../../connectors/chains/arbitrum.mjs";import"../../connectors/chains/arbitrumSepolia.mjs";import"../../connectors/chains/avalanche.mjs";import"../../connectors/chains/avalancheFuji.mjs";import"../../connectors/chains/base.mjs";import"../../connectors/chains/baseSepolia.mjs";import"../../connectors/chains/berachainArtio.mjs";import"../../connectors/chains/celo.mjs";import"../../connectors/chains/celoAlfajores.mjs";import"../../connectors/chains/filecoin.mjs";import"../../connectors/chains/filecoinCalibration.mjs";import"../../connectors/chains/garnetHolesky.mjs";import"../../connectors/chains/holesky.mjs";import"../../connectors/chains/linea.mjs";import"../../connectors/chains/lineaTestnet.mjs";import"../../connectors/chains/lukso.mjs";import"../../connectors/chains/mainnet.mjs";import"../../connectors/chains/optimism.mjs";import"../../connectors/chains/optimismSepolia.mjs";import"../../connectors/chains/polygon.mjs";import"../../connectors/chains/polygonAmoy.mjs";import"../../connectors/chains/redstone.mjs";import"../../connectors/chains/sepolia.mjs";import"../../connectors/chains/zora.mjs";import"../../connectors/chains/zoraSepolia.mjs";import"../../connectors/chains/zoraTestnet.mjs";import"../../connectors/chains/utils.mjs";import"../../lib/solana/index.mjs";import"../../theme.mjs";import"tinycolor2";import"../../lib/cybr53.mjs";import"../../svg/protected-by-privy.mjs";import"@heroicons/react/24/outline/ArrowLeftIcon";import"@heroicons/react/24/outline/ArrowRightIcon";import"@heroicons/react/24/outline/QuestionMarkCircleIcon";import"@heroicons/react/24/outline/XMarkIcon";import"../../hooks/internal-context.mjs";import"../../hooks/index.mjs";import"../../components/ui/animation/LoadingSkeleton.mjs";import"@heroicons/react/24/outline/CheckIcon";import"@heroicons/react/24/outline/Square2StackIcon";import"../../utils/index.mjs";import"../../connectors/get-legacy-injected-providers.mjs";import"../../connectors/is-wallet-installed.mjs";import"../../errors.mjs";import"ofetch";import"../../utils/eth/getPublicClient.mjs";import"viem";import"../../components/ui/chips/Chip.mjs";import"../../components/ui/layout/Column.mjs";import"../../components/ui/typography/LabelXs.mjs";import"../../components/ui/wallet/shared.mjs";import"@heroicons/react/24/outline/ExclamationTriangleIcon";import"../../components/Checkbox.mjs";import"../../components/Pill.mjs";const v=({transactionIndex:o,maxIndex:n})=>"number"!=typeof o||0===n?"":` (${o+1} / ${n+1})`,S=({img:t,submitError:k,prepareError:S,onClose:L,action:E,title:D,subtitle:$,txValue:P,to:F,tokenAddress:V,network:U,missingFunds:R,fee:W,from:z,cta:B,disabled:Y,chain:q,isSubmitting:H,isPreparing:O,isTokenPriceLoading:X,isTokenContractInfoLoading:Q,isSponsored:G,symbol:J,balance:K,onClick:Z,transactionDetails:_,transactionIndex:oo,maxIndex:no,onBack:eo,chainName:ro,validation:io,hasScanDetails:to,setIsScanDetailsOpen:so,preventMaliciousTransaction:co,setPreventMaliciousTransaction:ao,tokensSent:lo,tokensReceived:mo,isScanning:po,isCancellable:ho})=>{let{showTransactionDetails:uo,setShowTransactionDetails:go,hasMoreDetails:jo,isErc20Ish:fo}=I(_),yo=fo&&Q||O||X||po;/*#__PURE__*/return o(n,{children:[/*#__PURE__*/e(l,{onClose:L,backFn:eo}),t&&/*#__PURE__*/e(N,{children:t}),/*#__PURE__*/o(f,{style:{marginTop:t?"1.5rem":0},children:[D,/*#__PURE__*/e(v,{maxIndex:no,transactionIndex:oo})]}),/*#__PURE__*/e(j,{children:$}),/*#__PURE__*/o(d,{style:{marginTop:"2rem"},children:[(!!lo[0]||yo)&&/*#__PURE__*/o(p,{children:[mo.length>0?/*#__PURE__*/e(u,{children:"Send"}):/*#__PURE__*/e(u,{children:"Amount"}),/*#__PURE__*/e(C,{iconUrl:lo[0]?.iconUrl,value:lo[0]?.value,usdValue:lo[0]?.usdValue,symbol:lo[0]?.symbol,nftName:lo[0]?.nftName,$isLoading:yo})]}),mo.length>0&&/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"Receive"}),/*#__PURE__*/e("div",{className:"flex flex-col",children:mo.map(((o,n)=>/*#__PURE__*/e(C,{iconUrl:o.iconUrl,value:o.value,usdValue:o.usdValue,symbol:o.symbol,nftName:o.nftName},n)))})]}),_&&"spender"in _&&_?.spender?/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"Spender"}),/*#__PURE__*/e(y,{children:/*#__PURE__*/e(b,{address:_.spender,url:q?.blockExplorers?.default?.url,showCopyIcon:!1})})]}):null,F&&/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"To"}),/*#__PURE__*/e(y,{children:/*#__PURE__*/e(b,{address:F,url:q?.blockExplorers?.default?.url,showCopyIcon:!1})})]}),V&&/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"Token address"}),/*#__PURE__*/e(y,{children:/*#__PURE__*/e(b,{address:V,url:q?.blockExplorers?.default?.url,showCopyIcon:!1})})]}),/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"Network"}),/*#__PURE__*/e(y,{children:U})]}),/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"Estimated fee"}),/*#__PURE__*/e(y,{$isLoading:O||X||void 0===G,children:G?"Sponsored":W})]}),jo&&!to&&/*#__PURE__*/o(n,{children:[/*#__PURE__*/e(p,{className:"cursor-pointer",onClick:()=>go(!uo),children:/*#__PURE__*/o(g,{className:"flex items-center gap-x-1",children:["Details"," ",/*#__PURE__*/e(r,{style:{width:"0.75rem",marginLeft:"0.25rem",transform:uo?"rotate(180deg)":void 0}})]})}),uo&&_&&/*#__PURE__*/e(T,{action:E,chain:q,transactionDetails:_,isTokenContractInfoLoading:Q,symbol:J})]}),to&&/*#__PURE__*/e(p,{children:/*#__PURE__*/o(m,{onClick:()=>so(!0),children:[/*#__PURE__*/e("span",{className:"text-color-primary",children:"Details"}),/*#__PURE__*/e(i,{height:"14px",width:"14px",strokeWidth:"2"})]})})]}),/*#__PURE__*/e(x,{}),k?/*#__PURE__*/e(h,{style:{marginTop:"2rem"},children:k.message}):S?/*#__PURE__*/e(h,{style:{marginTop:"2rem"},children:S.shortMessage??A}):null,/*#__PURE__*/e(w,{variant:io,preventMaliciousTransaction:co,setPreventMaliciousTransaction:ao}),/*#__PURE__*/e(M,{$useSmallMargins:!(!S&&!k&&"warn"!==io&&"error"!==io),title:Number(P)>0?void 0:!1!==G?"Your wallet":void 0,address:z,balance:K,isLoading:O||X,errMsg:O||S||k||!R?void 0:`Add funds on ${q?.name??ro} to complete transaction.`}),/*#__PURE__*/e(s,{style:{marginTop:"1rem"},loading:H,disabled:Y||O,onClick:Z,children:B}),ho&&/*#__PURE__*/e(c,{style:{marginTop:"1rem"},onClick:L,isSubmitting:!1,children:"Not now"}),/*#__PURE__*/e(a,{})]})},L=({img:r,title:i,subtitle:t,cta:c,network:m,blockExplorerUrl:g,transactionIndex:k,maxIndex:C,isMissingFunds:T,submitError:w,parseError:I,total:S,amount:L,fee:E,balance:D,from:$,to:P,tokenAddress:F,tokenAccount:V,tokenAccountOwner:U,programAddress:R,transactingWalletAddress:W,disabled:z,isSubmitting:B,isPreparing:Y,isTokenPriceLoading:q,onClick:H,onClose:O,onBack:X})=>{let Q=Y||q;/*#__PURE__*/return o(n,{children:[/*#__PURE__*/e(l,{onClose:O,backFn:X}),r&&/*#__PURE__*/e(N,{children:r}),/*#__PURE__*/o(f,{style:{marginTop:r?"1.5rem":0},children:[i,/*#__PURE__*/e(v,{maxIndex:C,transactionIndex:k})]}),/*#__PURE__*/e(j,{children:t}),/*#__PURE__*/o(d,{style:{marginTop:"2rem"},children:[(S||Q)&&/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"Total"}),/*#__PURE__*/e(y,{$isLoading:Q,children:S})]}),$&&$!==W&&/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"From"}),/*#__PURE__*/e(y,{children:/*#__PURE__*/e(b,{address:$,url:g,showCopyIcon:!1})})]}),P&&/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"To"}),/*#__PURE__*/e(y,{children:/*#__PURE__*/e(b,{address:P,url:g,showCopyIcon:!1})})]}),U&&/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"Token account owner"}),/*#__PURE__*/e(y,{children:/*#__PURE__*/e(b,{address:U,url:g,showCopyIcon:!1})})]}),V&&/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"Token account"}),/*#__PURE__*/e(y,{children:/*#__PURE__*/e(b,{address:V,url:g,showCopyIcon:!1})})]}),F&&/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"Token address"}),/*#__PURE__*/e(y,{children:/*#__PURE__*/e(b,{address:F,url:g,showCopyIcon:!1})})]}),R&&/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"Program address"}),/*#__PURE__*/e(y,{children:/*#__PURE__*/e(b,{address:R,url:g,showCopyIcon:!1})})]}),m&&/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"Network"}),/*#__PURE__*/e(y,{children:m})]}),(L||Q)&&/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"Amount"}),/*#__PURE__*/e(y,{children:/*#__PURE__*/e(y,{$isLoading:Q,children:L})})]}),(E||Q)&&/*#__PURE__*/o(p,{children:[/*#__PURE__*/e(u,{children:"Estimated fee"}),/*#__PURE__*/e(y,{$isLoading:Q,children:E})]})]}),/*#__PURE__*/e(x,{}),w?/*#__PURE__*/e(h,{style:{marginTop:"2rem"},children:w.message}):I?/*#__PURE__*/e(h,{style:{marginTop:"2rem"},children:A}):null,/*#__PURE__*/e(M,{$useSmallMargins:!(!I&&!w),title:"Your wallet",address:W,balance:D,isLoading:Y||q,errMsg:Y||I||w||!T?void 0:"Add funds on Solana to complete transaction."}),/*#__PURE__*/e(s,{style:{marginTop:"1rem"},loading:B,disabled:z||Y,onClick:H,children:c}),/*#__PURE__*/e(a,{})]})};let M=/*#__PURE__*/t(k).withConfig({displayName:"StyledWalletInfoCard",componentId:"sc-4bd3bb7d-0"})(["",""],(o=>o.$useSmallMargins?"margin-top: 0.5rem;":"margin-top: 2rem;")),A="There was an error preparing your transaction. Your transaction request will likely fail.",N=/*#__PURE__*/t.div.withConfig({displayName:"ImageContainer",componentId:"sc-4bd3bb7d-1"})(["display:flex;width:100%;justify-content:center;max-height:40px;> img{object-fit:contain;border-radius:var(--privy-border-radius-sm);}"]);export{L as SendSolanaTransactionScreenView,S as SendTransactionScreenView,v as TransactionIndex};
